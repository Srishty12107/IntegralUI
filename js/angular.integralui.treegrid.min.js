/*
  filename: angular.integralui.treegrid.min.js
  version : 3.2.117
  Copyright © 2014-2017 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUITreeGridService",["$rootScope",function(c){var d=null;return{addColumn:function(n,g){c.$broadcast(n+"-add-column",g)},clearColumns:function(n){c.$broadcast(n+"-clear-columns")},insertColumnAt:function(n,g,d){c.$broadcast(n+"-insert-column-at",g,d)},insertColumnBefore:function(n,g,d){c.$broadcast(n+"-insert-column-before",g,d)},insertColumnAfter:function(n,g,d){c.$broadcast(n+"-insert-column-after",g,d)},removeColumn:function(n,g){c.$broadcast(n+"-remove-column",
g)},removeColumnAt:function(n,g){c.$broadcast(n+"-remove-column-at",g)},addRow:function(n,g,d){c.$broadcast(n+"-add-row",g,d)},clearRows:function(n,g){c.$broadcast(n+"-clear-rows",g)},insertRowAt:function(n,g,d,l){c.$broadcast(n+"-insert-row-at",g,d,l)},insertRowBefore:function(n,g,d){c.$broadcast(n+"-insert-row-before",g,d)},insertRowAfter:function(n,g,d){c.$broadcast(n+"-insert-row-after",g,d)},removeRow:function(n,g){c.$broadcast(n+"-remove-row",g)},removeRowAt:function(n,g,d){c.$broadcast(n+"-remove-row-at",
g,d)},exportToJSON:function(n,g,d,l,ca){c.$broadcast(n+"-export-json",g,d,l,ca);n=this.getTempData();this.clearTempData();return n?n:""},loadData:function(n,g,d,l,ca){c.$broadcast(n+"-load-data",g,d,l,ca)},openEditor:function(n,g){c.$broadcast(n+"-open-editor",g)},closeEditor:function(n,g){c.$broadcast(n+"-close-editor",g)},collapse:function(n,g){c.$broadcast(n+"-collapse",g)},expand:function(n,g){c.$broadcast(n+"-expand",g)},expandColIndex:function(n,g){c.$broadcast(n+"-expand-col-index",g)},toggle:function(n,
g){c.$broadcast(n+"-toggle",g)},filter:function(n,g,d){c.$broadcast(n+"-filter",g,d)},findRowById:function(n,g){c.$broadcast(n+"-find-row-by-id",g);var d=this.getTempData();this.clearTempData();return d?d:null},findRowByPath:function(n,g,d){c.$broadcast(n+"-find-row-by-path",g,d);n=this.getTempData();this.clearTempData();return n?n:null},findRowByText:function(n,g){c.$broadcast(n+"-find-row-by-text",g);var d=this.getTempData();this.clearTempData();return d?d:null},getCellAt:function(n,g){c.$broadcast(n+
"-get-cell-at",g);var d=this.getTempData();this.clearTempData();return d?d:null},getRowAt:function(n,g){c.$broadcast(n+"-get-row-at",g);var d=this.getTempData();this.clearTempData();return d?d:null},getRowParent:function(n,g){c.$broadcast(n+"-get-row-parent",g);var d=this.getTempData();this.clearTempData();return d?d:null},focus:function(n,d){c.$broadcast(n+"-focus",d)},clearTempData:function(){d=null},ensureVisible:function(n,d){c.$broadcast(n+"-ensure-visible",d)},getTempData:function(){return d},
getRowLevel:function(n,d){c.$broadcast(n+"-get-row-level",d);var g=this.getTempData();this.clearTempData();return g?g:0},getFlatList:function(n,d){c.$broadcast(n+"-get-flat-list",d);var g=this.getTempData();this.clearTempData();return g?g:[]},getFullPath:function(n,d){c.$broadcast(n+"-get-full-path",d);var g=this.getTempData();this.clearTempData();return g?g:""},getHoverColumn:function(d,g){c.$broadcast(d+"-get-hover-column",g);var n=this.getTempData();this.clearTempData();return n?n:null},getList:function(d,
g){c.$broadcast(d+"-get-list",g);var n=this.getTempData();this.clearTempData();return n?n:[]},setTempData:function(c){d=c},topRow:function(d,g){if(g)c.$broadcast(d+"-set-top-row",g);else return c.$broadcast(d+"-get-top-row"),g=this.getTempData(),this.clearTempData(),g?g:null},beginLoad:function(d,g,z){c.$broadcast(d+"-begin-load",g,z)},endLoad:function(d,g){c.$broadcast(d+"-end-load",g)},moveColumn:function(d,g,z){c.$broadcast(d+"-move-column",g,z)},moveRow:function(d,g,z,l,ca){c.$broadcast(d+"-move-row",
g,z,l,ca)},getScrollPos:function(d){c.$broadcast(d+"-get-scroll-pos");d=this.getTempData();this.clearTempData();return d?d:{x:0,y:0}},getMaxScrollPos:function(d){c.$broadcast(d+"-get-max-scroll-pos");d=this.getTempData();this.clearTempData();return d?d:{x:0,y:0}},setScrollPos:function(d,g){c.$broadcast(d+"-set-scroll-pos",g)},scrollTo:function(d,g,z){c.$broadcast(d+"-scroll-to",g,z)},currentPage:function(d,g){if(void 0!=g&&null!=g)c.$broadcast(d+"-set-current-page",g);else{c.$broadcast(d+"-get-current-page");
var n=this.getTempData();this.clearTempData();return void 0!=n?n:-1}},firstPage:function(d){c.$broadcast(d+"-first-page")},lastPage:function(d){c.$broadcast(d+"-last-page")},nextPage:function(d){c.$broadcast(d+"-next-page")},prevPage:function(d){c.$broadcast(d+"-prev-page")},clearSelection:function(d){c.$broadcast(d+"-clear-selection")},selectedColumn:function(d,g){if(g)c.$broadcast(d+"-set-selected-column",g);else{c.$broadcast(d+"-get-selected-column");var n=this.getTempData();this.clearTempData();
return n?n:null}},selectedRow:function(d,g){if(g)c.$broadcast(d+"-set-selected-row",g);else{c.$broadcast(d+"-get-selected-row");var n=this.getTempData();this.clearTempData();return n?n:null}},selectedRows:function(d,g){if(g)c.$broadcast(d+"-set-selected-rows",g);else{c.$broadcast(d+"-get-selected-rows");var n=this.getTempData();this.clearTempData();return n?n:null}},sort:function(d,g,z,l){c.$broadcast(d+"-sort",g,z,l)},refresh:function(d,g,z){c.$broadcast(d+"-refresh",g,z)},resumeLayout:function(d,
g){c.$broadcast(d+"-resume-layout",g)},suspendLayout:function(d,g){c.$broadcast(d+"-suspend-layout",g)},updateLayout:function(d,g){c.$broadcast(d+"-update-layout",g)},updateView:function(d){c.$broadcast(d+"-update-view")}}}]).controller("IntegralUITreeGridController",["$scope","$element","$timeout","$window","$interval","IntegralUIInternalService","IntegralUIDataService","IntegralUITreeGridService","IntegralUIDragDrop","IntegralUIFilter",function(c,d,n,g,z,l,ca,m,q,pc){var a=this;this.suppressProcess=
!1;this.hoverCell=this.hoverRow=this.hoverColumn=null;a.defaultCheckBoxStyle={general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",unchecked:"iui-checkbox-unchecked"}};a.defaultStyle={general:"iui-treegrid",column:{general:{content:"iui-treegrid-column-cell-content",disabled:"iui-treegrid-column-disabled",normal:"iui-treegrid-column",hovered:"iui-treegrid-column-hovered",selected:"iui-treegrid-column-selected"},
header:{content:"iui-treegrid-column-header-cell-content",disabled:"iui-treegrid-column-header-disabled",normal:"iui-treegrid-column-header",hovered:"iui-treegrid-column-header-hovered",selected:"iui-treegrid-column-header-selected"},body:{content:"iui-treegrid-column-body-cell-content",disabled:"iui-treegrid-column-body-disabled",normal:"iui-treegrid-column-body",hovered:"iui-treegrid-column-body-hovered",selected:"iui-treegrid-column-body-selected"},footer:{content:"iui-treegrid-column-footer-cell-content",
disabled:"iui-treegrid-column-footer-disabled",normal:"iui-treegrid-column-footer",hovered:"iui-treegrid-column-footer-hovered",selected:"iui-treegrid-column-footer-selected"}},row:{general:{disabled:"iui-treegrid-row-disabled",focused:"iui-treegrid-row-focused",normal:"iui-treegrid-row",hovered:"iui-treegrid-row-hovered",selected:"iui-treegrid-row-selected"},checkBox:{general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",
unchecked:"iui-checkbox-unchecked"}},expandBox:{general:"iui-treegrid-expand-box",animated:"iui-treegrid-expand-box-load",expanded:"iui-treegrid-expand-box-open",collapsed:"iui-treegrid-expand-box-close"},cell:{content:"iui-treegrid-row-cell-content",general:"iui-treegrid-row-cell",disabled:"iui-treegrid-row-cell-disabled",focused:"iui-treegrid-row-cell-focused",normal:"iui-treegrid-row-cell",hovered:"iui-treegrid-row-cell-hovered",selected:"iui-treegrid-row-cell-selected"},fixed:{disabled:"iui-treegrid-row-fixed-disabled",
normal:"iui-treegrid-row-fixed",hovered:"iui-treegrid-row-fixed-hovered"}},cell:{content:"iui-treegrid-row-cell-content",general:"iui-treegrid-row-cell",disabled:"iui-treegrid-row-cell-disabled",focused:"iui-treegrid-row-cell-focused",normal:"iui-treegrid-row-cell",hovered:"iui-treegrid-row-cell-hovered",selected:"iui-treegrid-row-cell-selected"}};this.updatePaging=function(b){a.options.paging=b?{enabled:l.isFieldAvailable(b.enabled,!1),showControlPanel:l.isFieldAvailable(b.showControlPanel,!0),pageSize:l.isFieldAvailable(b.pageSize,
100)}:{enabled:!1,showControlPanel:!0,pageSize:100}};this.updateOptions=function(b){b?(a.options={allowAnimation:l.isFieldAvailable(b.allowAnimation,!0),allowCellFocus:l.isFieldAvailable(b.allowCellFocus,!0),allowColumnReorder:l.isFieldAvailable(b.allowColumnReorder,!1),allowDrag:l.isFieldAvailable(b.allowDrag,!1),allowDrop:l.isFieldAvailable(b.allowDrop,!0),allowFilter:l.isFieldAvailable(b.allowFilter,!1),allowFocus:l.isFieldAvailable(b.allowFocus,!0),animationSpeed:200,autoExpand:l.isFieldAvailable(b.autoExpand,
!0),autoSize:l.isFieldAvailable(b.autoSize,!1),autoUpdate:l.isFieldAvailable(b.autoUpdate,!0),controlStyle:a.defaultStyle,displayMode:l.isFieldAvailable(b.displayMode,"normal"),editorSettings:{activate:"click"},enabled:l.isFieldAvailable(b.enabled,!0),expandColIndex:l.isFieldAvailable(b.expandColIndex,void 0!=a.options.expandColIndex?a.options.expandColIndex:0),fillSpace:l.isFieldAvailable(b.fillSpace,!1),gridLines:l.isFieldAvailable(b.gridLines,"both"),hoverSelection:l.isFieldAvailable(b.hoverSelection,
!1),indent:l.isFieldAvailable(b.indent,15),labelEdit:l.isFieldAvailable(b.labelEdit,!1),loadRows:[],maxRows:l.isFieldAvailable(b.maxRows,0),mouseWheelSpeed:l.isFieldAvailable(b.mouseWheelSpeed,"normal"),pathSeparator:l.isFieldAvailable(b.pathSeparator,"\\"),rowHeight:l.isFieldAvailable(b.rowHeight,-1),rtl:l.isFieldAvailable(b.rtl,!1),selectedColumn:l.isFieldAvailable(b.selectedColumn,a.options.selectedColumn?a.options.selectedColumn:null),selectedIndex:-1,selectedRow:l.isFieldAvailable(b.selectedRow,
a.options.selectedRow?a.options.selectedRow:null),selectedRows:a.options.selectedRows?a.options.selectedRows:[],selectionMode:l.isFieldAvailable(b.selectionMode,"one"),showExpandBoxes:l.isFieldAvailable(b.showExpandBoxes,!0),showFooter:l.isFieldAvailable(b.showFooter,!0),showHeader:l.isFieldAvailable(b.showHeader,!0),showIcons:l.isFieldAvailable(b.showIcons,!0),sorting:l.isFieldAvailable(b.sorting,"none")},a.updatePaging(b.paging),a.updateDataFields(b.dataFields),a.updateControlStyle(b.controlStyle)):
(a.options={allowAnimation:!0,allowCellFocus:!0,allowColumnReorder:!1,allowDrag:!1,allowDrop:!0,allowFilter:!1,allowFocus:!0,animationSpeed:200,autoExpand:!0,autoSize:!1,autoUpdate:!0,controlStyle:a.defaultStyle,displayMode:"normal",editorSettings:{activate:"click"},enabled:!0,expandColIndex:0,fillSpace:!1,gridLines:"both",hoverSelection:!1,indent:15,labelEdit:!1,loadRows:[],maxRows:0,mouseWheelSpeed:"normal",pathSeparator:"\\",rowHeight:-1,rtl:!1,selectedColumn:null,selectedIndex:-1,selectedRow:null,
selectedRows:[],selectionMode:"one",showExpandBoxes:!0,showFooter:!0,showHeader:!0,showIcons:!0,sorting:"none"},a.updatePaging(),a.updateDataFields())};a.options={};this.updateColumnFields=function(b){a.options.columnFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFilter:b.allowFilter?b.allowFilter:"allowFilter",cellTemplateUrl:b.cellTemplateUrl?b.cellTemplateUrl:"cellTemplateUrl",comparer:b.comparer?b.comparer:"comparer",contentAlignment:b.contentAlignment?
b.contentAlignment:"contentAlignment",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",editorType:b.editorType?b.editorType:"editorType",editorSettings:b.editorSettings?b.editorSettings:"editorSettings",editorTemplate:b.editorTemplate?b.editorTemplate:"editorTemplate",filterParams:b.filterParams?b.filterParams:"filterParams",filterTemplate:b.filterTemplate?b.filterTemplate:"filterTemplate",fixed:b.fixed?b.fixed:"fixed",fixedWidth:b.fixedWidth?b.fixedWidth:"fixedWidth",footerAlignment:b.footerAlignment?
b.footerAlignment:"footerAlignment",footerContent:b.footerContent?b.footerContent:"footerContent",footerTemplate:b.footerTemplate?b.footerTemplate:"footerTemplate",footerTemplateModel:b.footerTemplateModel?b.footerTemplateModel:"footerTemplateModel",footerText:b.footerText?b.footerText:"footerText",footerTooltip:b.footerTooltip?b.footerTooltip:"footerTooltip",headerAlignment:b.headerAlignment?b.headerAlignment:"headerAlignment",headerContent:b.headerContent?b.headerContent:"headerContent",headerTemplate:b.headerTemplate?
b.headerTemplate:"headerTemplate",headerTemplateModel:b.headerTemplateModel?b.headerTemplateModel:"headerTemplateModel",headerText:b.headerText?b.headerText:"headerText",headerTooltip:b.headerTooltip?b.headerTooltip:"headerTooltip",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",minWidth:b.minWidth?b.minWidth:"minWidth",maxWidth:b.maxWidth?b.maxWidth:"maxWidth",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateSettings:b.templateSettings?b.templateSettings:"templateSettings",
visible:b.visible?b.visible:"visible",width:b.width?b.width:"width"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFilter:"allowFilter",cellTemplateUrl:"cellTemplateUrl",comparer:"comparer",contentAlignment:"contentAlignment",contextMenu:"contextMenu",editorType:"editorType",editorSettings:"editorSettings",editorTemplate:"editorTemplate",filterParams:"filterParams",filterTemplate:"filterTemplate",fixed:"fixed",fixedWidth:"fixedWidth",footerAlignment:"footerAlignment",footerContent:"footerContent",
footerTemplate:"footerTemplate",footerTemplateModel:"footerTemplateModel",footerText:"footerText",footerTooltip:"footerTooltip",headerAlignment:"headerAlignment",headerContent:"headerContent",headerTemplate:"headerTemplate",headerTemplateModel:"headerTemplateModel",headerText:"headerText",headerTooltip:"headerTooltip",icon:"icon",id:"id",minWidth:"minWidth",maxWidth:"maxWidth",selected:"selected",style:"style",templateSettings:"templateSettings",visible:"visible",width:"width"};a.columnsObj&&a.columnsObj.updateDataFields(a.options.columnFields)};
this.updateRowFields=function(b){a.options.rowFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFocus:b.allowFocus?b.allowFocus:"allowFocus",cells:b.cells?b.cells:"cells",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",expanded:b.expanded?b.expanded:"expanded",fixed:b.fixed?b.fixed:"fixed",hasChildren:b.hasChildren?b.hasChildren:"hasChildren",icon:b.icon?b.icon:
"icon",id:b.id?b.id:"id",objects:b.rows?b.rows:"rows",pid:b.pid?b.pid:"pid",rows:b.rows?b.rows:"rows",selected:b.selected?b.selected:"selected",statusIcon:b.statusIcon?b.statusIcon:"statusIcon",style:b.style?b.style:"style",subobjects:b.cells?b.cells:"cells",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFocus:"allowFocus",cells:"cells",content:"content",contextMenu:"contextMenu",enabled:"enabled",expanded:"expanded",fixed:"fixed",
hasChildren:"hasChildren",icon:"icon",id:"id",objects:"rows",pid:"pid",rows:"rows",selected:"selected",statusIcon:"statusIcon",style:"style",subobjects:"cells",text:"text",tooltip:"tooltip"};a.rowsObj&&a.rowsObj.updateDataFields(a.getRowFields(a.options.rowFields))};this.updateCellFields=function(b){a.options.cellFields=b?{allowEdit:b.allowEdit?b.allowEdit:"allowEdit",cid:b.cid?b.cid:"cid",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?
b.enabled:"enabled",labelEdit:b.labelEdit?b.labelEdit:"labelEdit",rid:b.rid?b.rid:"rid",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateObj:b.templateObj?b.templateObj:"templateObj",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip",value:b.value?b.value:"value"}:{allowEdit:"allowEdit",cid:"cid",content:"content",contextMenu:"contextMenu",enabled:"enabled",labelEdit:"labelEdit",rid:"rid",selected:"selected",style:"style",templateObj:"templateObj",text:"text",
tooltip:"tooltip",value:"value"}};this.updateDataFields=function(b){b?(a.updateColumnFields(b.column),a.updateRowFields(b.row),a.updateCellFields(b.cell)):(a.updateColumnFields(),a.updateRowFields(),a.updateCellFields())};a.updateOptions();c.$on(c.name+"-add-column",function(b,f){a.columnsObj.insertAt(f,-1,null,a.columnIsAdded)});c.$on(c.name+"-clear-columns",function(b){a.columnsObj.clear(null,a.columnsAreCleared)});c.$on(c.name+"-insert-column-at",function(b,f,c){a.columnsObj.insertAt(f,c,null,
a.columnIsAdded)});c.$on(c.name+"-insert-column-after",function(b,f,c){a.columnsObj.insertByRef(f,c,!0,a.columnIsAdded)});c.$on(c.name+"-insert-column-before",function(b,f,c){a.columnsObj.insertByRef(f,c,!1,a.columnIsAdded)});c.$on(c.name+"-remove-column",function(b,f){a.columnsObj.removeAt(f,-1,null,a.columnIsRemoved)});c.$on(c.name+"-remove-column-at",function(b,f){a.columnsObj.removeAt(null,f,null,a.columnIsRemoved)});this.columnsAreCleared=function(){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=
!1);a.options.selectedColumn=null;a.updateLayout()};a.columnIsAdded=function(){a.updateLayout()};a.columnIsRemoved=function(){a.updateLayout()};c.$on(c.name+"-add-row",function(b,f,c){a.rowsObj.insertAt(f,-1,c,a.rowIsAdded)});c.$on(c.name+"-clear-rows",function(b,f){a.rowsObj.clear(f,a.rowsAreCleared)});c.$on(c.name+"-insert-row-at",function(b,f,c,u){a.rowsObj.insertAt(f,c,u,a.rowIsAdded)});c.$on(c.name+"-insert-row-after",function(b,f,c){a.rowsObj.insertByRef(f,c,!0,a.rowIsAdded)});c.$on(c.name+
"-insert-row-before",function(b,f,c){a.rowsObj.insertByRef(f,c,!1,a.rowIsAdded)});c.$on(c.name+"-remove-row",function(b,f){a.rowsObj.removeAt(f,-1,null,a.rowIsRemoved)});c.$on(c.name+"-remove-row-at",function(b,f,c){a.rowsObj.removeAt(null,f,c,a.rowIsRemoved)});this.rowsAreCleared=function(b){b||(a.clearPrevSelection(),a.options.selectedRow=null,a.setScrollPos({x:0,y:0}));a.updateCurrentLayout()};this.rowIsAdded=function(){a.updateCurrentLayout()};this.rowIsRemoved=function(){a.updateCurrentLayout()};
this.objIsRemoved=function(){a.updateCurrentLayout()};a.columnList=[];a.columnFilterList=[];a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;this.updateColumnList=function(){a.columnList.length=0;a.columnFilterList.length=0;a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var b=a.columnsObj.getList();if(b)for(var f=0;f<b.length;f++){var c=b[f];c.type="column";c[a.options.columnFields.id]||(c[a.options.columnFields.id]=l.getUniqueId());if(0!=c[a.options.columnFields.visible]){var u=
c[a.options.columnFields.filterParams],u=u?pc.createTree(u.conditions,u.formula):null;a.columnFilterList.push({cid:c[a.options.columnFields.id],tree:u});a.columnList.push(c);switch(c[a.options.columnFields.fixed]){case "left":a.isThereLeftFixedColumns||(a.isThereLeftFixedColumns=!0);break;case "right":a.isThereRightFixedColumns||(a.isThereRightFixedColumns=!0)}}}};var xd=function(b){for(var f=null,c=0;c<a.columnFilterList.length;c++)if(a.columnFilterList[c].cid==b){f=a.columnFilterList[c].tree;break}return f},
E=function(b,f){if(0==a.options.allowFilter)return!0;var c=!0;if(b)for(var u,d,g,l=0;l<b[a.options.rowFields.cells].length;l++){c=!0;g=b[a.options.rowFields.cells][l];u=g[a.options.cellFields.cid];d=a.getColumnById(u);!d&&l<a.columnList.length&&(d=a.columnList[l]);if(d&&d[a.options.columnFields.filterParams]){d=d[a.options.columnFields.filterParams];var m=g[a.options.cellFields.value]?g[a.options.cellFields.value]:g[a.options.cellFields.text];d&&(c=d.callback?d.callback(m,g,b):pc.match(m,d.conditions,
d.formula,xd(u),d.caseSensitive))}if(!c)break}return c},da=a.options.indent;a.currentPageList=[];a.pageList=[];a.onlyCurrentPage=!1;a.currentList=[];a.fullIndentList=[];a.fullList=[];a.indentList=[];a.longestRow=null;a.isThereChildRows=!1;a.pageRowCount=0;a.pageNumber=0;a.currentPageNumber=1;a.currentTopList=[];a.currentBottomList=[];this.isThereVisibleChildren=function(b){var f=!1;if(b&&(b=b[a.options.rowFields.rows])&&0<b.length)for(var c=0;c<b.length;c++)if(E(b[c])&&!a.isRowFixed(b[c])){f=!0;break}return f};
var M=function(b,f,c,u){b.type="row";b[a.options.rowFields.id]||(b[a.options.rowFields.id]=l.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var t=b[a.options.rowFields.cells];if(t&&0<t.length){c=E(b,u);for(var d,g,m,n=0;n<a.columnList.length;n++){m=a.columnList[n];d=m[a.options.columnFields.id];g=m[a.options.columnFields.editorType];m=m[a.options.columnFields.editorSettings];var q=n;d&&(q=a.getCellIndexById(t,n,d));0<=q&&q<t.length&&(t[q].type="cell",t[q][a.options.cellFields.rid]=b[a.options.rowFields.id],
a.setDefaultCellValue(t[q],g,m))}}if(c)if(u)a.fullList.push(b),a.fullIndentList.push(f);else if(a.options.paging.enabled)a.onlyCurrentPage?a.currentPageList.push({row:b,indent:f}):(b[a.options.rowFields.pid]||a.pageRowCount++,a.pageRowCount>a.options.paging.pageSize&&(a.pageRowCount=1,a.pageNumber++,a.pageList.push([])),a.pageList[a.pageNumber].push({row:b,indent:f}));else switch(b[a.options.rowFields.fixed]){case "top":a.currentTopList.push(b);break;case "bottom":a.currentBottomList.push(b);break;
default:a.currentList.push(b),a.indentList.push(f)}return c},y=function(b,f,c,u){if(!b[a.options.rowFields.rows])return c=M(b,f,c,u);if((c=M(b,f,c,u))&&!a.isRowFixed(b)){var t=0,d;if(u||a.isRowExpanded(b)){var g=b[a.options.rowFields.rows];if(g){a.applySorting(g);for(var l=0;l<g.length;l++)(d=y(g[l],f+da,b[a.options.rowFields.id],u))&&t++}}u||a.isThereChildRows||!(0<t||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))||(a.isThereChildRows=
!0)}return c};this.getFullList=function(){a.fullList.length=0;a.fullIndentList.length=0;for(var b=a.rowsObj.getList(),f=0;f<b.length;f++)y(b[f],0,null,!0);return a.fullList};this.getCurrentList=function(){return a.currentList};this.updateCurrentList=function(){a.currentList.length=0;a.indentList.length=0;a.currentTopList.length=0;a.currentBottomList.length=0;da=a.options.indent;if(a.options.paging.enabled){if(1<=a.currentPageNumber&&a.currentPageNumber<=a.pageList.length)for(var b=0;b<a.pageList[a.currentPageNumber-
1].length;b++)a.currentList.push(a.pageList[a.currentPageNumber-1][b].row),a.indentList.push(a.pageList[a.currentPageNumber-1][b].indent)}else{a.isThereChildRows=!1;var f=a.rowsObj.getList();if(f)for(a.applySorting(f),b=0;b<f.length;b++)y(f[b],0,null,!1)}};this.isRowFixed=function(b){return!b||"top"!=b[a.options.rowFields.fixed]&&"bottom"!=b[a.options.rowFields.fixed]?!1:!0};this.updateCurrentPageList=function(){a.currentPageList.length=0;a.isThereChildRows=!1;a.onlyCurrentPage=!0;da=a.options.indent;
if(1<a.currentPageNumber){var b=a.pageList[a.currentPageNumber-1];if(b&&0<b.length){a.applySorting(b);for(var f=0;f<b.length;f++)y(b[f],0,null,!1)}a.pageList[a.currentPageNumber-1]=a.currentPageList}a.onlyCurrentPage=!1};this.updatePageList=function(){a.pageList.length=0;a.pageRowCount=0;a.pageNumber=0;a.isThereChildRows=!1;da=a.options.indent;var b=a.rowsObj.getList();if(b&&0<b.length){a.applySorting(b);a.pageList.push([]);for(var f=0;f<b.length;f++)y(b[f],0,null,!1);0<a.pageList.length&&0==a.pageList[a.pageList.length-
1].length&&a.pageList.splice(a.pageList.length-1,1)}};this.columnEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearColumns?c.events.clearColumns({parent:a.e.parent}):c.clearColumns(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.columnAdded?c.events.columnAdded({column:a.e.column}):c.columnAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.columnAdding?c.events.columnAdding({column:a.e.column}):c.columnAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&
c.events.columnRemoved?c.events.columnRemoved({column:a.e.column}):c.columnRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.columnRemoving?c.events.columnRemoving({column:a.e.column}):c.columnRemoving(a)}};this.rowEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearRows?c.events.clearRows({parent:a.e.parent}):c.clearRows(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.rowAdded?c.events.rowAdded({row:a.e.row}):c.rowAdded(a)},
objAdding:function(a){return angular.isDefined(c.events)&&c.events.rowAdding?c.events.rowAdding({row:a.e.row}):c.rowAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.rowRemoved?c.events.rowRemoved({row:a.e.row}):c.rowRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.rowRemoving?c.events.rowRemoving({row:a.e.row}):c.rowRemoving(a)}};this.getRowFields=function(a){return{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?
a.id:"id",pid:a.pid?a.pid:"pid",objects:a.rows?a.rows:"rows",subobjects:a.cells?a.cells:"cells",text:a.text?a.text:"text"}};a.columnsObj=new ca({objects:c.columns,events:a.columnEvents,fields:a.options.columnFields});a.rowsObj=new ca({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});c.$on(c.name+"-load-data",function(b,f,c,u,d){a.loadData(f,c,u,d)});c.$on(c.name+"-export-json",function(b,f,c,d,zb){m.setTempData(a.exportToJSON(f,c,d,zb))});this.exportToJSON=function(b,
f,c,d){var t=d,t=t?t:null,u=a.columnsObj.getList();b=JSON.stringify(u,b?b:[a.options.columnFields.allowDrag,a.options.columnFields.allowDrop,a.options.columnFields.allowFilter,a.options.columnFields.cellTemplateUrl,a.options.columnFields.contentAlignment,a.options.columnFields.contextMenu,a.options.columnFields.editorType,a.options.columnFields.editorSettings,a.options.columnFields.editorTemplate,a.options.columnFields.filterParams,a.options.columnFields.filterTemplate,a.options.columnFields.fixed,
a.options.columnFields.fixedWidth,a.options.columnFields.footerAlignment,a.options.columnFields.footerContent,a.options.columnFields.footerTemplate,a.options.columnFields.footerTooltip,a.options.columnFields.footerText,a.options.columnFields.headerAlignment,a.options.columnFields.headerContent,a.options.columnFields.headerTemplate,a.options.columnFields.headerText,a.options.columnFields.headerTooltip,a.options.columnFields.icon,a.options.columnFields.id,a.options.columnFields.selected,a.options.columnFields.style,
a.options.columnFields.templateSettings,a.options.columnFields.visible,a.options.columnFields.width],t);d=d?d:null;t=!1!==c?a.getFullList():a.rowsObj.getList();f=f?f:[a.options.rowFields.allowCellFocus,a.options.rowFields.allowDrag,a.options.rowFields.allowDrop,a.options.rowFields.allowFocus,a.options.rowFields.cells,a.options.rowFields.content,a.options.rowFields.contextMenu,a.options.rowFields.enabled,a.options.rowFields.expanded,a.options.rowFields.fixed,a.options.rowFields.hasChildren,a.options.rowFields.icon,
a.options.rowFields.id,a.options.rowFields.pid,a.options.rowFields.selected,a.options.rowFields.statusIcon,a.options.rowFields.style,a.options.rowFields.text,a.options.rowFields.tooltip,a.options.cellFields.rid];0==c&&f.push(a.options.rowFields.rows);c=JSON.stringify(t,f,d);return'[\n{ "columns": '+b+' },\n{ "rows": '+c+" }\n]"};this.loadData=function(b,f,t,d){a.suspendLayout();a.updateDataFields(t);var u=[],g=a.options.rowFields;a.rowsObj.clear(f,a.rowsAreCleared);if(b)if(!1!==d){var l=[];b.forEach(function(a,
b){var f=a[g.pid];l[f]?(l[f][g.rows]||(l[f][g.rows]=[]),l[a[g.id]]=a,l[f][g.rows].push(a)):(l[a[g.id]]=a,u.push(a))});l.length=0}else u=b;if(f)for(f[a.options.rowFields.rows]=u,b=0;b<f[a.options.rowFields.rows].length;b++)f[a.options.rowFields.rows][b][a.options.rowFields.pid]=f[a.options.rowFields.id];else if(angular.isDefined(c.rows))for(b=c.rows.length=0;b<u.length;b++)c.rows.push(u[b]);a.rowsObj=new ca({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.resumeLayout()};
this.updateData=function(){a.options.rowFields.dataSource&&(a.loadData(a.options.rowFields.dataSource),a.rowsObj=new ca({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)}))};var Va=!1;this.dragDropStatus=function(a){if(void 0!=a)Va=a;else return Va};this.getDnDSource=function(a){return{text:a.dataTransfer?a.dataTransfer.getData("text"):a.originalEvent.dataTransfer?a.originalEvent.dataTransfer.getData("text"):""}};this.getTouchData=function(a){return a.changedTouches?a.changedTouches:
a.originalEvent?a.originalEvent.changedTouches:null};var hb=angular.element('<div class="iui-drop-marker" data-element="dropmark"></div>');this.getDropMarkLine=function(){return dropMarkLine};a.getMousePos=function(a){return{x:a.pageX?a.pageX:a.originalEvent?a.originalEvent.pageX:0,y:a.pageY?a.pageY:a.originalEvent?a.originalEvent.pageY:0}};this.getCtrlName=function(){return angular.isDefined(c.name)?c.name:""};d.bind("dragenter",function(b){b.preventDefault();if(a.options.enabled){var f=q.getData();
f.source||(f.source=a.getDnDSource(b));b={event:b,sourceTree:f.sourceCtrl?f.sourceCtrl.getCtrlName():"",dragRow:f.source,targetTree:a.getCtrlName(),targetRow:f.target,mousePos:a.getMousePos(b)};a.callDragEnter(b)}});d.bind("dragover",function(b){b.preventDefault();if(a.options.enabled&&a.isDropInRange(b)){var f=!0;b.dataTransfer?f="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(f="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(f)if(b.dataTransfer?
b.dataTransfer.dropEffect=a.options.allowDrop?"move":"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect=a.options.allowDrop?"move":"none"),f=q.getData(),f.source||(f.source=a.getDnDSource(b)),q.setData({source:f.source,sourceCtrl:f.sourceCtrl,target:null,dropPos:-1}),f={event:b,sourceTree:f.sourceCtrl?f.sourceCtrl.getCtrlName():"",dragRow:f.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)},
0==a.callDragOver(f))b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark();else{f=a.getMousePos(b);b=f.y+16;var f=f.x+20,t=a.getDropMarkWindow();t.empty();t.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(c.name?c.name:"TreeGrid")+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:f});a.dropMark(!0)}}else a.dropMark(),b.dataTransfer?b.dataTransfer.dropEffect=
"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none")});d.bind("drop",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();if(a.isDropInRange(b)){var f=!0;b.dataTransfer?f="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(f="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(f&&(f=q.getData(),f.source||(f.source=a.getDnDSource(b)),f.source)){var t={event:b,sourceTree:f.sourceCtrl?f.sourceCtrl.getCtrlName():
"",dragRow:f.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)};!1!==a.callDragDrop(t)&&(a.drop(f),c.$$phase||c.$apply())}}q.clearData()}b.stopPropagation()});d.bind("dragleave",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();var f=q.getData();f.source||(f.source=a.getDnDSource(b));b={event:b,sourceTree:f.sourceCtrl?f.sourceCtrl.getCtrlName():"",dragRow:f.source,targetTree:a.getCtrlName(),targetRow:f.target,mousePos:a.getMousePos(b)};
a.callDragLeave(b)}a.cancelScrollTimer()});d.bind("dragend",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),q.getData().source||q.clearData(),a.dragDropStatus(!1))});d.bind("mouseleave",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),a.hoverColumn=null,a.hoverRow=null,a.hoverCell=null)});this.containsMousePos=function(a,f){return q.hitTest(a,f,{left:0,top:0,right:d[0].clientWidth,bottom:d[0].clientHeight})};this.isPopupActive=function(){return!1};var Wa=function(b,
f){var c=a.options.rowFields;if(!b[c.cells]){b[c.cells]=[];var d={};d[a.options.cellFields.text]=b[f.text];b[c.cells].push(d)}b[c.rows]||(b[c.rows]=[]);b[c.rows].length=0;if(b[f.items]&&0<b[f.items].length)for(d=0;d<b[f.items].length;d++)b[c.rows].push(Wa(b[f.items][d],f));return b},Xa=function(b,f){var c=!1;f.sourceCtrl&&(c=f.sourceCollection.removeAt(b,-1,null,f.sourceCtrl.objIsRemoved));c&&("item"==b.type&&(b=Wa(b,f.sourceCtrl.options.dataFields)),0===f.dropPos?a.rowsObj.insertAt(b,-1,f.target,
a.rowIsAdded):1===f.dropPos||2===f.dropPos?1===f.dropPos?a.rowsObj.insertByRef(b,f.target,!1,a.rowIsAdded):a.rowsObj.insertByRef(b,f.target,!0,a.rowIsAdded):a.rowsObj.insertAt(b,-1,null,a.rowIsAdded))};this.setDropSelection=function(b,f){var c=b;!c&&0<=f&&f<a.currentList.length&&(c=a.currentList[f]);a.clearPrevSelection(c);a.rowSelection(c)};this.drop=function(b){if(b&&b.sourceCtrl){b.sourceCtrl.suppressProcess=!0;a.allowUpdate=!1;b.sourceCtrl.allowUpdate=!1;var f=b.source,c=-1;if(Array.isArray(b.source)){0<
b.source.length&&(c=b.sourceCtrl.getObjCurrentIndex(b.source[b.source.length-1]));for(var d=[],g=0;g<b.source.length;g++){for(var l=!1,m=b.sourceCollection.getParent(b.source[g]);m;){if(b.sourceCtrl.isObjInSelList(m)){l=!0;break}m=b.sourceCollection.getParent(m)}l||d.push(b.source[g])}if(0<d.length)if(f=d[d.length-1],g=b.sourceCtrl.getObjCurrentIndex(d[0]),l=b.sourceCtrl.getObjCurrentIndex(f),g<=l)for(g=0;g<d.length;g++)Xa(d[g],b);else for(g=d.length-1;0<=g;g--)Xa(d[g],b)}else c=b.sourceCtrl.getObjCurrentIndex(b.source),
Xa(b.source,b);b.sourceCtrl!==a?(a.allowUpdate=!0,b.sourceCtrl.allowUpdate=!0,a.updateCurrentLayout(),b.sourceCtrl.updateCurrentLayout()):(a.allowUpdate=!0,a.updateCurrentLayout());a.updateAutoLayout();b.sourceCtrl.multiSelection(!1);var q=n(function(){b.sourceCtrl!==a&&b.sourceCtrl.setDropSelection(null,c);a.setDropSelection(f);a.updateFocus(a.getObjCurrentIndex(f),0);n.cancel(q)},1);b.sourceCtrl.suppressProcess=!1}};this.isDragAllowed=function(b){return a.options.allowDrag?b&&(b[a.options.rowFields.allowDrag]||
void 0===b[a.options.rowFields.allowDrag])?!0:!1:!1};this.isChildOf=function(b,f){var c=!1;if(b&&f){var d=f[a.options.rowFields.rows];if(d&&0<d.length)for(var g=0;g<d.length;g++){if(l.isEqual(b[a.options.rowFields.id],d[g][a.options.rowFields.id])){c=!0;break}else c=a.isChildOf(b,d[g]);if(c)break}}return c};this.isParentOf=function(b,f){var c=a.rowsObj.getParent(f);return b&&f&&c&&l.isEqual(b[a.options.rowFields.id],c[a.options.rowFields.id])?!0:!1};this.isDropAllowed=function(b,f,c){var t=a.options.allowDrop;
if(t&&b&&f&&(t=a.isRowFixed(f)||!f[a.options.rowFields.allowDrop]&&void 0!==f[a.options.rowFields.allowDrop]?!1:!0))if(Array.isArray(b))for(var d=0;d<b.length;d++){if(l.isEqual(b[d][a.options.rowFields.id],f[a.options.rowFields.id])||0===c&&a.isParentOf(f,b[d])||a.isChildOf(f,b[d])){t=!1;break}if(!t)break}else if(l.isEqual(b[a.options.rowFields.id],f[a.options.rowFields.id])||0===c&&a.isParentOf(f,b)||a.isChildOf(f,b))t=!1;return t};this.getDropMarkWindow=function(){for(var a=hb,f=angular.element(document.body).children(),
c=0;c<f.length;c++){var d=angular.element(f[c]);if(d[0].attributes&&d[0].attributes["data-element"]&&"dropmark"===d[0].attributes["data-element"].value){a=d;break}}return a};this.dropMark=function(b,f){f||(f=a.getDropMarkWindow());if(f){var c="none";this.options.allowDrop&&(c=b?"block":"none");angular.element(f).css("display",c)}};this.updateDropMarkElem=function(a,f){a&&f&&(a.css("top",f.top+"px"),a.css("left",f.left+"px"),a.css("width",f.width+"px"))};c.$on(c.name+"-open-editor",function(b,f){a.openEditor(f)});
c.$on(c.name+"-close-editor",function(b,f){a.closeEditor(f)});this.updateEditorSettings=function(b){a.options.editorSettings=b?{activate:l.isFieldAvailable(b.activate,"click")}:{activate:"click"}};this.allowEvents=!0;this.callAfterCollapse=function(a){angular.isDefined(c.events)&&c.events.afterCollapse&&c.events.afterCollapse({row:a});c.afterCollapse({e:{row:a}})};this.callAfterExpand=function(a){angular.isDefined(c.events)&&c.events.afterExpand&&c.events.afterExpand({row:a});c.afterExpand({e:{row:a}})};
this.callAfterEdit=function(a){angular.isDefined(c.events)&&c.events.afterEdit&&c.events.afterEdit({cell:a});c.afterEdit({e:{cell:a}})};this.callAfterLabelEdit=function(a){angular.isDefined(c.events)&&c.events.afterLabelEdit&&c.events.afterLabelEdit({cell:a});c.afterLabelEdit({e:{cell:a}})};this.callAfterSelect=function(a){angular.isDefined(c.events)&&c.events.afterSelect?c.events.afterSelect({object:a}):c.afterSelect({e:{object:a}});angular.isDefined(c.events)&&c.events.selectionChanged?c.events.selectionChanged({object:a}):
c.selectionChanged({e:{object:a}})};this.callBeforeCollapse=function(a){return angular.isDefined(c.events)&&c.events.beforeCollapse?c.events.beforeCollapse({row:a}):c.beforeCollapse({e:{row:a}})};this.callBeforeExpand=function(a){return angular.isDefined(c.events)&&c.events.beforeExpand?c.events.beforeExpand({row:a}):c.beforeExpand({e:{row:a}})};this.callBeforeEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeEdit?c.events.beforeEdit({cell:a}):c.beforeEdit({e:{cell:a}})};this.callBeforeLabelEdit=
function(a){return angular.isDefined(c.events)&&c.events.beforeLabelEdit?c.events.beforeLabelEdit({cell:a}):c.beforeLabelEdit({e:{cell:a}})};this.callCellValueChanging=function(b,f,d){var t=!0;a.allowEvents&&(t=angular.isDefined(c.events)&&c.events.cellvalueChanging?c.events.cellvalueChanging({row:b,cell:f,value:d}):c.cellvalueChanging({e:{row:b,cell:f,value:d}}));return t};this.callCellValueChanged=function(b,f,d){a.allowEvents&&(angular.isDefined(c.events)&&c.events.cellvalueChanged?c.events.cellvalueChanged({row:b,
cell:f,value:d}):c.cellvalueChanged({e:{row:b,cell:f,value:d}}))};this.callChange=function(){angular.isDefined(c.events)&&c.events.change?c.events.change():c.change()};this.callColumnClick=function(a,f){angular.isDefined(c.events)&&c.events.columnClick&&c.events.columnClick({column:a,mousePos:f});c.columnClick({e:{column:a,mousePos:f}})};this.callColumnDblClick=function(a,f){angular.isDefined(c.events)&&c.events.columnDblclick&&c.events.columnDblclick({column:a,mousePos:f});c.columnDblclick({e:{column:a,
mousePos:f}})};this.callColumnHover=function(a){angular.isDefined(c.events)&&c.events.columnHover&&c.events.columnHover({column:a});c.columnHover({e:{column:a}})};this.callColumnPosChanging=function(a,f){return angular.isDefined(c.events)&&c.events.columnPoschanging?c.events.columnPoschanging({sourceColumn:a,targetColumn:f}):c.columnPoschanging({e:{sourceColumn:a,targetColumn:f}})};this.callColumnPosChanged=function(a,f){angular.isDefined(c.events)&&c.events.columnPoschanged&&c.events.columnPoschanged({sourceColumn:a,
targetColumn:f});c.columnPoschanged({e:{sourceColumn:a,targetColumn:f}})};this.callColumnRightClick=function(a,f){angular.isDefined(c.events)&&c.events.columnRightclick&&c.events.columnRightclick({column:a,mousePos:f});c.columnRightclick({e:{column:a,mousePos:f}})};this.callColumnSizeChanged=function(a,f){angular.isDefined(c.events)&&c.events.columnSizechanged&&c.events.columnSizechanged({column:a});c.columnSizechanged({e:{column:a}})};this.callDragEnter=function(a){angular.isDefined(c.events)&&c.events.dragEnter?
c.events.dragEnter({event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragEnter({e:{event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callDragOver=function(b){var f=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragOver?c.events.dragOver({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,
targetRow:b.targetRow,targetCell:f,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):c.dragOver({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:f,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragDrop=function(b){var f=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragDrop?c.events.dragDrop({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,
targetTree:b.targetTree,targetRow:b.targetRow,targetCell:f,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):c.dragDrop({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:f,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragLeave=function(a){angular.isDefined(c.events)&&c.events.dragLeave?c.events.dragLeave({event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,
targetRow:a.targetRow,mousePos:a.mousePos}):c.dragLeave({e:{event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callCellClick=function(a,f,d,u){angular.isDefined(c.events)&&c.events.cellClick&&c.events.cellClick({event:a,row:f,cell:d,mousePos:u});c.cellClick({e:{event:a,row:f,cell:d,mousePos:u}})};this.callCellHover=function(a,f){angular.isDefined(c.events)&&c.events.cellHover?c.events.cellHover({event:a,cell:f}):c.cellHover({e:{event:a,
cell:f}})};this.callEnabledChanged=function(a){angular.isDefined(c.events)&&c.events.enabledChanged?c.events.enabledChanged({enabled:a}):c.enabledChanged({e:{enabled:a}})};this.callRowClick=function(a,f,d){angular.isDefined(c.events)&&c.events.rowClick?c.events.rowClick({event:a,row:f,mousePos:d}):c.rowClick({e:{event:a,row:f,mousePos:d}})};this.callRowDblClick=function(a,f){return angular.isDefined(c.events)&&c.events.rowDblClick?c.events.rowDblClick({row:a,mousePos:f}):c.rowDblclick({e:{row:a,mousePos:f}})};
this.callRowHover=function(a,f){angular.isDefined(c.events)&&c.events.rowHover?c.events.rowHover({event:a,row:f}):c.rowHover({e:{event:a,row:f}})};this.callRowRightClick=function(a,f){angular.isDefined(c.events)&&c.events.rowRightClick&&c.events.rowRightClick({row:a,mousePos:f});c.rowRightclick({e:{row:a,mousePos:f}})};this.callKeyDown=function(a,f){angular.isDefined(c.events)&&c.events.keyDown?c.events.keyDown({event:a,row:f}):c.keyDown({e:{event:a,row:f}})};this.callKeyPress=function(a,f){angular.isDefined(c.events)&&
c.events.keyPress?c.events.keyPress({event:a,row:f}):c.keyPress({e:{event:a,row:f}})};this.callKeyUp=function(a,f){angular.isDefined(c.events)&&c.events.keyUp?c.events.keyUp({event:a,row:f}):c.keyUp({e:{event:a,row:f}})};this.callScrollPosChanged=function(){angular.isDefined(c.events)&&c.events.scrollPosChanged?c.events.scrollPosChanged({scrollPos:a.scrollPos}):c.scrollposChanged({e:{scrollPos:a.scrollPos}})};d.bind("click",function(b){a.options.enabled&&1===b.which&&a.callRowClick(b,null,a.getMousePos(b))});
d.bind("dblclick",function(b){b.preventDefault();a.options.enabled&&1===b.which&&a.callRowDblClick(null,a.getMousePos(b));b.stopPropagation()});d.bind("mousedown",function(b){a.options.enabled&&3===b.which&&a.callRowRightClick(null,a.getMousePos(b));a.removeDropDownList();a.closeFilterWindow();a.closeEditor();b.stopPropagation()});this.expandList=[];this.expandIndentList=[];var Vb=function(b,f,c){b.type="row";b[a.options.rowFields.id]||(b[a.options.rowFields.id]=l.getUniqueId());c&&(b[a.options.rowFields.pid]=
c);c=!0;var d=b[a.options.rowFields.cells];if(d&&0<d.length){c=E(b);for(var t,g,m,n=0;n<a.columnList.length;n++){m=a.columnList[n];t=m[a.options.columnFields.id];g=m[a.options.columnFields.editorType];m=m[a.options.columnFields.editorSettings];var q=n;t&&(q=a.getCellIndexById(d,n,t));0<=q&&q<d.length&&(d[q].type="cell",a.setDefaultCellValue(d[q],g,m))}}c&&(a.expandList.push(b),a.expandIndentList.push(f));return c},F=function(b,f,c){if(!b[a.options.rowFields.rows])return c=Vb(b,f+da,c);if(c=Vb(b,f+
da,c)){var d=0,t;if(a.isRowExpanded(b)){var g=b[a.options.rowFields.rows];if(g){a.applySorting(g);for(var l=0;l<g.length;l++)(t=F(g[l],f+da,b[a.options.rowFields.id]))&&d++}}!a.isThereChildRows&&(0<d||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))&&(a.isThereChildRows=!0)}return c};this.expand=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(!a.isRowExpanded(b)){var f=a.getRowCurrentIndex(b);if(b=a.getList(b)){a.applySorting(b);
for(var c=0;c<b.length;c++)F(b[c],a.indentList[f],null)}if(0<a.expandList.length){a.allowEvents=!1;f++;Array.prototype.splice.apply(a.currentList,[f,0].concat(a.expandList));Array.prototype.splice.apply(a.indentList,[f,0].concat(a.expandIndentList));a.options.autoSize?a.updateAutoLayout():a.getRowScope()?a.updateView():a.updateLayout();var d=n(function(){a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();n.cancel(d);a.allowEvents=!0},1)}}};this.collapse=function(b){a.expandList.length=
[];a.expandIndentList.length=[];if(a.isRowExpanded(b)){var f=null,c=!1,d=b,g=-1,l=a.getRowCurrentIndex(b);for(b=a.getParent(b);b&&!c;){f=a.getList(b);for(g=f.indexOf(d)+1;!c&&g<f.length;)d=f[g],0<a.getRowCurrentIndex(d)&&(c=!0),g++;c||(d=b);b=a.getParent(b)}if(!c&&d)for(f=a.getList(),g=f.indexOf(d)+1;g<f.length;)if(d=f[g],0<a.getRowCurrentIndex(d)){c=!0;break}else g++;l++;f=a.currentList.length-l;c&&(f=a.getRowCurrentIndex(d)-l);if(0<f){a.currentList.splice(l,f);a.indentList.splice(l,f);a.options.autoSize?
a.updateAutoLayout():a.getRowScope()?a.updateView():a.updateLayout();var m=n(function(){a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();n.cancel(m);a.allowEvents=!0},1)}}};this.toggle=function(b,f){if(b){if((b[a.options.rowFields.hasChildren]||b[a.options.rowFields.rows]&&0!=b[a.options.rowFields.rows].length)&&!(f&&0!=b[a.options.rowFields.expanded]||!1===f&&0==b[a.options.rowFields.expanded])){a.updateType="view";var c=void 0!==f?f:!1!==b[a.options.rowFields.expanded]?
!0:!1;!1!==(void 0!==f?f?a.callBeforeExpand(b):a.callBeforeCollapse(b):c?a.callBeforeCollapse(b):a.callBeforeExpand(b))&&(c=void 0!=f?f:!c,c!=b[a.options.rowFields.expanded]&&(0!=c?a.expand(b):a.collapse(b),b[a.options.rowFields.expanded]=c),a.isRowExpanded(b)?a.callAfterExpand(b):a.callAfterCollapse(b))}}else{for(var c=a.getFullList(),d=0;d<c.length;d++)c[d][a.options.rowFields.expanded]=f;a.updateCurrentLayout()}};c.$on(c.name+"-collapse",function(b,f){a.toggle(f,!1)});c.$on(c.name+"-expand",function(b,
f){a.toggle(f,!0)});c.$on(c.name+"-expand-col-index",function(b,f){0<=f&&f<a.columnList.length&&(a.options.expandColIndex=f)});c.$on(c.name+"-toggle",function(b,f){a.toggle(f)});this.isFilteringAllowed=function(b){return b&&b[a.options.columnFields.allowFilter]};c.$on(c.name+"-filter",function(b,f,c){a.filter(f,c)});this.filter=function(b,f){if(b)b[a.options.columnFields.filterParams]=f;else for(var c=0;c<a.columnList.length;c++)a.columnList[c][a.options.columnFields.filterParams]=null;a.closeFilterWindow();
a.updateCurrentLayout();a.callChange()};this.callGotFocus=function(a,f,d,g,l){angular.isDefined(c.events)&&c.events.gotFocus?c.events.gotFocus({event:a,row:f,cell:d,edit:void 0!=g?!0:!1,editValue:l}):c.gotFocus({e:{event:a,row:f,cell:d,edit:void 0!=g?!0:!1,editValue:l}})};this.callLostFocus=function(a,f,d,g,l){angular.isDefined(c.events)&&c.events.lostFocus?c.events.lostFocus({event:a,row:f,cell:d,edit:void 0!=g?!0:!1,editValue:l}):c.lostFocus({e:{event:a,row:f,cell:d,edit:void 0!=g?!0:!1,editValue:l}})};
this.getTabIndex=function(){return d[0].attributes&&d[0].attributes.tabindex?d[0].attributes.tabindex.value:""};this.updateFocus=function(b,f){if(1==a.options.allowFocus)var c=n(function(){if(a.isRowIndexInRange(b)){var t="none";0<=f&&f<a.columnList.length&&(t=a.columnList[f][a.options.columnFields.fixed]);var g=a.getElemFromRow(a.currentList[b],t);g&&(1==a.options.allowCellFocus&&0<=f&&f<a.columnList.length?(t=a.getElemFromCell(b,f,t))&&t[0].focus():g[0].focus())}else d[0].focus();n.cancel(c)},5)};
c.$on(c.name+"-focus",function(b,f){if(f){var c,d;switch(f.type){case "row":c=a.getRowCurrentIndex(f);a.updateFocus(c);break;case "cell":c=a.getCellRowIndex(f),d=a.getCellColumnIndex(f),a.updateFocus(c,d)}}else a.updateFocus()});var Bb=!1;this.getCell=function(b,f){if(0<=b&&b<a.currentList.length){var c=a.currentList[b],d=a.getColumnRealIndex(f);0<=f&&f<a.columnList.length&&(d=a.getCellIndexById(c[a.options.rowFields.cells],f,a.columnList[f].id));if(c[a.options.rowFields.cells]&&0<=d&&d<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][d]}return null};
this.getCellObject=function(b,f){if(0<=b&&b<a.currentList.length){var c=a.currentList[b],d=a.getColumnRealIndex(f);0<=f&&f<a.columnList.length&&(d=a.getCellIndexById(c[a.options.rowFields.cells],f,a.columnList[f].id));if(c[a.options.rowFields.cells]&&0<=d&&d<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][d]}return null};this.getCellIndexById=function(b,f,c){var d=-1;if(b){f=a.getColumnRealIndex(f);for(var t=0;t<b.length;t++)if(void 0==b[t][a.options.cellFields.cid]){d=f;break}else if(b[t][a.options.cellFields.cid]==
c){d=t;break}}return d};this.getCellIndexFromRow=function(b,f){var c=-1;if(b&&f&&f[a.options.rowFields.cells])for(var d=0;d<f[a.options.rowFields.cells].length;d++)if(f[a.options.rowFields.cells][d]==b){c=d;break}return c};this.getCellColumnIndex=function(b){if(b)if(b[a.options.cellFields.cid]){if(b=a.getColumnById(b[a.options.cellFields.cid]))return a.getColumnCurrentIndex(b)}else return a.getCellColumnIndexFromRow(b);return-1};this.getCellColumnIndexFromRow=function(b){if(b&&b[a.options.cellFields.rid]){var f=
a.findRowById(b[a.options.cellFields.rid]);if(f&&(f=f[a.options.rowFields.cells])&&0<f.length)return f.indexOf(b)}return-1};this.getCellRowIndex=function(b){return b&&b[a.options.cellFields.rid]&&(b=a.findRowById(b[a.options.cellFields.rid]))?a.getRowCurrentIndex(b):-1};this.getColumnById=function(b){for(var f=null,c=0;c<a.columnList.length;c++)if(a.columnList[c][a.options.columnFields.id]==b){f=a.columnList[c];break}return f};this.getColumnObject=function(b){return 0<=b&&b<a.columnList.length?a.columnList[b]:
null};this.getRowObject=function(b){return 0<=b&&b<a.currentList.length?a.currentList[b]:null};this.isRowExpanded=function(b){return b?b[a.options.rowFields.expanded]||void 0===b[a.options.rowFields.expanded]?!0:!1:!0};this.getContentElement=function(a,f){var b=null;f||(f="cell-content");if(a&&0<a.children().length)for(var c=a.children(),d=0;d<c.length;d++){var g=angular.element(c.eq(d));if(g[0].attributes&&g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==f){b=g;break}}return b};
this.getElement=function(a,f){var b=null;f||(f="cell-content");if(a&&0<a.children().length){a=a.children().eq(0);for(var c=a.children(),d=0;d<c.length;d++){var g=angular.element(c.eq(d));if(g[0].attributes&&g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==f){b=g;break}}}return b};this.getChildElement=function(a,f){var b=null;f||(f="content");if(a&&0<a.children().length)for(var c=a.children(),d=0;d<c.length;d++){var g=angular.element(c.eq(d));if(g[0].attributes&&g[0].attributes["data-element"]&&
g[0].attributes["data-element"].value==f){b=g;break}}return b};this.getElemFromColumn=function(b,f,c){var d=null;if(b){b=a.getColumnCurrentIndex(b);var g=a.getHeaderElem(f);"footer"==c&&(g=a.getFooterElem(f));if(g&&(f=g.find("td"))&&0<f.length)for(c=0;c<f.length;c++)if(g=angular.element(f[c]),g[0].attributes["data-index"]&&g[0].attributes["data-index"].value.toString()===b.toString()){d=g;break}}return d};this.getElemFromRow=function(b,f,c){var d=null;if(b&&(b=a.getRowCurrentIndex(b,c),(f=a.getRowElems(f,
c))&&0<f.length))for(c=0;c<f.length;c++){var g=angular.element(f[c]);if(g[0].attributes["data-index"]&&g[0].attributes["data-index"].value.toString()===b.toString()){d=g;break}}return d};this.getElemFromCell=function(b,c,d,g){var f=null;if(a.isRowIndexInRange(b,g)){switch(g){case "top":b=a.getElemFromRow(a.currentTopList[b],d,g);break;case "bottom":b=a.getElemFromRow(a.currentBottomList[b],d,g);break;default:b=a.getElemFromRow(a.currentList[b],d,g)}if(b&&(b=b.find("td"))&&0<b.length)for(d=0;d<b.length;d++)if(g=
angular.element(b[d]),g[0].attributes["data-index"]&&g[0].attributes["data-index"].value.toString()===c.toString()){f=g;break}}return f};this.getElemFromColumnCell=function(b,c,d){var f=null;if((c=d?a.getFooterElem(c):a.getHeaderElem(c))&&(c=c.find("td"))&&0<c.length)for(d=0;d<c.length;d++){var g=angular.element(c[d]);if(g[0].attributes["data-index"]&&g[0].attributes["data-index"].value.toString()===b.toString()){f=g;break}}return f};this.getIndent=function(b){var c=0;if(b)for(parent=a.rowsObj.getParent(b);parent;)c+=
a.options.indent,parent=a.rowsObj.getParent(parent);return c};this.getObjState=function(b){if(b)switch(b.type){case "column":if(0==a.options.enabled)return"disabled";if(1==b[a.options.columnFields.selected])return"selected";if(b==a.hoverColumn)return"hovered";break;case "row":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";if(1==b[a.options.rowFields.selected])return"selected";if(b==a.hoverRow)return"hovered";break;case "cell":if(0==a.options.enabled||0==b[a.options.cellFields.enabled])return"disabled";
if(1==b[a.options.cellFields.selected])return"selected";if(b==a.hoverCell)return"hovered"}return"normal"};this.getColumnAt=function(b,c){if(void 0==b||void 0==c)return a.hoverColumn;var f,d,g=null;f="left";for(var m=0;!g&&3>m;){if(f=a.getHeaderElem(f)){var n=f.find("td");if(n&&0<n.length)for(var q=0;q<n.length;q++)if(f=angular.element(n[q]),d=l.getPageRect(f),l.checkHit(b,c,d)){g=a.getColumnFromElem(f);break}}m++;f=1==m?"right":"none"}return g};this.getCellAt=function(b,c){var f=null,d=a.getRowAt(b,
c);if(d){var g,m,n=a.getElemFromRow(d).find("td");if(n&&0<n.length)for(var q=0;q<n.length&&!(g=angular.element(n[q]),m=l.getPageRect(g),l.checkHit(b,c,m)&&(f=a.getRowCurrentIndex(d),g=a.getIndexFromElem(g),f=a.getCellObject(f,g)));q++);}return f};this.getRowAt=function(b,c){var f,d,g=null;f="none";for(var m=0;!g&&3>m;){var n=a.getRowElems(f);if(n&&0<n.length)for(var q=0;q<n.length;q++)if(f=angular.element(n[q]),d=l.getPageRect(f),l.checkHit(b,c,d)){g=a.getRowFromElem(f);break}m++;f=1==m?"left":"right"}return g};
this.getRowCurrentIndex=function(b){if(b){switch(b[a.options.rowFields.fixed]){case "top":return a.currentTopList?a.currentTopList.indexOf(b):-1;case "bottom":return a.currentBottomList?a.currentBottomList.indexOf(b):-1}return a.currentList?a.currentList.indexOf(b):-1}return-1};this.getObjCurrentIndex=function(b){return a.getRowCurrentIndex(b)};this.getRowFromChildElem=function(b){if(b&&(b=angular.element(b))){for(b=b.parent();b&&b[0].tagName&&"tr"!==b[0].tagName.toLowerCase();)b=b.parent();return b?
a.getRowFromElem(b):null}return null};this.getColumnCurrentIndex=function(b){return b&&a.columnList?a.columnList.indexOf(b):-1};this.getFullColumnList=function(){return a.columnsObj.getList()};this.getColumnRealIndex=function(b){var c=a.getFullColumnList();return 0<=b&&b<c.length&&b<a.columnList.length?c.indexOf(a.columnList[b]):-1};this.getColumnFromChildElem=function(b){return b?a.getColumnFromElem(b):null};this.getColumnFromElem=function(b){return b&&(b=angular.element(b))&&b[0].attributes["data-index"]&&
(b=b[0].attributes["data-index"].value,0<=b&&b<a.columnList.length)?a.columnList[b]:null};this.getIndexFromElem=function(a){return a&&(a=angular.element(a))&&a[0].attributes["data-index"]?a[0].attributes["data-index"].value:-1};this.getRowFromElem=function(b){if(b&&(b=angular.element(b))&&b[0].attributes["data-index"]){var c=b[0].attributes["data-index"].value,d="none";b&&b[0].attributes["data-fixed"]&&(d=b[0].attributes["data-fixed"].value);switch(d){case "top":if(a.isRowIndexInRange(c,d))return a.currentTopList[c];
break;case "bottom":if(a.isRowIndexInRange(c,d))return a.currentBottomList[c];break;default:if(a.isRowIndexInRange(c))return a.currentList[c]}}};this.isRowIndexInRange=function(b,c){switch(c){case "top":return 0<=b&&b<a.currentTopList.length;case "bottom":return 0<=b&&b<a.currentBottomList.length}return 0<=b&&b<a.currentList.length};this.isColIndexInRange=function(b){return 0<=b&&b<a.columnList.length};this.isRowEnabled=function(b){return b&&1==a.options.enabled&&l.isEnabled(b[a.options.rowFields.enabled])};
this.mouseButtonStatus=function(a){Bb=a};c.$on(c.name+"-ensure-visible",function(b,c){a.ensureVisible(c)});c.$on(c.name+"-find-row-by-id",function(b,c){m.setTempData(a.findRowById(c))});c.$on(c.name+"-find-row-by-path",function(b,c,d){m.setTempData(a.findRowByPath(c,d))});c.$on(c.name+"-find-row-by-text",function(b,c){m.setTempData(a.findRowByText(c))});c.$on(c.name+"-get-full-path",function(b,c){m.setTempData(a.getFullPath(c))});c.$on(c.name+"-get-cell-at",function(b,c){c?m.setTempData(a.getCellAt(c.x,
c.y)):m.setTempData(null)});c.$on(c.name+"-get-row-at",function(b,c){c?m.setTempData(a.getRowAt(c.x,c.y)):m.setTempData(null)});c.$on(c.name+"-get-row-level",function(b,c){m.setTempData(a.getLevel(c))});c.$on(c.name+"-get-row-parent",function(b,c){m.setTempData(a.getParent(c))});c.$on(c.name+"-get-flat-list",function(b,c){c?m.setTempData(a.getFullList()):m.setTempData(a.currentList)});c.$on(c.name+"-get-list",function(b,c){m.setTempData(a.getList(c))});c.$on(c.name+"-get-top-row",function(b){m.setTempData(a.getTopRow())});
c.$on(c.name+"-set-top-row",function(b,c){a.ensureVisible(c)});this.ensureVisible=function(b,c){if(b){for(var f=[],d=a.getParent(b);d;)f.push(d),d=a.getParent(d);for(d=f.length-1;0<=d;d--)f[d][a.options.rowFields.expanded]=!0;a.updateCurrentLayout();var g=n(function(){c=void 0!=c?c:"center";a.scrollTo(b,c);n.cancel(g)},100)}};this.findRowById=function(b){return a.rowsObj.findObjectById(b)};this.findRowByText=function(b){return a.rowsObj.findObjectByText(b)};this.findRowByPath=function(b,c){var f=
null;c||(c=a.getFullList());for(var d=0;d<c.length;d++)if(a.getFullPath(c[d])==b){f=c[d];break}return f};this.getFullPath=function(b){var c="";if(b)for(c=b[a.options.rowFields.text],b=a.getParent(b);b;)c=[b[a.options.rowFields.text],a.options.pathSeparator,c].join(""),b=a.getParent(b);return c};this.getLevel=function(a){var b=0;for(a=this.getParent(a);a;)b++,a=this.getParent(a);return b};this.getParent=function(b){return a.rowsObj.getParent(b)};this.getList=function(b){return a.rowsObj.getList(b)};
this.getFirstRow=function(){for(var b=null,c=0;c<a.currentList.length;c++)if(l.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.getPrevRow=function(b){var c=null;if(0<=b&&b<a.currentList.length)for(--b;0<=b;b--)if(l.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getNextRow=function(b){var c=null;for(b+=1;b<a.currentList.length;b++)if(l.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];
break}return c};this.getLastRow=function(){for(var b=null,c=a.currentList.length-1;0<=c;c--)if(l.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.updateSelectionStatus=function(b){switch(b){case "shift":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}break;case "ctrl":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;
case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}}};d.bind("keydown",function(b){if(a.options.enabled)switch(b.keyCode){case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}});this.allowUpdate=!0;this.updateType="all";this.suspendLayout=function(b){a.allowUpdate=!1};this.resumeLayout=function(b){a.allowUpdate=!0;b?a.updateCurrentLayout():
a.updateLayout()};c.$on(c.name+"-refresh",function(b,c,d){a.refresh(c,d)});c.$on(c.name+"-resume-layout",function(b,c){a.resumeLayout(c)});c.$on(c.name+"-suspend-layout",function(b,c){a.suspendLayout(c)});c.$on(c.name+"-update-layout",function(b,c){c?a.updateCurrentLayout():a.updateLayout()});c.$on(c.name+"-update-view",function(b){a.updateView()});c.$on(c.name+"-begin-load",function(b,c,d){c?(0>a.options.loadRows.indexOf(c)&&a.options.loadRows.push(c),a.updateView()):a.beginLoad(d)});c.$on(c.name+
"-end-load",function(b,c){a.endLoad(c)});this.callLoadComplete=function(a){angular.isDefined(c.events)&&c.events.loadComplete?c.events.loadComplete():c.loadComplete()};this.callUpdateComplete=function(){angular.isDefined(c.events)&&c.events.updateComplete?c.events.updateComplete():c.updateComplete()};c.$on(c.name+"-get-current-page",function(b){m.setTempData(a.currentPageNumber)});c.$on(c.name+"-set-current-page",function(b,c){a.setCurrentPage(c)});c.$on(c.name+"-first-page",function(b){a.firstPage()});
c.$on(c.name+"-last-page",function(b){a.lastPage()});c.$on(c.name+"-next-page",function(b){a.nextPage()});c.$on(c.name+"-prev-page",function(b){a.prevPage()});this.setCurrentPage=function(b){a.currentPageNumber!=b&&1<=b&&b<=a.pageList.length&&(a.currentPageNumber=b,a.updateCurrentLayout())};this.firstPage=function(){1!=a.currentPageNumber&&(a.currentPageNumber=1,a.updateCurrentLayout())};this.lastPage=function(){a.currentPageNumber!=a.pageList.length&&(a.currentPageNumber=a.pageList.length,a.updateCurrentLayout())};
this.nextPage=function(){a.currentPageNumber<a.pageList.length&&(a.currentPageNumber++,a.updateCurrentLayout())};this.prevPage=function(){1<a.currentPageNumber&&(a.currentPageNumber--,a.updateCurrentLayout())};c.$on(c.name+"-get-max-scroll-pos",function(b){m.setTempData(a.getMaxScrollPos())});c.$on(c.name+"-get-scroll-pos",function(b){m.setTempData(a.getScrollPos())});c.$on(c.name+"-set-scroll-pos",function(b,c){a.setScrollPos(c)});c.$on(c.name+"-scroll-to",function(b,c,d){a.scrollTo(c,d)});var Ba=
!1;this.shiftFirstSelectedRow=null;this.multiSelection=function(a){if(void 0!=a)Ba=a;else return Ba};this.columnSelection=function(b,f){if(b){var d=!0;a.options.selectedColumn&&(d=!l.isEqual(a.options.selectedColumn[a.options.columnFields.id],b[a.options.columnFields.id]));var g;g=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});d&&!1!==g&&(a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1,a.refresh(a.options.selectedColumn)),
a.options.selectedColumn=b,b[a.options.columnFields.selected]=!0,angular.isDefined(c.selectedColumn)&&(c.selectedColumn=b),a.refresh(a.options.selectedColumn),a.callAfterSelect(b))}else return a.options.selectedColumn};this.isRowSelected=function(a){return l.isSelected(a)};this.clearPrevSelection=function(b){for(var c=0;c<a.options.selectedRows.length;c++)b&&!l.isEqual(a.options.selectedRows[c][a.options.rowFields.id],b[a.options.rowFields.id])?a.options.selectedRows[c][a.options.rowFields.selected]=
!1:b||(a.options.selectedRows[c][a.options.rowFields.selected]=!1);a.options.selectedRows.length=0;b&&0!=b[a.options.rowFields.enabled]&&a.options.selectedRows.push(b);a.refreshRows()};this.markSelColumn=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b])};this.updateSelectionList=function(){for(var b=a.options.selectedRows.length-1;0<=b;)0==a.options.selectedRows[b][a.options.rowFields.enabled]&&a.options.selectedRows.splice(b,1),b--};this.rowSelection=function(b,f,d,g,m){if(b){if("none"!=
a.options.selectionMode)if(a.isRowEnabled(b)){var n=a.rowSelection(),q=!0;n&&(q=!l.isEqual(n[a.options.rowFields.id],b[a.options.rowFields.id])||d||g);var t=!0,t=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});if(!1!==t)if(d=f||d||g?!0:!1,q){q=!0;"multi-extended"==a.options.selectionMode&&(q=!a.isObjInSelList(b)||!d||f);q&&("one"==a.options.selectionMode?a.clearPrevSelection():Bb&&f?a.clearPrevSelection():Ba||d||"multi-simple"===
a.options.selectionMode||a.clearPrevSelection());a.options.selectedRow=b;if(Bb&&f&&"one"!=a.options.selectionMode){if(a.shiftFirstSelectedRow||(a.shiftFirstSelectedRow=n),f=a.getRowCurrentIndex(a.shiftFirstSelectedRow),m=a.getRowCurrentIndex(b),f>m&&(n=f,f=m,m=n),a.isRowIndexInRange(f)&&a.isRowIndexInRange(m))for(;f<=m;f++)a.currentList[f][a.options.rowFields.selected]=!0,a.options.selectedRows.push(a.currentList[f])}else Bb&&(Ba||d||"multi-simple"===a.options.selectionMode)?(f=null===b[a.options.rowFields.selected]||
"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],b[a.options.rowFields.selected]=!f,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b})):(b[a.options.rowFields.selected]=!0,a.isObjInSelList(b)||a.options.selectedRows.push(b)),a.shiftFirstSelectedRow=null;angular.isDefined(c.selectedRow)&&(c.selectedRow=b);a.callAfterSelect(b);a.refresh(null,null,!0)}else Ba||
d||"multi-simple"===a.options.selectionMode?(f=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],m&&"undefined"!==m&&(f=m),b[a.options.rowFields.selected]=!f,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b}),a.shiftFirstSelectedRow=null,a.callAfterSelect(b),a.refresh(null,null,!0)):Ba||d||"multi-simple"===a.options.selectionMode||
(d||1!=a.options.selectedRows.length&&a.isObjInSelList(b)||a.clearPrevSelection(b),a.shiftFirstSelectedRow=null)}else a.clearPrevSelection()}else return a.options.selectedRow};this.updateSelection=function(b,c,d){b=b&&(b.shiftKey||b.ctrlKey||b.metaKey)?!0:!1;"multi-extended"==a.options.selectionMode&&0<a.options.selectedRows.length&&!d&&!Ba&&!b&&(a.clearPrevSelection(),c[a.options.rowFields.selected]=!0,a.options.selectedRows.push(c),a.callAfterSelect(c),a.refresh(null,null,!0))};this.isObjInSelList=
function(b){var c=!1,d=a.options.selectedRows;if(b&&d)for(var g=0;g<d.length;g++)if(l.isEqual(d[g][a.options.rowFields.id],b[a.options.rowFields.id])){c=!0;break}return c};c.$on(c.name+"-clear-selection",function(b){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.clearPrevSelection();a.options.selectedRow=null});c.$on(c.name+"-get-hover-column",function(b,c){a.hoverColumn?m.setTempData(a.hoverColumn):c&&m.setTempData(a.getColumnAt({x:c.x,
y:c.y}))});c.$on(c.name+"-get-selected-column",function(b){m.setTempData(a.columnSelection())});c.$on(c.name+"-set-selected-column",function(b,c){a.columnSelection(c)});c.$on(c.name+"-get-selected-row",function(b){m.setTempData(a.rowSelection())});c.$on(c.name+"-set-selected-row",function(b,c){var f=n(function(){a.rowSelection(c);n.cancel(f)},1)});c.$on(c.name+"-get-selected-rows",function(b){m.setTempData(a.options.selectedRows)});c.$on(c.name+"-set-selected-rows",function(b,c){c&&Array.isArray(c)&&
n(function(){for(var b=a.options.selectedRows.length=0;b<c.length;b++)c[b][a.options.rowFields.selected]=!0,a.options.selectedRows.push(c[b]);0<c.length?(a.options.selectedRow=c[c.length-1],a.callAfterSelect(a.options.selectedRow)):a.options.selectedRow=null;a.refresh(null,null,!0)},1)});c.$on(c.name+"-move-column",function(b,c,d){a.moveColumn(c,d)});c.$on(c.name+"-move-row",function(b,c,d,g,l){a.moveRow(c,d,g,l)});c.$watch("options",function(b,c){b!==c&&(a.updateOptions(b),a.updateLayout())},!0);
c.$watch("allowCellFocus",function(b,c){b!==c&&(a.options.allowCellFocus=b)});c.$watch("allowColumnReorder",function(b,c){b!==c&&(a.options.allowColumnReorder=b)});c.$watch("allowFilter",function(b,c){b!==c&&(a.options.allowFilter=b)});c.$watch("allowFocus",function(b,c){b!==c&&(a.options.allowFocus=b)});c.$watch("allowDrag",function(b,c){b!==c&&(a.options.allowDrag=b,a.updateView())});c.$watch("allowDrop",function(b,c){b!==c&&(a.options.allowDrop=b,a.updateView())});c.$watch("autoExpand",function(b,
c){b!==c&&(a.options.autoExpand=b)});c.$watch("autoSize",function(b,c){b!==c&&(a.options.autoSize=b,a.updateLayout())});c.$watch("autoUpdate",function(b,c){b!==c&&(a.options.autoUpdate=b,a.updateLayout())});c.$watch("controlStyle",function(b,c){b!==c&&a.updateControlStyle(b)});c.$watch("displayMode",function(b,c){b!==c&&(a.options.displayMode=b,a.updateLayout())});c.$watch("editorSettings",function(b,c){b!==c&&a.updateEditorSettings(b)});c.$watch("enabled",function(b,c){b!==c&&(a.options.enabled=
b,a.updateView(),a.options.paging.enabled&&a.options.paging.showControlPanel&&a.updatePaginationPanel(),a.callEnabledChanged(b))});c.$watch("expandingColumnIndex",function(b,c){b!==c&&(a.options.expandColIndex=b)});c.$watch("fields",function(b,c){b!==c&&(a.updateDataFields(b),a.UpdateData())});c.$watch("fillSpace",function(b,c){b!==c&&(a.options.fillSpace=b)});c.$watch("gridLines",function(b,c){b!==c&&(a.options.gridLines=b,a.updateView())});c.$watch("hoverSelection",function(b,c){b!==c&&(a.options.hoverSelection=
b)});c.$watch("indent",function(b,c){b!==c&&(a.options.indent=b,a.updateLayout())});c.$watch("mouseWheelSpeed",function(b,c){b!==c&&(a.options.mouseWheelSpeed=b)});c.$watch("labelEdit",function(b,c){b!==c&&(a.options.labelEdit=b)});c.$watch("maxRows",function(b,c){b!==c&&(a.options.maxRows=b,a.updateLayout())});c.$watch("paging",function(b,c){b!==c&&(a.updatePaging(b),a.resetPageNumber(),a.updateCurrentLayout())},!0);c.$watch("pathSeparator",function(b,c){b!==c&&(a.options.pathSeparator=b)});c.$watch("rtl",
function(b,c){b!==c&&(a.options.rtl=b,a.updateLayout())});c.$watch("rowHeight",function(b,c){b!==c&&(a.options.rowHeight=b,a.updateLayout())});c.$watch("rowIcon",function(b,c){b!==c&&(a.options.rowIcon=b,a.updateLayout())});a.resetSelection=function(){switch(a.options.selectionMode){case "none":a.clearPrevSelection();break;default:a.clearPrevSelection(a.rowSelection())}};c.$watch("selectionMode",function(b,c){b!==c&&(a.options.selectionMode=b,a.resetSelection())});c.$watch("showExpandBoxes",function(b,
c){b!==c&&(a.options.showExpandBoxes=b,a.updateLayout())});c.$watch("showFooter",function(b,c){b!==c&&(a.options.showFooter=b,a.updateLayout())});c.$watch("showHeader",function(b,c){b!==c&&(a.options.showHeader=b,a.updateLayout())});c.$watch("showIcons",function(b,c){b!==c&&(a.options.showIcons=b,a.updateLayout())});c.$watch("selectedRow",function(b,c){b!==c&&(c&&(c[a.options.rowFields.selected]=!1),a.options.selectedRow=b,a.callAfterSelect(b))});this.sortComparer=this.sortColumn=null;c.$watch("sorting",
function(b,c){b!==c&&(a.options.sorting=b)});c.$on(c.name+"-sort",function(b,c,d,g){a.sort(c,d,g)});this.sort=function(b,c,d){a.sortColumn=b;a.sortComparer=d;if("ascending"==c||"descending"==c||"none"==c)a.options.sorting=c;a.updateCurrentLayout();a.callChange()};this.getCellIndexInCollection=function(b,c,d){var f=-1;if(b)for(var g=0;g<b.length;g++)if(void 0==b[g][a.options.cellFields.cid]){f=c;break}else if(b[g][a.options.cellFields.cid]==d){f=g;break}return f};this.isSortingAllowed=function(){return"ascending"==
a.options.sorting||"descending"==a.options.sorting};this.applySorting=function(b){if(b&&(!a.sortColumn||0!=a.sortColumn[a.options.columnFields.visible])){var c=a.getColumnCurrentIndex(a.sortColumn),d=0<=c?c:a.options.expandColIndex;if(d<a.columnList.length){var g=a.columnList[d][a.options.columnFields.id];a.sortColumn&&a.sortColumn[a.options.columnFields.comparer]?b.sort(a.sortColumn[a.options.columnFields.comparer]):a.sortComparer?b.sort(a.sortComparer):a.isSortingAllowed()&&b.sort(function(b,c){var f=
null,m=null;if(b[a.options.rowFields.cells]){var n=a.getCellIndexInCollection(b[a.options.rowFields.cells],d,g);0<=n&&((f=b[a.options.rowFields.cells][n][a.options.cellFields.value])||(f=b[a.options.rowFields.cells][n][a.options.cellFields.text]),l.isObject(f)&&(f=f.value?f.value:f.text))}c[a.options.rowFields.cells]&&(n=a.getCellIndexInCollection(c[a.options.rowFields.cells],d,g),0<=n&&((m=c[a.options.rowFields.cells][n][a.options.cellFields.value])||(m=c[a.options.rowFields.cells][n][a.options.cellFields.text]),
l.isObject(m)&&(m=m.value?m.value:m.text)));f=void 0!=f?f:null;m=void 0!=m?m:null;switch(a.options.sorting){case "ascending":if(f<m)return-1;if(f>m)return 1;break;case "descending":if(f>m)return-1;if(f<m)return 1;break;default:return 0}})}}};var I=function(b){if(b){var c=l.isFieldAvailable(b.general,"iui-treegrid-column"),d;d=(d=b.header)?{content:l.isFieldAvailable(d.content,"iui-treegrid-column-header-cell-content"),disabled:l.isFieldAvailable(d.disabled,"iui-treegrid-column-header-disabled"),normal:l.isFieldAvailable(d.normal,
"iui-treegrid-column-header"),hovered:l.isFieldAvailable(d.hovered,"iui-treegrid-column-header-hovered"),selected:l.isFieldAvailable(d.selected,"iui-treegrid-column-header-selected")}:a.options.controlStyle.column.header;b=(b=b.footer)?{content:l.isFieldAvailable(b.content,"iui-treegrid-column-footer-cell-content"),disabled:l.isFieldAvailable(b.disabled,"iui-treegrid-column-footer-disabled"),normal:l.isFieldAvailable(b.normal,"iui-treegrid-column-footer"),hovered:l.isFieldAvailable(b.hovered,"iui-treegrid-column-footer-hovered"),
selected:l.isFieldAvailable(b.selected,"iui-treegrid-column-footer-selected")}:a.options.controlStyle.column.footer;return{general:c,header:d,footer:b}}return a.options.controlStyle.column};this.getExpandBoxStyle=function(b){return b?{general:l.isFieldAvailable(b.general,"iui-treegrid-expand-box"),animated:l.isFieldAvailable(b.animated,"iui-treegrid-expand-box-load"),expanded:l.isFieldAvailable(b.expanded,"iui-treegrid-expand-box-open"),collapsed:l.isFieldAvailable(b.collapsed,"iui-treegrid-expand-box-close")}:
a.options.controlStyle.row.expandBox};var Wb=function(b){if(b){var c;c=(c=b.general)?{disabled:l.isFieldAvailable(c.disabled,"iui-treegrid-row-disabled"),focused:l.isFieldAvailable(c.focused,"iui-treegrid-row-focused"),normal:l.isFieldAvailable(c.normal,"iui-treegrid-row"),hovered:l.isFieldAvailable(c.hovered,"iui-treegrid-row-hovered"),selected:l.isFieldAvailable(c.selected,"iui-treegrid-row-selected")}:a.options.controlStyle.row.general;var d;var g=b.checkBox;g?(d=l.isFieldAvailable(g.general,"iui-checkbox"),
g=(g=g.box)?{general:l.isFieldAvailable(g.general,"iui-checkbox-box"),disabled:l.isFieldAvailable(g.disabled,"iui-checkbox-disabled"),checked:l.isFieldAvailable(g.checked,"iui-checkbox-checked"),indeterminate:l.isFieldAvailable(g.indeterminate,"iui-checkbox-indeterminate"),unchecked:l.isFieldAvailable(g.unchecked,"iui-checkbox-unchecked")}:a.options.controlStyle.row.checkBox.box,d={general:d,box:g}):d=a.options.controlStyle.row.checkBox;var g=a.getExpandBoxStyle(b.expandBox),m;m=(m=b.cell)?{content:l.isFieldAvailable(m.content,
"iui-treegrid-row-cell-content"),general:l.isFieldAvailable(m.general,"iui-treegrid-row-cell"),disabled:l.isFieldAvailable(m.disabled,"iui-treegrid-row-cell-disabled"),focused:l.isFieldAvailable(m.focused,"iui-treegrid-row-cell-focused"),normal:l.isFieldAvailable(m.normal,"iui-treegrid-row-cell"),hovered:l.isFieldAvailable(m.hovered,"iui-treegrid-row-cell-hovered"),selected:l.isFieldAvailable(m.selected,"iui-treegrid-row-cell-selected")}:a.options.controlStyle.row.cell;b=(b=b.fixed)?{disabled:l.isFieldAvailable(b.disabled,
"iui-treegrid-row-fixed-disabled"),normal:l.isFieldAvailable(b.normal,"iui-treegrid-row-fixed"),hovered:l.isFieldAvailable(b.hovered,"iui-treegrid-row-fixed-hovered")}:a.options.controlStyle.row.fixed;return{general:c,checkBox:d,expandBox:g,cell:m,fixed:b}}return a.options.controlStyle.row},C=function(b){return b?{content:l.isFieldAvailable(b.content,"iui-treegrid-row-cell-content"),general:l.isFieldAvailable(b.general,"iui-treegrid-row-cell"),disabled:l.isFieldAvailable(b.disabled,"iui-treegrid-row-cell-disabled"),
focused:l.isFieldAvailable(b.focused,"iui-treegrid-row-cell-focused"),normal:l.isFieldAvailable(b.normal,"iui-treegrid-row-cell"),hovered:l.isFieldAvailable(b.hovered,"iui-treegrid-row-cell-hovered"),selected:l.isFieldAvailable(b.selected,"iui-treegrid-row-cell-selected")}:a.options.controlStyle.cell};this.updateControlStyle=function(b){a.options.controlStyle=b?{general:l.isFieldAvailable(b.general,"iui-treegrid"),column:I(b.column),row:Wb(b.row),cell:C(b.cell)}:{general:l.isFieldAvailable(a.defaultStyle.general,
"iui-treegrid"),column:I(a.defaultStyle.column),row:Wb(a.defaultStyle.row),cell:C(a.defaultStyle.cell)}};this.getCurrentColumnStyle=function(b,c,d){var f=a.options.controlStyle.column;b&&b.style&&(f=b.style);b=a.options.controlStyle.column.body;var g=f.body;switch(c){case "header":b=a.options.controlStyle.column.header;g=f.header;break;case "footer":b=a.options.controlStyle.column.footer,g=f.footer}if(d)switch(d){case "content":return g&&g.content?g.content:b.content;case "disabled":return g&&g.disabled?
g.disabled:b.disabled;case "hovered":return g&&g.hovered?g.hovered:b.hovered;case "selected":return g&&g.selected?g.selected:b.selected;default:return g&&g.normal?g.normal:b.normal}else return c?g?g:b:f?f:a.options.controlStyle.column};this.getCurrentRowStyle=function(b,c){var d=a.options.controlStyle.row;if(b)switch(b[a.options.rowFields.style]){case "initial":break;case "parent":return a.getCurrentRowStyle(a.getParent(b),c);default:null!=b.style&&(d=b.style)}if(c){if(l.isString(d.general))return d.general;
if(a.isRowFixed(b))switch(c){case "disabled":return d.fixed&&d.fixed.disabled?d.fixed.disabled:a.options.controlStyle.row.fixed.disabled;case "hovered":return d.fixed&&d.fixed.hovered?d.fixed.hovered:a.options.controlStyle.row.fixed.hovered;default:return d.fixed&&d.fixed.normal?d.fixed.normal:a.options.controlStyle.row.fixed.normal}else switch(c){case "disabled":return d.general&&d.general.disabled?d.general.disabled:a.options.controlStyle.row.general.disabled;case "focused":return d.general&&d.general.focused?
d.general.focused:a.options.controlStyle.row.general.focused;case "hovered":return d.general&&d.general.hovered?d.general.hovered:a.options.controlStyle.row.general.hovered;case "selected":return d.general&&d.general.selected?d.general.selected:a.options.controlStyle.row.general.selected;default:return d.general&&d.general.normal?d.general.normal:a.options.controlStyle.row.general.normal}}else return d?d:a.options.controlStyle.row};this.getDefaultCellContentClass=function(){return"iui-treegrid-row-cell-content"};
this.getDefaultCellLabelClass=function(){return"iui-treegrid-row-cell-label"};this.getDefaultCellBorderClass=function(){return"iui-treegrid-lines-both"};this.getCurrentCellStyle=function(b,c,d){var f=a.options.controlStyle.row.cell;if(c)switch(c[a.options.cellFields.style]){case "initial":break;case "parent":b&&(f=C(a.getCurrentRowStyle(b)));break;default:c.style&&(f=c.style)}if(d)switch(d){case "content":return f.content?f.content:a.options.controlStyle.cell.content;case "disabled":return f.disabled?
f.disabled:a.options.controlStyle.cell.disabled;case "focused":return f.focused?f.focused:a.options.controlStyle.cell.focused;case "hovered":return f.hovered?f.hovered:a.options.controlStyle.cell.hovered;case "selected":return f.selected?f.selected:a.options.controlStyle.cell.selected;default:return f.normal?f.normal:a.options.controlStyle.cell.normal}else return f?f:a.options.controlStyle.row.cell}}]).directive("iuiTreegrid",["$compile","$timeout","$interval","IntegralUIInternalService","IntegralUIDragDrop",
"$window","IntegralUIListCtrlService",function(c,d,n,g,z,l,ca){return{restrict:"EA",controller:"IntegralUITreeGridController",transclude:!0,replace:!0,template:'<div class="iui-treegrid" data-element="treegrid"><div class="iui-treegrid-block"></div></div>',scope:{allowAnimation:"=",allowCellFocus:"=",allowColumnReorder:"=",allowFilter:"=",allowFocus:"=",allowDrag:"=",allowDrop:"=",animationSpeed:"=",autoExpand:"=",autoSize:"=",autoUpdate:"=",columns:"=",controlStyle:"=",displayMode:"@",editorSettings:"=",
enabled:"=",expandingColumnIndex:"=",fields:"=",fillSpace:"=",gridLines:"=",hoverSelection:"=",indent:"=",labelEdit:"=",maxRows:"=",mouseWheelSpeed:"@",name:"@",options:"=?",paging:"=?",pathSeparator:"@",rowHeight:"=",rowIcon:"=",rows:"=",selectedIndex:"=",selectedRow:"=",selectionMode:"@",showExpandBoxes:"=",showFooter:"=",showHeader:"=",showIcons:"=",sorting:"@",afterCollapse:"&",afterEdit:"&",afterExpand:"&",afterLabelEdit:"&",afterSelect:"&",beforeCollapse:"&",beforeEdit:"&",beforeExpand:"&",
beforeLabelEdit:"&",beforeSelect:"&",cellClick:"&",cellHover:"&",cellvalueChanged:"&",cellvalueChanging:"&",change:"&",clearColumns:"&",clearRows:"&",columnAdded:"&",columnAdding:"&",columnClick:"&",columnDblclick:"&",columnHover:"&",columnPoschanging:"&",columnPoschanged:"&",columnRemoved:"&",columnRemoving:"&",columnRightclick:"&",columnSizechanged:"&",dragDrop:"&",dragEnter:"&",dragLeave:"&",dragOver:"&",enabledChanged:"&",events:"=?",gotFocus:"&",keyDown:"&",keyPress:"&",keyUp:"&",loadComplete:"&",
lostFocus:"&",rowAdded:"&",rowAdding:"&",rowClick:"&",rowDblclick:"&",rowHover:"&",rowRemoved:"&",rowRemoving:"&",rowRightclick:"&",scrollposChanged:"&",selectionChanged:"&",updateComplete:"&"},link:function(m,q,pc,a,xd){var E=this,da=q.children().eq(0),M=angular.element('<div class="iui-scrollbar-vertical"><div class="iui-scroll-button-thumb-vertical"></div></div>'),y=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),Va=angular.element('<div class="iui-scrollbar-corner"></div>'),
hb=null,Wa=null,Xa=null,Vb=!1,F=angular.element('<input type="text" class="iui-label-editor" draggable="false" />');a.labelEditStatus=function(a){if(void 0!=a)Vb=a;else return Vb};var Bb=function(){var e="iui-treegrid-block";a.options.showStatusIcons&&(e+=" "+e+"-shift-left");a.options.rtl&&(e+=" "+e+"-rtl");return e};m.$on("$destroy",function(a){E.s2t();Ya&&(d.cancel(Ya),Ya=null);Za&&(d.cancel(Za),Za=null);wa&&wa.unbind("mousedown");q.unbind("click dblclick dragenter dragleave dragend drop keydown mousedown mouseleave mousemove mousewheel scroll touchstart touchmove touchend");
angular.element(l).unbind("dragenter",yd);angular.element(l).unbind("dragover",zd);angular.element(l).unbind("dragend",Ad);angular.element(l).unbind("keyup",Bd);angular.element(l).unbind("mousemove",Cd);angular.element(l).unbind("mousedown",Dd);angular.element(l).unbind("mouseup",Ed);angular.element(l).unbind("click",Fd);angular.element(l).unbind("contextmenu",Gd);angular.element(l).unbind("keydown",Hd);F&&F.unbind("blur focus keydown mousedown");Id();Xb();A&&A.$destroy();v&&v.$destroy();S&&S.$destroy()});
a.dragIcon=document.createElement("img");a.dragIcon.width=1;q.append(a.getDropMarkWindow());a.dropMark();var Ba=function(){hb&&(d.cancel(hb),hb=null)};a.addDropMark=function(){var e;e=q[0];for(var b=null;e;){if(e===document.getElementsByTagName("body")[0]){b=e;break}e=e.offsetParent}if(e=b)angular.element(e).append(a.getDropMarkWindow()),a.dropMark()};a.removeDropMark=function(){a.getDropMarkWindow().remove()};a.isDropInRange=function(e){e=a.getMousePos(e);var b=q[0].getBoundingClientRect();e.x-=
angular.element(l)[0].pageXOffset;e.y-=angular.element(l)[0].pageYOffset;var c=b.top+D,b=b.bottom-J;K&&y&&(b-=y[0].offsetHeight);return e.y<c||e.y>b?!1:!0};var I=angular.element('<div style="opacity:0.75;position:absolute;z-index:999"></div>'),Wb=function(){I&&(I.remove(),I.css("top","-9999999px"),I.css("left","-9999999px"))};a.getCellElemFromRow=function(e){return e&&(e=a.getElemFromRow(e))?a.getChildElement(e,"cell"):null};a.openEditor=function(e,b){if(e)switch(e.type){case "cell":b||(b=a.getColumnById(e[a.options.cellFields.cid]));
if(!b){var c=a.getCellColumnIndex(e),p=a.columnsObj.getList();p&&0<=c&&c<p.length&&(b=p[c])}if(b){var c=a.getCellType(e,a.getColumnRealIndex(b)),p=a.getCellRowIndex(e),h=a.getCellColumnIndex(e);if(p=a.getElemFromCell(p,h,b[a.options.columnFields.fixed]))switch(c){case "checkbox":break;case "combobox":break;case "incell":a.openInCellEditor(p,e,b);break;case "dropdown":a.openDropDownEditor(p,e,b);break;default:0!=e[a.options.cellFields.allowEdit]&&Yb(null,p,0)}}}};a.closeEditor=function(e,b,c){if(e)switch(e.type){case "cell":if(b||
(b=a.getColumnById(e[a.options.cellFields.cid])),b)switch(a.getCellType(e,a.getColumnRealIndex(b))){case "incell":a.closeActiveEditor(e);break;case "dropdown":a.closeActiveEditor(e)}else a.closeActiveEditor()}else a.closeActiveEditor();c||"optimal"!=a.options.displayMode||a.updateView();f=null};var C=null,b=!1,f=null,t=null,u=angular.element('<span class="iui-edit-mark"></span>');a.openInCellEditor=function(e,h,k){b&&a.closeActiveEditor(h,!0);zb();if(h&&k&&(f=h,k='<div ng-include="'+k[a.options.columnFields.editorTemplate]+
'"></div>',C=angular.element('<div class="iui-incell-editor"></div>'),C.append(c(k)(m.$parent)),0!=a.callBeforeEdit(h))){e.children().eq(0).append(C);b=!0;t="incell";qb();C.bind("mousedown",function(a){a.stopPropagation()});C.bind("mouseup",function(a){a.stopPropagation()});C.bind("click",function(a){a.stopPropagation()});C.bind("keydown",function(e){switch(e.keyCode){case 27:a.closeActiveEditor(f)}e.stopPropagation()});C.bind("keypress",function(a){a.stopPropagation()});C.bind("keyup",function(a){a.stopPropagation()});
var p=d(function(){var a=g.getPadding(e[0]),b=parseInt(getComputedStyle(e[0]).width,10)-(a.left+a.right),a=parseInt(getComputedStyle(e[0]).height,10)+2;C.css("width",b+"px");C.css("height",a+"px");C.css("top",e[0].offsetTop+"px");m.$apply();C.children&&1==C.children().length&&(b=C.children().eq(0),b.children&&1==b.children().length&&b.children().eq(0).css("height",a+"px"));d.cancel(p)},1)}};a.openDropDownEditor=function(e,h,k){b&&a.closeActiveEditor(h,!0);zb();if(h&&k&&(f=h,k='<div ng-include="'+
k[a.options.columnFields.editorTemplate]+'"></div>',C=angular.element('<div class="iui-dropdown-editor"></div>'),C.append(c(k)(m.$parent)),0!=a.callBeforeEdit(h)))var p=d(function(){angular.element(rb).append(C);C.bind("mousedown",function(a){a.stopPropagation()});C.bind("mouseup",function(a){a.stopPropagation()});C.bind("click",function(a){a.stopPropagation()});b=!0;t="dropdown";var a=e[0].getBoundingClientRect(),c=angular.element(l)[0].pageXOffset,h=angular.element(l)[0].pageYOffset,k=d(function(){var b=
g.getPadding(e[0]),b=parseInt(getComputedStyle(e[0]).width,10)+(b.left+b.right),p=g.getPadding(C[0]),b=b-(p.left+p.right),p=parseInt(getComputedStyle(C[0]).width,10);b<p&&(b=p);p=a.right-(b+3)+c;C.css("top",a.bottom+h+"px");C.css("left",p+"px");C.css("width",b+"px");m.$apply();d.cancel(k)},1);d.cancel(p)},1)};a.closeActiveEditor=function(e,c){b=!1;zb();C&&C.remove();t=f=null;c||a.callAfterEdit(e)};var zb=function(){C&&C.unbind("click keydown keypress keyup mousedown mouseup")},Ab=function(a,b){a&&
(u.addClass("iui-edit-mark iui-edit-mark-"+b),a.append(u),u.css("left",a[0].offsetLeft+a[0].offsetWidth-u[0].offsetWidth-2+"px"),u.css("top",a[0].offsetTop+(a[0].offsetHeight-u[0].offsetHeight)/2+"px"))},qb=function(){u&&("dropdown"!=t||"dropdown"==t&&!b)&&(u.removeAttr("class"),u.remove())},Oc=null,gb=angular.element('<div class="iui-dropdown-mark"><span></span></div>'),qc=function(a,b){!a||sb&&!b||(a.append(gb),gb.css("top",a[0].offsetTop+"px"),gb.css("left",a[0].offsetLeft+a[0].offsetWidth-gb[0].offsetWidth+
"px"),gb.css("height",getComputedStyle(a[0]).height))},Da=function(a){!gb||sb&&!a||gb.remove()};a.getCellType=function(b,c){var e=null,p="label";b&&(e=a.getColumnById(b[a.options.cellFields.cid]));!e&&0<=c&&c<a.columnList.length&&(e=a.columnList[c]);e&&(p=e[a.options.columnFields.editorType]);return p};var rb=g.getBodyElem(q[0]),Zb=g.getUniqueId(4),ka=null,sb=!1,$b=0,Me=function(b,h,k){if(rb&&b.items&&0<b.items.length){b=g.getUniqueId(4);var e=c('<iui-list name="'+b+'" style="position:absolute;top:-99px;height:100px" items="data['+
h+"].column."+a.options.columnFields.editorSettings+'.items"></iui-list>')(A);angular.element(rb).append(e);ca.updateLayout(b);var x=d(function(){if(0<e.children().length){var a=e.children().eq(0);0<a.children().length&&($b=angular.element(a.children().eq(0))[0].offsetHeight,k&&(k.avgItemHeight=$b))}e.remove();d.cancel(x)},1)}},tb=null,ub=function(b,h,k,p){var e=a.getCell(k,p);if(e!=Oc&&(Oc=e,ka&&ka.remove(),tb&&tb.$destroy(),rb)){tb=m.$new();tb.data=a.columnList[p];f=e;var Ca='<iui-list name="'+
Zb+'" style="position:absolute;"',Ca=Ca+(' items="data.'+a.options.columnFields.editorSettings+'.items"'),Ca=Ca+(' item-icon="data.'+a.options.columnFields.editorSettings+'.itemIcon"'),Ca=Ca+(' show-icons="data.'+a.options.columnFields.editorSettings+'.showIcons"'),Ca=Ca+(' checkbox-settings="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings"'),Ca=Ca+(' show-check-boxes="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings.showCheckBoxes"');ka=c(Ca+(' nav-selection="false" before-select="onCellValueChanging(e, '+
k+", "+p+')" after-select="onCellValueChanged(e, '+k+", "+p+')"></iui-list>'))(tb);$b=0;Cb&&p<Cb.length&&($b=Cb[p].avgItemHeight);var Le=d(function(){angular.element(rb).append(ka);var c=b[0].getBoundingClientRect(),p=angular.element(l)[0].pageXOffset,k=angular.element(l)[0].pageYOffset,k=c.bottom+k-1,c=c.left+p,p=b.children().eq(0),x=g.getPadding(p[0]),p=parseInt(getComputedStyle(p[0]).width,10)+(x.left+x.right),x=g.getPadding(ka[0]),p=p-(x.left+x.right);void 0!=h.dropDownWidth&&p<h.dropDownWidth&&
(p=h.dropDownWidth);x=void 0!=h.dropDownHeight?h.dropDownHeight:100;void 0!=h.maxDropDownItems&&(x=$b*h.maxDropDownItems);ka.css("top",k+"px");ka.css("left",c+"px");ka.css("width",p+"px");ka.css("height",x+"px");ka.css("z-index","999");e&&e[a.options.cellFields.value]&&ca.selectedItem(Zb,e[a.options.cellFields.value]);ca.updateLayout(Zb);var f=d(function(){if(e&&e[a.options.cellFields.value]){ca.ensureVisible(Zb,e[a.options.cellFields.value]);var b=d(function(){ca.focus(Zb,e[a.options.cellFields.value]);
d.cancel(b)},1)}d.cancel(f)},10);gb&&(Da(!0),qc(b,!0));sb=!0;Ne();d.cancel(Le)},1)}};a.removeDropDownList=function(a){ka&&(Oc=null,ka.remove(),sb=!1,a||Da(),ka.unbind("keydown"));tb&&tb.$destroy();f=null};var Ne=function(){ka.bind("keydown",function(b){switch(b.keyCode){case 27:a.removeDropDownList(),Da()}})},Yb=function(b,c,k){a.options.labelEdit&&(void 0===k&&(k=500),Wa=d(function(){if(Wa)var a=d(function(){rc(b,c,!0);d.cancel(a)},k);d.cancel(Wa)},k/3))},ac=function(){Wa&&(d.cancel(Wa),Wa=null)},
Db=null,Eb=null,rc=function(b,c,k){if(a.dragDropStatus())ab=F[0].value,a.labelEditStatus(!1),F.unbind("blur focus keydown mousedown"),F.remove(),Eb=Db=null;else{var e=a.getRowFromChildElem(c);if(e){var h=a.getRowCurrentIndex(e),f=a.getIndexFromElem(c),g=a.getCellObject(h,f),ab="",ab=c.children().eq(0);if(g)if(k){if(0!=a.callBeforeLabelEdit(g)){Db=e;Eb=g;a.labelEditStatus(!0);F.unbind("blur focus keydown mousedown");b=parseInt(getComputedStyle(c[0]).width,10)-4;k=parseInt(getComputedStyle(c[0]).height,
10)-3;F.css("top",c[0].offsetTop+"px");F.css("left",c[0].offsetLeft+"px");F.css("width",b+"px");F.css("height",k+"px");ab.append(F);F[0].value=g[a.options.cellFields.text];F.bind("keydown",function(b){switch(b.keyCode){case 13:g[a.options.cellFields.text]=F[0].value?F[0].value:"null";rc(b,c,!1);break;case 27:rc(b,c,!1)}b.stopPropagation()});F.bind("focus",function(b){var e=angular.element(this);a.callGotFocus(b,Db,Eb,!0,e[0].value)});F.bind("blur",function(a){rc(a)});F.bind("mousedown",function(a){a.stopPropagation()});
var $a=d(function(){F[0].focus();F[0].select();d.cancel($a)},10)}}else ab=F[0].value,a.labelEditStatus(!1),F.unbind("blur focus keydown mousedown"),F.remove(),a.updateView(),a.updateFocus(h,f),a.callAfterLabelEdit(g),a.callLostFocus(b,e,g,!0,ab),Eb=Db=null}else ab=F[0].value,a.labelEditStatus(!1),F.unbind("blur focus keydown mousedown"),F.remove(),a.callAfterLabelEdit(),a.updateView(),a.callLostFocus(b,Db,Eb,!0,ab),Eb=Db=null}},Jd=function(b){var e="";if(a.options.showExpandBoxes){var c=a.defaultStyle.row.expandBox.general;
b[a.options.rowFields.style]&&b[a.options.rowFields.style].expandBox&&b[a.options.rowFields.style].expandBox.general!=c?c+=" "+b[a.options.rowFields.style].expandBox.general:a.options.controlStyle.row.expandBox.general!=c&&(c+=" "+a.options.controlStyle.row.expandBox.general);var p=a.getCurrentRowStyle(b),p=a.getExpandBoxStyle(p.expandBox);if(a.isThereChildRows||b&&b[a.options.rowFields.hasChildren])e=c;c=b[a.options.rowFields.hasChildren]&&(a.isThereVisibleChildren(b)||!b[a.options.rowFields.rows]||
b[a.options.rowFields.rows]&&0==b[a.options.rowFields.rows].length);b&&!a.isRowFixed(b)&&(c||a.isThereVisibleChildren(b))&&(0<=a.options.loadRows.indexOf(b)?e+=" "+p.animated:(e=b[a.options.rowFields.hasChildren]&&void 0===b[a.options.rowFields.expanded]?e+(" "+p.expanded):!1!==b[a.options.rowFields.expanded]?e+(" "+p.collapsed):e+(" "+p.expanded),!0===a.options.rtl&&(e+="-rtl"),a.options.enabled&&a.isRowEnabled(b)||(e+="-disabled")))}return e};q.bind("mousemove",function(b){if(a.options.enabled&&
0===b.button&&sa&&T){a.getColumnCurrentIndex(T);var e=a.getMousePos(b),c=e.y+16,e=e.x+20;Ja.empty();Ja.append("<span>"+T[a.options.columnFields.headerText]+"</span>");Ja.css("top",c+"px");Ja.css("left",e+"px");Ja.css("display","block");Kd();b.stopPropagation()}});var Od=function(){for(var b=0,c="none";3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var k=0;k<c.length;k++){var p=angular.element(c[k]);Ld(p);for(var p=p.find("td"),x=0;x<p.length;x++){var d=angular.element(p[x]);Md(a.getElement(d,"expandbox"));
Nd(d)}}b++;c=1==b?"left":"right"}},Pd=function(){V&&V.unbind("dragover");U&&U.unbind("dragover");la&&la.unbind("dragover");ma&&ma.unbind("dragover");ea&&ea.unbind("dragover");ea&&ea.unbind("dragover")},Id=function(){Pd();zb();for(var b=0,c="none";3>b;){var k=a.getRowElems(c);if(k&&0<k.length)for(var p=0;p<k.length;p++){var x=angular.element(k[p]);Ld(x);for(var x=x.find("td"),d=0;d<x.length;d++){var f=angular.element(x[d]);Md(a.getElement(f,"expandbox"));Nd(f)}}k=c;for(p=0;2>p;){rowFixed=0==p?"top":
"bottom";if((x=a.getRowElems(k,rowFixed))&&0<x.length)for(d=0;d<x.length;d++){(f=angular.element(x[d]))&&f.unbind("mousedown mouseenter mouseleave");for(var f=f.find("td"),g=0;g<f.length;g++){var $a=angular.element(f[g]);$a&&$a.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart")}}p++}if((k=a.getHeaderElem(c))&&0<k.length)for(p=0;p<k.length;p++)for(x=angular.element(k[p]),x=x.find("td"),d=0;d<x.length;d++)(f=angular.element(x[d]))&&(c=a.getChildElement(f,"column-header-cell"))&&
(c=a.getContentElement(c,"filter-button"))&&c.unbind("mousedown");b++;c=1==b?"left":"right"}},Te=function(){Od();for(var b=0,c="none";3>b;){var k=a.getRowElems(c);if(k&&0<k.length)for(var p,x=k.length-1,d=0;d<=x;d++){p=angular.element(k[d]);Oe(p);for(var f=p.find("td"),g=0;g<f.length;g++){var $a=angular.element(f[g]);Pe(a.getElement($a,"expandbox"));Qe($a,a.getRowFromElem(p),g)}}for(k=0;2>k;){rowFixed=0==k?"top":"bottom";if((p=a.getRowElems(c,rowFixed))&&0<p.length)for(d=0;d<p.length;d++)for(x=angular.element(p[d]),
Re(x),f=x.find("td"),g=0;g<f.length;g++)$a=angular.element(f[g]),Se($a,a.getRowFromElem(x),g);k++}b++;c=1==b?"left":"right"}},sa=!1,T=null,Fb=-1,sc=function(b,c){if(b){var e=a.getColumnCurrentIndex(b),p=a.getColumnWidth(b);return a.isColumnWithFixedWidth(e)||10<c.x&&c.x<p-10}return!1},Rc=function(b){b=b.find("td");for(var e=0;e<b.length;e++)currentElem=angular.element(b[e]),currentElem.bind("click",function(b){ib();if(a.options.enabled&&1===b.which){var e=g.getClientMousePos(b,this),c=a.getColumnFromElem(this);
c&&sc(c,e)&&a.callColumnClick(c,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("dblclick",function(b){b.preventDefault();if(a.options.enabled&&1===b.which){var e=g.getClientMousePos(b,this),c=a.getColumnFromElem(this);c&&sc(c,e)&&a.callColumnDblClick(c,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("contextmenu",function(b){var e=a.getColumnFromElem(this);e&&(Ea=e,e[a.options.columnFields.contextMenu]&&0<e[a.options.columnFields.contextMenu].length&&b.preventDefault(),Qd(b,e),
b.stopPropagation())}),currentElem.bind("mouseenter",function(b){if(a.options.enabled&&!W&&!ga){var e=a.getColumnFromElem(this);e&&(a.hoverColumn=e,a.refresh(e),a.callColumnHover(e));if(1===b.which&&sa&&T&&a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&na&&(na.remove(),a.hoverColumn!=T)){var c=angular.element(this);c.append(na);b=parseInt(getComputedStyle(c[0]).height,10);e=parseInt(getComputedStyle(na[0]).height,10);c=g.getPadding(c[0]);na.css("top",(b+c.top+c.bottom-e)/2+"px")}}}),
currentElem.bind("mouseleave",function(b){!a.options.enabled||W||ga||(a.hoverColumn=null,(b=a.getColumnFromElem(this))&&a.refresh(b),na&&na.remove(),W||q.css("cursor","default"))}),currentElem.bind("mousemove",function(b){if(a.options.enabled){var e=angular.element(this);if(1===b.which&&sa&&T&&a.hoverColumn&&a.hoverColumn!=T&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&T[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed])e=parseInt(getComputedStyle(e[0]).width,10),
na.empty(),Fb=-1,b.offsetX>e/2?(Fb=2,na.append('<span class="iui-treegrid-column-reorder-mark-right"></span>'),na.css("left","auto"),na.css("right","0")):(Fb=1,na.append('<span class="iui-treegrid-column-reorder-mark-left"></span>'),na.css("left","0"),na.css("right","auto"));else{b=g.getClientMousePos(b,this);var e=parseInt(a.getIndexFromElem(this),10),c=a.getColumnWidth(a.columnList[e]),k=10;a.isFilteringAllowed(a.columnList[e])&&(k=0);10>b.x&&!a.isColumnWithFixedWidth(e-1)&&Rd(e,"left")?(q.css("cursor",
"ew-resize"),bb="left"):b.x>c-k&&!a.isColumnWithFixedWidth(e)&&Rd(e,"right")?(q.css("cursor","ew-resize"),bb="right"):W||(q.css("cursor","default"),bb="none")}}}),currentElem.bind("mouseup",function(b){if(a.options.enabled){if(1===b.which&&sa&&T&&a.hoverColumn&&a.hoverColumn!=T&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&T[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]&&0!=a.callColumnPosChanging(T,a.hoverColumn)){b=a.columnList[0];0<=a.options.expandColIndex&&
a.options.expandColIndex<a.columnList.length&&(b=a.columnList[a.options.expandColIndex]);var e=a.getColumnCurrentIndex(T),e=a.getColumnRealIndex(e),c=a.getColumnCurrentIndex(a.hoverColumn),c=a.getColumnRealIndex(c);e!=c&&(e<c?1==Fb&&c--:e>c&&2==Fb&&c++,a.columnsObj.moveObject(e,c),a.updateColumnList(),b=a.getColumnCurrentIndex(b),b!=a.options.expandColIndex&&(a.options.expandColIndex=b),a.updateLayout(),a.callColumnPosChanged(T,a.hoverColumn))}T=null;Fb=-1;W=sa=!1;q.css("cursor","default")}}),currentElem.bind("mousedown",
function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor();g.getClientMousePos(b,this);var e=parseInt(a.getIndexFromElem(this),10);if(0===b.button&&!W){var c=e,k="none";0<=e&&e<a.columnList.length&&(k=a.columnList[e][a.options.columnFields.fixed]);switch(bb){case "left":"right"==k?c=e:(e=Pc(c-1,k))?(c=a.getColumnCurrentIndex(e),0<=c&&c<a.columnList.length&&(a.columnList[c][a.options.columnFields.fixed]!=k?(c=-1,W=!1):W=!0)):W=!1;0<=c&&(W=!0);break;case "right":"right"==
k?(e=Qc(c+1,k))?(c=a.getColumnCurrentIndex(e),0<=c&&c<a.columnList.length&&(a.columnList[c][a.options.columnFields.fixed]!=k?(c=-1,W=!1):W=!0)):W=!1:(c=e,W=!0)}!a.isColumnWithFixedWidth(c)&&W?a.setColumnResizingParams(c,bb,a.getMousePos(b).x):W=!1}if(!W&&(c=a.getColumnFromChildElem(this)))switch(k=g.getClientMousePos(b,this),sc(c,k)&&a.columnSelection(c),b.which){case 1:a.options.allowColumnReorder&&0!=c[a.options.columnFields.allowDrag]&&0==sa&&(T=c,a.getMousePos(b),sa=!0,(c=g.getBodyElem(q[0]))&&
angular.element(c).append(Ja));break;case 3:sc(c,k)&&a.callColumnRightClick(c,a.getMousePos(b))}}b.stopPropagation()}),function(b){b&&(b=a.getChildElement(b,"column-header-cell"))&&(b=a.getContentElement(b,"filter-button"))&&b.bind("mousedown",function(a){1==a.which&&Ue(this);a.stopPropagation()})}(currentElem)},wa=null,Ue=function(b){a.closeFilterWindow();var e=a.getColumnFromChildElem(b);if(e){var k=angular.element(b),p=k.parent().parent();if(rb){b='<div ng-include="'+e[a.options.columnFields.filterTemplate]+
'"></div>';wa=angular.element('<div class="iui-filter-window"></div>');wa.append(c(b)(m.$parent));var x=d(function(){angular.element(rb).append(wa);wa.bind("mousedown",function(a){a.stopPropagation()});k[0].getBoundingClientRect();var b=p[0].getBoundingClientRect(),c=angular.element(l)[0].pageXOffset,h=angular.element(l)[0].pageYOffset,f=d(function(){var p=b.bottom+h,k=b.right-(parseInt(getComputedStyle(wa[0]).width,10)+3)+c;e[a.options.columnFields.filterParams]&&"left"==e[a.options.columnFields.filterParams].templateAlignment&&
(k=b.left+c);wa.css("top",p+"px");wa.css("left",k+"px");d.cancel(f)},1);d.cancel(x)},1)}}};a.closeFilterWindow=function(){wa&&(wa.unbind("mousedown"),wa.remove())};var Ld=function(a){a&&a.unbind("click contextmenu blur dragover dragend focus keydown keyup keypress mousedown mouseenter mouseleave")},Oe=function(b){b&&(b.bind("click",function(a){a.preventDefault();ib()}),b.bind("contextmenu",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&(Ea=e,e[a.options.rowFields.contextMenu]&&0<e[a.options.rowFields.contextMenu].length&&
b.preventDefault(),Qd(b,e),b.stopPropagation())}),b.bind("dragover",function(b){var e=a.getRowFromElem(this);if(e&&a.isRowEnabled(e)){if(a.isScrollBarVisible("vertical")){var e=a.getMousePos(b),c=q[0].getBoundingClientRect();e.x-=angular.element(l)[0].pageXOffset;e.y-=angular.element(l)[0].pageYOffset;var h=c.top+D+25,c=c.bottom-J-25;K&&y&&(c-=y[0].offsetHeight);e.y<h?tc(!1):e.y>c?tc(!0):Gb()}else Gb();b.stopPropagation()}}),b.bind("dragend",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&
(b.preventDefault(),a.dragDropStatus(!1),a.dropMark(),z.getData().source||z.clearData())}),b.bind("mouseenter",function(b){if(!ga){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&!sa&&(a.hoverRow=e,a.refresh(e),a.callRowHover(b,e),a.options.hoverSelection&&(Xa=d(function(){Xa&&a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey)},500)))}}),b.bind("mouseleave",function(b){ga||(a.hoverRow=null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refresh(b),Xa&&(d.cancel(Xa),Xa=null))}),b.bind("keydown",
function(b){var e=a.getRowFromElem(this);if(e&&a.isRowEnabled(e)){var c=!0;a.callKeyDown(b,e);var h=a.getRowCurrentIndex(e);switch(b.keyCode){case 9:Sd(b,e,h);break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:c=!1;break;case 33:Td(b,h);break;case 34:Ud(b,h);break;case 35:Vd(b,h);break;case 36:Wd(b,h);break;case 37:Xd(b,e,h);break;case 32:Yd(b,e);break;case 38:Sc(b,h);break;case 39:Zd(b,e,h);break;case 40:Tc(b,h);break;default:(b.ctrlKey||b.metaKey)&&
a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}c&&b.stopPropagation()}}),b.bind("keyup",function(b){var e=a.getRowFromElem(this);if(e&&a.isRowEnabled(e)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,e)}}),b.bind("keypress",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&a.callKeyPress(b,e)}),b.bind("mousedown",function(b){a.removeDropDownList();
a.closeFilterWindow();a.closeEditor()}),b.bind("focus",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)?a.callGotFocus(b,e):a.updateFocus()}),b.bind("blur",function(b){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&a.callLostFocus(b,e)}))},Pe=function(b){b&&(b.bind("dblclick",function(b){var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(a.toggle(e),a.updateFocus(a.getRowCurrentIndex(e),a.options.expandColIndex),b.stopPropagation())}),b.bind("click",function(b){var e=a.getRowFromChildElem(this);
e&&a.isRowEnabled(e)&&(a.toggle(e),a.updateFocus(a.getRowCurrentIndex(e),a.options.expandColIndex),b.stopPropagation())}),b.bind("touchend",function(b){b.preventDefault();var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(a.toggle(e),a.updateFocus(a.getRowCurrentIndex(e),a.options.expandColIndex),b.stopPropagation())}))},Md=function(a){a&&a.unbind("click dblclick touchend")},uc={x:0,y:0},Hb={x:0,y:0},Ib=!1,Uc=!1,cb=null,$d=function(){return{x:angular.element(l)[0].pageXOffset,y:angular.element(l)[0].pageYOffset}},
Jb=function(a){var b=$d();return{x:a.x-b.x,y:a.y-b.y}},Qe=function(e,c,k){e&&(e.bind("dragstart",function(b){if(a.labelEditStatus())b.preventDefault();else{document.activeElement&&document.activeElement.blur();z.clearData();var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e))if(ac(),a.isDragAllowed(e)){a.dragDropStatus(!0);a.addDropMark();b.dataTransfer?(b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text",e[a.options.rowFields.id]?e[a.options.rowFields.id].toString():"")):b.originalEvent&&
b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="move",b.originalEvent.dataTransfer.setData("text",e[a.options.rowFields.id]?e[a.options.rowFields.id].toString():""));b={source:e,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":b.source=a.options.selectedRows;break;case "multi-extended":b.source=a.options.selectedRows}z.setData(b)}else b.dataTransfer?b.dataTransfer.effectAllowed="none":b.originalEvent&&b.originalEvent.dataTransfer&&
(b.originalEvent.dataTransfer.effectAllowed="none")}}),e.bind("dragover",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=angular.element(this);b.preventDefault();var p=!0;b.dataTransfer?p="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(p="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(p&&(e=a.getRowFromChildElem(c))){var p=c[0].getBoundingClientRect(),h=angular.element(l)[0].pageXOffset,k=angular.element(l)[0].pageYOffset,
d=a.getMousePos(b);d.x-=p.left+h;d.y-=p.top+k;c=z.getDropPos(d,{x:0,y:0,width:c[0].offsetWidth,height:c[0].offsetHeight});h=z.getData();p=a.isDropAllowed(h.source,e,c);k={event:b,sourceTree:h.sourceCtrl?h.sourceCtrl.getCtrlName():"",dragRow:h.source,targetTree:a.getCtrlName(),targetRow:e,isDropAllowed:p,dropPos:c,mousePos:a.getMousePos(b)};k=a.callDragOver(k);if(p&&!1!==k){k=a.getMousePos(b);b=k.y+16;k=k.x+20;d=a.getDropMarkWindow();d.empty();var f="iui-drop-marker-move-in";switch(c){case 1:f="iui-drop-marker-move-up";
break;case 2:f="iui-drop-marker-move-down"}d.append("<span class='"+f+"'></span><span class='iui-drop-marker-title'>"+e[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:k});a.dropMark(p);z.setData({source:h.source,sourceList:h.sourceList,target:e,dropPos:c})}else b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark()}}}),e.bind("drop",function(b){var e=a.getRowFromChildElem(this);
if(e&&a.isRowEnabled(e)){var c=angular.element(this);b.preventDefault();Ba();a.dropMark();e=!0;b.dataTransfer?e="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(e="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(e){var p=a.getRowFromChildElem(c);if(p){var c=z.getData(),h=c.source;h||(h=a.getDnDSource(b));if(e=a.isDropAllowed(h,p,c.dropPos)){a.toggle(p,!0);var k=a.getMousePos(b);h&&(e={event:b,sourceTree:c.sourceCtrl?c.sourceCtrl.getCtrlName():
"",dragRow:h,targetTree:a.getCtrlName(),targetRow:p,targetCell:a.getCellAt(k.x,k.y),isDropAllowed:e,dropPos:c.dropPos,mousePos:k},!1!==a.callDragDrop(e)&&(a.drop(c),m.$$phase||m.$apply()))}}}z.clearData();b.stopPropagation()}}),e.bind("dragenter",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){b.preventDefault();if(a.options.autoExpand)var c=d(function(){hb||(hb=d(function(){hb&&a.toggle(e,!0)},750));d.cancel(c)},1);var p=z.getData();p.source||(p.source=a.getDnDSource(b));p=
{event:b,sourceTree:p.sourceCtrl?p.sourceCtrl.getCtrlName():"",dragRow:p.source,targetTree:a.getCtrlName(),targetRow:p.target,mousePos:a.getMousePos(b)};a.callDragEnter(p);b.stopPropagation()}}),e.bind("dragleave",function(b){a.hoverRow=null;var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(b.preventDefault(),Ba(),e=z.getData(),e.source||(e.source=a.getDnDSource(b)),e={event:b,sourceTree:e.sourceCtrl?e.sourceCtrl.getCtrlName():"",dragRow:e.source,targetTree:a.getCtrlName(),targetRow:e.target,
mousePos:a.getMousePos(b)},a.callDragLeave(e),b.stopPropagation())}),e.bind("touchstart",function(e){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&(e.preventDefault(),(c=a.getTouchData(e))&&0<c.length)){Uc=!0;var p=d(function(){Uc=!1;d.cancel(p)},750);uc=Jb({x:c[0].pageX,y:c[0].pageY});a.closeFilterWindow();c=uc;if((c=a.getRowAt(c.x,c.y))&&a.isRowEnabled(c)){var h=angular.element(this);a.mouseButtonStatus(!0);cb=c;var k=a.getRowCurrentIndex(c),g=parseInt(a.getIndexFromElem(this),10),
m=a.getCell(k,g),l=a.getCellType(m,g),n=null,q=a.options.editorSettings;h[0].focus();a.updateFocus(k,g);m&&(n=a.getColumnById(m[a.options.cellFields.cid]));!n&&0<=g&&g<a.columnList.length&&(n=a.columnList[g]);var r="click"==a.options.editorSettings.activate;n&&n[a.options.columnFields.editorSettings]&&(q=n[a.options.columnFields.editorSettings],r=void 0!=q.activate?"click"==q.activate:r);m&&m!=f?a.closeEditor(f):a.closeEditor();switch(l){case "checkbox":break;case "combobox":a.rowSelection(c,e.shiftKey,
e.ctrlKey,e.metaKey);m&&0!=m[a.options.cellFields.allowEdit]&&n&&r?ub(angular.element(this),q,k,g):a.removeDropDownList();break;case "incell":a.rowSelection(c,e.shiftKey,e.ctrlKey,e.metaKey);!b&&m&&0!=m[a.options.cellFields.allowEdit]&&r&&a.openInCellEditor(h,m,n);break;case "dropdown":a.rowSelection(c,e.shiftKey,e.ctrlKey,e.metaKey);!b&&m&&0!=m[a.options.cellFields.allowEdit]&&r&&a.openDropDownEditor(h,m,n);break;default:a.rowSelection(c,e.shiftKey,e.ctrlKey,e.metaKey),a.removeDropDownList(),m&&
0!=m[a.options.cellFields.allowEdit]&&r&&Yb(e,angular.element(this))}}}}),e.bind("touchmove",function(b){var e,c,h=a.getRowFromChildElem(this);if(h&&a.isRowEnabled(h)&&(h=a.getTouchData(b))&&0<h.length){Hb=Jb({x:h[0].pageX,y:h[0].pageY});var h=Math.abs(Hb.x-uc.x),p=Math.abs(Hb.y-uc.y),k=q[0].getBoundingClientRect();if(z.hitTest(Hb.x,Hb.y,k)){if(b.preventDefault(),I&&I.css("display","block"),!Uc)if(!Ib&&(2<h||2<p)&&cb&&a.isRowEnabled(cb))if(angular.element(this),a.labelEditStatus())b.preventDefault();
else{Ib=!0;z.clearData();if((h=a.getTouchData(b))&&0<h.length&&(Jb({x:h[0].pageX,y:h[0].pageY}),cb&&a.isRowEnabled(cb)&&(ac(),a.isDragAllowed(cb)))){a.dragDropStatus(!0);a.addDropMark();h={source:cb,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":h.source=a.options.selectedRows;break;case "multi-extended":h.source=a.options.selectedRows}z.setData(h);if(h=a.getCellElemFromRow(cb))if(h=a.getContentElement(h))I.empty(),I.append(h.clone()),I.css("display",
"none"),q.append(I)}b.stopPropagation()}else if(Ib&&(angular.element(this),b.preventDefault(),(p=a.getTouchData(b))&&0<p.length)){var h=$d(),d=Jb({x:p[0].pageX,y:p[0].pageY});if(p=a.getRowAt(d.x,d.y)){var f=a.getCellElemFromRow(p);if(f){var k=f[0].getBoundingClientRect(),f=z.getDropPos({x:d.x-k.left,y:d.y-k.top},{x:0,y:0,width:f[0].offsetWidth,height:f[0].offsetHeight}),k=z.getData(),g=a.isDropAllowed(k.source,p,f);b={event:b,sourceTree:k.sourceCtrl?k.sourceCtrl.getCtrlName():"",dragRow:k.source,
targetTree:a.getCtrlName(),targetRow:p,isDropAllowed:g,dropPos:f,mousePos:d};c=q[0].getBoundingClientRect();e=d.x-c.left;c=d.y-c.top;I.css("top",c-16+"px");I.css("left",e+"px");I.css("display","block");b=a.callDragOver(b);if(g&&0!=b){b=d.y+h.y+16;h=d.x+h.x+20;d=a.getDropMarkWindow();d.empty();e="iui-drop-marker-move-in";switch(f){case 1:e="iui-drop-marker-move-up";break;case 2:e="iui-drop-marker-move-down"}d.append("<span class='"+e+"'></span><span class='iui-drop-marker-title'>"+p[a.options.rowFields.text]+
"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:h});a.dropMark(g);z.setData({source:k.source,sourceList:k.sourceList,target:p,dropPos:f})}else a.dropMark(),I&&I.css("display","none")}}else k=q[0].getBoundingClientRect(),p=k.top+D,k=k.bottom-J,K&&y&&(k-=y[0].offsetHeight),!a.options.allowDrop||d.y<p||d.y>k?(a.dropMark(),I&&I.css("display","none")):(c=q[0].getBoundingClientRect(),e=d.x-c.left,c=d.y-c.top,I.css("top",c-16+"px"),I.css("left",e+"px"),I.css("display","block"),p=z.getData(),
k={source:p.source,sourceCtrl:p.sourceCtrl,target:null,dropPos:-1},z.setData(k),b={event:b,sourceTree:p.sourceCtrl?p.sourceCtrl.getCtrlName():"",dragRow:p.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:d},b=a.callDragOver(b),0==b?a.dropMark():(b=d.y+h.y+16,h=d.x+h.x+20,d=a.getDropMarkWindow(),d.empty(),d.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(m.name?m.name:"TreeGrid")+"</span>"),a.updateDropMarkElem(a.getDropMarkWindow(),
{top:b,left:h}),a.dropMark(!0)))}}else b.preventDefault(),a.dropMark(),a.cancelScrollTimer(),I&&I.css("display","none")}}),e.bind("touchend",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){if((e=a.getTouchData(b))&&0<e.length){var e=Jb({x:e[0].pageX,y:e[0].pageY}),c=q[0].getBoundingClientRect();if(z.hitTest(e.x,e.y,c))if(Ib){angular.element(this);b.preventDefault();Ba();a.dropMark();Wb();if((e=a.getTouchData(b))&&0<e.length){var e=Jb({x:e[0].pageX,y:e[0].pageY}),h=a.getRowAt(e.x,
e.y);if(h){var c=z.getData(),k=c.source,p=a.isDropAllowed(k,h,c.dropPos);p&&(a.toggle(h,!0),k&&(e={event:b,sourceTree:c.sourceCtrl?c.sourceCtrl.getCtrlName():"",dragRow:k,targetTree:a.getCtrlName(),targetRow:h,isDropAllowed:p,dropPos:c.dropPos,mousePos:e},e=a.callDragDrop(e),!1!==e&&(a.drop(c),m.$$phase||m.$apply())))}else a.dropMark(),h=q[0].getBoundingClientRect(),c=h.top+D,h=h.bottom-J,K&&y&&(h-=y[0].offsetHeight),e.y>=c&&e.y<=h&&(c=z.getData(),c.source&&(e={event:b,sourceTree:c.sourceCtrl?c.sourceCtrl.getCtrlName():
"",dragRow:c.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:e},e=a.callDragDrop(e),!1!==e&&(a.drop(c),m.$$phase||m.$apply())))}z.clearData();a.dragDropStatus(!1);b.stopPropagation()}else a.mouseButtonStatus(!1),(e=a.getRowFromChildElem(this))&&a.isRowEnabled(e)&&a.updateSelection(b,e,b.shiftKey),ac()}e=Ib;a.removeDropMark();Wb();Hb={x:0,y:0};Ib=!1;cb=null;e&&b.stopPropagation()}}),e.bind("dblclick",function(e){var c=a.getRowFromChildElem(this);
if(c&&a.isRowEnabled(c)){var h=angular.element(this);e.preventDefault();if(1===e.which){var k=a.getRowCurrentIndex(c),p=parseInt(a.getIndexFromElem(this),10),d=a.getCell(k,p),f=a.getCellType(d,p),g=null,m=a.options.editorSettings;d&&(g=a.getColumnById(d[a.options.cellFields.cid]));!g&&0<=p&&p<a.columnList.length&&(g=a.columnList[p]);var l="dblclick"==a.options.editorSettings.activate;g&&g[a.options.columnFields.editorSettings]&&(m=g[a.options.columnFields.editorSettings],l=void 0!=m.activate?"dblclick"==
m.activate:l);switch(f){case "checkbox":break;case "combobox":d&&0!=d[a.options.cellFields.allowEdit]&&g&&l?ub(angular.element(this),m,k,p):a.removeDropDownList();break;case "incell":!b&&d&&0!=d[a.options.cellFields.allowEdit]&&l&&a.openInCellEditor(h,d,g);break;case "dropdown":!b&&d&&0!=d[a.options.cellFields.allowEdit]&&l&&a.openDropDownEditor(h,d,g);break;default:a.removeDropDownList(),d&&0!=d[a.options.cellFields.allowEdit]&&l&&Yb(e,angular.element(this),0)}0!=a.callRowDblClick(c,a.getMousePos(e))&&
"checkbox"!=f&&"checkbox"!=f&&d&&!l&&(a.toggle(c),a.updateFocus(k,p))}e.stopPropagation()}}),e.bind("mouseenter",function(e){if(!ga){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&!sa){var h=a.getRowCurrentIndex(c),k=parseInt(a.getIndexFromElem(this),10);if(h=a.getCell(h,k))if(a.hoverCell=h,a.refresh(c),a.callCellHover(e,h),e=angular.element(this),h&&0!=h[a.options.cellFields.allowEdit])switch(k=a.getCellType(h,k),k){case "combobox":sb||qc(e);break;case "incell":b&&h==f||Ab(e,k);break;
case "dropdown":b&&h!=f||Ab(e,k);break;default:Da(),qb()}else Da()}}}),e.bind("mouseleave",function(b){if(!ga&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);var e=parseInt(a.getIndexFromElem(this),10);a.getCell(b,e)&&(Da(),qb())}}),e.bind("keydown",function(e){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var h=!0,k=angular.element(this);a.callKeyDown(e,c);var p=a.getRowCurrentIndex(c),d=parseInt(a.getIndexFromElem(this),10),f=a.getCell(p,
d),g=a.getCellType(f,d),m=a.getColumnById(f[a.options.cellFields.cid]);!m&&0<=d&&d<a.columnList.length&&(m=a.columnList[d]);switch(e.keyCode){case 9:Sd(e,c,p,d);break;case 13:switch(g){case "checkbox":ae(f,d);break;case "combobox":f&&0!=f[a.options.cellFields.allowEdit]?m&&ub(angular.element(this),m[a.options.columnFields.editorSettings],p,d):a.removeDropDownList();break;case "incell":!b&&f&&0!=f[a.options.cellFields.allowEdit]&&a.openInCellEditor(k,f,m);break;case "dropdown":!b&&f&&0!=f[a.options.cellFields.allowEdit]&&
a.openDropDownEditor(k,f,m);break;default:f&&0!=f[a.options.cellFields.allowEdit]&&Yb(e,angular.element(this),0)}break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:h=!1;break;case 33:Td(e,p,d);break;case 34:Ud(e,p,d);break;case 35:Vd(e,p,d);break;case 36:Wd(e,p,d);break;case 37:Xd(e,c,p,d);break;case 32:Yd(e,c,f,d);break;case 38:Sc(e,p,d);break;case 39:Zd(e,c,p,d);break;case 40:Tc(e,p,d);break;default:(e.ctrlKey||e.metaKey)&&a.updateSelectionStatus("ctrl"),
e.shiftKey&&a.updateSelectionStatus("shift")}h&&e.stopPropagation()}}),e.bind("keyup",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,e);b.stopPropagation()}}),e.bind("keypress",function(b){var e=a.getRowFromChildElem(this);e&&a.isRowEnabled(e)&&(a.callKeyPress(b,e),b.stopPropagation())}),e.bind("click",
function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){if(1===b.which){var c=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10),c=a.getCell(c,h);a.callCellClick(b,e,c,a.getMousePos(b));a.callRowClick(b,e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("mousedown",function(e){a.closeFilterWindow();var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var h=angular.element(this);a.mouseButtonStatus(!0);switch(e.which){case 1:var k=a.getRowCurrentIndex(c),p=parseInt(a.getIndexFromElem(this),
10),d=a.getCell(k,p),g=a.getCellType(d,p),m=null,l=a.options.editorSettings;d&&(m=a.getColumnById(d[a.options.cellFields.cid]));!m&&0<=p&&p<a.columnList.length&&(m=a.columnList[p]);var n="click"==a.options.editorSettings.activate;m&&m[a.options.columnFields.editorSettings]&&(l=m[a.options.columnFields.editorSettings],n=void 0!=l.activate?"click"==l.activate:n);d&&d!=f?a.closeEditor(f):a.closeEditor();switch(g){case "checkbox":break;case "combobox":a.rowSelection(c,e.shiftKey,e.ctrlKey,e.metaKey);
d&&0!=d[a.options.cellFields.allowEdit]&&m&&n?ub(angular.element(this),l,k,p):a.removeDropDownList();break;case "dropdown":a.rowSelection(c,e.shiftKey,e.ctrlKey,e.metaKey);!b&&d&&0!=d[a.options.cellFields.allowEdit]&&n&&a.openDropDownEditor(h,d,m);break;case "incell":a.rowSelection(c,e.shiftKey,e.ctrlKey,e.metaKey);!b&&d&&0!=d[a.options.cellFields.allowEdit]&&n&&a.openInCellEditor(h,d,m);break;default:if("image"==g?0!=l.allowSelection:1)a.rowSelection(c,e.shiftKey,e.ctrlKey,e.metaKey),a.removeDropDownList(),
d&&0!=d[a.options.cellFields.allowEdit]&&n&&Yb(e,angular.element(this))}break;case 3:a.rowSelection(c,e.shiftKey,e.ctrlKey,e.metaKey),a.callRowRightClick(c,a.getMousePos(e))}e.stopPropagation()}}),e.bind("mouseup",function(b){a.mouseButtonStatus(!1);if(1==b.which){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10),c=a.getCell(c,h),k=a.getCellType(c,h),p=null,d=a.options.editorSettings;c&&(p=a.getColumnById(c[a.options.cellFields.cid]));
!p&&0<=h&&h<a.columnList.length&&(p=a.columnList[h]);p&&p[a.options.columnFields.editorSettings]&&(d=p[a.options.columnFields.editorSettings]);("image"==k?0!=d.allowSelection:1)&&a.updateSelection(b,e,b.shiftKey)}ac()}}),e.bind("focus",function(e){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var h=a.getRowCurrentIndex(c),k=parseInt(a.getIndexFromElem(this),10),h=a.getCell(h,k);a.callGotFocus(e,c,h);if(h&&0!=h[a.options.cellFields.allowEdit])switch(e=angular.element(this),k=a.getCellType(h,
k),k){case "combobox":sb||qc(e);break;case "incell":b||Ab(e,k);break;case "dropdown":b||Ab(e,k);break;default:Da()}else Da()}}),e.bind("blur",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var c=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10),c=a.getCell(c,h);a.callLostFocus(b,e,c)}}))},Nd=function(a){a&&a.unbind("blur click dragstart dragover drop dragenter dragleave dblclick focus keydown keypress keyup mouseenter mouseleave mousemove mousedown mouseup touchstart touchmove touchend")},
Re=function(b){b&&(b.bind("mouseenter",function(b){if(!ga){var e=a.getRowFromElem(this);e&&a.isRowEnabled(e)&&!sa&&(a.hoverRow=e,a.refreshHover(e),a.callRowHover(b,e))}}),b.bind("mouseleave",function(b){ga||(a.hoverRow=null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refreshHover(b))}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}))},Se=function(e,c,k){e&&(e.bind("touchstart",function(e){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){e.preventDefault();
a.closeFilterWindow();e=angular.element(this);var c=a.getRowCurrentIndex(c),h=parseInt(a.getIndexFromElem(this),10),k=a.getCell(c,h),p=a.getCellType(k,h),d=null,g=a.options.editorSettings;e[0].focus();k&&(d=a.getColumnById(k[a.options.cellFields.cid]));!d&&0<=h&&h<a.columnList.length&&(d=a.columnList[h]);var m="click"==a.options.editorSettings.activate;d&&d[a.options.columnFields.editorSettings]&&(g=d[a.options.columnFields.editorSettings],m=void 0!=g.activate?"click"==g.activate:m);k&&k!=f?a.closeEditor(f):
a.closeEditor();switch(p){case "checkbox":break;case "combobox":k&&0!=k[a.options.cellFields.allowEdit]&&d&&m?ub(angular.element(this),g,c,h):a.removeDropDownList();break;case "incell":!b&&k&&0!=k[a.options.cellFields.allowEdit]&&m&&a.openInCellEditor(e,k,d);break;case "dropdown":!b&&k&&0!=k[a.options.cellFields.allowEdit]&&m&&a.openDropDownEditor(e,k,d);break;default:a.removeDropDownList()}}}),e.bind("mouseenter",function(e){if(!ga){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&!sa){var h=
a.getRowCurrentIndex(c),k=parseInt(a.getIndexFromElem(this),10);if(h=a.getCell(h,k))if(a.hoverCell=h,a.refreshHover(c),a.callCellHover(e,h),e=angular.element(this),h&&0!=h[a.options.cellFields.allowEdit])switch(k=a.getCellType(h,k),k){case "combobox":sb||qc(e);break;case "incell":b&&h==f||Ab(e,k);break;case "dropdown":b&&h!=f||Ab(e,k);break;default:Da(),qb()}else Da()}}}),e.bind("mouseleave",function(b){if(!ga&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);
var e=parseInt(a.getIndexFromElem(this),10);a.getCell(b,e)&&(Da(),qb())}}),e.bind("click",function(b){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){if(1===b.which){var c=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10),c=a.getCell(c,h);a.callCellClick(b,e,c,a.getMousePos(b));a.callRowClick(b,e,a.getMousePos(b))}b.stopPropagation()}}),e.bind("dblclick",function(e){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var h=angular.element(this);e.preventDefault();if(1===
e.which){var k=a.getRowCurrentIndex(c),p=parseInt(a.getIndexFromElem(this),10),d=a.getCell(k,p),f=a.getCellType(d,p),g=null,m=a.options.editorSettings;d&&(g=a.getColumnById(d[a.options.cellFields.cid]));!g&&0<=p&&p<a.columnList.length&&(g=a.columnList[p]);var l="dblclick"==a.options.editorSettings.activate;g&&g[a.options.columnFields.editorSettings]&&(m=g[a.options.columnFields.editorSettings],l=void 0!=m.activate?"dblclick"==m.activate:l);switch(f){case "checkbox":break;case "combobox":d&&0!=d[a.options.cellFields.allowEdit]&&
g&&l?ub(angular.element(this),m,k,p):a.removeDropDownList();break;case "incell":!b&&d&&0!=d[a.options.cellFields.allowEdit]&&l&&a.openInCellEditor(h,d,g);break;case "dropdown":!b&&d&&0!=d[a.options.cellFields.allowEdit]&&l&&a.openDropDownEditor(h,d,g);break;default:a.removeDropDownList()}a.callRowDblClick(c,a.getMousePos(e))}e.stopPropagation()}}),e.bind("mousedown",function(e){a.closeFilterWindow();var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var h=angular.element(this);a.mouseButtonStatus(!0);
switch(e.which){case 1:var c=a.getRowCurrentIndex(c),k=parseInt(a.getIndexFromElem(this),10),p=a.getCell(c,k),d=a.getCellType(p,k),g=null,m=a.options.editorSettings;p&&(g=a.getColumnById(p[a.options.cellFields.cid]));!g&&0<=k&&k<a.columnList.length&&(g=a.columnList[k]);var l="click"==a.options.editorSettings.activate;g&&g[a.options.columnFields.editorSettings]&&(m=g[a.options.columnFields.editorSettings],l=void 0!=m.activate?"click"==m.activate:l);p&&p!=f?a.closeEditor(f):a.closeEditor();switch(d){case "checkbox":break;
case "combobox":p&&0!=p[a.options.cellFields.allowEdit]&&g&&l?ub(angular.element(this),m,c,k):a.removeDropDownList();break;case "dropdown":!b&&p&&0!=p[a.options.cellFields.allowEdit]&&l&&a.openDropDownEditor(h,p,g);break;case "incell":!b&&p&&0!=p[a.options.cellFields.allowEdit]&&l&&a.openInCellEditor(h,p,g);break;default:a.removeDropDownList()}break;case 3:a.callRowRightClick(c,a.getMousePos(e))}e.stopPropagation()}}),e.bind("mouseup",function(a){1==a.which&&ac()}))};a.getTopRow=function(){return a.isRowIndexInRange(w-
1)?a.currentList[w]:0<a.currentList.length?a.currentList[0]:null};a.getFooterElem=function(a){switch(a){case "left":return xa;case "right":return ha}return Ka};a.getHeaderElem=function(a){switch(a){case "left":return ia;case "right":return X}return oa};a.getRowElems=function(a,b){switch(a){case "left":switch(b){case "top":return la?la.find("tr"):null;case "bottom":return ma?ma.find("tr"):null;default:return La?La.find("tr"):null}case "right":switch(b){case "top":return ea?ea.find("tr"):null;case "bottom":return ya?
ya.find("tr"):null;default:return Ma?Ma.find("tr"):null}default:switch(b){case "top":return V?V.find("tr"):null;case "bottom":return U?U.find("tr"):null;default:return fa?fa.find("tr"):null}}};var be=function(b){var e="";b.icon?e=b.icon:a.options.rowIcon&&(e=a.options.rowIcon);return e},Vc=function(b){return b.icon||a.options.rowIcon},Sd=function(b,c,k,p){var e=a.currentList.length;0<e&&(b.shiftKey?g.isEqual(c[a.options.rowFields.id],a.currentList[0][a.options.rowFields.id])||Sc(b,k,p):g.isEqual(c[a.options.rowFields.id],
a.currentList[e-1][a.options.rowFields.id])||Tc(b,k,p))},Tc=function(b,c,k){b.preventDefault();focusDelayTime=0;var e=c,h=w+B-2,h=h<a.currentList.length-1?h:a.currentList.length-1;e>=h&&N&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);if(e=a.getNextRow(e)){c=a.getRowCurrentIndex(e);c>h&&N&&(a.ensureVisible(e,"bottom"),focusDelayTime=100);a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var f=d(function(){a.updateFocus(c,k);d.cancel(f)},focusDelayTime)}},
Sc=function(b,c,k){b.preventDefault();focusDelayTime=0;var e=w,e=0<e?e:0;c==e&&N&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);var h=a.getPrevRow(c);if(h){c=a.getRowCurrentIndex(h);c<e&&N&&(a.ensureVisible(h,"bottom"),focusDelayTime=100);a.rowSelection(h,b.shiftKey,b.ctrlKey);var f=d(function(){a.updateFocus(c,k);d.cancel(f)},focusDelayTime)}},Zd=function(b,c,k,p){b.preventDefault();if((void 0===p||0<=p&&p==a.options.expandColIndex)&&!a.isRowExpanded(c)&&
c[a.options.rowFields.rows]&&0<c[a.options.rowFields.rows].length)a.toggle(c,!0),a.updateFocus(k,p);else if(0<=p){focusDelayTime=0;var e=p+1;b=a.columnList.length-1;e===b&&(focusDelayTime=1);if(0<=e&&e<=b){b=g.getPageRect(q);c=a.getElemFromCell(k,e);c=g.getPageRect(c);c.left+c.width>b.left+b.width&&(b=a.scrollPos,b.x+=c.width,a.setScrollPos(b));var h=d(function(){a.updateFocus(k,e);d.cancel(h)},focusDelayTime)}}},Xd=function(b,c,k,p){b.preventDefault();if((void 0===p||0<=p&&p==a.options.expandColIndex)&&
a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&0<c[a.options.rowFields.rows].length)a.toggle(c,!1),a.updateFocus(k,p);else if(0<=p){focusDelayTime=0;var e=1<p?p-1:0;if(0<=e){b=g.getPageRect(q);c=a.getElemFromCell(k,e);c=g.getPageRect(c);c.left<b.left&&(b=a.scrollPos,b.x-=c.width,a.setScrollPos(b));var h=d(function(){a.updateFocus(k,e);d.cancel(h)},focusDelayTime)}}},Td=function(b,c,k){b.preventDefault();var e=c-B,e=0<e?e:0;if(e!==c){focusDelayTime=1;var h=a.getPrevRow(e+1);if(h){a.scrollTo(h);a.rowSelection(h,
b.shiftKey,b.ctrlKey,b.metaKey);m.$apply();var f=d(function(){a.updateFocus(a.getRowCurrentIndex(h),k);d.cancel(f)},focusDelayTime)}}},Ud=function(b,c,k){b.preventDefault();var e=c+B;a.options.showHeader&&e--;a.options.showFooter&&e--;e=e<a.currentList.length-1?e:a.currentList.length-1;if(e!==c){focusDelayTime=1;var h=a.getNextRow(e-1);if(h){a.scrollTo(h,"bottom");a.rowSelection(h,b.shiftKey,b.ctrlKey,b.metaKey);m.$apply();var f=d(function(){a.updateFocus(a.getRowCurrentIndex(h),k);d.cancel(f)},focusDelayTime)}}},
Vd=function(b,c,k){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:O.y});var e=a.getLastRow();if(e){a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var h=d(function(){a.updateFocus(a.getRowCurrentIndex(e),k);d.cancel(h)},1)}},Wd=function(b,c,k){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:0});var e=a.getFirstRow();if(e){a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var h=d(function(){a.updateFocus(a.getRowCurrentIndex(e),k);d.cancel(h)},1)}},ae=function(b,c){if(b&&0!=b[a.options.cellFields.allowEdit]){var e=
a.getColumnById(b[a.options.cellFields.cid]);!e&&0<=c&&c<a.columnList.length&&(e=a.columnList[c]);if(e){var h=b[a.options.cellFields.value];if((e=e[a.options.columnFields.editorSettings])&&1==e.threeState)switch(g.isString(h)||(h="unchecked"),h){case "checked":h="unchecked";break;case "indeterminate":h="checked";break;default:h="indeterminate"}else h=g.isBoolean(h)?!h:!0;b[a.options.cellFields.value]=h;m.$apply()}}},Yd=function(b,c,k,d){b.preventDefault();ae(k,d);a.rowSelection(c,b.shiftKey,b.ctrlKey,
b.metaKey,c.selected);m.$apply()},fa=null,V=null,U=null,Na=angular.element('<div class="iui-treegrid-block iui-treegrid-block-top"></div>'),oa=null,db=angular.element('<div class="iui-treegrid-block iui-treegrid-block-left"></div>'),L=0,Kb=0,ia=null,xa=null,La=null,la=null,ma=null,Oa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-right"></div>'),Fa=0,Lb=0,X=null,ha=null,Ma=null,ea=null,ya=null,Ga=angular.element('<div class="iui-treegrid-block iui-treegrid-block-bottom"></div>'),
Ka=null,w=0,A=null,v=null,pa=null,qa=null,B=100,P=0,G=0,jb=0,vc=0,D=0,J=0,kb=0,wc=0,Mb=0,xc=!1,ga=!1,bc=9,cc=9,yc=0,Pa=0,lb=0,vb=1,zc=0,Ac=0,mb=0,Nb=0,Bc=1,R=null,Y=null,K=!1,N=!1;this.scrollMousePos=null;var O={x:0,y:0},Cb=[];m.verScrollVisibility=!1;m.$watch("verScrollVisibility",function(b,c){b!=c&&a.updateCurrentLayout(!0)});a.getColumnWidth=function(b){var e=100;b&&b[a.options.columnFields.width]&&(e=b[a.options.columnFields.width],g.isPercent(e)?(b=q[0].clientWidth-2*a.columnList.length,N&&
M&&(b-=M[0].offsetWidth),e=Math.floor(parseInt(e,10)/100*b)):g.isString&&(e=parseInt(e,10)));return e};var dc=function(b){var e=0;if((b=a.getRowElems(b))&&0<b.length&&(b=angular.element(b[0]))&&(b=b.find("td"))&&0<b.length)for(var c=0;c<b.length;c++)var d=angular.element(b[c]),e=e+d[0].offsetWidth;return e},Ve=function(){var b=0;if(a.options.showHeader||a.options.showFooter){var c=a.options.showHeader?a.getHeaderElem():a.getFooterElem();if(c&&(c=c.find("td"))&&0<c.length)for(var k=0;k<c.length;k++)var d=
angular.element(c[k]),b=b+d[0].offsetWidth;a.isThereLeftFixedColumns&&(ia?L=ia[0].offsetWidth:xa&&(L=xa[0].offsetWidth),b+=L);a.isThereRightFixedColumns&&(X?Fa=X[0].offsetWidth:ha&&(Fa=ha[0].offsetWidth),b+=Fa)}else 0<a.currentList.length&&(fa&&(b+=dc()),a.isThereLeftFixedColumns&&(b+=dc("left")),a.isThereRightFixedColumns&&(b+=dc("right")));return b};a.updateScrollVisibility=function(){var a=d(function(){K||(y.css("display","none"),O.x=0);N||(M.css("display","none"),O.y=0);K&&N||Va.css("display",
"none");d.cancel(a)},1)};q.append(y);q.append(M);q.append(Va);a.updateScrollVisibility();var ce=function(){return V?V[0].offsetHeight:la?la[0].offsetHeight:ea?ea[0].offsetHeight:0},de=function(){return U?U[0].offsetHeight:ma?ma[0].offsetHeight:ya?ya[0].offsetHeight:0},ec=0,fc=999;a.updateViewSize=function(b){var e=d(function(){Mb=0;var b=q[0].clientWidth;N&&M&&(b-=M[0].offsetWidth);K=!1;0<a.columnList.length&&(Mb+=Ve(),Mb>b&&(y.unbind("mousedown"),y.css("display","block"),y.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();
a.closeFilterWindow();a.closeEditor(null,null,!0);b=g.getClientMousePos(b,this);var e=Math.floor(q[0].clientWidth);R&&(b.x<R[0].offsetLeft?a.setScrollPos({x:a.scrollPos.x-e,y:a.scrollPos.y}):b.x>R[0].offsetLeft+R[0].offsetWidth&&a.setScrollPos({x:a.scrollPos.x+e,y:a.scrollPos.y}))}}),R=angular.element(y.children().eq(0)),K=!0,R.bind("mousedown",function(b){a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which&&(E.scrollMousePos=a.getMousePos(b),xc=
!0));b.stopPropagation()})));N=!1;m.verScrollVisibility=!1;0<a.currentList.length&&!a.options.autoSize&&(b=0,a.options.paging.enabled&&Z&&(b=Z[0].offsetHeight),kb=ce(),wc=de(),b=q[0].clientHeight-b-(D+J)-kb-wc,K&&y&&(b-=y[0].offsetHeight),B=0<P?Math.floor(b/P)+1:0<D?Math.floor(b/D):100,B<a.currentList.length+1&&(M.unbind("mousedown"),M.css("display","block"),M.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor(null,null,!0);b=g.getClientMousePos(b,
this);var e=Math.floor(q[0].clientHeight);Y&&(b.y<Y[0].offsetTop?(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-e}),tc(!1,e)):b.y>Y[0].offsetTop+Y[0].offsetHeight&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+e}),tc(!0,e)))}}),Y=angular.element(M.children().eq(0)),N=!0,m.verScrollVisibility=!0,Y.bind("mousedown",function(b){if(a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which)){E.scrollMousePos=a.getMousePos(b);ga=!0;ec=0;fc=999;for(var e=
0,c=!1,h=!1,k=a.scrollPos.x+jb-(L+Fa),d=0;d<a.columnList.length;d++)if(!a.isColumnFixed(a.columnList[d])){var p=a.getColumnWidth(a.columnList[d])+4,e=e+p;!c&&e>=a.scrollPos.x&&(ec=d,c=!0);!h&&e>=k&&(fc=d,h=!0);if(c&&h)break}}b.stopPropagation()})));K||(y.unbind("mousedown"),O.x=0);N||(M.unbind("mousedown"),O.y=0);K&&N&&y.css("display","block");d.cancel(e);!K&&0<a.scrollPos.x&&a.setScrollPos({x:0,y:a.scrollPos.y});!N&&0<a.scrollPos.y&&a.setScrollPos({x:a.scrollPos.x,y:0})},1)};a.updateScrollView=function(){Wc()};
var Wc=function(){var b=d(function(){var e=0;a.options.paging.enabled&&Z&&(e=Z[0].offsetHeight);jb=q[0].offsetWidth-2;vc=q[0].offsetHeight-2-e;K&&(vc-=y[0].offsetHeight);N&&(jb-=M[0].offsetWidth);da.css("width",jb+"px");da.css("height",vc+"px");K&&(y.css("left","0px"),y.css("bottom",e+"px"),y.css("width",jb-2+"px"));var c=2;a.options.paging.enabled&&Z&&(c=4);N&&(M.css("top","0px"),M.css("right","0px"),M.css("height",vc-c+"px"));K&&N&&(Va.css("left","auto"),Va.css("right","0px"));var p=d(function(){kb=
ce();wc=de();var b=D+kb;K&&jb<Mb&&(Pa=2,lb=y[0].clientWidth-4,yc=0,lb>Pa&&(yc=lb-Pa),bc=Math.floor(yc*jb/Mb),9>bc&&(bc=9),R.css("width",bc+"px"),O.x=Mb-jb,vb=O.x/(yc-bc-2));var c=a.currentList.length+1;N&&0<a.currentList.length&&B<c&&(mb=2,Nb=M[0].clientHeight-4,zc=0,Nb>mb&&(zc=Nb-mb),cc=Math.floor(zc*B/c),9>cc&&(cc=9),Y.css("height",cc+"px"),Bc=(c-B+1)/(zc-cc-2),O.y=Math.floor((c-B+1)*P),0>O.y&&(O.y=0),0==w?Y.css("top",mb+"px"):w+B-1==a.currentList.length&&Y.css("top",Nb-Y[0].offsetHeight+"px"));
a.isThereLeftFixedColumns&&(ia?L=ia[0].offsetWidth:xa?L=xa[0].offsetWidth:0<a.currentList.length&&(L=dc("left")),Kb=q[0].clientHeight-e-D-J,K&&(Kb-=y[0].offsetHeight),db.css("top",D+"px"),db.css("width",L+"px"),db.css("height",Kb+"px"),oa&&oa.css("left",L+"px"),fa&&fa.css("left",L+"px"),V&&V.css("left",L+"px"),U&&U.css("left",L+"px"),Ka&&Ka.css("left",L+"px"));a.isThereRightFixedColumns&&(X?Fa=X[0].offsetWidth:ha?Fa=ha[0].offsetWidth:0<a.currentList.length&&(Fa=dc("right")),Lb=q[0].clientHeight-e-
D-J,K&&(Lb-=y[0].offsetHeight),c=0,N&&(c=M[0].offsetWidth),X&&X.css("right",c+"px"),Oa.css("top",D+"px"),Oa.css("right",c+"px"),Oa.css("width",Fa+"px"),Oa.css("height",Lb+"px"),ha&&ha.css("right",c+"px"));c=e;K&&y&&(c+=y[0].offsetHeight);Ga.css("bottom",c+"px");fa&&fa.css("top",b+"px");U&&U.css("bottom",J+"px");La&&La.css("top",kb+"px");Ma&&Ma.css("top",kb+"px");b=a.scrollPos.x;void 0!=b&&(0>b&&(b=0),b>O.x&&(b=O.x),a.scrollPos.x=b,b=!1!==a.options.rtl?Math.floor(a.scrollPos.x/vb)-(lb-R[0].offsetWidth-
Pa):Math.floor(a.scrollPos.x/vb)+Pa,K&&R&&R.css("left",b+"px"),Xc());a.updateAutoLayout();d.cancel(p)},1);d.cancel(b)},5)};a.updateColumnWidth=function(){if(a.options.fillSpace){for(var b=0,c=0;c<a.columnList.length;c++)b+=a.getColumnWidth(a.columnList[c])+4;if(b<q[0].clientWidth){for(var b=(q[0].clientWidth-b)/a.columnList.length,k,c=0;c<a.columnList.length;c++)k=a.getColumnWidth(a.columnList[c])+b,a.columnList[c][a.options.columnFields.width]=k;return!0}}return!1};m.onCellValueChanging=function(b,
c,k){var e=c+w,h=a.getCell(e,k);if(h&&0==h[a.options.cellFields.allowEdit])return!1;var h=!0,d=a.getColumnObject(k),f="label",g=null;d&&(f=d[a.options.columnFields.editorType],g=d[a.options.columnFields.editorSettings]);switch(f){case "checkbox":b=g&&1==g.threeState?b.checkState:b.checked;h=a.callCellValueChanging(a.getRowObject(e),a.getCellObject(e,k),b);break;case "combobox":h=a.callCellValueChanging(a.getRowObject(c),a.getCellObject(c,k),b.item)}return h};m.onCellValueChanged=function(b,c,k){var e=
c+w,h=a.getColumnObject(k),d="label",f=null;h&&(d=h[a.options.columnFields.editorType],f=h[a.options.columnFields.editorSettings]);switch(d){case "checkbox":b=f&&1==f.threeState?b.checkState:b.checked;a.callCellValueChanged(a.getRowObject(e),a.getCellObject(e,k),b);break;case "combobox":if(e=a.getCell(c,k))e[a.options.cellFields.value]=b.item,m.$apply(),"optimal"==a.options.displayMode&&a.updateView();a.removeDropDownList(!0);a.updateFocus(c,k);a.callCellValueChanged(a.getRowObject(c),a.getCellObject(c,
k),b.item)}};m.onEditorClick=function(b,c,k){c+=w;var e=a.getColumnObject(k),h="label";e&&(h=e[a.options.columnFields.editorType]);switch(h){case "checkbox":a.callCellClick(b,a.getRowObject(c),a.getCellObject(c,k),a.getMousePos(b))}};a.setDefaultCellValue=function(b,c,k){if(void 0==b[a.options.cellFields.value]){var e=void 0;switch(c){case "checkbox":e=k&&1==k.threeState?"unchecked":!1;break;case "image":e=""}void 0!=e&&(b[a.options.cellFields.value]=e)}};a.getColumnTemplateUrl=function(b,c){return c?
b[a.options.columnFields.templateSettings].footer?b[a.options.columnFields.templateSettings].footer.url:null:b[a.options.columnFields.templateSettings].header?b[a.options.columnFields.templateSettings].header.url:null};var Ob=function(b,c){c=void 0==c?"none":c;for(var e='<table cellpadding="0" cellspacing="0" style="position:absolute;',e=(b?e+'bottom:0;">':e+'top:0;">')+"<tr>",h,d=0;d<a.columnList.length;d++)h=a.columnList[d][a.options.columnFields.fixed],h=void 0==h?"none":h,h==c&&(b?(e+='<td iui-class="{{data['+
d+'].style.footer.general}}" data-index="'+d+'" data-element="column-footer">',e+='<div iui-class="{{data['+d+'].style.footer.cell}}" data-element="column-footer-cell"'):(e+='<td iui-class="{{data['+d+'].style.header.general}}" data-index="'+d+'" data-element="column-header">',e+='<div iui-class="{{data['+d+'].style.header.cell}}" data-element="column-header-cell"'),b?(e+=' iui-style="overflow:hidden;width:{{data['+d+"].width}}px;text-align:{{data["+d+"].footerAlignment}};",e=d==a.options.expandColIndex?
e+("padding-left:{{data["+d+'].indent}}px;">'):e+'">',a.columnList[d][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[d],!0)?(e+='<iui-item-content obj="data['+d+"].column."+a.options.columnFields.templateSettings+'.footer.templateObj" template-url="{{data['+d+"].column."+a.options.columnFields.templateSettings+'.footer.url}}"',e+=' data-element="footer-template-content" ng-cloak></iui-item-content>'):a.columnList[d][a.options.columnFields.footerContent]?e+=a.columnList[d][a.options.columnFields.footerContent]:
a.columnList[d][a.options.columnFields.footerTemplate]?e+='<div ng-include="'+a.columnList[d][a.options.columnFields.footerTemplate]+'" style="margin:0;padding:0"></div>':(e+='<span iui-class="{{data['+d+'].style.footer.content}}" data-element="cell-content"',e+=' iui-tooltip="data['+d+"].column."+a.options.columnFields.footerTooltip+'">',e+="{{data["+d+"].column."+a.options.columnFields.footerText+"}}</span>")):(e+=' iui-style="overflow:hidden;width:{{data['+d+"].width}}px;text-align:{{data["+d+
"].headerAlignment}};",e=d==a.options.expandColIndex?e+("padding-left:{{data["+d+'].indent}}px;">'):e+'">',e+='<span iui-class="{{data['+d+'].style.header.content}}" data-element="cell-content"',e+=' iui-tooltip="data['+d+"].column."+a.options.columnFields.headerTooltip+'">',e+="{{data["+d+"].column."+a.options.columnFields.headerText+"}}</span>",e+='<span iui-class="{{data['+d+'].style.filtering}}" data-index="'+d+'" data-element="filter-button" ng-show="data['+d+'].showFiltering"></span>',e+='<span iui-class="{{data['+
d+'].style.sorting}}" data-index="'+d+'" data-element="sort-button" ng-show="data['+d+'].showSorting"></span>'),e+="</div>",e+="</td>");return e+"</tr></table>"},za=function(b,c,k,d){if("optimal"==a.options.displayMode){c=void 0==c?"none":c;d='<tr class="iui-treegrid-row" data-index="'+b+'" data-fixed="'+d+'"';k&&(d+=' style="position:absolute;top:-9999px"');d+=">";for(var e=0;e<a.columnList.length;e++)k=a.columnList[e][a.options.columnFields.fixed],k=void 0==k?"none":k,k==c&&(d+='<td class="iui-treegrid-row-cell" data-element="cell" data-index="'+
e+'">',d+="<div",d+=' class="iui-treegrid-row-cell-content" data-element="cell-content"',d+=' style="width:0px;text-align:left;opacity:0;',0<a.options.rowHeight&&(d+="height:"+a.options.rowHeight+"px;"),d=e==a.options.expandColIndex?d+'padding-left:0px;">':d+'">',d+=ee(b,e),d+="</div>",d+="</td>");return d+"</tr>"}c=void 0==c?"none":c;d='<tr iui-class="{{data['+b+'].style}}" data-index="{{data['+b+'].index}}" data-fixed="'+d+'" tabindex="{{data['+b+'].tabindex}}"';k&&(d+=' style="position:absolute;top:-9999px"');
d+=">";for(e=0;e<a.columnList.length;e++)k=a.columnList[e][a.options.columnFields.fixed],k=void 0==k?"none":k,k==c&&(d+='<td iui-class="{{data['+b+"].cells["+e+'].style.cell}}" data-element="cell" data-index="'+e+'" draggable="{{data['+b+'].draggable}}" tabindex="{{data['+b+"].cells["+e+'].tabindex}}">',d+='<div ng-show="data['+b+'].visible"',d+=' iui-class="{{data['+b+"].cells["+e+'].style.content}}" data-element="cell-content"',d+=' iui-style="width:{{data['+b+"].cells["+e+"].width}}px;text-align:{{data["+
b+"].cells["+e+"].alignment}};",0<a.options.rowHeight&&(d+="height:"+a.options.rowHeight+"px;"),d=e==a.options.expandColIndex?d+("padding-left:{{data["+b+"].cells["+e+'].indent}}px;">'):d+'">',d+=ee(b,e),d+="</div>",d+="</td>");return d+"</tr>"},ee=function(b,c){if("optimal"==a.options.displayMode){var e="";c===a.options.expandColIndex&&(e+='<span data-element="expandbox"></span><span data-element="icon"></span>');var d=a.columnList[c][a.options.columnFields.editorSettings],h=nb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":e+=
'<iui-checkbox name="cb-'+g.getUniqueId(4)+'"';d&&1==d.threeState?(e+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(e+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+
c+')"'));e+=' click="onEditorClick(e, '+b+", "+c+')"';d&&d.style&&(e+=' control-style="data['+b+"].cells["+c+'].editorStyle"');e=e+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="</iui-checkbox>";break;case "combobox":e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+
b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";e+="</span>";break;case "image":e+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';e+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:h&&""!=h?e+='<iui-item-content obj="data['+
b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(e=e+'<span class="iui-treegrid-row-cell-label" data-element="content"'+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),e+=".</span>")}return e}e="";c===a.options.expandColIndex&&(e=e+('<span iui-class="{{data['+b+'].expandBox}}" data-element="expandbox" ng-show="data['+
b+'].expandBoxVisible"></span>')+('<span iui-class="{{data['+b+'].icon}}" data-element="icon" ng-show="data['+b+'].iconVisible"></span>'));d=a.columnList[c][a.options.columnFields.editorSettings];h=nb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":e+='<iui-checkbox name="cb-'+g.getUniqueId(4)+'"';d&&1==d.threeState?(e+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+
(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(e+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));e+=' click="onEditorClick(e, '+b+", "+c+')"';d&&d.style&&(e+=' control-style="data['+b+"].cells["+c+'].editorStyle"');e=e+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+
b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="</iui-checkbox>";break;case "combobox":e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";e+="</span>";break;case "image":e+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+
b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';e+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:h&&""!=h?e+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':
(e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.text+"}}",e+="</span>")}return e},We=function(){P=0;if(0<a.options.rowHeight){var b={top:0,bottom:0};if(a.options.controlStyle&&a.options.controlStyle.row&&a.options.controlStyle.row.cell&&a.options.controlStyle.row.cell.content){var h=angular.element('<div class="'+
a.options.controlStyle.row.cell.content+'" style="position:absolute;top:-9999999px;">Temp</div>');q.append(h);b=g.getPadding(h[0]);h.remove()}P=a.options.rowHeight+b.top+b.bottom+3}else if(0<a.currentList.length&&v){for(var b=[],k=[],h=[],f=[],x=[],m=[],l=0,n=0;n<a.currentList.length&&10>n;n++)b.push(za(n,"none",!0)),k.push(c(b[n])(v)),q.append(k[n]),a.isThereLeftFixedColumns&&(h.push(za(n,"left",!0)),f.push(c(h[n])(v)),q.append(f[n])),a.isThereRightFixedColumns&&(x.push(za(n,"right",!0)),m.push(c(x[n])(v)),
q.append(m[n])),l++;if(0<l)var r=d(function(){for(var b=0,e=0,c=0,h=0;h<l;h++)b+=k[h][0].offsetHeight,k[h].remove(),a.isThereLeftFixedColumns&&(e+=f[h][0].offsetHeight,f[h].remove()),a.isThereRightFixedColumns&&(c+=m[h][0].offsetHeight,m[h].remove());P=Math.floor(Math.max(Math.max(b,e),c)/l);d.cancel(r)},1)}},H=null,Yc=0,Zc=0,Z=angular.element('<div class="iui-pagination-panel"></div>'),Xe=function(){H&&H.$destroy();Z.empty();Z.remove();Zc=Yc=0;if(a.options.paging.showControlPanel){H=m.$new();H.currentPage=
0;H.minPages=0;H.numPages=a.pageList.length;0<H.numPages&&0==H.currentPage&&(H.currentPage=1);H.onFirstPage=function(){a.options.enabled&&(a.firstPage(),H.currentPage=a.currentPageNumber)};H.onLastPage=function(){a.options.enabled&&(a.lastPage(),H.currentPage=a.currentPageNumber)};H.onNextPage=function(){a.options.enabled&&(a.nextPage(),H.currentPage=a.currentPageNumber)};H.onPrevPage=function(){a.options.enabled&&(a.prevPage(),H.currentPage=a.currentPageNumber)};H.$watch("currentPage",function(b,
e){a.options.enabled&&b!=e&&1<=b&&b<=a.pageList.length&&a.setCurrentPage(b)});Yc=q[0].clientWidth;var b="iui-pagination-panel-button";a.options.enabled||(b+=" iui-pagination-panel-button-disabled");for(var d="",k=0;6>k;k++)switch(k){case 0:d+='<span class="'+b+' iui-pagination-first" ng-click="onFirstPage()"></span>';break;case 1:d+='<span class="'+b+' iui-pagination-prev" ng-click="onPrevPage()"></span>';break;case 2:d+='<input class="iui-pagination-panel-input" ng-model="currentPage" type="number" ng-attr-min="{{minPages}}" ng-attr-max="{{numPages}}" />';
break;case 3:d+='<span class="iui-pagination-panel-label"> / {{numPages}}</span>';break;case 4:d+='<span class="'+b+' iui-pagination-next" ng-click="onNextPage()"></span>';break;case 5:d+='<span class="'+b+' iui-pagination-last" ng-click="onLastPage()"></span>'}b=c(d)(H);Z.append(b);q.append(Z);Z.css("width",Yc+"px");b&&(g.getMargin(b[0]),d=g.getPadding(Z[0]),Zc=b[0].offsetHeight+(d.top+d.bottom)-2,Z.css("height",Zc+"px"));a.updatePaginationPanel()}};a.updatePaginationPanel=function(){var b=1;a.options.enabled||
(b=.5);if(Z){var c=Z.find("span"),d;if(c&&0<c.length)for(var f=0;f<c.length;f++)d=angular.element(c[f]),d.css("opacity",b);(c=Z.find("input"))&&0<c.length&&(d=angular.element(c[0]),a.options.enabled?d.removeAttr("disabled"):d.attr("disabled","true"))}};a.resetPageNumber=function(){a.currentPageNumber=1;H&&(H.currentPage=0<H.numPages?1:0)};a.updatePageNumber=function(){a.currentPageNumber>a.pageList.length&&(0==a.pageList.length?a.resetPageNumber():(a.currentPageNumber=a.pageList.length,H&&(H.currentPage=
a.currentPageNumber)))};var eb=angular.element('<div class="iui-treegrid-block" style="position:absolute;top:-9999999px"></div>'),ra=angular.element('<div class="iui-treegrid-block iui-treegrid-block-top" style="position:absolute;top:-9999999px"></div>'),Aa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-bottom" style="position:absolute;top:-9999999px"></div>'),Qa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-left" style="position:absolute;top:-9999999px"></div>'),
Ra=angular.element('<div class="iui-treegrid-block iui-treegrid-block-right" style="position:absolute;top:-9999999px"></div>');angular.element('<div class="iui-treegrid-block iui-treegrid-block-top" style="position:absolute;top:-9999999px"></div>');var fe=function(){eb&&(eb.empty(),eb.remove());ra&&(ra.empty(),ra.remove());Aa&&(Aa.empty(),Aa.remove());Qa&&(Qa.empty(),Qa.remove());Ra&&(Ra.empty(),Ra.remove())},Ye=function(){if(1<a.updateStatus)Q("end");else var b=d(function(){if(0<a.columnList.length&&
1==a.updateStatus){A=m.$new();A.data=ge();a.refreshColumns();A.$apply();var e;for(e=J=D=0;e<a.columnList.length;e++){var k={columnID:void 0!=a.columnList[e][a.options.columnFields.id]?a.columnList[e][a.options.columnFields.id]:e,avgItemHeight:0};switch(a.columnList[e][a.options.columnFields.editorType]){case "combobox":Me(a.columnList[e].editorSettings,e,k);Cb.push(k);break;default:Cb.push(k)}}a.options.showHeader&&(q.append(ra),ja&&(Na.css("opacity",aa.opacity),ra.css("opacity",aa.opacity)),e=Ob(),
oa=angular.element(c(e)(A)),ra.append(oa),a.isThereLeftFixedColumns&&(e=Ob(!1,"left"),ia=c(e)(A),ra.append(ia),ia.css("z-index","2"),ia.addClass("iui-treegrid-column-header-left")),a.isThereRightFixedColumns&&(e=Ob(!1,"right"),X=c(e)(A),ra.append(X),X.css("right","0"),X.css("z-index","1"),X.addClass("iui-treegrid-column-header-right")));a.options.showFooter&&(q.append(Aa),ja&&(Ga.css("opacity",aa.opacity),Aa.css("opacity",aa.opacity)),e=Ob(!0),Ka=c(e)(A),Aa.append(Ka),a.isThereLeftFixedColumns&&(e=
Ob(!0,"left"),xa=c(e)(A),Aa.append(xa),xa.css("z-index","2"),xa.addClass("iui-treegrid-column-footer-left")),a.isThereRightFixedColumns&&(e=Ob(!0,"right"),ha=c(e)(A),Aa.append(ha),ha.css("right","0"),ha.css("z-index","1"),ha.addClass("iui-treegrid-column-footer-right")));var f,g;e=-1;for(k=0;k<a.columnList.length;k++)if(g=f=null,a.columnList[k][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[k])?(f=a.columnList[k][a.options.columnFields.templateSettings].header,e=1):
a.columnList[k][a.options.columnFields.headerContent]?(f=a.columnList[k][a.options.columnFields.headerContent],e=2):a.columnList[k][a.options.columnFields.headerTemplate]&&(f=a.columnList[k][a.options.columnFields.headerTemplate],e=3),a.columnList[k][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[k],!0)?g=a.columnList[k][a.options.columnFields.templateSettings].footer:a.columnList[k][a.options.columnFields.footerContent]?g=a.columnList[k][a.options.columnFields.footerContent]:
a.columnList[k][a.options.columnFields.footerTemplate]&&(g=a.columnList[k][a.options.columnFields.footerTemplate]),(f||g)&&(g=a.getElemFromColumn(a.columnList[k],a.columnList[k][a.options.columnFields.fixed]))&&f&&f&&(g=a.getChildElement(g,"column-header-cell")))switch(g.empty(),e){case 1:A&&(f='<iui-item-content obj="data['+k+"].column."+a.options.columnFields.templateSettings+'.header.templateObj" template-url="{{data['+k+"].column."+a.options.columnFields.templateSettings+'.header.url}}" draggable="{{data['+
k+'].draggable}}"',f+=' data-element="header-template-content" ng-cloak></iui-item-content>',g.append(c(f)(A)));break;case 2:g.append(c(f)(m.$parent));break;case 3:f='<div ng-include="'+f+'"',a.columnList[k][a.options.columnFields.headerTemplateModel]&&(f+=' onload="'+a.columnList[k][a.options.columnFields.headerTemplateModel]+'"'),f+=' style="margin:0;padding:0"></div>',g.append(c(f)(m.$parent))}Ha(40);Q("rows")}else Ha(70),Q("scroll");d.cancel(b)},1)},Ze=function(){if(1<a.updateStatus)Q("end");
else var b=d(function(){var e=0;a.options.paging.enabled&&Z&&(e=Z[0].offsetHeight);if(0<a.columnList.length){var k=0;if(a.options.showHeader&&oa){D=oa[0].offsetHeight;a.isThereLeftFixedColumns&&ia?D=ia[0].offsetHeight:a.isThereRightFixedColumns&&X&&(D=X[0].offsetHeight);var f=0,g=oa.find("td");if(g&&0<g.length)for(var l=0;l<g.length;l++)var n=angular.element(g[l]),f=f+n[0].offsetWidth;f>q[0].clientWidth&&(f=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),
f.css("bottom","-9999px"),q.append(f),k=f[0].offsetHeight,f.remove());ra.css("width",q[0].clientWidth+"px");ra.css("height",D+"px");a.isThereLeftFixedColumns&&(L=ia[0].offsetWidth,Kb=q[0].clientHeight-D-J,oa.css("left",L+"px"));a.isThereRightFixedColumns&&(Fa=X[0].offsetWidth,Lb=q[0].clientHeight-D-J)}a.options.showFooter&&(J=Ka[0].offsetHeight,a.isThereLeftFixedColumns&&xa?J=xa[0].offsetHeight:a.isThereRightFixedColumns&&ha&&(J=ha[0].offsetHeight),Aa.css("width",q[0].clientWidth+"px"),Aa.css("height",
J+"px"),a.isThereLeftFixedColumns&&(L=xa[0].offsetWidth,Kb=q[0].clientHeight-D-J,Ka.css("left",L+"px")),a.isThereRightFixedColumns&&(Fa=ha[0].offsetWidth,Lb=q[0].clientHeight-D-J));he();if(0<a.currentList.length){v=m.$new();v.data=$c();pa=m.$new();pa.data=ie();qa=m.$new();qa.data=je();a.refreshRows();v.$apply();pa.$apply();qa.$apply();We();var ab=d(function(){a.updateAutoLayout();Od();fa&&fa.remove();V&&V.remove();U&&U.remove();La&&La.remove();la&&la.remove();ma&&ma.remove();Ma&&Ma.remove();ea&&ea.remove();
ya&&ya.remove();G=0;for(var b="",h=0;h<a.currentTopList.length;h++)b+=za(h,"none",!1,"top"),G++;0<G&&(V=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-top-block" style="position:absolute;top:'+D+'px;"></table>'),V.append(c(b)(pa)),eb.append(V));G=0;b="";for(h=0;h<a.currentBottomList.length;h++)b+=za(h,"none",!1,"bottom"),G++;0<G&&(U=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-bottom-block" style="position:absolute;bottom:'+J+'px;"></table>'),
U.append(c(b)(qa)),eb.append(U));a.options.autoSize?B=0<a.options.maxRows?a.options.maxRows:500:(b=q[0].clientHeight-e-(D+J)-k,B=0<P?Math.floor(b/P)+1:0<D?Math.floor(b/D)+1:100);G=0;b="";for(h=0;h<B;h++)b+=za(h),G++;if(0<G){fa=angular.element('<table cellpadding="0" cellspacing="0" style="position:absolute;top:'+(D+kb)+'px;"></table>');fa.append(c(b)(v));eb.append(fa);if(a.isThereLeftFixedColumns){b="";for(h=G=0;h<a.currentTopList.length;h++)b+=za(h,"left",!1,"top"),G++;0<G&&(la=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-top-block iui-treegrid-rows-left-top" style="position:absolute;"></table>'),
la.append(c(b)(pa)),Qa.append(la));b="";for(h=G=0;h<a.currentBottomList.length;h++)b+=za(h,"left",!1,"bottom"),G++;0<G&&(ma=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-bottom-block iui-treegrid-rows-left-bottom" style="position:absolute;bottom:0;"></table>'),ma.append(c(b)(qa)),Qa.append(ma));fa.css("left",L+"px");b="";for(h=G=0;h<B;h++)b+=za(h,"left"),G++;0<G&&(La=angular.element('<table class="iui-treegrid-rows-left" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),
La.append(c(b)(v)),Qa.append(La),q.append(Qa),ja&&(db.css("opacity",aa.opacity),Qa.css("opacity",aa.opacity)))}if(a.isThereRightFixedColumns){b="";for(h=G=0;h<a.currentTopList.length;h++)b+=za(h,"right",!1,"top"),G++;0<G&&(ea=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-top-block iui-treegrid-rows-right-top" style="position:absolute;"></table>'),ea.append(c(b)(pa)),Ra.append(ea));b="";for(h=G=0;h<a.currentBottomList.length;h++)b+=za(h,"right",!1,"bottom"),G++;0<
G&&(ya=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-bottom-block iui-treegrid-rows-right-bottom" style="position:absolute;bottom:0;"></table>'),ya.append(c(b)(qa)),Ra.append(ya));b="";for(h=G=0;h<B;h++)b+=za(h,"right"),G++;0<G&&(Ma=angular.element('<table class="iui-treegrid-rows-right" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Ma.append(c(b)(v)),Ra.append(Ma),q.append(Ra),ja&&(Oa.css("opacity",aa.opacity),Ra.css("opacity",aa.opacity)))}}Ha(70);
Q("scroll");d.cancel(ab)},1)}else Ha(70),Q("scroll")}else Ha(70),Q("scroll");d.cancel(b)},1)},Pb=function(b){b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none");a.dropMark()},$e=function(){1<a.updateStatus?Q("end"):(1==a.updateStatus&&(Pd(),eb&&(da.empty(),da.append(eb.children()),V&&V.bind("dragover",function(a){Pb(a);a.stopPropagation()}),U&&U.bind("dragover",function(a){Pb(a);a.stopPropagation()})),ra&&
(Na.empty(),Na.append(ra.children()),a.options.showHeader&&(Na.css("width",q[0].clientWidth+"px"),Na.css("height",D+"px")),q.append(Na)),Aa&&(Ga.empty(),Ga.append(Aa.children()),a.options.showFooter&&(Ga.css("width",q[0].clientWidth+"px"),Ga.css("height",J+"px")),q.append(Ga)),Qa&&(db.empty(),db.append(Qa.children()),q.append(db),la&&la.bind("dragover",function(a){Pb(a);a.stopPropagation()}),ma&&ma.bind("dragover",function(a){Pb(a);a.stopPropagation()})),Ra&&(Oa.empty(),Oa.append(Ra.children()),q.append(Oa),
ea&&ea.bind("dragover",function(a){Pb(a);a.stopPropagation()}),ya&&ya.bind("dragover",function(a){Pb(a);a.stopPropagation()})),a.updateViewSize(),a.updateViewSize(),a.updateScrollVisibility(),a.updateScrollView()),Ha(80,"complete"),Q("complete"))},af=function(){switch(aa.type){case "circular":1==a.updateStatus&&(ke(),Qb=0,ob=!0,a.callLoadComplete());break;case "linear":le(!1);break;default:Qb=0,ob=!0,1==a.updateStatus&&a.callLoadComplete()}a.updateActive=!1;a.updateStatus--;if(0<a.updateStatus)Rb=
a.updateActive=!0,1==a.updateStatus?Q("start"):Q("end");else if(ad())var b=d(function(){"optimal"==a.options.displayMode&&a.updateGridElements();a.updateView();a.callUpdateComplete();d.cancel(b)},1);else"optimal"==a.options.displayMode&&(a.updateGridElements(),a.updateView()),a.callUpdateComplete()},gc=[],hc=[],ic=[];a.updateGridElements=function(){if("optimal"==a.options.displayMode){var b=0,c="none";gc.length=0;hc.length=0;ic.length=0;for(var d=gc;3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var f,
g,m=0;m<c.length;m++){f=angular.element(c[m]);g={rowElem:f,cellList:[]};if(m<B){f=f.find("td");for(var l=0;l<f.length;l++){var n=angular.element(f[l]),q=a.getContentElement(n);if(q){var r=l;n[0].attributes&&n[0].attributes["data-index"]&&(r=parseInt(n[0].attributes["data-index"].value,10));n={cell:n,block:q,expandBox:null,icon:null,content:null};r==a.options.expandColIndex&&(n.expandBox=angular.element(a.getContentElement(q,"expandbox")),n.icon=angular.element(a.getContentElement(q,"icon")));var t=
"content";switch(a.columnList[r][a.options.columnFields.editorType]){case "checkbox":t="checkbox";break;case "image":t="image";break;default:(r=nb(r))&&""!=r&&(t="template-content")}n.content=angular.element(a.getContentElement(q,t));g.cellList.push(n)}}}d.push(g)}b++;1==b?(c="left",d=hc):(c="right",d=ic)}}};var Q=function(b){if(Rb&&!wb)switch(b){case "start":1<a.updateStatus?Q("end"):(a.updateColumnList(),a.options.paging.enabled&&a.updatePageList(),a.updateCurrentList(),Ha(10),Q("init"));break;
case "init":1<a.updateStatus?Q("end"):(Cb.length=0,Id(),xc||ga||Wc(),fe(),Ka=oa=U=V=fa=null,Kb=L=0,ma=la=La=ia=null,Lb=Fa=0,ya=ea=Ma=X=null,A&&A.$destroy(),v&&v.$destroy(),a.options.paging.enabled&&Xe(),q.append(eb),Ha(20),Q("columns"));break;case "columns":Ye();break;case "rows":ra?a.options.showHeader&&ra.find("td").length<a.columnList.length?d(function(){Q(b)},1):Ze():d(function(){Q(b)},1);break;case "scroll":$e();break;case "complete":1<a.updateStatus?Q("end"):(fe(),Ha(90),Q("events"));break;
case "events":1<a.updateStatus||(a.allowEvents=!0,a.options.showHeader&&(oa&&Rc(oa),a.isThereLeftFixedColumns&&ia&&Rc(ia),a.isThereRightFixedColumns&&X&&Rc(X)),0<a.currentList.length&&Te(),Ha(100));Q("end");break;case "end":af()}else d(function(){Q(b)},1)},me=5,Cc=0,xb=0,Dc=0,ne=0,wb=!1,Ec=!1,aa={type:"none",speed:"normal",opacity:0},bd=null,ja=!1,ob=!1,le=function(b){var e=n(function(){b?xb++:xb--;Dc=(q[0].clientHeight-xb)/2+2;jc.css("height",xb+"px");fb.css("top",Dc+"px");b&&xb>=me?(ja=!0,Ha(0),
ob=wb=!1,n.cancel(e)):!b&&0>=xb&&(fb&&fb.remove(),Qb=0,ob=!0,a.callLoadComplete(),n.cancel(e))},20)},ke=function(){bd&&n.cancel(bd);Sa&&Sa.remove()};a.beginLoad=function(a){if(!wb)switch(wb=!0,aa=a?{type:void 0!=a.type?a.type:"none",speed:void 0!=a.speed?a.speed:"normal",opacity:void 0!=a.opacity?a.opacity:0}:{type:"none",speed:"normal",opacity:0},cd(aa.opacity),aa.type){case "circular":ke();q.append(Sa);Sa.css("top",(q[0].clientHeight-Sa[0].offsetHeight)/2+"px");Sa.css("left",(q[0].clientWidth-Sa[0].offsetWidth)/
2+"px");ja=!0;ob=wb=!1;var b=0,e=3;switch(aa.speed){case "veryfast":e=7;break;case "fast":e=5;break;case "slow":e=2;break;case "veryslow":e=1}bd=n(function(){b+=e;360<b&&(b=0);var a="rotate("+b+"deg)";Sa.css("-ms-transform",a);Sa.css("-webkit-transform",a);Sa.css("transform",a)},1);break;case "linear":a=angular.element('<div class="iui-load-block-progress" style="position:absolute;left:-9999px"></div>');q.append(a);me=parseInt(getComputedStyle(a[0]).height,10);a.remove();jc.css("width","0px");jc.css("height",
"0px");q.append(fb);Qb=0;Cc=Math.floor(.5*q[0].clientWidth);xb=0;Dc=q[0].clientHeight/2+2;ne=(q[0].clientWidth-Cc)/2;fb.css("width",Cc+"px");fb.css("top",Dc+"px");fb.css("left",ne+"px");fb.css("opacity","1");le(!0);break;default:ja=!0,ob=wb=!1}};a.endLoad=function(b){if(!Ec)if(Ec=!0,b=a.options.loadRows.indexOf(b),0<=b&&a.options.loadRows.splice(b,1),ja){ja=!1;var e=3,c=aa.opacity,d=n(function(){ob&&(10<e||1<=c?(cd(1),Ec=wb=ob=!1,aa={type:"none",speed:"normal"},n.cancel(d)):(c+=e/10,cd(c),e+=3))},
1)}else Ec=!1};var cd=function(a){Na&&Na.css("opacity",a);db&&db.css("opacity",a);da&&da.css("opacity",a);Oa&&Oa.css("opacity",a);Ga&&Ga.css("opacity",a);y&&y.css("opacity",a);M&&M.css("opacity",a);Va&&Va.css("opacity",a)},jc=angular.element('<div class="iui-load-block-progress"></div>'),fb=angular.element('<div class="iui-load-block"></div>');fb.append(jc);var Qb=0,Rb=!1,Sa=angular.element('<div class="iui-load-circular"></div>'),Ha=function(a){if(ja&&"linear"==aa.type){Rb=!1;var b=Math.floor(Cc*
a/100),c=Qb;a=10;switch(aa.speed){case "veryfast":a=2;break;case "fast":a=5;break;case "slow":a=15;break;case "veryslow":a=20}var e=b>c?Math.floor((b-c)/a):1,e=0<e?e:1,d=n(function(){c+=e;jc.css("width",c+"px");c>=b&&(Qb=b,Rb=!0,n.cancel(d))},1)}else Rb=!0};a.updateStatus=0;a.updateActive=!1;a.updateAutoLayout=function(){if(a.options.autoSize){var b=a.currentList.length*P+D+J,b=b+(kb+wc);K&&y&&(b+=y[0].offsetHeight);q.css("height",b+"px")}};a.updateLayout=function(b){q.append(E.$tw);E.s1t(E.twp);
b=!0;for(var c=q.parent();"body"!=c[0].tagName.toLowerCase();){if("none"==getComputedStyle(c[0]).display){b=!1;break}c=c.parent()}b&&a.allowUpdate&&(a.updateStatus++,a.updateActive||(a.updateActive=!0,a.allowEvents=!1,q.removeClass("iui-treegrid-block-rtl"),a.options.rtl&&q.addClass("iui-treegrid-block-rtl"),da.removeClass("iui-treegrid-block-shift-left iui-treegrid-block-rtl"),da.addClass(Bb()),P=0,B=100,J=D=0,Rb=!0,Q("start")))};a.updateCurrentLayout=function(b){if(a.allowUpdate)if(0==a.currentList.length)a.updateLayout();
else{a.options.paging.enabled&&(a.updatePageList(),H&&(H.minPages=0<a.pageList.length?1:0,H.numPages=a.pageList.length),a.updatePageNumber());a.updateCurrentList();a.updateView();var c=d(function(){a.updateViewSize();a.updateViewSize();b||a.updateScrollVisibility();a.updateScrollView();d.cancel(c)},1)}};var bf=function(b,c){var e=a.options.enabled&&a.options.allowColumnReorder&&b[a.options.columnFields.allowDrag],d=b[a.options.columnFields.headerAlignment],h=b[a.options.columnFields.footerAlignment],
f=a.isFilteringAllowed(b),g=a.isSortingAllowed()&&b==a.sortColumn,m=a.getColumnWidth(b),m=0<=m?m:0,l=dd(b);m<l.min&&(m=l.min);m>l.max&&(m=l.max);return{draggable:e,headerAlignment:d,footerAlignment:h,index:c,indent:0,column:b,showFiltering:f,showSorting:g,style:{header:{},footer:{}},width:m}},oe=function(b,c){var e=0;if(c==a.options.expandColIndex){var d,h=a.columnList[a.options.expandColIndex],e=a.getColumnWidth(h),f=e-a.indentList[b],f=0<=f?f:0;d={top:0,right:0,bottom:0,left:0};(h=a.getElemFromColumn(h,
h[a.options.columnFields.fixed]))&&(h=a.getChildElement(h,"column-header-cell"))&&(d=g.getPadding(h[0]));d=d.left+a.indentList[b];0==f&&(d=e);e=d}return e},ed=function(b,c,d){var e=c;d&&(d=a.columnList[c][a.options.columnFields.id])&&(e=a.getCellIndexById(a.currentList[b][a.options.rowFields.cells],c,d));return e},pe=function(b){return a.columnList[b][a.options.columnFields.contentAlignment]?a.columnList[b][a.options.columnFields.contentAlignment]:"left"},qe=function(b,c){var e=a.columnList[c],d=
a.getColumnWidth(e),e=dd(e);d<e.min&&(d=e.min);d>e.max&&(d=e.max);c==a.options.expandColIndex&&(d-=a.indentList[b]);return 0<=d?d:0},fd=function(b,c){return 1==a.options.allowFocus&&1==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])&&0<=c?a.getTabIndex().toString()+(b+1).toString()+c.toString():""},re=function(b){return 1==a.options.allowFocus&&0==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])?a.getTabIndex().toString()+(b+1).toString():""},se=function(b,c,d){if(0<=c){var e=
a.currentList[b][a.options.rowFields.cells];switch(d){case "top":e=a.currentTopList[b][a.options.rowFields.cells];break;case "bottom":e=a.currentBottomList[b][a.options.rowFields.cells]}if(c<e.length)return e[c]}return{}},nb=function(b){return a.columnList[b][a.options.columnFields.cellTemplateUrl]?a.columnList[b][a.options.columnFields.cellTemplateUrl]:""},gd=function(b,c,d,f){for(var e=[],h=0;h<a.columnList.length;h++){var k=ed(c,h,d),p=d?se(c,k,f):{},g=pe(h),m=a.columnList[h][a.options.columnFields.editorSettings],
m=m&&m.style?m.style:null,l;if(d)a:{if(0<=k&&(l=a.currentList[c][a.options.rowFields.cells],k<l.length)){l=1==a.options.enabled&&l[k][a.options.cellFields.enabled];break a}l=1==a.options.enabled}else l=!1;var n=d&&!f?oe(c,h):0,q=k,r=d?fd(c,h):"",t=nb(h),w;if(d){var u=c;w=k;var v=nb(h),u=se(u,w);w=0<=w&&v&&""!=v&&u&&void 0!=u[a.options.cellFields.templateObj]&&null!=u[a.options.cellFields.templateObj]?!0:!1}else w=!1;if(d)a:{if(0<=k&&(v=a.currentList[c][a.options.rowFields.cells],k<v.length)){v=v[k][a.options.cellFields.text];
break a}v=""}else v="";if(d)a:{if(0<=k&&(u=a.currentList[c][a.options.rowFields.cells],k<u.length)){u=u[k][a.options.cellFields.value];break a}u=null}else u=null;k={related:p,alignment:g,editorStyle:m,enabled:l,indent:n,index:q,style:{},tabindex:r,templateUrl:t,templateVisible:w,text:v,value:u,visible:d?0<=k?!0:!1:!1,width:d?qe(c,h):0};e.push(k)}return{cells:e,expandBox:d?Jd(b):"",expandBoxVisible:d&&!f?0!=a.options.showExpandBoxes:!1,draggable:d&&!f?a.isRowEnabled(b)&&a.isDragAllowed(b):!1,icon:d?
be(b):"",iconVisible:d?0!=a.options.showIcons&&Vc(b):!1,index:c,row:d?b:{},style:{},tabindex:d&&!f?re(c):"",updateContextMenu:d?null!=b[a.options.rowFields.contextMenu]:!1,visible:d}},ge=function(){for(var b=[],c=0;c<a.columnList.length;c++)b.push(bf(a.columnList[c],c));return b},$c=function(){for(var b=[],c=w;c<w+B;c++)b.push(gd(a.currentList[c],c,c<a.currentList.length));return b},ie=function(){for(var b=[],c=0;c<a.currentTopList.length;c++)b.push(gd(a.currentTopList[c],c,c<a.currentTopList.length,
"top"));return b},je=function(){for(var b=[],c=0;c<a.currentBottomList.length;c++)b.push(gd(a.currentBottomList[c],c,c<a.currentBottomList.length,"bottom"));return b},he=function(){for(var b=0;b<a.columnList.length;b++)if(a.isFilteringAllowed(a.columnList[b])){var c=a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);c&&(c=a.getChildElement(c,"column-header-cell"))&&(c=a.getContentElement(c,"filter-button"))&&(c.css("top",(D-parseInt(getComputedStyle(c[0]).height,10))/
2-1+"px"),c.css("right","2px"))}a.isSortingAllowed()&&a.sortColumn&&(b=a.getElemFromColumn(a.sortColumn,a.sortColumn[a.options.columnFields.fixed]))&&(c=a.getChildElement(b,"column-header-cell"))&&(c=a.getContentElement(c,"sort-button"))&&(c.css("top",(D-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),a.isFilteringAllowed(a.sortColumn)?c.css("right","22px"):c.css("right","2px"))};a.getRowScope=function(){return v};var ue=function(){if(A&&v&&(a.allowEvents=!1,hd(!1),0<a.columnList.length&&(A.data=
ge(),v.data=$c(),pa&&(pa.data=ie()),qa&&(qa.data=je()),a.options.selectedRow&&!a.isRowEnabled(a.options.selectedRow)&&(a.options.selectedRow[a.options.rowFields.selected]=!1,a.options.selectedRow=null,a.updateSelectionList()),a.refresh(null,null,!1),A.$apply(),v.$apply(),pa&&pa.$apply(),qa&&qa.$apply(),he(),a.allowEvents=!0,0>=a.options.rowHeight&&ad()&&(a.isThereLeftFixedColumns||a.isThereRightFixedColumns))))for(var b=w;0<=b&&b<w+B&&b<a.currentList.length;b++)te(a.currentList[b])},id=function(b,
c){var e=0;if(b&&v){var d=a.getElemFromRow(b,c);d&&(e=d[0].offsetHeight)}return e},ad=function(){for(var b=!1,c=0;c<a.columnList.length;c++){var d=nb(c);if(d&&""!=d){b=!0;break}}return b},jd=function(b,c){var e=a.getElemFromRow(b,c);if(e&&(e=e.find("td"))&&0<e.length)for(var d=0;d<e.length;d++){var h=angular.element(e[d]);(h=a.getContentElement(h))&&h.css("height","auto")}},kd=function(b,c,d){if((b=a.getElemFromRow(b,c))&&(b=b.find("td"))&&0<b.length)for(c=0;c<b.length;c++){var e=angular.element(b[c]),
e=a.getContentElement(e),k=g.getBorderWidth(e[0]),h=g.getPadding(e[0]);e&&e.css("height",d-(k.top+k.bottom)-(h.top+h.bottom)-2.85+"px")}},te=function(a){jd(a,"none");jd(a,"left");jd(a,"right");var b=id(a),c=id(a,"left"),e=id(a,"right"),b=Math.max(Math.max(b,c),e);kd(a,"none",b);kd(a,"left",b);kd(a,"right",b)};a.updateView=function(b,c){if(b)ue(),a.updateCurrentView(c);else var e=d(function(){ue();a.updateCurrentView(c);d.cancel(e)},1)};a.updateVerticalScrollView=function(){if(v&&(a.allowEvents=!1,
hd(!1),v.data=$c(),a.refresh(null,null,!1,!0),v.$apply(),a.updateCurrentView(!0),a.allowEvents=!0,0>=a.options.rowHeight&&ad()&&(a.isThereLeftFixedColumns||a.isThereRightFixedColumns)))for(var b=w;0<=b&&b<w+B&&b<a.currentList.length;b++)te(a.currentList[b])};a.updateCurrentView=function(b){if("optimal"==a.options.displayMode)for(var c=0,e="none",d=gc;3>c;){var f=0,g=a.columnList.length,m=0;if("none"==e&&b)for(var f=ec,g=fc,l=0;l<f&&l<a.columnList.length;l++)a.isColumnFixed(a.columnList[l])||m++;if(d&&
0<d.length)for(l=0;l<d.length;l++)if(l<B&&l<a.currentList.length&&l+w<a.currentList.length){var n=a.currentList[l+w];d[l].rowElem&&(d[l].rowElem.attr("data-index",l+w),d[l].rowElem.attr("tabindex",re(l+w)));for(var q=m,r=f;r<=g&&r<a.columnList.length;r++){var t=a.columnList[r][a.options.columnFields.fixed]?a.columnList[r][a.options.columnFields.fixed]:"none";if(t==e&&q<d[l].cellList.length){d[l].cellList[q].block.css("width",qe(l+w,r)+"px");d[l].cellList[q].block.css("text-align",pe(r));d[l].cellList[q].block.css("opacity",
1);d[l].cellList[q].cell.attr("draggable",a.isRowEnabled(n)&&a.isDragAllowed(n));d[l].cellList[q].cell.attr("tabindex",fd(l+w,r));var t="",u=ed(l+w,r,!0);0<=u&&u<a.currentList[l+w][a.options.rowFields.cells].length&&(r==a.options.expandColIndex&&(d[l].cellList[q].block.css("padding-left",oe(l+w,r)+"px"),d[l].cellList[q].expandBox&&(d[l].cellList[q].expandBox.removeAttr("class"),d[l].cellList[q].expandBox.addClass(Jd(n))),d[l].cellList[q].icon&&(d[l].cellList[q].icon.removeAttr("class"),d[l].cellList[q].icon.addClass(be(n)))),
t=n[a.options.rowFields.cells][u][a.options.cellFields.text],"combobox"==a.columnList[r][a.options.columnFields.editorType]&&(t=n[a.options.rowFields.cells][u][a.options.cellFields.value]?n[a.options.rowFields.cells][u][a.options.cellFields.value].text:""));if(d[l].cellList[q].content)switch(a.columnList[r][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(u=nb(r))&&""!=u||d[l].cellList[q].content.text(t)}q++}}}else for(d[l].rowElem&&(d[l].rowElem.attr("data-index",
l+w),d[l].rowElem.attr("tabindex","")),q=m,r=f;r<=g&&r<a.columnList.length;r++)if(t=a.columnList[r][a.options.columnFields.fixed]?a.columnList[r][a.options.columnFields.fixed]:"none",t==e&&q<d[l].cellList.length){u=r;d[l].cellList[q].block.css("width","0px");d[l].cellList[q].cell.attr("draggable",!1);d[l].cellList[q].cell.attr("tabindex","");u==a.options.expandColIndex&&(d[l].cellList[q].block.css("padding-left","0px"),d[l].cellList[q].expandBox&&d[l].cellList[q].expandBox.removeAttr("class"),d[l].cellList[q].icon&&
d[l].cellList[q].icon.removeAttr("class"));if(d[l].cellList[q].content){switch(a.columnList[u][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(u=nb(r))&&""!=u||d[l].cellList[q].content.html("")}d[l].cellList[q].content.attr("draggable",!1);d[l].cellList[q].content.attr("tabindex",fd(l+w,r))}q++}c++;1==c?(e="left",d=hc):(e="right",d=ic)}};var Fc=function(b,c,d,f){var e={cell:"",content:"",general:"",label:""};switch(d){case "column":f?(d=a.defaultStyle.column.footer.normal,
a.options.controlStyle.column.footer.normal!=d&&(d+=" "+a.options.controlStyle.column.footer.normal),e.general=d,e.cell="iui-treegrid-column-footer-cell",d=a.defaultStyle.column.footer.content,a.options.controlStyle.column.footer.content!=d&&(d+=" "+a.options.controlStyle.column.footer.content)):(d=a.defaultStyle.column.header.normal,a.options.controlStyle.column.header.normal!=d&&(d+=" "+a.options.controlStyle.column.header.normal),e.general=d,e.cell="iui-treegrid-column-header-cell",d=a.defaultStyle.column.header.content,
a.options.controlStyle.column.header.content!=d&&(d+=" "+a.options.controlStyle.column.header.content));e.content=d;break;case "row":d=a.defaultStyle.row.general.normal;a.isRowFixed(b)?(d=a.defaultStyle.row.fixed.normal,a.options.controlStyle.row.fixed.normal!=d&&(d+=" "+a.options.controlStyle.row.fixed.normal)):a.options.controlStyle.row.general.normal!=d&&(d+=" "+a.options.controlStyle.row.general.normal);e.general=d;break;case "cell":d=a.defaultStyle.row.cell.normal;a.options.controlStyle.row.cell.normal!=
d&&(d+=" "+a.options.controlStyle.row.cell.normal);switch(a.options.gridLines){case "none":d=c==w+B-1||c==a.currentList.length-1?d+" iui-treegrid-lines-horizontal":d+" iui-treegrid-lines-none";break;case "horizontal":d+=" iui-treegrid-lines-horizontal";break;case "vertical":d=c==w+B-1||c==a.currentList.length-1?d+" iui-treegrid-lines-both":d+" iui-treegrid-lines-vertical";break;default:d+=" iui-treegrid-lines-both"}e.general=d;d=a.defaultStyle.row.cell.content;a.options.controlStyle.row.cell.content!=
d&&(d+=" "+a.options.controlStyle.row.cell.content);e.content=d;e.label=a.getDefaultCellLabelClass()}return e},ve=function(b){var c="";a.isFilteringAllowed(b)&&(b=a.getObjState(b),c="iui-filtering","selected"==b?c+=" iui-filtering-selected":"hovered"==b&&(c+=" iui-filtering-hovered"));return c},we=function(b){var c="";a.isSortingAllowed()&&b==a.sortColumn&&(b=a.getObjState(b),"ascending"==a.options.sorting?(c="iui-sort-ascending","selected"==b?c+=" iui-sort-ascending-selected":"hovered"==b&&(c+=" iui-sort-ascending-hovered")):
(c="iui-sort-descending","selected"==b?c+=" iui-sort-descending-selected":"hovered"==b&&(c+=" iui-sort-descending-hovered")));return c},Ta=function(b,c,d,f){var e=a.getObjState(b);d=Fc(b,d,b.type,f);switch(b.type){case "column":f?(c=a.getCurrentColumnStyle(b,"footer",e),c!=a.options.controlStyle.column.footer.normal&&(d.general+=" "+c),b=a.getCurrentColumnStyle(b,"footer","content"),b!=a.options.controlStyle.column.footer.content&&(d.content+=" "+b)):(c=a.getCurrentColumnStyle(b,"header",e),c!=a.options.controlStyle.column.header.normal&&
(d.general+=" "+c),b=a.getCurrentColumnStyle(b,"header","content"),b!=a.options.controlStyle.column.header.content&&(d.content+=" "+b));break;case "row":c=a.getCurrentRowStyle(b,e);a.isRowFixed(b)?c!=a.options.controlStyle.row.fixed.normal&&(d.general+=" "+c):c!=a.options.controlStyle.row.general.normal&&(d.general+=" "+c);break;case "cell":f=a.getCurrentCellStyle(c,b,e),f!=a.options.controlStyle.row.cell.normal&&(d.general+=" "+f),b=a.getCurrentCellStyle(c,b,"content"),b!=a.options.controlStyle.row.cell.content&&
(d.content+=" "+b)}return d},Sb=function(a,b,c,d){var e=v;switch(d){case "top":e=pa;break;case "bottom":e=qa}e&&(e.data[a].cells[b].style.cell=c.general,e.data[a].cells[b].style.content=c.content,e.data[a].cells[b].style.label=c.label)},xe=function(b){if(v&&(b-=w,0<=b&&b<v.data.length&&v.data[b].visible)){v.data[b].style=a.defaultStyle.row.general.normal;for(var c=0;c<a.columnList.length;c++)v.data[b].cells[c].style.cell=a.defaultStyle.row.cell.normal+" iui-treegrid-cell-empty"}};a.refreshColumns=
function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b],null,!1)};a.refreshRows=function(){for(var b=w;b<w+B;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):xe(b);for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1)};var ye=function(b,c,d,f,g){if(d&&b[a.options.rowFields.fixed]==f&&(c=c.indexOf(b),0<=c&&c<d.data.length&&d.data[c].visible)){d.data[c].style=Ta(b).general;
for(var e=Fc(b,c,"cell"),h=0;h<a.columnList.length&&h<d.data[c].cells.length;h++){var k=d.data[c].cells[h].index;if(0<=k){var p=b[a.options.rowFields.cells];k<p.length?(k=Ta(p[k],b,c),Sb(c,h,k,f)):Sb(c,h,e,f)}else Sb(c,h,e,f)}void 0==g&&d&&d.$apply()}};a.refreshHover=function(b){"optimal"==a.options.displayMode?a.refresh(b,null,null,!0):a.refresh(b)};a.refresh=function(b,c,d,f){"optimal"==a.options.displayMode?a.refreshOptimal(b,c,d,f):a.refreshNormal(b,c,d)};a.refreshNormal=function(b,c,d){if(b)switch(b.type){case "column":A&&
(c=a.getColumnCurrentIndex(b),0<=c&&c<A.data.length&&(1==a.options.showHeader&&(A.data[c].style.header=Ta(b)),1==a.options.showFooter&&(A.data[c].style.footer=Ta(b,null,-1,!0)),A.data[c].style.filtering=ve(b),A.data[c].style.sorting=we(b),void 0==d&&A&&A.$apply()));break;case "row":if(v&&!a.isRowFixed(b)){c=a.getRowCurrentIndex(b);var e=c-w;if(0<=e&&e<v.data.length&&v.data[e].visible){v.data[e].style=Ta(b).general;for(var f=Fc(b,c,"cell"),h=0;h<a.columnList.length&&h<v.data[e].cells.length;h++){var k=
v.data[e].cells[h].index;if(0<=k){var g=b[a.options.rowFields.cells];k<g.length?(k=Ta(g[k],b,c),Sb(e,h,k)):Sb(e,h,f)}else Sb(e,h,f)}void 0==d&&v&&v.$apply()}}ye(b,a.currentTopList,pa,"top",d);ye(b,a.currentBottomList,qa,"bottom",d)}else{for(h=0;h<a.columnList.length;h++)a.refresh(a.columnList[h],null,!1);for(b=w;b<w+B;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):xe(b);1==d&&v&&v.$apply();for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);1==d&&pa&&pa.$apply();
for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1);1==d&&qa&&qa.$apply()}};a.refreshOptimal=function(b,c,d,f){if(b)switch(b.type){case "column":A&&(c=a.getColumnCurrentIndex(b),0<=c&&c<A.data.length&&(1==a.options.showHeader&&(A.data[c].style.header=Ta(b)),1==a.options.showFooter&&(A.data[c].style.footer=Ta(b,null,-1,!0)),A.data[c].style.filtering=ve(b),A.data[c].style.sorting=we(b),void 0==d&&A&&A.$apply()));break;case "row":a.refreshCurrentView(b,f)}else{for(b=0;b<
a.columnList.length;b++)a.refresh(a.columnList[b],null,!1);for(b=w;b<w+B;b++)b<a.currentList.length?a.refreshCurrentView(a.currentList[b]):ze(b-w)}};var ze=function(b,c){for(var e=0,d="none",f=gc;3>e;){var h=b,g=0,l=a.columnList.length,m=0;if("none"==d&&c)for(var g=ec,l=fc,n=0;n<g&&n<a.columnList.length;n++)a.isColumnFixed(a.columnList[n])||m++;if(f&&0<f.length&&0<=h&&h<f.length&&v)for(kc(f[h].rowElem,a.defaultStyle.row.general.normal);g<=l&&g<a.columnList.length;g++)(a.columnList[g][a.options.columnFields.fixed]?
a.columnList[g][a.options.columnFields.fixed]:"none")==d&&m<f[h].cellList.length&&(kc(f[h].cellList[m].cell,a.defaultStyle.row.cell.normal+" iui-treegrid-cell-empty"),m++);e++;1==e?(d="left",f=hc):(d="right",f=ic)}},kc=function(a,b){a&&(a.removeAttr("class"),a.addClass(b))};a.refreshCurrentView=function(b,c){for(var e=0,d="none",f=gc;3>e;){var h=b,g=c;if(h)switch(h.type){case "row":if(v&&f&&0<f.length){var l=a.getRowCurrentIndex(h),m=l-w;if(0<=m&&m<f.length&&m<v.data.length&&v.data[m].visible){kc(f[m].rowElem,
Ta(h).general);var n=0,q=a.columnList.length,r=0;if("none"==d&&g)for(n=ec,q=fc,g=0;g<n&&g<a.columnList.length;g++)a.isColumnFixed(a.columnList[g])||r++;for(;n<=q&&n<a.columnList.length;n++)(a.columnList[n][a.options.columnFields.fixed]?a.columnList[n][a.options.columnFields.fixed]:"none")==d&&r<f[m].cellList.length&&(g=ed(l,n,!0),0<=g&&g<a.currentList[l][a.options.rowFields.cells].length?kc(f[m].cellList[r].cell,Ta(a.currentList[l][a.options.rowFields.cells][g],h,l).general):kc(f[m].cellList[r].cell,
Fc(h,l,"cell").general),r++)}}}else for(h=w;h<w+B;h++)h<a.currentList.length?a.refreshCurrentView(a.currentList[h],!0):ze(h,!0);e++;1==e?(d="left",f=hc):(d="right",f=ic)}};a.moveColumn=function(b,c){if(b&&0!=a.callColumnPosChanging(b)){var e=a.columnList[0];0<=a.options.expandColIndex&&a.options.expandColIndex<a.columnList.length&&(e=a.columnList[a.options.expandColIndex]);var d=a.getColumnCurrentIndex(b),f=a.getColumnRealIndex(d),h=-1,g=a.getFullColumnList();switch(c){case "first":h=0;break;case "left":(d=
Pc(d-1,b[a.options.columnFields.fixed],!0))&&(h=a.getColumnRealIndex(a.getColumnCurrentIndex(d)));break;case "right":(d=Qc(d+1,b[a.options.columnFields.fixed],!0))&&(h=a.getColumnRealIndex(a.getColumnCurrentIndex(d)));break;case "last":h=g.length-1}0<=h&&h<g.length&&f!=h&&(f<h?"first"!=c&&"left"!=c||h--:f>h&&("last"!=c&&"right"!=c||h++),a.columnsObj.moveObject(f,h),a.updateColumnList(),e=a.getColumnCurrentIndex(e),e!=a.options.expandColIndex?(a.options.expandColIndex=e,a.updateLayout()):a.updateView(),
a.callColumnPosChanged(T,a.hoverColumn))}};a.moveRow=function(b,c,d,f){if(b){a.allowUpdate=!1;var e=-1;switch(d){case "first":e=0;break;case "at":e=f}if(Array.isArray(b)){f=[];for(var h=0;h<b.length;h++){for(var k=!1,g=a.getParent(b[h]);g;){if(0<=b.indexOf(g)){k=!0;break}g=a.getParent(g)}k||f.push(b[h])}if(0<f.length)if(b=a.getObjCurrentIndex(f[0]),h=a.getObjCurrentIndex(f[f.length-1]),b<=h)for(h=0;h<f.length;h++)ld(f[h],c,e,d);else for(h=f.length-1;0<=h;h--)ld(f[h],c,e,d)}else ld(b,c,e,d);a.allowUpdate=
!0;a.updateCurrentLayout();a.callChange()}};var ld=function(b,c,d,f){a.rowsObj.removeAt(b,-1,null,a.objIsRemoved)&&("first"==f||"last"==f||"at"==f?a.rowsObj.insertAt(b,d,c,a.rowIsAdded):"before"==f?a.rowsObj.insertByRef(b,c,!1,a.rowIsAdded):"after"==f&&a.rowsObj.insertByRef(b,c,!0,a.rowIsAdded))},bb="none",W=!1,Gc=-1,bb="none",Hc=0,Ic=0,Ya=null;m.$watch(function(){return q[0].offsetWidth},function(b,c){a.options.autoUpdate&&(100==B?a.updateLayout():b!=c&&(Ya&&(d.cancel(Ya),Ya=null),Ya=d(function(){Na&&
Na.css("width",q[0].clientWidth+"px");Ga&&Ga.css("width",q[0].clientWidth+"px");a.updateCurrentLayout();d.cancel(Ya);Ya=null},250)))});var Za=null;m.$watch(function(){return q[0].offsetHeight},function(b,c){a.options.autoUpdate&&b!=c&&(a.options.autoSize?a.updateCurrentLayout():(Za&&(d.cancel(Za),Za=null),Za=d(function(){a.updateLayout();d.cancel(Za);Za=null},250)))});a.isColumnWithFixedWidth=function(b){var c=a.columnList;return c&&0<=b&&b<c.length?c[b][a.options.columnFields.fixedWidth]?c[b][a.options.columnFields.fixedWidth]:
!1:!1};a.setColumnResizingParams=function(b,c,d){0<=b&&b<a.columnList.length&&(Gc=b,bb=c,Ic=d,Hc=a.getColumnWidth(a.columnList[b]))};var Ae=function(b){return b&&0!=b[a.options.columnFields.visible]?!0:!1};a.isColumnFixed=function(b){return!b||"left"!=b[a.options.columnFields.fixed]&&"right"!=b[a.options.columnFields.fixed]?!1:!0};var Pc=function(b,c,d){var e=null;c=void 0==c?"none":c;for(var f=b;0<=f;f--)if(!d||d&&Ae(a.columnList[f]))if(b=a.columnList[f][a.options.columnFields.fixed],b=void 0==b?
"none":b,b==c){e=a.columnList[f];break}return e},Qc=function(b,c,d){var e=null;c=void 0==c?"none":c;for(var f=b;f<a.columnList.length;f++)if(!d||d&&Ae(a.columnList[f]))if(b=a.columnList[f][a.options.columnFields.fixed],b=void 0==b?"none":b,b==c){e=a.columnList[f];break}return e},Rd=function(b,c){if(0<=b&&b<a.columnList.length){var e=a.columnList[b];if(e)switch(columnFixedType=e[a.options.columnFields.fixed],c){case "left":if("right"!=columnFixedType){if(!Pc(b-1,e[a.options.columnFields.fixed]))return!1}else if(!columnFixedType||
"none"==columnFixedType)return 0<b;break;case "right":if("right"==columnFixedType&&!Qc(b+1,e[a.options.columnFields.fixed]))return!1}}return!0};a.resizeColumn=function(b,c,d){0>c&&(c=0);var e;if(e=a.getHeaderElem(d))e=angular.element(e.find("tr")),a.resizeColumnCells(e,b,c,1,d);a.resizeRows(b,c,d);a.resizeRows(b,c,d,"top");a.resizeRows(b,c,d,"bottom");if(e=a.getFooterElem(d))e=angular.element(e.find("tr")),a.resizeColumnCells(e,b,c,2,d);0<=b&&b<a.columnList.length&&a.callColumnSizeChanged(a.columnList[b])};
a.resizeRows=function(b,c,d,f){var e=a.getRowElems(d,f);if(e){var h={top:0,right:0,bottom:0,left:0},k=a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);k&&(k=a.getChildElement(k,"column-header-cell"))&&(h=g.getPadding(k[0]));for(k=0;k<e.length;k++)currentRowElem=angular.element(e[k]),a.resizeColumnCells(angular.element(e[k]),b,c,0,d,!0,h,f)}};a.resizeColumnCells=function(b,c,d,f,g,l,m,n){if(b){var e=-1;l&&(e=a.getRowCurrentIndex(a.getRowFromElem(b)));b=0;0<=e&&!n&&
(b=a.indentList[e]);switch(f){case 1:f=a.getElemFromColumnCell(c,g);break;case 2:f=a.getElemFromColumnCell(c,g,!0);break;default:f=a.getElemFromCell(e,c,g,n)}f&&0<f.children().length&&(f=f.children().eq(0))&&(m=m?m.left+b:b,g=d,0<=e&&c==a.options.expandColIndex&&(g-=m),g=0<=g?g:0,f.css("width",g+"px"),c==a.options.expandColIndex&&(0==g?f.css("padding-left",d+"px"):f.css("padding-left",m+"px")))}};var yd=function(b){a.dropMark()},zd=function(a){Gb()},Ad=function(b){a.removeDropMark();a.dragIcon&&angular.element(a.dragIcon).remove();
a.cancelScrollTimer();a.dragDropStatus(!1)};angular.element(l).bind("dragenter",yd);angular.element(l).bind("dragover",zd);angular.element(l).bind("dragend",Ad);var na=angular.element('<div class="iui-treegrid-column-reorder-mark"><span></span></div>'),Ja=angular.element('<div class="iui-treegrid-column-reorder-tooltip"><span></span></div>'),Kd=function(b){var c="initial";sa&&T&&(!a.hoverColumn||T==a.hoverColumn||a.hoverColumn&&0==a.hoverColumn.allowDrop||a.hoverColumn&&T[a.options.columnFields.fixed]!=
a.hoverColumn[a.options.columnFields.fixed])&&(c="not-allowed",b&&Ja&&Ja.css("display","none"));q.css("cursor",c);document.body.style.cursor=c},dd=function(b){return b?{min:g.isFieldAvailable(b[a.options.columnFields.minWidth],0),max:g.isFieldAvailable(b[a.options.columnFields.maxWidth],9999999)}:{min:0,max:9999999}},Cd=function(b){if(0===b.button&&0<=Gc&&"none"!=bb){var c=a.getMousePos(b),e=Gc,d=a.columnList;if(0<=e&&e<d.length){var f=Hc+c.x-Ic;"right"==d[e][a.options.columnFields.fixed]&&(f=Hc-
(c.x-Ic));f=0<=f?f:0;c=dd(d[e]);f>=c.min&&f<=c.max&&(d[e][a.options.columnFields.width]=f,a.resizeColumn(e,f,d[e][a.options.columnFields.fixed]),a.updateViewSize(),a.updateScrollVisibility(),Wc())}}xc?ja||1!==b.which||(R[0].getBoundingClientRect(),b=a.getMousePos(b),E.scrollMousePos||(E.scrollMousePos=b),e=R[0].offsetLeft+(b.x-E.scrollMousePos.x),e<Pa?e=Pa:e+R[0].offsetWidth>lb&&(e=lb-R[0].offsetWidth),R.css("left",e+"px"),E.scrollMousePos=b,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.x=
!1!==a.options.rtl?parseInt((lb-R[0].offsetLeft-R[0].offsetWidth)*vb,10):parseInt((R[0].offsetLeft-Pa)*vb,10),Xc(),(md(a.scrollPos)||a.scrollPos.x!=a.prevScrollPos.x)&&a.callScrollPosChanged()):ga&&(ja||1!==b.which||(Y[0].getBoundingClientRect(),b=a.getMousePos(b),E.scrollMousePos||(E.scrollMousePos=b),e=Y[0].offsetTop+(b.y-E.scrollMousePos.y),e<mb?e=mb:e+Y[0].offsetHeight>Nb&&(e=Nb-Y[0].offsetHeight),Y.css("top",e+"px"),E.scrollMousePos=b,Ac=e-mb,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},
a.scrollPos.y=Math.floor(Ac*Bc*P),(md(a.scrollPos)||a.scrollPos.y!=a.prevScrollPos.y)&&a.callScrollPosChanged(),newIndex=0<P?Math.floor(a.scrollPos.y/P):0,newIndex+B-1>a.currentList.length&&(newIndex=a.currentList.length-B+1,newIndex+=5),0>newIndex&&(newIndex=0),newIndex!==w&&(w=newIndex,a.updateVerticalScrollView())))},Dd=function(b){a.removeDropDownList();a.closeEditor(f);a.closeFilterWindow();qb()},Ed=function(b){Kd(!0);Ja&&Ja.remove();sa=!1;Gc=-1;bb="none";Ic=Hc=0;W=!1;q.css("cursor","default");
a.dropMark();ga&&a.updateView();Gb();E.scrollMousePos=null;ga=xc=!1;q.css("cursor","default");document.body.style.cursor="default"},Bd=function(b){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}};angular.element(l).bind("mousemove",Cd);angular.element(l).bind("mousedown",Dd);angular.element(l).bind("mouseup",Ed);angular.element(l).bind("keyup",Bd);var nd=!1,Tb=0,Jc=null,Be=
.5;a.isScrollBarVisible=function(a){switch(a){case "horizontal":return K;case "vertical":return N}return K&&N};a.prevScrollPos={x:0,y:0};a.scrollPos={x:0,y:0};a.getMaxScrollPos=function(){return O};a.getScrollPos=function(){return a.scrollPos};a.setScrollPos=function(b,c){if(!ja&&b){var e=!0;0>b.x&&(b.x=0,e=!1);b.x>O.x&&(b.x=O.x,e=!1);0>b.y&&(b.y=0,e=!1);b.y>O.y&&(b.y=O.y,e=!1);a.scrollPos=b;Ac=Math.floor(a.scrollPos.y/(P*Bc));var d,f=mb+Ac;d=!1!==a.options.rtl?Math.floor(a.scrollPos.x/vb)-(lb-R[0].offsetWidth-
Pa):Math.floor(a.scrollPos.x/vb)+Pa;K&&R&&R.css("left",d+"px");N&&Y&&Y.css("top",f+"px");Xc();hd(!0,c);e&&a.callScrollPosChanged()}};var md=function(a){return 0<a.x&&a.x<O.x||0<a.y&&a.y<O.y},tc=function(b,c,d){nd||(a.updateFocus(),Tb=0,nd=!0,Jc=n(function(){var e=c,d=a.getScrollPos();e||(0===Tb&&(Tb=5),Tb+=5+Bc,Be+=.5,e=Tb+=Math.floor(Be));d.y=b?d.y+e:d.y-e;a.setScrollPos(d);(0>=d.y||a.getScrollPos().y<d.y)&&Gb()},d?d:100))},Gb=function(){Jc&&(n.cancel(Jc),Jc=null);nd=!1;Tb=0};a.cancelScrollTimer=
function(){Gb()};a.scrollTo=function(b,c){if(b){var e=a.getRowCurrentIndex(b);if(a.isRowIndexInRange(e)){var d;d=e;switch(c){case "center":d=Math.floor(B/2)-1;d=e>d?e-d:0;break;case "bottom":d=B-2,a.options.showHeader&&d--,a.options.showFooter&&d--,d=e>d?e-d:0}a.setScrollPos({x:a.scrollPos.x,y:d*P})}}};var Xc=function(){var b=a.scrollPos.x;0>b&&(b=0);b>O.x&&(b=O.x);b*=-1;oa&&oa.css("left",b+L+"px");Ka&&Ka.css("left",b+L+"px");fa&&fa.css("left",b+L+"px");V&&V.css("left",b+L+"px");U&&U.css("left",b+
L+"px")},hd=function(b,c){if(!(0==b&&0>=P)){newIndex=0<P?Math.floor(a.scrollPos.y/P):0;a.scrollPos.y==O.y&&newIndex--;if(a.currentList.length>=B&&newIndex+B-1>a.currentList.length){newIndex=a.currentList.length-B+1;var e=a.getRowElems();e||(e=a.getRowElems("left"));e||(e=a.getRowElems("right"));e&&0<e.length&&(e=angular.element(e[e.length-1]),e[0].offsetTop+e[0].offsetHeight>q[0].clientHeight-(D+J)&&newIndex++)}0>newIndex&&(newIndex=0);newIndex!=w&&(w=newIndex,0!=b&&a.updateView(c))}};q.bind("scroll",
function(a){q[0].scrollTop=0;q[0].scrollLeft=0});var Ce=function(b,c){if(N){document.activeElement&&document.activeElement.blur();a.removeDropDownList();a.closeEditor(f);a.closeFilterWindow();qb();var e=a.hoverRow;a.hoverRow=null;a.refresh(e);e=Math.floor(q[0].clientHeight/4);switch(a.options.mouseWheelSpeed){case "veryslow":e=P;break;case "slow":e=2*P;break;case "fast":e=Math.floor(q[0].clientHeight/2)-D-J-P;break;case "veryfast":e=Math.floor(q[0].clientHeight-D-J-P)}a.prevScrollPos={x:a.scrollPos.x,
y:a.scrollPos.y};a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+e*c*-1},!0);md(a.scrollPos)||a.scrollPos.y==a.prevScrollPos.y||a.callScrollPosChanged()}};q.bind("mousewheel",function(b){if(0==a.options.autoSize&&(b.preventDefault(),!ja&&a.options.enabled)){var c=0;b.wheelDelta?c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,b.originalEvent.wheelDelta||-b.originalEvent.detail)));Ce(b,c)}});q.bind("DOMMouseScroll",function(b){if(0==a.options.autoSize&&
(b.preventDefault(),!ja&&a.options.enabled)){var c=0;b.detail?c=Math.max(-1,Math.min(1,-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,-b.originalEvent.detail)));Ce(b,c)}});var lc={x:0,y:0},pb={x:0,y:0};q.bind("touchstart",function(b){b.preventDefault();a.options.enabled&&(b=a.getTouchData(b))&&0<b.length&&(lc={x:b[0].pageX,y:b[0].pageY})});q.bind("touchend",function(b){if(a.options.enabled){(b=a.getTouchData(b))&&0<b.length&&(pb={x:b[0].pageX,y:b[0].pageY});var c=pb.x-lc.x,e=pb.y-lc.y;(20<
Math.abs(c)||20<Math.abs(e))&&document.activeElement&&document.activeElement.blur();var d=!1,f=!1,g=lc,l=a.scrollPos.x,m=a.scrollPos.y,q=n(function(){var b=a.scrollPos;-20>c?(g.x-=10,g.x>pb.x?b.x+=10:(b.x=l-c,d=!0)):20<c?(g.x+=10,g.x<pb.x?b.x-=10:(b.x=l-c,d=!0)):d=!0;-20>e?(g.y-=10,g.y>pb.y?b.y+=10:(b.y=m-e,f=!0)):20<e?(g.y+=10,g.y<pb.y?b.y-=10:(b.y=m-e,f=!0)):f=!0;a.setScrollPos(b);d&&f&&n.cancel(q)},5);lc=pb}});var Ea=null,ba=angular.element('<div class="iui-contextmenu" data-element="context-menu" tabindex="999999"></div>'),
ta=angular.element('<ul class="iui-contextmenu-block"></ul>');m.$eval(pc.menuItems);ba.append(ta);var De=m.name,Kc=null,yb={general:"iui-contextmenu",block:{general:"iui-contextmenu-block",marker:{top:"iui-contextmenu-marker-top",left:"iui-contextmenu-marker-left",bottom:"iui-contextmenu-marker-bottom",right:"iui-contextmenu-marker-right",rtlTop:"iui-contextmenu-marker-top-rtl",expand:{down:"iui-contextmenu-marker-expand-down",right:"iui-contextmenu-marker-expand-right",rtlDown:"iui-contextmenu-marker-expand-rtl-down",
up:"iui-contextmenu-marker-expand-up",left:"iui-contextmenu-marker-expand-left",space:"iui-contextmenu-marker-expand-space"}}},item:{general:{disabled:"iui-contextmenu-item-disabled",focused:"iui-contextmenu-item-focused",normal:"iui-contextmenu-item",hovered:"iui-contextmenu-item-hovered",selected:"iui-contextmenu-item-selected"},content:"iui-contextmenu-item-content",header:"iui-contextmenu-item-header",loadIcon:{general:"iui-contextmenu-load",icon:"iui-contextmenu-load-icon"},separator:"iui-contextmenu-item-separator"}},
r={controlStyle:yb,dataFields:{enabled:"enabled",icon:"icon",id:"id",hasChildren:"hasChildren",pid:"pid",items:"items",style:"style",text:"text",type:"type"},enabled:!0,itemClick:null,itemIcon:"",items:[],loadItem:null,open:null,openOnHover:!0,position:"mouse",rtl:!1,activate:"rightclick",showIcons:!0},mc=[],Ia=[],od=function(a,b,c){a.type||(a.type="item");a[r.dataFields.id]||(a[r.dataFields.id]=g.getUniqueId());b&&(a[r.dataFields.pid]=b);c?Ia.push(a):mc.push(a)},Ee=function(a,b,c){if(a[r.dataFields.items]){if(od(a,
b,c),b=a[r.dataFields.items])for(var e=0;e<b.length;e++)Ee(b[e],a[r.dataFields.id],c)}else od(a,b,c)},cf=function(){Ia.length=0;if(Ea)for(var a=nc(Ea),b=0;b<a.length;b++)Ee(a[b],null,!0);return Ia},df=function(){mc.length=0;if(Ea){var a=nc(Ea);if(a)for(var b=0;b<a.length;b++)od(a[b],0,null,!1)}},Lc=function(a){return a&&Ia?Ia.indexOf(a):-1},nc=function(b){return"column"==b.type?b[a.options.columnFields.contextMenu]:b[a.options.rowFields.contextMenu]},Qd=function(a,b){if(b){var c=nc(b);if(!c||c&&0==
c.length)return!1;a.ctrlKey||a.metaKey||(ba&&(ba.unbind("blur"),ba.remove()),ef(a));return!0}return!1},Fd=function(a){ib()},Gd=function(a){ib()},Hd=function(a){switch(a.keyCode){case 27:ib()}};angular.element(l).bind("click",Fd);angular.element(l).bind("contextmenu",Gd);angular.element(l).bind("keydown",Hd);var Xb=function(a){(a?a:ta).unbind("contextmenu");a=a?a.find("li"):ta.children();if(0<a.length)for(var b=0;b<a.length;b++)currentElem=angular.element(a[b]),currentElem.unbind("click mousedown mouseenter mouseleave touchstart")},
pd=function(a){Xb(a);(a?a:ta).bind("contextmenu",function(a){a.preventDefault()});var b=null;a=a?a.find("li"):ta.children();if(0<a.length)for(var c=null,e=0;e<a.length;e++)c=angular.element(a[e]),(b=oc(c))&&b&&g.isEnabled(b[r.dataFields.enabled])&&b&&"item"==b.type&&ff(c)},rd=function(){for(var a=0;a<ua.length;a++)ua[a][r.dataFields.selected]=!1,qd(ua[a]);ua.splice(0,ua.length);va=null},ff=function(a){a&&(a.bind("mousedown",function(a){var b=oc(this);b&&(b.itemClick&&b.itemClick({parentName:De,item:b,
mousePos:{x:a.pageX,y:a.pageY}}),ib());a.stopPropagation()}),a.bind("mouseenter",function(a){var b=oc(this);b&&(angular.element(this),Kc=b,Ub(null,!0),sd(b)&&b!=va&&rd(),Ua&&d.cancel(Ua),Ua=d(function(){Ua&&gf(b)},500));a.stopPropagation()}),a.bind("mouseleave",function(a){Kc=null;var b=oc(this);if(b){Ub(null,!0);sd(b)&&b==va&&rd();va&&(va[r.dataFields.selected]=!0,Ub(va));var c=d(function(){qd(b);d.cancel(c)},250)}Ua&&d.cancel(Ua);Ua=null;a.stopPropagation()}),a.bind("touchstart",function(a){a.preventDefault();
var b=g.getTouchData(a);if(b&&0<b.length){var c=oc(this);c&&(c.itemClick&&c.itemClick({parentName:De,item:c,mousePos:{x:b[0].pageX,y:b[0].pageY}}),ib());a.stopPropagation()}}))},va=null,ua=[],Fe=function(a){return a?(a=a[r.dataFields.items],void 0!=a&&0<a.length):!1},gf=function(a){var b=td(a);if(a&&ud(a)&&S&&b){var c=b.find("ul");if(0<c.length){c=angular.element(c.eq(0));Xb(c);Fe(a)&&(b.removeClass(r.controlStyle.block.marker.expand.down),b.removeClass(r.controlStyle.block.marker.expand.left),b.removeClass(r.controlStyle.block.marker.expand.right),
b.removeClass(r.controlStyle.block.marker.expand.rtlDown));va=sd(a)?a:va;va[r.dataFields.selected]=!0;0>ua.indexOf(va)&&ua.unshift(va);for(var e=0;e<ua.length;e++)ua[e]!=va&&(ua[e][r.dataFields.selected]=!1,qd(ua[e]));ua.splice(1,ua.length-1);if(Fe(a)){e=Ge(a);if(0<=e){var f=0,l="auto",l=angular.element(b.parent());g.getPadding(b[0]);var m=g.getPadding(l[0]),b=g.getPadding(b[0]),f=f-(m.top+b.top),l=l[0].offsetWidth-8;0<b.right&&(l+=b.right-4);b="display:block;"+("top:"+f+"px;");"auto"!=l&&(b+="left:"+
l+"px;");(a=Mc(Nc(a)))&&a.data&&e<a.data.length&&(a.data[e].inlineBlockStyle=b,S.$apply())}d(function(){pd(c);He()},1)}}}},qd=function(a){var b=td(a);if(a&&S&&b){var c=b.find("ul");0<c.length&&(c=angular.element(c.eq(0)),Xb(c),ud(a)&&b.addClass(r.controlStyle.block.marker.expand.right),b=Ge(a),0<=b&&(a=Mc(Nc(a)))&&a.data&&b<a.data.length&&(a.data[b].inlineBlockStyle="display:none;",S.$apply()))}},ib=function(){rd();Kc=null;ba&&(ba.unbind("blur"),ba.remove());if(document.body)for(var a=angular.element(document.body).children(),
b=0;b<a.length;b++){var c=angular.element(a[b]);c[0].attributes&&c[0].attributes["data-element"]&&"context-menu"===c[0].attributes["data-element"].value&&c.remove()}Ea=va=null;Ua&&d.cancel(Ua);Ua=null},ef=function(a){if(document.body){ba.css("top","-999px");ba.css("tabindex","999");angular.element(document.body).append(ba);ba.bind("blur",function(a){ib()});df();cf();hf(void 0);var b=d(function(){ba[0].focus();var c=a.pageY,e=a.pageX,f=g.getPageRect(q[0]);switch(r.position){case "above":c=f.top-2-
ta[0].offsetHeight;e=f.right-ta[0].offsetWidth+1;break;case "below":c=f.bottom+2;e=f.right-ta[0].offsetWidth+1;break;case "left":c=f.top-1;e=f.left-2-ta[0].offsetWidth;break;case "right":c=f.top-1,e=f.right+2}ba.css("top",c+"px");ba.css("left",e+"px");pd();r.open&&r.open({mousePos:{x:a.pageX,y:a.pageY}});d.cancel(b)},1)}},td=function(a){var b=null;if(a){a=Lc(a);var c=ba.find("li");if(c&&0<c.length)for(var e=0;e<c.length;e++){var d=angular.element(c[e]);if(d[0].attributes["data-index"]&&d[0].attributes["data-index"].value.toString()===
a.toString()){b=d;break}}}return b},jf=function(a){var b=null;a&&(a=td(a))&&(a=a.find("ul"),0<a.length&&(b=angular.element(a.eq(0))));return b},oc=function(a){if(a&&(a=angular.element(a))&&a[0].attributes["data-index"]&&(a=a[0].attributes["data-index"].value,0<=a&&a<Ia.length))return Ia[a]},Ie=function(a,b){var c=null;if(a&&b)for(var e=0;!c&&e<b.length;)c=b[e][r.dataFields.id]&&a[r.dataFields.pid]&&b[e][r.dataFields.id].toString()===a[r.dataFields.pid].toString()?b[e]:Ie(a,b[e][r.dataFields.items]),
e++;return c},Ge=function(a){var b=Nc(a),b=Je(b),c=-1;b||(b=Je());if(!a[r.dataFields.id]&&b)c=b.indexOf(a);else if(a&&b)for(var e=0;e<b.length;e++)if(b[e][r.dataFields.id]&&a[r.dataFields.id]&&b[e][r.dataFields.id].toString()===a[r.dataFields.id].toString()){c=e;break}return c},Nc=function(a){if(Ea){var b=nc(Ea);return a&&b?Ie(a,b):null}return null},Je=function(a){return a?(a[r.dataFields.items]||(a[r.dataFields.items]=[]),a[r.dataFields.items]):Ea?nc(Ea):[]},kf=function(a){if(a&&"separator"!=a.type){if(0==
a[r.dataFields.enabled])return"disabled";if(a==E.menuHoverItem)return"hovered";if(1==a[r.dataFields.selected])return"selected"}return"normal"},sd=function(a){return!a||void 0!=a[r.dataFields.pid]&&null!=a[r.dataFields.pid]?!1:!0},Ua=null,S=null,ud=function(a){if(a){var b=a[r.dataFields.items];return a[r.dataFields.hasChildren]||b&&0<b.length}return!1},Vc=function(a){return null!=a.icon||null!=r.itemIcon},lf=function(a,b,c){var e="";a[r.dataFields.icon]||""==a[r.dataFields.icon]?e=a[r.dataFields.icon]:
r.itemIcon&&(e=r.itemIcon);return{icon:e,iconVisible:0!=r.showIcons&&Vc(a),index:b,inlineBlockStyle:"display:none",item:a,style:{},visible:c}},vd=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)b.push(lf(a[c],Lc(a[c])));return b},He=function(){var a=ta.find("li");if(0<a.length)for(var b=0;b<a.length;b++)for(var c=angular.element(a[b]),d=c.children(),f=0;f<d.length;f++){var g=angular.element(d[f]);g[0].attributes["data-element"]&&"load-icon"==g[0].attributes["data-element"].value.toString()&&
g.css("top",(c[0].clientHeight-g[0].offsetHeight)/2+"px")}},mf=function(){var a=ta.find("li");if(0<a.length)for(var b=0;b<a.length;b++){var c=angular.element(a[b]);c&&c.attr("data-index",b)}},Ke=function(a,b){var c=null;if(a&&b)for(var e=0;!c&&e<a.length;)c=a[e].item==b?a[e]:Ke(a[e].data,b),e++;return c},Mc=function(a){return a?Ke(S.data,a):S},hf=function(a){var b=d(function(){Xb();r.rtl?ba.css("direction","rtl"):ba.css("direction","ltr");a||(ta.empty(),S&&S.$destroy());d.cancel(b)},1),e=d(function(){var b=
"";if(a){var f=Mc(a);if(f){var g=a[r.dataFields.items];if(g&&0<g.length){f.data=vd(g);Ub();S.$apply();for(var h=0;h<g.length;h++)b+=wd(h,g[h],f.scopeRef,f.data);""!=b&&(f=jf(a))&&(f.empty(),f.append(c(b)(S)))}mf()}}else{S=m.$new();S.data=vd(mc);Ub();S.$apply();for(f=0;f<mc.length;f++)b+=wd(f,mc[f],"data",S.data);""!=b&&ta.append(c(b)(S))}pd();var k=d(function(){He();d.cancel(k)},1);d.cancel(e)},1)},wd=function(a,b,c,d){Lc(b);var e='<li iui-class="{{'+c+"["+a+"].style",e="header"==b.type?e+'.header}}"':
e+'.general}}"',e=e+(' data-index="'+Lc(b)+'">');switch(b.type){case "header":e=e+'<span data-element="header">'+("{{"+c+"["+a+"].item."+r.dataFields.text+"}}");e+="</span>";break;case "separator":e+='<hr iui-class="{{'+c+"["+a+'].style.separator}}" data-element="separator" />';break;default:e=e+('<span iui-class="{{'+c+"["+a+'].icon}}" data-element="icon" ng-show="'+c+"["+a+'].iconVisible"></span>')+('<span iui-class="{{'+c+"["+a+'].style.content}}"  data-element="content">')+("{{"+c+"["+a+"].item."+
r.dataFields.text+"}}"),e=e+"</span>"+('<span iui-class="{{'+c+"["+a+'].style.loadIcon}}" data-element="load-icon"></span>')}var f=b[r.dataFields.items];if(b[r.dataFields.hasChildren]||f&&0<f.length){e+='<ul iui-class="{{'+c+"["+a+"].style.block";switch(r.displayMode){case "vertical":e=r.rtl?e+'.marker.right}}"':e+'.marker.left}}"';break;default:e=r.rtl?e+'.marker.right}}"':e+'.marker.left}}"'}e+=' iui-style="{{'+c+"["+a+'].inlineBlockStyle}}">';c+="["+a+"].data";d[a].data=vd(f);d[a].scopeRef=c;if(f&&
0<f.length)for(b=0;b<f.length;b++)e+=wd(b,f[b],d[a].scopeRef,d[a].data);e+="</ul>"}return e+"</li>"};this.getCurrentMenuItemStyle=function(a,b){var c=r.controlStyle.item;if(a)switch(a.style){case "initial":break;case "parent":return E.getCurrentMenuItemStyle(E.getParentMenu(a),b);default:null!=a.style&&(c=a.style)}if(b){if(g.isString(c.general))return c.general;switch(b){case "disabled":return c.general&&c.general.disabled?c.general.disabled:r.controlStyle.item.general.disabled;case "focused":return c.general&&
c.general.focused?c.general.focused:r.controlStyle.item.general.focused;case "hovered":return c.general&&c.general.hovered?c.general.hovered:r.controlStyle.item.general.hovered;case "selected":return c.general&&c.general.selected?c.general.selected:r.controlStyle.item.general.selected;default:return c.general&&c.general.normal?c.general.normal:r.controlStyle.item.general.normal}}else return c?c:r.controlStyle.item};var Ub=function(a,b){if(S)if(a)switch(a.type){default:var c=Mc(a);if(c){var d=ud(a),
e=kf(a),f={block:yb.block,content:"",general:"",header:yb.item.header,label:"",loadIcon:"",separator:yb.item.separator},g;g=yb.item.general.normal;r.controlStyle.item.general.normal!=g&&(g+=" "+r.controlStyle.item.general.normal);f.general=g;g=yb.item.content;r.controlStyle.item.content!=g&&(g+=" "+r.controlStyle.item.content);f.content=g;g=yb.item.loadIcon.general;r.controlStyle.item.loadIcon.general!=g&&(g+=" "+r.controlStyle.item.loadIcon.general);r.rtl&&(g+="-rtl");f.loadIcon=g;switch(a.type){case "header":g=
getCurrentMenuItemStyle(a).header;g!=r.controlStyle.item.header&&(f.header+=" "+g);break;case "separator":g=getCurrentMenuItemStyle(a).separator;g!=r.controlStyle.item.separator&&(f.separator+=" "+g);break;default:var h=getCurrentMenuItemStyle(a);g=getCurrentMenuItemStyle(a,e);g!=r.controlStyle.item.general.normal&&(f.general+=" "+g);d&&"selected"!=e&&!r.loadItem&&(f.general=r.rtl?f.general+(" "+r.controlStyle.block.marker.expand.left):f.general+(" "+r.controlStyle.block.marker.expand.right));g=h.content;
g!=r.controlStyle.item.content&&(f.content+=" "+g);a==r.loadItem&&(g=h.loadIcon.icon,f.loadIcon+=" "+g,g!=r.controlStyle.item.loadIcon.icon&&(f.loadIcon+=" "+g))}c.style=f;void 0==b&&S.$apply()}}else{for(c=0;c<Ia.length;c++)Ia[c][r.dataFields.selected]=!1;for(c=Kc;c;)c[r.dataFields.selected]=!0,c=Nc(c);for(c=0;c<Ia.length;c++)Ub(Ia[c],!1);1==b&&S.$apply()}},E=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+
(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=this.crpar();this.$tw=angular.element(this.crtr(E.tpar));this.tmp=300;this.twp=200*this.tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",
q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"))};this.s1t=function(a){E.s3t();this.trlTime=d(function(){E.trActive||(E.trCount=0,E.trActive=!0,E.trId=n(function(){E.animTr()},1E3))},a)};this.s3t=function(){this.trId&&(n.cancel(this.trId),this.trId=null);this.trlTime&&(d.cancel(this.trlTime),this.trlTime=null);this.trActive=!1};this.s2t=function(){this.s3t();this.trActive=!1;this.$tw.remove()};q.append(this.$tw);this.s1t(this.twp);angular.isDefined(m.options)?a.updateOptions(m.options):
(0==m.allowAnimation&&(a.options.allowAnimation=m.allowAnimation),0==m.allowCellFocus&&(a.options.allowCellFocus=m.allowCellFocus),1==m.allowColumnReorder&&(a.options.allowColumnReorder=m.allowColumnReorder),1==m.allowDrag&&(a.options.allowDrag=m.allowDrag),0==m.allowDrop&&(a.options.allowDrop=m.allowDrop),1==m.allowFilter&&(a.options.allowFilter=m.allowFilter),0==m.allowFocus&&(a.options.allowFocus=m.allowFocus),0==m.autoExpand&&(a.options.autoExpand=m.autoExpand),1==m.autoSize&&(a.options.autoSize=
m.autoSize),0==m.autoUpdate&&(a.options.autoUpdate=m.autoUpdate),angular.isDefined(m.animationSpeed)&&200!==m.animationSpeed&&(a.options.animationSpeed=m.animationSpeed),angular.isDefined(m.controlStyle)&&a.updateControlStyle(m.controlStyle),angular.isDefined(m.displayMode)&&(a.options.displayMode=m.displayMode),angular.isDefined(m.editorSettings)&&a.updateEditorSettings(m.editorSettings),angular.isDefined(m.expandingColumnIndex)&&(a.options.expandColIndex=m.expandingColumnIndex),angular.isDefined(m.fields)&&
(a.updateDataFields(m.fields),a.updateData()),0==m.enabled&&(a.options.enabled=m.enabled),1==m.fillSpace&&(a.options.fillSpace=m.fillSpace),angular.isDefined(m.gridLines)&&(a.options.gridLines=m.gridLines),1==m.hoverSelection&&(a.options.hoverSelection=m.hoverSelection),angular.isDefined(m.indent)&&(a.options.indent=m.indent),angular.isDefined(m.labelEdit)&&(a.options.labelEdit=m.labelEdit),angular.isDefined(m.maxRows)&&(a.options.maxRows=m.maxRows),angular.isDefined(m.mouseWheelSpeed)&&(a.options.mouseWheelSpeed=
m.mouseWheelSpeed),angular.isDefined(m.paging)&&a.updatePaging(m.paging),angular.isDefined(m.rowHeight)&&(a.options.rowHeight=m.rowHeight),angular.isDefined(m.rowIcon)&&(a.options.rowIcon=m.rowIcon),1==m.rtl&&(a.options.rtl=m.rtl),angular.isDefined(m.selectedIndex)&&(a.options.selectedIndex=m.selectedIndex),angular.isDefined(m.selectedRow)&&(a.options.selectedRow=m.selectedRow),angular.isDefined(m.selectionMode)&&(a.options.selectionMode=m.selectionMode),!1===m.showExpandBoxes&&(a.options.showExpandBoxes=
m.showExpandBoxes),0==m.showFooter&&(a.options.showFooter=m.showFooter),0==m.showHeader&&(a.options.showHeader=m.showHeader),0==m.showIcons&&(a.options.showIcons=m.showIcons),angular.isDefined(m.sorting)&&(a.options.sorting=m.sorting));a.updateLayout()}}}]);