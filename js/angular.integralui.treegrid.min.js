/*
  filename: angular.integralui.treegrid.min.js
  version : 3.2.0
  Copyright © 2014-2016 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUITreeGridService",["$rootScope",function(c){var f=null;return{addColumn:function(g,k){c.$broadcast(g+"-add-column",k)},clearColumns:function(g){c.$broadcast(g+"-clear-columns")},insertColumnAt:function(g,k,u){c.$broadcast(g+"-insert-column-at",k,u)},insertColumnBefore:function(g,k,u){c.$broadcast(g+"-insert-column-before",k,u)},insertColumnAfter:function(g,k,u){c.$broadcast(g+"-insert-column-after",k,u)},removeColumn:function(g,k){c.$broadcast(g+"-remove-column",
k)},removeColumnAt:function(g,k){c.$broadcast(g+"-remove-column-at",k)},addRow:function(g,k,u){c.$broadcast(g+"-add-row",k,u)},clearRows:function(g,k){c.$broadcast(g+"-clear-rows",k)},insertRowAt:function(g,k,u,p){c.$broadcast(g+"-insert-row-at",k,u,p)},insertRowBefore:function(g,k,u){c.$broadcast(g+"-insert-row-before",k,u)},insertRowAfter:function(g,k,u){c.$broadcast(g+"-insert-row-after",k,u)},removeRow:function(g,k){c.$broadcast(g+"-remove-row",k)},removeRowAt:function(g,k,u){c.$broadcast(g+"-remove-row-at",
k,u)},exportToJSON:function(g,k,u,p,f){c.$broadcast(g+"-export-json",k,u,p,f);g=this.getTempData();this.clearTempData();return g?g:""},loadData:function(g,k,f,p,ia){c.$broadcast(g+"-load-data",k,f,p,ia)},openEditor:function(g,k){c.$broadcast(g+"-open-editor",k)},closeEditor:function(g,k){c.$broadcast(g+"-close-editor",k)},collapse:function(g,k){c.$broadcast(g+"-collapse",k)},expand:function(g,k){c.$broadcast(g+"-expand",k)},expandColIndex:function(g,k){c.$broadcast(g+"-expand-col-index",k)},toggle:function(g,
k){c.$broadcast(g+"-toggle",k)},filter:function(g,k,f){c.$broadcast(g+"-filter",k,f)},findRowById:function(g,k){c.$broadcast(g+"-find-row-by-id",k);var f=this.getTempData();this.clearTempData();return f?f:null},findRowByPath:function(g,k,f){c.$broadcast(g+"-find-row-by-path",k,f);g=this.getTempData();this.clearTempData();return g?g:null},findRowByText:function(g,k){c.$broadcast(g+"-find-row-by-text",k);var f=this.getTempData();this.clearTempData();return f?f:null},getCellAt:function(g,k){c.$broadcast(g+
"-get-cell-at",k);var f=this.getTempData();this.clearTempData();return f?f:null},getRowAt:function(g,k){c.$broadcast(g+"-get-row-at",k);var f=this.getTempData();this.clearTempData();return f?f:null},getRowParent:function(g,k){c.$broadcast(g+"-get-row-parent",k);var f=this.getTempData();this.clearTempData();return f?f:null},focus:function(g,k){c.$broadcast(g+"-focus",k)},clearTempData:function(){f=null},ensureVisible:function(g,k){c.$broadcast(g+"-ensure-visible",k)},getTempData:function(){return f},
getRowLevel:function(g,k){c.$broadcast(g+"-get-row-level",k);var f=this.getTempData();this.clearTempData();return f?f:0},getFlatList:function(g,k){c.$broadcast(g+"-get-flat-list",k);var f=this.getTempData();this.clearTempData();return f?f:[]},getFullPath:function(g,k){c.$broadcast(g+"-get-full-path",k);var f=this.getTempData();this.clearTempData();return f?f:""},getHoverColumn:function(g,k){c.$broadcast(g+"-get-hover-column",k);var f=this.getTempData();this.clearTempData();return f?f:null},getList:function(g,
k){c.$broadcast(g+"-get-list",k);var f=this.getTempData();this.clearTempData();return f?f:[]},setTempData:function(c){f=c},topRow:function(g,k){if(k)c.$broadcast(g+"-set-top-row",k);else return c.$broadcast(g+"-get-top-row"),k=this.getTempData(),this.clearTempData(),k?k:null},beginLoad:function(g,k,f){c.$broadcast(g+"-begin-load",k,f)},endLoad:function(g,k){c.$broadcast(g+"-end-load",k)},moveColumn:function(g,k,f){c.$broadcast(g+"-move-column",k,f)},moveRow:function(g,k,f,p,ia){c.$broadcast(g+"-move-row",
k,f,p,ia)},getScrollPos:function(g){c.$broadcast(g+"-get-scroll-pos");g=this.getTempData();this.clearTempData();return g?g:{x:0,y:0}},getMaxScrollPos:function(g){c.$broadcast(g+"-get-max-scroll-pos");g=this.getTempData();this.clearTempData();return g?g:{x:0,y:0}},setScrollPos:function(g,k){c.$broadcast(g+"-set-scroll-pos",k)},scrollTo:function(g,k,f){c.$broadcast(g+"-scroll-to",k,f)},currentPage:function(g,k){if(void 0!=k&&null!=k)c.$broadcast(g+"-set-current-page",k);else{c.$broadcast(g+"-get-current-page");
var f=this.getTempData();this.clearTempData();return void 0!=f?f:-1}},firstPage:function(g){c.$broadcast(g+"-first-page")},lastPage:function(g){c.$broadcast(g+"-last-page")},nextPage:function(g){c.$broadcast(g+"-next-page")},prevPage:function(g){c.$broadcast(g+"-prev-page")},clearSelection:function(g){c.$broadcast(g+"-clear-selection")},selectedColumn:function(g,f){if(f)c.$broadcast(g+"-set-selected-column",f);else{c.$broadcast(g+"-get-selected-column");var k=this.getTempData();this.clearTempData();
return k?k:null}},selectedRow:function(g,f){if(f)c.$broadcast(g+"-set-selected-row",f);else{c.$broadcast(g+"-get-selected-row");var k=this.getTempData();this.clearTempData();return k?k:null}},selectedRows:function(g,f){if(f)c.$broadcast(g+"-set-selected-rows",f);else{c.$broadcast(g+"-get-selected-rows");var k=this.getTempData();this.clearTempData();return k?k:null}},sort:function(g,f,u,p){c.$broadcast(g+"-sort",f,u,p)},refresh:function(g,f,u){c.$broadcast(g+"-refresh",f,u)},resumeLayout:function(g,
f){c.$broadcast(g+"-resume-layout",f)},suspendLayout:function(g,f){c.$broadcast(g+"-suspend-layout",f)},updateLayout:function(f,k){c.$broadcast(f+"-update-layout",k)},updateView:function(f){c.$broadcast(f+"-update-view")}}}]).controller("IntegralUITreeGridController",["$scope","$element","$timeout","$window","$interval","IntegralUIInternalService","IntegralUIDataService","IntegralUITreeGridService","IntegralUIDragDrop","IntegralUIFilter",function(c,f,g,k,u,p,ia,m,q,rc){var a=this;this.suppressProcess=
!1;this.hoverCell=this.hoverRow=this.hoverColumn=null;a.defaultCheckBoxStyle={general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",unchecked:"iui-checkbox-unchecked"}};a.defaultStyle={general:"iui-treegrid",column:{general:{content:"iui-treegrid-column-cell-content",disabled:"iui-treegrid-column-disabled",normal:"iui-treegrid-column",hovered:"iui-treegrid-column-hovered",selected:"iui-treegrid-column-selected"},
header:{content:"iui-treegrid-column-header-cell-content",disabled:"iui-treegrid-column-header-disabled",normal:"iui-treegrid-column-header",hovered:"iui-treegrid-column-header-hovered",selected:"iui-treegrid-column-header-selected"},body:{content:"iui-treegrid-column-body-cell-content",disabled:"iui-treegrid-column-body-disabled",normal:"iui-treegrid-column-body",hovered:"iui-treegrid-column-body-hovered",selected:"iui-treegrid-column-body-selected"},footer:{content:"iui-treegrid-column-footer-cell-content",
disabled:"iui-treegrid-column-footer-disabled",normal:"iui-treegrid-column-footer",hovered:"iui-treegrid-column-footer-hovered",selected:"iui-treegrid-column-footer-selected"}},row:{general:{disabled:"iui-treegrid-row-disabled",focused:"iui-treegrid-row-focused",normal:"iui-treegrid-row",hovered:"iui-treegrid-row-hovered",selected:"iui-treegrid-row-selected"},checkBox:{general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",
unchecked:"iui-checkbox-unchecked"}},expandBox:{general:"iui-treegrid-expand-box",animated:"iui-treegrid-expand-box-load",expanded:"iui-treegrid-expand-box-open",collapsed:"iui-treegrid-expand-box-close"},cell:{content:"iui-treegrid-row-cell-content",general:"iui-treegrid-row-cell",disabled:"iui-treegrid-row-cell-disabled",focused:"iui-treegrid-row-cell-focused",normal:"iui-treegrid-row-cell",hovered:"iui-treegrid-row-cell-hovered",selected:"iui-treegrid-row-cell-selected"},fixed:{disabled:"iui-treegrid-row-fixed-disabled",
normal:"iui-treegrid-row-fixed",hovered:"iui-treegrid-row-fixed-hovered"}},cell:{content:"iui-treegrid-row-cell-content",general:"iui-treegrid-row-cell",disabled:"iui-treegrid-row-cell-disabled",focused:"iui-treegrid-row-cell-focused",normal:"iui-treegrid-row-cell",hovered:"iui-treegrid-row-cell-hovered",selected:"iui-treegrid-row-cell-selected"}};this.updatePaging=function(b){a.options.paging=b?{enabled:p.isFieldAvailable(b.enabled,!1),showControlPanel:p.isFieldAvailable(b.showControlPanel,!0),pageSize:p.isFieldAvailable(b.pageSize,
100)}:{enabled:!1,showControlPanel:!0,pageSize:100}};this.updateOptions=function(b){b?(a.options={allowAnimation:p.isFieldAvailable(b.allowAnimation,!0),allowCellFocus:p.isFieldAvailable(b.allowCellFocus,!0),allowColumnReorder:p.isFieldAvailable(b.allowColumnReorder,!1),allowDrag:p.isFieldAvailable(b.allowDrag,!1),allowDrop:p.isFieldAvailable(b.allowDrop,!0),allowFilter:p.isFieldAvailable(b.allowFilter,!1),allowFocus:p.isFieldAvailable(b.allowFocus,!0),animationSpeed:200,autoExpand:p.isFieldAvailable(b.autoExpand,
!0),autoSize:p.isFieldAvailable(b.autoSize,!1),controlStyle:a.defaultStyle,displayMode:p.isFieldAvailable(b.displayMode,"normal"),editorSettings:{activate:"click"},enabled:p.isFieldAvailable(b.enabled,!0),expandColIndex:p.isFieldAvailable(b.expandColIndex,void 0!=a.options.expandColIndex?a.options.expandColIndex:0),fillSpace:p.isFieldAvailable(b.fillSpace,!1),gridLines:p.isFieldAvailable(b.gridLines,"both"),hoverSelection:p.isFieldAvailable(b.hoverSelection,!1),indent:p.isFieldAvailable(b.indent,
15),labelEdit:p.isFieldAvailable(b.labelEdit,!1),loadRows:[],maxRows:p.isFieldAvailable(b.maxRows,0),mouseWheelSpeed:p.isFieldAvailable(b.mouseWheelSpeed,"normal"),pathSeparator:p.isFieldAvailable(b.pathSeparator,"\\"),rowHeight:p.isFieldAvailable(b.rowHeight,-1),rtl:p.isFieldAvailable(b.rtl,!1),selectedColumn:p.isFieldAvailable(b.selectedColumn,a.options.selectedColumn?a.options.selectedColumn:null),selectedIndex:-1,selectedRow:p.isFieldAvailable(b.selectedRow,a.options.selectedRow?a.options.selectedRow:
null),selectedRows:a.options.selectedRows?a.options.selectedRows:[],selectionMode:p.isFieldAvailable(b.selectionMode,"one"),showExpandBoxes:p.isFieldAvailable(b.showExpandBoxes,!0),showFooter:p.isFieldAvailable(b.showFooter,!0),showHeader:p.isFieldAvailable(b.showHeader,!0),showIcons:p.isFieldAvailable(b.showIcons,!0),sorting:p.isFieldAvailable(b.sorting,"none")},a.updatePaging(b.paging),a.updateDataFields(b.dataFields),a.updateControlStyle(b.controlStyle)):(a.options={allowAnimation:!0,allowCellFocus:!0,
allowColumnReorder:!1,allowDrag:!1,allowDrop:!0,allowFilter:!1,allowFocus:!0,animationSpeed:200,autoExpand:!0,autoSize:!1,controlStyle:a.defaultStyle,displayMode:"normal",editorSettings:{activate:"click"},enabled:!0,expandColIndex:0,fillSpace:!1,gridLines:"both",hoverSelection:!1,indent:15,labelEdit:!1,loadRows:[],maxRows:0,mouseWheelSpeed:"normal",pathSeparator:"\\",rowHeight:-1,rtl:!1,selectedColumn:null,selectedIndex:-1,selectedRow:null,selectedRows:[],selectionMode:"one",showExpandBoxes:!0,showFooter:!0,
showHeader:!0,showIcons:!0,sorting:"none"},a.updatePaging(),a.updateDataFields())};a.options={};this.updateColumnFields=function(b){a.options.columnFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFilter:b.allowFilter?b.allowFilter:"allowFilter",cellTemplateUrl:b.cellTemplateUrl?b.cellTemplateUrl:"cellTemplateUrl",comparer:b.comparer?b.comparer:"comparer",contentAlignment:b.contentAlignment?b.contentAlignment:"contentAlignment",contextMenu:b.contextMenu?
b.contextMenu:"contextMenu",editorType:b.editorType?b.editorType:"editorType",editorSettings:b.editorSettings?b.editorSettings:"editorSettings",editorTemplate:b.editorTemplate?b.editorTemplate:"editorTemplate",filterParams:b.filterParams?b.filterParams:"filterParams",filterTemplate:b.filterTemplate?b.filterTemplate:"filterTemplate",fixed:b.fixed?b.fixed:"fixed",fixedWidth:b.fixedWidth?b.fixedWidth:"fixedWidth",footerAlignment:b.footerAlignment?b.footerAlignment:"footerAlignment",footerContent:b.footerContent?
b.footerContent:"footerContent",footerTemplate:b.footerTemplate?b.footerTemplate:"footerTemplate",footerTemplateModel:b.footerTemplateModel?b.footerTemplateModel:"footerTemplateModel",footerText:b.footerText?b.footerText:"footerText",footerTooltip:b.footerTooltip?b.footerTooltip:"footerTooltip",headerAlignment:b.headerAlignment?b.headerAlignment:"headerAlignment",headerContent:b.headerContent?b.headerContent:"headerContent",headerTemplate:b.headerTemplate?b.headerTemplate:"headerTemplate",headerTemplateModel:b.headerTemplateModel?
b.headerTemplateModel:"headerTemplateModel",headerText:b.headerText?b.headerText:"headerText",headerTooltip:b.headerTooltip?b.headerTooltip:"headerTooltip",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",minWidth:b.minWidth?b.minWidth:"minWidth",maxWidth:b.maxWidth?b.maxWidth:"maxWidth",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateSettings:b.templateSettings?b.templateSettings:"templateSettings",visible:b.visible?b.visible:"visible",width:b.width?b.width:"width"}:{allowDrag:"allowDrag",
allowDrop:"allowDrop",allowFilter:"allowFilter",cellTemplateUrl:"cellTemplateUrl",comparer:"comparer",contentAlignment:"contentAlignment",contextMenu:"contextMenu",editorType:"editorType",editorSettings:"editorSettings",editorTemplate:"editorTemplate",filterParams:"filterParams",filterTemplate:"filterTemplate",fixed:"fixed",fixedWidth:"fixedWidth",footerAlignment:"footerAlignment",footerContent:"footerContent",footerTemplate:"footerTemplate",footerTemplateModel:"footerTemplateModel",footerText:"footerText",
footerTooltip:"footerTooltip",headerAlignment:"headerAlignment",headerContent:"headerContent",headerTemplate:"headerTemplate",headerTemplateModel:"headerTemplateModel",headerText:"headerText",headerTooltip:"headerTooltip",icon:"icon",id:"id",minWidth:"minWidth",maxWidth:"maxWidth",selected:"selected",style:"style",templateSettings:"templateSettings",visible:"visible",width:"width"};a.columnsObj&&a.columnsObj.updateDataFields(a.options.columnFields)};this.updateRowFields=function(b){a.options.rowFields=
b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFocus:b.allowFocus?b.allowFocus:"allowFocus",cells:b.cells?b.cells:"cells",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",expanded:b.expanded?b.expanded:"expanded",fixed:b.fixed?b.fixed:"fixed",hasChildren:b.hasChildren?b.hasChildren:"hasChildren",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",objects:b.rows?b.rows:"rows",
pid:b.pid?b.pid:"pid",rows:b.rows?b.rows:"rows",selected:b.selected?b.selected:"selected",statusIcon:b.statusIcon?b.statusIcon:"statusIcon",style:b.style?b.style:"style",subobjects:b.cells?b.cells:"cells",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFocus:"allowFocus",cells:"cells",content:"content",contextMenu:"contextMenu",enabled:"enabled",expanded:"expanded",fixed:"fixed",hasChildren:"hasChildren",icon:"icon",id:"id",objects:"rows",
pid:"pid",rows:"rows",selected:"selected",statusIcon:"statusIcon",style:"style",subobjects:"cells",text:"text",tooltip:"tooltip"};a.rowsObj&&a.rowsObj.updateDataFields(a.options.rowFields)};this.updateCellFields=function(b){a.options.cellFields=b?{allowEdit:b.allowEdit?b.allowEdit:"allowEdit",cid:b.cid?b.cid:"cid",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",labelEdit:b.labelEdit?b.labelEdit:"labelEdit",rid:b.rid?
b.rid:"rid",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateObj:b.templateObj?b.templateObj:"templateObj",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip",value:b.value?b.value:"value"}:{allowEdit:"allowEdit",cid:"cid",content:"content",contextMenu:"contextMenu",enabled:"enabled",labelEdit:"labelEdit",rid:"rid",selected:"selected",style:"style",templateObj:"templateObj",text:"text",tooltip:"tooltip",value:"value"}};this.updateDataFields=function(b){b?
(a.updateColumnFields(b.column),a.updateRowFields(b.row),a.updateCellFields(b.cell)):(a.updateColumnFields(),a.updateRowFields(),a.updateCellFields())};a.updateOptions();c.$on(c.name+"-add-column",function(b,d){a.columnsObj.insertAt(d,-1,null,a.columnIsAdded)});c.$on(c.name+"-clear-columns",function(b){a.columnsObj.clear(null,a.columnsAreCleared)});c.$on(c.name+"-insert-column-at",function(b,d,c){a.columnsObj.insertAt(d,c,null,a.columnIsAdded)});c.$on(c.name+"-insert-column-after",function(b,d,c){a.columnsObj.insertByRef(d,
c,!0,a.columnIsAdded)});c.$on(c.name+"-insert-column-before",function(b,d,c){a.columnsObj.insertByRef(d,c,!1,a.columnIsAdded)});c.$on(c.name+"-remove-column",function(b,d){a.columnsObj.removeAt(d,-1,null,a.columnIsRemoved)});c.$on(c.name+"-remove-column-at",function(b,d){a.columnsObj.removeAt(null,d,null,a.columnIsRemoved)});this.columnsAreCleared=function(){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.updateLayout()};a.columnIsAdded=
function(){a.updateLayout()};a.columnIsRemoved=function(){a.updateLayout()};c.$on(c.name+"-add-row",function(b,d,c){a.rowsObj.insertAt(d,-1,c,a.rowIsAdded)});c.$on(c.name+"-clear-rows",function(b,d){a.rowsObj.clear(d,a.rowsAreCleared)});c.$on(c.name+"-insert-row-at",function(b,d,c,r){a.rowsObj.insertAt(d,c,r,a.rowIsAdded)});c.$on(c.name+"-insert-row-after",function(b,d,c){a.rowsObj.insertByRef(d,c,!0,a.rowIsAdded)});c.$on(c.name+"-insert-row-before",function(b,d,c){a.rowsObj.insertByRef(d,c,!1,a.rowIsAdded)});
c.$on(c.name+"-remove-row",function(b,d){a.rowsObj.removeAt(d,-1,null,a.rowIsRemoved)});c.$on(c.name+"-remove-row-at",function(b,d,c){a.rowsObj.removeAt(null,d,c,a.rowIsRemoved)});this.rowsAreCleared=function(b){b||(a.clearPrevSelection(),a.options.selectedRow=null,a.setScrollPos({x:0,y:0}));a.updateCurrentLayout()};this.rowIsAdded=function(){a.updateCurrentLayout()};this.rowIsRemoved=function(){a.updateCurrentLayout()};this.objIsRemoved=function(){a.updateCurrentLayout()};a.columnList=[];a.columnFilterList=
[];a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;this.updateColumnList=function(){a.columnList.length=0;a.columnFilterList.length=0;a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var b=a.columnsObj.getList();if(b)for(var d=0;d<b.length;d++){var c=b[d];c.type="column";c[a.options.columnFields.id]||(c[a.options.columnFields.id]=p.getUniqueId());if(0!=c[a.options.columnFields.visible]){var r=c[a.options.columnFields.filterParams],r=r?rc.createTree(r.conditions,r.formula):null;
a.columnFilterList.push({cid:c[a.options.columnFields.id],tree:r});a.columnList.push(c);switch(c[a.options.columnFields.fixed]){case "left":a.isThereLeftFixedColumns||(a.isThereLeftFixedColumns=!0);break;case "right":a.isThereRightFixedColumns||(a.isThereRightFixedColumns=!0)}}}};var Sc=function(b){for(var d=null,c=0;c<a.columnFilterList.length;c++)if(a.columnFilterList[c].cid==b){d=a.columnFilterList[c].tree;break}return d},E=function(b,d){if(0==a.options.allowFilter)return!0;var c=!0;if(b)for(var r,
R,f,g=0;g<b[a.options.rowFields.cells].length;g++){c=!0;f=b[a.options.rowFields.cells][g];r=f[a.options.cellFields.cid];R=a.getColumnById(r);!R&&g<a.columnList.length&&(R=a.columnList[g]);if(R&&R[a.options.columnFields.filterParams]){R=R[a.options.columnFields.filterParams];var p=f[a.options.cellFields.value]?f[a.options.cellFields.value]:f[a.options.cellFields.text];R&&(c=R.callback?R.callback(p,f,b):rc.match(p,R.conditions,R.formula,Sc(r)))}if(!c)break}return c},ba=a.options.indent;a.currentPageList=
[];a.pageList=[];a.onlyCurrentPage=!1;a.currentList=[];a.fullIndentList=[];a.fullList=[];a.indentList=[];a.longestRow=null;a.isThereChildRows=!1;a.pageRowCount=0;a.pageNumber=0;a.currentPageNumber=1;a.currentTopList=[];a.currentBottomList=[];this.isThereVisibleChildren=function(b){var d=!1;if(b&&(b=b[a.options.rowFields.rows])&&0<b.length)for(var c=0;c<b.length;c++)if(E(b[c])&&!a.isRowFixed(b[c])){d=!0;break}return d};var L=function(b,d,c,r){b.type="row";b[a.options.rowFields.id]||(b[a.options.rowFields.id]=
p.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var t=b[a.options.rowFields.cells];if(t&&0<t.length){c=E(b,r);for(var f,g,k,m=0;m<a.columnList.length;m++){k=a.columnList[m];f=k[a.options.columnFields.id];g=k[a.options.columnFields.editorType];k=k[a.options.columnFields.editorSettings];var q=m;f&&(q=a.getCellIndexById(t,m,f));0<=q&&q<t.length&&(t[q].type="cell",t[q][a.options.cellFields.rid]=b[a.options.rowFields.id],a.setDefaultCellValue(t[q],g,k))}}if(c)if(r)a.fullList.push(b),a.fullIndentList.push(d);
else if(a.options.paging.enabled)a.onlyCurrentPage?a.currentPageList.push({row:b,indent:d}):(b[a.options.rowFields.pid]||a.pageRowCount++,a.pageRowCount>a.options.paging.pageSize&&(a.pageRowCount=1,a.pageNumber++,a.pageList.push([])),a.pageList[a.pageNumber].push({row:b,indent:d}));else switch(b[a.options.rowFields.fixed]){case "top":a.currentTopList.push(b);break;case "bottom":a.currentBottomList.push(b);break;default:a.currentList.push(b),a.indentList.push(d)}return c},x=function(b,d,c,r){if(!b[a.options.rowFields.rows])return c=
L(b,d,c,r);if((c=L(b,d,c,r))&&!a.isRowFixed(b)){var t=0,f;if(r||a.isRowExpanded(b)){var g=b[a.options.rowFields.rows];if(g){a.applySorting(g);for(var k=0;k<g.length;k++)(f=x(g[k],d+ba,b[a.options.rowFields.id],r))&&t++}}r||a.isThereChildRows||!(0<t||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))||(a.isThereChildRows=!0)}return c};this.getFullList=function(){a.fullList.length=0;a.fullIndentList.length=0;for(var b=a.rowsObj.getList(),
d=0;d<b.length;d++)x(b[d],0,null,!0);return a.fullList};this.getCurrentList=function(){return a.currentList};this.updateCurrentList=function(){a.currentList.length=0;a.indentList.length=0;a.currentTopList.length=0;a.currentBottomList.length=0;ba=a.options.indent;if(a.options.paging.enabled){if(1<=a.currentPageNumber&&a.currentPageNumber<=a.pageList.length)for(var b=0;b<a.pageList[a.currentPageNumber-1].length;b++)a.currentList.push(a.pageList[a.currentPageNumber-1][b].row),a.indentList.push(a.pageList[a.currentPageNumber-
1][b].indent)}else{a.isThereChildRows=!1;var d=a.rowsObj.getList();if(d)for(a.applySorting(d),b=0;b<d.length;b++)x(d[b],0,null,!1)}};this.isRowFixed=function(b){return!b||"top"!=b[a.options.rowFields.fixed]&&"bottom"!=b[a.options.rowFields.fixed]?!1:!0};this.updateCurrentPageList=function(){a.currentPageList.length=0;a.isThereChildRows=!1;a.onlyCurrentPage=!0;ba=a.options.indent;if(1<a.currentPageNumber){var b=a.pageList[a.currentPageNumber-1];if(b&&0<b.length){a.applySorting(b);for(var d=0;d<b.length;d++)x(b[d],
0,null,!1)}a.pageList[a.currentPageNumber-1]=a.currentPageList}a.onlyCurrentPage=!1};this.updatePageList=function(){a.pageList.length=0;a.pageRowCount=0;a.pageNumber=0;a.isThereChildRows=!1;ba=a.options.indent;var b=a.rowsObj.getList();if(b&&0<b.length){a.applySorting(b);a.pageList.push([]);for(var d=0;d<b.length;d++)x(b[d],0,null,!1);0<a.pageList.length&&0==a.pageList[a.pageList.length-1].length&&a.pageList.splice(a.pageList.length-1,1)}};this.columnEvents={clear:function(a){return angular.isDefined(c.events)&&
c.events.clearColumns?c.events.clearColumns({parent:a.e.parent}):c.clearColumns(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.columnAdded?c.events.columnAdded({column:a.e.column}):c.columnAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.columnAdding?c.events.columnAdding({column:a.e.column}):c.columnAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.columnRemoved?c.events.columnRemoved({column:a.e.column}):c.columnRemoved(a)},
objRemoving:function(a){return angular.isDefined(c.events)&&c.events.columnRemoving?c.events.columnRemoving({column:a.e.column}):c.columnRemoving(a)}};this.rowEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearRows?c.events.clearRows({parent:a.e.parent}):c.clearRows(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.rowAdded?c.events.rowAdded({row:a.e.row}):c.rowAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.rowAdding?c.events.rowAdding({row:a.e.row}):
c.rowAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.rowRemoved?c.events.rowRemoved({row:a.e.row}):c.rowRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.rowRemoving?c.events.rowRemoving({row:a.e.row}):c.rowRemoving(a)}};this.getRowFields=function(a){return{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",pid:a.pid?a.pid:"pid",objects:a.rows?a.rows:"rows",subobjects:a.cells?a.cells:"cells",text:a.text?a.text:
"text"}};a.columnsObj=new ia({objects:c.columns,events:a.columnEvents,fields:a.options.columnFields});a.rowsObj=new ia({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});c.$on(c.name+"-load-data",function(b,d,c,r,R){a.loadData(d,c,r,R)});c.$on(c.name+"-export-json",function(b,d,c,r,R){m.setTempData(a.exportToJSON(d,c,r,R))});this.exportToJSON=function(b,d,c,r){var t=r,t=t?t:null,f=a.columnsObj.getList();b=JSON.stringify(f,b?b:[a.options.columnFields.allowDrag,a.options.columnFields.allowDrop,
a.options.columnFields.allowFilter,a.options.columnFields.cellTemplateUrl,a.options.columnFields.contentAlignment,a.options.columnFields.contextMenu,a.options.columnFields.editorType,a.options.columnFields.editorSettings,a.options.columnFields.editorTemplate,a.options.columnFields.filterParams,a.options.columnFields.filterTemplate,a.options.columnFields.fixed,a.options.columnFields.fixedWidth,a.options.columnFields.footerAlignment,a.options.columnFields.footerContent,a.options.columnFields.footerTemplate,
a.options.columnFields.footerTooltip,a.options.columnFields.footerText,a.options.columnFields.headerAlignment,a.options.columnFields.headerContent,a.options.columnFields.headerTemplate,a.options.columnFields.headerText,a.options.columnFields.headerTooltip,a.options.columnFields.icon,a.options.columnFields.id,a.options.columnFields.selected,a.options.columnFields.style,a.options.columnFields.templateSettings,a.options.columnFields.visible,a.options.columnFields.width],t);r=r?r:null;t=!1!==c?a.getFullList():
a.rowsObj.getList();d=d?d:[a.options.rowFields.allowCellFocus,a.options.rowFields.allowDrag,a.options.rowFields.allowDrop,a.options.rowFields.allowFocus,a.options.rowFields.cells,a.options.rowFields.content,a.options.rowFields.contextMenu,a.options.rowFields.enabled,a.options.rowFields.expanded,a.options.rowFields.fixed,a.options.rowFields.hasChildren,a.options.rowFields.icon,a.options.rowFields.id,a.options.rowFields.pid,a.options.rowFields.selected,a.options.rowFields.statusIcon,a.options.rowFields.style,
a.options.rowFields.text,a.options.rowFields.tooltip,a.options.cellFields.rid];0==c&&d.push(a.options.rowFields.rows);c=JSON.stringify(t,d,r);return'[\n{ "columns": '+b+' },\n{ "rows": '+c+" }\n]"};this.loadData=function(b,d,t,r){a.suspendLayout();a.updateDataFields(t);var f=[],g=a.options.rowFields;a.rowsObj.clear(d,a.rowsAreCleared);if(b)if(!1!==r){var k=[];b.forEach(function(a,b){var d=a[g.pid];k[d]?(k[d][g.rows]||(k[d][g.rows]=[]),k[a[g.id]]=a,k[d][g.rows].push(a)):(k[a[g.id]]=a,f.push(a))});
k.length=0}else f=b;if(d)for(d[a.options.rowFields.rows]=f,b=0;b<d[a.options.rowFields.rows].length;b++)d[a.options.rowFields.rows][b][a.options.rowFields.pid]=d[a.options.rowFields.id];else if(angular.isDefined(c.rows))for(b=c.rows.length=0;b<f.length;b++)c.rows.push(f[b]);a.rowsObj=new ia({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.resumeLayout()};this.updateData=function(){a.options.rowFields.dataSource&&(a.loadData(a.options.rowFields.dataSource),a.rowsObj=
new ia({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)}))};var Oa=!1;this.dragDropStatus=function(a){if(void 0!=a)Oa=a;else return Oa};this.getDnDSource=function(a){return{text:a.dataTransfer?a.dataTransfer.getData("text"):a.originalEvent.dataTransfer?a.originalEvent.dataTransfer.getData("text"):""}};this.getTouchData=function(a){return a.changedTouches?a.changedTouches:a.originalEvent?a.originalEvent.changedTouches:null};var Ya=angular.element('<div class="iui-drop-marker" data-element="dropmark"></div>');
this.getDropMarkLine=function(){return dropMarkLine};a.getMousePos=function(a){return{x:a.pageX?a.pageX:a.originalEvent?a.originalEvent.pageX:0,y:a.pageY?a.pageY:a.originalEvent?a.originalEvent.pageY:0}};this.getCtrlName=function(){return angular.isDefined(c.name)?c.name:""};f.bind("dragenter",function(b){b.preventDefault();if(a.options.enabled){var d=q.getData();d.source||(d.source=a.getDnDSource(b));b={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),
targetRow:d.target,mousePos:a.getMousePos(b)};a.callDragEnter(b)}});f.bind("dragover",function(b){b.preventDefault();if(a.options.enabled&&a.isDropInRange(b)){var d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d)if(b.dataTransfer?b.dataTransfer.dropEffect=a.options.allowDrop?"move":"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect=
a.options.allowDrop?"move":"none"),d=q.getData(),d.source||(d.source=a.getDnDSource(b)),q.setData({source:d.source,sourceCtrl:d.sourceCtrl,target:null,dropPos:-1}),d={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)},0==a.callDragOver(d))b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect=
"none"),a.dropMark();else{d=a.getMousePos(b);b=d.y+16;var d=d.x+20,t=a.getDropMarkWindow();t.empty();t.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(c.name?c.name:"TreeGrid")+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:d});a.dropMark(!0)}}else a.dropMark(),b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none")});f.bind("drop",function(b){b.preventDefault();
if(a.options.enabled){a.dropMark();if(a.isDropInRange(b)){var d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d&&(d=q.getData(),d.source||(d.source=a.getDnDSource(b)),d.source)){var t={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)};
!1!==a.callDragDrop(t)&&(a.drop(d),c.$$phase||c.$apply())}}q.clearData()}b.stopPropagation()});f.bind("dragleave",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();var d=q.getData();d.source||(d.source=a.getDnDSource(b));b={event:b,sourceTree:d.sourceCtrl?d.sourceCtrl.getCtrlName():"",dragRow:d.source,targetTree:a.getCtrlName(),targetRow:d.target,mousePos:a.getMousePos(b)};a.callDragLeave(b)}a.cancelScrollTimer()});f.bind("dragend",function(b){b.preventDefault();a.options.enabled&&
(a.dropMark(),q.getData().source||q.clearData(),a.dragDropStatus(!1))});f.bind("mouseleave",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),a.hoverColumn=null,a.hoverRow=null,a.hoverCell=null)});this.containsMousePos=function(a,d){return q.hitTest(a,d,{left:0,top:0,right:f[0].clientWidth,bottom:f[0].clientHeight})};this.isPopupActive=function(){return!1};var Pa=function(b,d){var c=a.options.rowFields;if(!b[c.cells]){b[c.cells]=[];var r={};r[a.options.cellFields.text]=b[d.text];b[c.cells].push(r)}b[c.rows]||
(b[c.rows]=[]);b[c.rows].length=0;if(b[d.items]&&0<b[d.items].length)for(r=0;r<b[d.items].length;r++)b[c.rows].push(Pa(b[d.items][r],d));return b},Qa=function(b,d){var c=!1;d.sourceCtrl&&(c=d.sourceCollection.removeAt(b,-1,null,d.sourceCtrl.objIsRemoved));c&&("item"==b.type&&(b=Pa(b,d.sourceCtrl.options.dataFields)),0===d.dropPos?a.rowsObj.insertAt(b,-1,d.target,a.rowIsAdded):1===d.dropPos||2===d.dropPos?1===d.dropPos?a.rowsObj.insertByRef(b,d.target,!1,a.rowIsAdded):a.rowsObj.insertByRef(b,d.target,
!0,a.rowIsAdded):a.rowsObj.insertAt(b,-1,null,a.rowIsAdded))};this.setDropSelection=function(b,d){var c=b;!c&&0<=d&&d<a.currentList.length&&(c=a.currentList[d]);a.clearPrevSelection(c);a.rowSelection(c)};this.drop=function(b){if(b&&b.sourceCtrl){b.sourceCtrl.suppressProcess=!0;a.allowUpdate=!1;b.sourceCtrl.allowUpdate=!1;var d=b.source,c=-1;if(Array.isArray(b.source)){0<b.source.length&&(c=b.sourceCtrl.getObjCurrentIndex(b.source[b.source.length-1]));for(var r=[],f=0;f<b.source.length;f++){for(var k=
!1,p=b.sourceCollection.getParent(b.source[f]);p;){if(b.sourceCtrl.isObjInSelList(p)){k=!0;break}p=b.sourceCollection.getParent(p)}k||r.push(b.source[f])}if(0<r.length)if(d=r[r.length-1],f=b.sourceCtrl.getObjCurrentIndex(r[0]),k=b.sourceCtrl.getObjCurrentIndex(d),f<=k)for(f=0;f<r.length;f++)Qa(r[f],b);else for(f=r.length-1;0<=f;f--)Qa(r[f],b)}else c=b.sourceCtrl.getObjCurrentIndex(b.source),Qa(b.source,b);b.sourceCtrl!==a?(a.allowUpdate=!0,b.sourceCtrl.allowUpdate=!0,a.updateCurrentLayout(),b.sourceCtrl.updateCurrentLayout()):
(a.allowUpdate=!0,a.updateCurrentLayout());a.updateAutoLayout();b.sourceCtrl.multiSelection(!1);var m=g(function(){b.sourceCtrl!==a&&b.sourceCtrl.setDropSelection(null,c);a.setDropSelection(d);a.updateFocus(a.getObjCurrentIndex(d),0);g.cancel(m)},1);b.sourceCtrl.suppressProcess=!1}};this.isDragAllowed=function(b){return a.options.allowDrag?b&&(b[a.options.rowFields.allowDrag]||void 0===b[a.options.rowFields.allowDrag])?!0:!1:!1};this.isChildOf=function(b,d){var c=!1;if(b&&d){var r=d[a.options.rowFields.rows];
if(r&&0<r.length)for(var f=0;f<r.length;f++){if(p.isEqual(b[a.options.rowFields.id],r[f][a.options.rowFields.id])){c=!0;break}else c=a.isChildOf(b,r[f]);if(c)break}}return c};this.isParentOf=function(b,d){var c=a.rowsObj.getParent(d);return b&&d&&c&&p.isEqual(b[a.options.rowFields.id],c[a.options.rowFields.id])?!0:!1};this.isDropAllowed=function(b,d,c){var t=a.options.allowDrop;if(t&&b&&d&&(t=a.isRowFixed(d)||!d[a.options.rowFields.allowDrop]&&void 0!==d[a.options.rowFields.allowDrop]?!1:!0))if(Array.isArray(b))for(var f=
0;f<b.length;f++){if(p.isEqual(b[f][a.options.rowFields.id],d[a.options.rowFields.id])||0===c&&a.isParentOf(d,b[f])||a.isChildOf(d,b[f])){t=!1;break}if(!t)break}else if(p.isEqual(b[a.options.rowFields.id],d[a.options.rowFields.id])||0===c&&a.isParentOf(d,b)||a.isChildOf(d,b))t=!1;return t};this.getDropMarkWindow=function(){for(var a=Ya,d=angular.element(document.body).children(),c=0;c<d.length;c++){var r=angular.element(d[c]);if(r[0].attributes&&r[0].attributes["data-element"]&&"dropmark"===r[0].attributes["data-element"].value){a=
r;break}}return a};this.dropMark=function(b,d){d||(d=a.getDropMarkWindow());if(d){var c="none";this.options.allowDrop&&(c=b?"block":"none");angular.element(d).css("display",c)}};this.updateDropMarkElem=function(a,d){a&&d&&(a.css("top",d.top+"px"),a.css("left",d.left+"px"),a.css("width",d.width+"px"))};c.$on(c.name+"-open-editor",function(b,d){a.openEditor(d)});c.$on(c.name+"-close-editor",function(b,d){a.closeEditor(d)});this.updateEditorSettings=function(b){a.options.editorSettings=b?{activate:p.isFieldAvailable(b.activate,
"click")}:{activate:"click"}};this.allowEvents=!0;this.callAfterCollapse=function(a){angular.isDefined(c.events)&&c.events.afterCollapse&&c.events.afterCollapse({row:a});c.afterCollapse({e:{row:a}})};this.callAfterExpand=function(a){angular.isDefined(c.events)&&c.events.afterExpand&&c.events.afterExpand({row:a});c.afterExpand({e:{row:a}})};this.callAfterEdit=function(a){angular.isDefined(c.events)&&c.events.afterEdit&&c.events.afterEdit({cell:a});c.afterEdit({e:{cell:a}})};this.callAfterLabelEdit=
function(a){angular.isDefined(c.events)&&c.events.afterLabelEdit&&c.events.afterLabelEdit({cell:a});c.afterLabelEdit({e:{cell:a}})};this.callAfterSelect=function(a){angular.isDefined(c.events)&&c.events.afterSelect?c.events.afterSelect({object:a}):c.afterSelect({e:{object:a}});angular.isDefined(c.events)&&c.events.selectionChanged?c.events.selectionChanged({object:a}):c.selectionChanged({e:{object:a}})};this.callBeforeCollapse=function(a){return angular.isDefined(c.events)&&c.events.beforeCollapse?
c.events.beforeCollapse({row:a}):c.beforeCollapse({e:{row:a}})};this.callBeforeExpand=function(a){return angular.isDefined(c.events)&&c.events.beforeExpand?c.events.beforeExpand({row:a}):c.beforeExpand({e:{row:a}})};this.callBeforeEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeEdit?c.events.beforeEdit({cell:a}):c.beforeEdit({e:{cell:a}})};this.callBeforeLabelEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeLabelEdit?c.events.beforeLabelEdit({cell:a}):c.beforeLabelEdit({e:{cell:a}})};
this.callCellValueChanging=function(b,d,t){var r=!0;a.allowEvents&&(r=angular.isDefined(c.events)&&c.events.cellvalueChanging?c.events.cellvalueChanging({row:b,cell:d,value:t}):c.cellvalueChanging({e:{row:b,cell:d,value:t}}));return r};this.callCellValueChanged=function(b,d,t){a.allowEvents&&(angular.isDefined(c.events)&&c.events.cellvalueChanged?c.events.cellvalueChanged({row:b,cell:d,value:t}):c.cellvalueChanged({e:{row:b,cell:d,value:t}}))};this.callChange=function(){angular.isDefined(c.events)&&
c.events.change?c.events.change():c.change()};this.callColumnClick=function(a,d){angular.isDefined(c.events)&&c.events.columnClick&&c.events.columnClick({column:a,mousePos:d});c.columnClick({e:{column:a,mousePos:d}})};this.callColumnDblClick=function(a,d){angular.isDefined(c.events)&&c.events.columnDblclick&&c.events.columnDblclick({column:a,mousePos:d});c.columnDblclick({e:{column:a,mousePos:d}})};this.callColumnHover=function(a){angular.isDefined(c.events)&&c.events.columnHover&&c.events.columnHover({column:a});
c.columnHover({e:{column:a}})};this.callColumnPosChanging=function(a,d){return angular.isDefined(c.events)&&c.events.columnPoschanging?c.events.columnPoschanging({sourceColumn:a,targetColumn:d}):c.columnPoschanging({e:{sourceColumn:a,targetColumn:d}})};this.callColumnPosChanged=function(a,d){angular.isDefined(c.events)&&c.events.columnPoschanged&&c.events.columnPoschanged({sourceColumn:a,targetColumn:d});c.columnPoschanged({e:{sourceColumn:a,targetColumn:d}})};this.callColumnRightClick=function(a,
d){angular.isDefined(c.events)&&c.events.columnRightclick&&c.events.columnRightclick({column:a,mousePos:d});c.columnRightclick({e:{column:a,mousePos:d}})};this.callColumnSizeChanged=function(a,d){angular.isDefined(c.events)&&c.events.columnSizechanged&&c.events.columnSizechanged({column:a});c.columnSizechanged({e:{column:a}})};this.callDragEnter=function(a){angular.isDefined(c.events)&&c.events.dragEnter?c.events.dragEnter({event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,
targetRow:a.targetRow,mousePos:a.mousePos}):c.dragEnter({e:{event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callDragOver=function(b){var d=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragOver?c.events.dragOver({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):
c.dragOver({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragDrop=function(b){var d=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragDrop?c.events.dragDrop({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,
mousePos:b.mousePos}):c.dragDrop({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragLeave=function(a){angular.isDefined(c.events)&&c.events.dragLeave?c.events.dragLeave({event:a.event,sourceTree:a.sourceTree,dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragLeave({e:{event:a.event,sourceTree:a.sourceTree,
dragRow:a.dragRow,targetTree:a.targetTree,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callCellClick=function(a,d,t,r){angular.isDefined(c.events)&&c.events.cellClick&&c.events.cellClick({event:a,row:d,cell:t,mousePos:r});c.cellClick({e:{event:a,row:d,cell:t,mousePos:r}})};this.callCellHover=function(a,d){angular.isDefined(c.events)&&c.events.cellHover?c.events.cellHover({event:a,cell:d}):c.cellHover({e:{event:a,cell:d}})};this.callEnabledChanged=function(a){angular.isDefined(c.events)&&c.events.enabledChanged?
c.events.enabledChanged({enabled:a}):c.enabledChanged({e:{enabled:a}})};this.callRowClick=function(a,d,t){angular.isDefined(c.events)&&c.events.rowClick?c.events.rowClick({event:a,row:d,mousePos:t}):c.rowClick({e:{event:a,row:d,mousePos:t}})};this.callRowDblClick=function(a,d){return angular.isDefined(c.events)&&c.events.rowDblClick?c.events.rowDblClick({row:a,mousePos:d}):c.rowDblclick({e:{row:a,mousePos:d}})};this.callRowHover=function(a,d){angular.isDefined(c.events)&&c.events.rowHover?c.events.rowHover({event:a,
row:d}):c.rowHover({e:{event:a,row:d}})};this.callRowRightClick=function(a,d){angular.isDefined(c.events)&&c.events.rowRightClick&&c.events.rowRightClick({row:a,mousePos:d});c.rowRightclick({e:{row:a,mousePos:d}})};this.callKeyDown=function(a,d){angular.isDefined(c.events)&&c.events.keyDown?c.events.keyDown({event:a,row:d}):c.keyDown({e:{event:a,row:d}})};this.callKeyPress=function(a,d){angular.isDefined(c.events)&&c.events.keyPress?c.events.keyPress({event:a,row:d}):c.keyPress({e:{event:a,row:d}})};
this.callKeyUp=function(a,d){angular.isDefined(c.events)&&c.events.keyUp?c.events.keyUp({event:a,row:d}):c.keyUp({e:{event:a,row:d}})};this.callScrollPosChanged=function(){angular.isDefined(c.events)&&c.events.scrollPosChanged?c.events.scrollPosChanged({scrollPos:a.scrollPos}):c.scrollposChanged({e:{scrollPos:a.scrollPos}})};f.bind("click",function(b){a.options.enabled&&1===b.which&&a.callRowClick(b,null,a.getMousePos(b))});f.bind("dblclick",function(b){b.preventDefault();a.options.enabled&&1===b.which&&
a.callRowDblClick(null,a.getMousePos(b));b.stopPropagation()});f.bind("mousedown",function(b){a.options.enabled&&3===b.which&&a.callRowRightClick(null,a.getMousePos(b));a.removeDropDownList();a.closeFilterWindow();a.closeEditor();b.stopPropagation()});this.expandList=[];this.expandIndentList=[];var Hb=function(b,d,c){b.type="row";b[a.options.rowFields.id]||(b[a.options.rowFields.id]=p.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var t=b[a.options.rowFields.cells];if(t&&0<t.length){c=E(b);
for(var f,g,k,m=0;m<a.columnList.length;m++){k=a.columnList[m];f=k[a.options.columnFields.id];g=k[a.options.columnFields.editorType];k=k[a.options.columnFields.editorSettings];var q=m;f&&(q=a.getCellIndexById(t,m,f));0<=q&&q<t.length&&(t[q].type="cell",a.setDefaultCellValue(t[q],g,k))}}c&&(a.expandList.push(b),a.expandIndentList.push(d));return c},D=function(b,d,c){if(!b[a.options.rowFields.rows])return c=Hb(b,d+ba,c);if(c=Hb(b,d+ba,c)){var t=0,f;if(a.isRowExpanded(b)){var g=b[a.options.rowFields.rows];
if(g){a.applySorting(g);for(var k=0;k<g.length;k++)(f=D(g[k],d+ba,b[a.options.rowFields.id]))&&t++}}!a.isThereChildRows&&(0<t||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))&&(a.isThereChildRows=!0)}return c};this.expand=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(!a.isRowExpanded(b)){var d=a.getRowCurrentIndex(b);if(b=a.getList(b)){a.applySorting(b);for(var c=0;c<b.length;c++)D(b[c],a.indentList[d],null)}if(0<
a.expandList.length){a.allowEvents=!1;d++;Array.prototype.splice.apply(a.currentList,[d,0].concat(a.expandList));Array.prototype.splice.apply(a.indentList,[d,0].concat(a.expandIndentList));a.options.autoSize?a.updateAutoLayout():a.getRowScope()?a.updateView():a.updateLayout();var r=g(function(){a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();g.cancel(r);a.allowEvents=!0},1)}}};this.collapse=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(a.isRowExpanded(b)){var d=
null,c=!1,r=b,f=-1,k=a.getRowCurrentIndex(b);for(b=a.getParent(b);b&&!c;){d=a.getList(b);for(f=d.indexOf(r)+1;!c&&f<d.length;)r=d[f],0<a.getRowCurrentIndex(r)&&(c=!0),f++;c||(r=b);b=a.getParent(b)}if(!c&&r)for(d=a.getList(),f=d.indexOf(r)+1;f<d.length;)if(r=d[f],0<a.getRowCurrentIndex(r)){c=!0;break}else f++;k++;d=a.currentList.length-k;c&&(d=a.getRowCurrentIndex(r)-k);if(0<d){a.currentList.splice(k,d);a.indentList.splice(k,d);a.options.autoSize?a.updateAutoLayout():a.getRowScope()?a.updateView():
a.updateLayout();var p=g(function(){a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();g.cancel(p);a.allowEvents=!0},1)}}};this.toggle=function(b,d){if(b){if((b[a.options.rowFields.hasChildren]||b[a.options.rowFields.rows]&&0!=b[a.options.rowFields.rows].length)&&!(d&&0!=b[a.options.rowFields.expanded]||!1===d&&0==b[a.options.rowFields.expanded])){a.updateType="view";var c=void 0!==d?d:!1!==b[a.options.rowFields.expanded]?!0:!1;!1!==(void 0!==d?d?a.callBeforeExpand(b):
a.callBeforeCollapse(b):c?a.callBeforeCollapse(b):a.callBeforeExpand(b))&&(c=void 0!=d?d:!c,c!=b[a.options.rowFields.expanded]&&(0!=c?a.expand(b):a.collapse(b),b[a.options.rowFields.expanded]=c),a.isRowExpanded(b)?a.callAfterExpand(b):a.callAfterCollapse(b))}}else{for(var c=a.getFullList(),r=0;r<c.length;r++)c[r][a.options.rowFields.expanded]=d;a.updateCurrentLayout()}};c.$on(c.name+"-collapse",function(b,d){a.toggle(d,!1)});c.$on(c.name+"-expand",function(b,d){a.toggle(d,!0)});c.$on(c.name+"-expand-col-index",
function(b,d){0<=d&&d<a.columnList.length&&(a.options.expandColIndex=d)});c.$on(c.name+"-toggle",function(b,d){a.toggle(d)});this.isFilteringAllowed=function(b){return b&&b[a.options.columnFields.allowFilter]};c.$on(c.name+"-filter",function(b,d,c){a.filter(d,c)});this.filter=function(b,d){if(b)b[a.options.columnFields.filterParams]=d;else for(var c=0;c<a.columnList.length;c++)a.columnList[c][a.options.columnFields.filterParams]=null;a.closeFilterWindow();a.updateCurrentLayout();a.callChange()};this.callGotFocus=
function(a,d,t,r,f){angular.isDefined(c.events)&&c.events.gotFocus?c.events.gotFocus({event:a,row:d,cell:t,edit:void 0!=r?!0:!1,editValue:f}):c.gotFocus({e:{event:a,row:d,cell:t,edit:void 0!=r?!0:!1,editValue:f}})};this.callLostFocus=function(a,d,t,r,f){angular.isDefined(c.events)&&c.events.lostFocus?c.events.lostFocus({event:a,row:d,cell:t,edit:void 0!=r?!0:!1,editValue:f}):c.lostFocus({e:{event:a,row:d,cell:t,edit:void 0!=r?!0:!1,editValue:f}})};this.getTabIndex=function(){return f[0].attributes&&
f[0].attributes.tabindex?f[0].attributes.tabindex.value:""};this.updateFocus=function(b,d){if(1==a.options.allowFocus)var c=g(function(){if(a.isRowIndexInRange(b)){var t="none";0<=d&&d<a.columnList.length&&(t=a.columnList[d][a.options.columnFields.fixed]);var k=a.getElemFromRow(a.currentList[b],t);k&&(1==a.options.allowCellFocus&&0<=d&&d<a.columnList.length?(t=a.getElemFromCell(b,d,t))&&t[0].focus():k[0].focus())}else f[0].focus();g.cancel(c)},5)};c.$on(c.name+"-focus",function(b,d){if(d){var c,f;
switch(d.type){case "row":c=a.getRowCurrentIndex(d);a.updateFocus(c);break;case "cell":c=a.getCellRowIndex(d),f=a.getCellColumnIndex(d),a.updateFocus(c,f)}}else a.updateFocus()});var ob=!1;this.getCell=function(b,d){if(0<=b&&b<a.currentList.length){var c=a.currentList[b],f=a.getColumnRealIndex(d);0<=d&&d<a.columnList.length&&(f=a.getCellIndexById(c[a.options.rowFields.cells],d,a.columnList[d].id));if(c[a.options.rowFields.cells]&&0<=f&&f<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][f]}return null};
this.getCellObject=function(b,d){if(0<=b&&b<a.currentList.length){var c=a.currentList[b],f=a.getColumnRealIndex(d);0<=d&&d<a.columnList.length&&(f=a.getCellIndexById(c[a.options.rowFields.cells],d,a.columnList[d].id));if(c[a.options.rowFields.cells]&&0<=f&&f<c[a.options.rowFields.cells].length)return c[a.options.rowFields.cells][f]}return null};this.getCellIndexById=function(b,d,c){var f=-1;if(b){d=a.getColumnRealIndex(d);for(var t=0;t<b.length;t++)if(void 0==b[t][a.options.cellFields.cid]){f=d;break}else if(b[t][a.options.cellFields.cid]==
c){f=t;break}}return f};this.getCellIndexFromRow=function(b,d){var c=-1;if(b&&d&&d[a.options.rowFields.cells])for(var f=0;f<d[a.options.rowFields.cells].length;f++)if(d[a.options.rowFields.cells][f]==b){c=f;break}return c};this.getCellColumnIndex=function(b){if(b)if(b[a.options.cellFields.cid]){if(b=a.getColumnById(b[a.options.cellFields.cid]))return a.getColumnCurrentIndex(b)}else return a.getCellColumnIndexFromRow(b);return-1};this.getCellColumnIndexFromRow=function(b){if(b&&b[a.options.cellFields.rid]){var d=
a.findRowById(b[a.options.cellFields.rid]);if(d&&(d=d[a.options.rowFields.cells])&&0<d.length)return d.indexOf(b)}return-1};this.getCellRowIndex=function(b){return b&&b[a.options.cellFields.rid]&&(b=a.findRowById(b[a.options.cellFields.rid]))?a.getRowCurrentIndex(b):-1};this.getColumnById=function(b){for(var d=null,c=0;c<a.columnList.length;c++)if(a.columnList[c][a.options.columnFields.id]==b){d=a.columnList[c];break}return d};this.getColumnObject=function(b){return 0<=b&&b<a.columnList.length?a.columnList[b]:
null};this.getRowObject=function(b){return 0<=b&&b<a.currentList.length?a.currentList[b]:null};this.isRowExpanded=function(b){return b?b[a.options.rowFields.expanded]||void 0===b[a.options.rowFields.expanded]?!0:!1:!0};this.getContentElement=function(a,d){var b=null;d||(d="cell-content");if(a&&0<a.children().length)for(var c=a.children(),f=0;f<c.length;f++){var g=angular.element(c.eq(f));if(g[0].attributes&&g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==d){b=g;break}}return b};
this.getElement=function(a,d){var b=null;d||(d="cell-content");if(a&&0<a.children().length){a=a.children().eq(0);for(var c=a.children(),f=0;f<c.length;f++){var g=angular.element(c.eq(f));if(g[0].attributes&&g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==d){b=g;break}}}return b};this.getChildElement=function(a,d){var b=null;d||(d="content");if(a&&0<a.children().length)for(var c=a.children(),f=0;f<c.length;f++){var g=angular.element(c.eq(f));if(g[0].attributes&&g[0].attributes["data-element"]&&
g[0].attributes["data-element"].value==d){b=g;break}}return b};this.getElemFromColumn=function(b,d,c){var f=null;if(b){b=a.getColumnCurrentIndex(b);var t=a.getHeaderElem(d);"footer"==c&&(t=a.getFooterElem(d));if(t&&(d=t.find("td"))&&0<d.length)for(c=0;c<d.length;c++)if(t=angular.element(d[c]),t[0].attributes["data-index"]&&t[0].attributes["data-index"].value.toString()===b.toString()){f=t;break}}return f};this.getElemFromRow=function(b,d,c){var f=null;if(b&&(b=a.getRowCurrentIndex(b,c),(d=a.getRowElems(d,
c))&&0<d.length))for(c=0;c<d.length;c++){var t=angular.element(d[c]);if(t[0].attributes["data-index"]&&t[0].attributes["data-index"].value.toString()===b.toString()){f=t;break}}return f};this.getElemFromCell=function(b,c,f,g){var d=null;if(a.isRowIndexInRange(b,g)){switch(g){case "top":b=a.getElemFromRow(a.currentTopList[b],f,g);break;case "bottom":b=a.getElemFromRow(a.currentBottomList[b],f,g);break;default:b=a.getElemFromRow(a.currentList[b],f,g)}if(b&&(b=b.find("td"))&&0<b.length)for(f=0;f<b.length;f++)if(g=
angular.element(b[f]),g[0].attributes["data-index"]&&g[0].attributes["data-index"].value.toString()===c.toString()){d=g;break}}return d};this.getElemFromColumnCell=function(b,c,f){var d=null;if((c=f?a.getFooterElem(c):a.getHeaderElem(c))&&(c=c.find("td"))&&0<c.length)for(f=0;f<c.length;f++){var t=angular.element(c[f]);if(t[0].attributes["data-index"]&&t[0].attributes["data-index"].value.toString()===b.toString()){d=t;break}}return d};this.getIndent=function(b){var c=0;if(b)for(parent=a.rowsObj.getParent(b);parent;)c+=
a.options.indent,parent=a.rowsObj.getParent(parent);return c};this.getObjState=function(b){if(b)switch(b.type){case "column":if(0==a.options.enabled)return"disabled";if(1==b[a.options.columnFields.selected])return"selected";if(b==a.hoverColumn)return"hovered";break;case "row":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";if(1==b[a.options.rowFields.selected])return"selected";if(b==a.hoverRow)return"hovered";break;case "cell":if(0==a.options.enabled||0==b[a.options.cellFields.enabled])return"disabled";
if(1==b[a.options.cellFields.selected])return"selected";if(b==a.hoverCell)return"hovered"}return"normal"};this.getColumnAt=function(b,c){if(void 0==b||void 0==c)return a.hoverColumn;var d,f,g=null;d="left";for(var k=0;!g&&3>k;){if(d=a.getHeaderElem(d)){var m=d.find("td");if(m&&0<m.length)for(var q=0;q<m.length;q++)if(d=angular.element(m[q]),f=p.getPageRect(d),p.checkHit(b,c,f)){g=a.getColumnFromElem(d);break}}k++;d=1==k?"right":"none"}return g};this.getCellAt=function(b,c){var d=null,f=a.getRowAt(b,
c);if(f){var g,k,m=a.getElemFromRow(f).find("td");if(m&&0<m.length)for(var q=0;q<m.length&&!(g=angular.element(m[q]),k=p.getPageRect(g),p.checkHit(b,c,k)&&(d=a.getRowCurrentIndex(f),g=a.getIndexFromElem(g),d=a.getCellObject(d,g)));q++);}return d};this.getRowAt=function(b,c){var d,f,g=null;d="none";for(var k=0;!g&&3>k;){var m=a.getRowElems(d);if(m&&0<m.length)for(var q=0;q<m.length;q++)if(d=angular.element(m[q]),f=p.getPageRect(d),p.checkHit(b,c,f)){g=a.getRowFromElem(d);break}k++;d=1==k?"left":"right"}return g};
this.getRowCurrentIndex=function(b){if(b){switch(b[a.options.rowFields.fixed]){case "top":return a.currentTopList?a.currentTopList.indexOf(b):-1;case "bottom":return a.currentBottomList?a.currentBottomList.indexOf(b):-1}return a.currentList?a.currentList.indexOf(b):-1}return-1};this.getObjCurrentIndex=function(b){return a.getRowCurrentIndex(b)};this.getRowFromChildElem=function(b){if(b&&(b=angular.element(b))){for(b=b.parent();b&&b[0].tagName&&"tr"!==b[0].tagName.toLowerCase();)b=b.parent();return b?
a.getRowFromElem(b):null}return null};this.getColumnCurrentIndex=function(b){return b&&a.columnList?a.columnList.indexOf(b):-1};this.getFullColumnList=function(){return a.columnsObj.getList()};this.getColumnRealIndex=function(b){var c=a.getFullColumnList();return 0<=b&&b<c.length&&b<a.columnList.length?c.indexOf(a.columnList[b]):-1};this.getColumnFromChildElem=function(b){return b?a.getColumnFromElem(b):null};this.getColumnFromElem=function(b){return b&&(b=angular.element(b))&&b[0].attributes["data-index"]&&
(b=b[0].attributes["data-index"].value,0<=b&&b<a.columnList.length)?a.columnList[b]:null};this.getIndexFromElem=function(a){return a&&(a=angular.element(a))&&a[0].attributes["data-index"]?a[0].attributes["data-index"].value:-1};this.getRowFromElem=function(b){if(b&&(b=angular.element(b))&&b[0].attributes["data-index"]){var c=b[0].attributes["data-index"].value,f="none";b&&b[0].attributes["data-fixed"]&&(f=b[0].attributes["data-fixed"].value);switch(f){case "top":if(a.isRowIndexInRange(c,f))return a.currentTopList[c];
break;case "bottom":if(a.isRowIndexInRange(c,f))return a.currentBottomList[c];break;default:if(a.isRowIndexInRange(c))return a.currentList[c]}}};this.isRowIndexInRange=function(b,c){switch(c){case "top":return 0<=b&&b<a.currentTopList.length;case "bottom":return 0<=b&&b<a.currentBottomList.length}return 0<=b&&b<a.currentList.length};this.isColIndexInRange=function(b){return 0<=b&&b<a.columnList.length};this.isRowEnabled=function(b){return b&&1==a.options.enabled&&p.isEnabled(b[a.options.rowFields.enabled])};
this.mouseButtonStatus=function(a){ob=a};c.$on(c.name+"-ensure-visible",function(b,c){a.ensureVisible(c)});c.$on(c.name+"-find-row-by-id",function(b,c){m.setTempData(a.findRowById(c))});c.$on(c.name+"-find-row-by-path",function(b,c,f){m.setTempData(a.findRowByPath(c,f))});c.$on(c.name+"-find-row-by-text",function(b,c){m.setTempData(a.findRowByText(c))});c.$on(c.name+"-get-full-path",function(b,c){m.setTempData(a.getFullPath(c))});c.$on(c.name+"-get-cell-at",function(b,c){c?m.setTempData(a.getCellAt(c.x,
c.y)):m.setTempData(null)});c.$on(c.name+"-get-row-at",function(b,c){c?m.setTempData(a.getRowAt(c.x,c.y)):m.setTempData(null)});c.$on(c.name+"-get-row-level",function(b,c){m.setTempData(a.getLevel(c))});c.$on(c.name+"-get-row-parent",function(b,c){m.setTempData(a.getParent(c))});c.$on(c.name+"-get-flat-list",function(b,c){c?m.setTempData(a.getFullList()):m.setTempData(a.currentList)});c.$on(c.name+"-get-list",function(b,c){m.setTempData(a.getList(c))});c.$on(c.name+"-get-top-row",function(b){m.setTempData(a.getTopRow())});
c.$on(c.name+"-set-top-row",function(b,c){a.ensureVisible(c)});this.ensureVisible=function(b,c){if(b){for(var d=[],f=a.getParent(b);f;)d.push(f),f=a.getParent(f);for(f=d.length-1;0<=f;f--)d[f][a.options.rowFields.expanded]=!0;a.updateCurrentLayout();var k=g(function(){c=void 0!=c?c:"center";a.scrollTo(b,c);g.cancel(k)},100)}};this.findRowById=function(b){return a.rowsObj.findObjectById(b)};this.findRowByText=function(b){return a.rowsObj.findObjectByText(b)};this.findRowByPath=function(b,c){var d=
null;c||(c=a.getFullList());for(var f=0;f<c.length;f++)if(a.getFullPath(c[f])==b){d=c[f];break}return d};this.getFullPath=function(b){var c="";if(b)for(c=b[a.options.rowFields.text],b=a.getParent(b);b;)c=[b[a.options.rowFields.text],a.options.pathSeparator,c].join(""),b=a.getParent(b);return c};this.getLevel=function(a){var b=0;for(a=this.getParent(a);a;)b++,a=this.getParent(a);return b};this.getParent=function(b){return a.rowsObj.getParent(b)};this.getList=function(b){return a.rowsObj.getList(b)};
this.getFirstRow=function(){for(var b=null,c=0;c<a.currentList.length;c++)if(p.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.getPrevRow=function(b){var c=null;if(0<=b&&b<a.currentList.length)for(--b;0<=b;b--)if(p.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getNextRow=function(b){var c=null;for(b+=1;b<a.currentList.length;b++)if(p.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];
break}return c};this.getLastRow=function(){for(var b=null,c=a.currentList.length-1;0<=c;c--)if(p.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=a.currentList[c];break}return b};this.updateSelectionStatus=function(b){switch(b){case "shift":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}break;case "ctrl":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;
case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}}};f.bind("keydown",function(b){if(a.options.enabled)switch(b.keyCode){case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}});this.allowUpdate=!0;this.updateType="all";this.suspendLayout=function(b){a.allowUpdate=!1};this.resumeLayout=function(b){a.allowUpdate=!0;b?a.updateCurrentLayout():
a.updateLayout()};c.$on(c.name+"-refresh",function(b,c,f){a.refresh(c,f)});c.$on(c.name+"-resume-layout",function(b,c){a.resumeLayout(c)});c.$on(c.name+"-suspend-layout",function(b,c){a.suspendLayout(c)});c.$on(c.name+"-update-layout",function(b,c){c?a.updateCurrentLayout():a.updateLayout()});c.$on(c.name+"-update-view",function(b){a.updateView()});c.$on(c.name+"-begin-load",function(b,c,f){c?(0>a.options.loadRows.indexOf(c)&&a.options.loadRows.push(c),a.updateView()):a.beginLoad(f)});c.$on(c.name+
"-end-load",function(b,c){a.endLoad(c)});this.callLoadComplete=function(a){angular.isDefined(c.events)&&c.events.loadComplete?c.events.loadComplete():c.loadComplete()};this.callUpdateComplete=function(){angular.isDefined(c.events)&&c.events.updateComplete?c.events.updateComplete():c.updateComplete()};c.$on(c.name+"-get-current-page",function(b){m.setTempData(a.currentPageNumber)});c.$on(c.name+"-set-current-page",function(b,c){a.setCurrentPage(c)});c.$on(c.name+"-first-page",function(b){a.firstPage()});
c.$on(c.name+"-last-page",function(b){a.lastPage()});c.$on(c.name+"-next-page",function(b){a.nextPage()});c.$on(c.name+"-prev-page",function(b){a.prevPage()});this.setCurrentPage=function(b){a.currentPageNumber!=b&&1<=b&&b<=a.pageList.length&&(a.currentPageNumber=b,a.updateCurrentLayout())};this.firstPage=function(){1!=a.currentPageNumber&&(a.currentPageNumber=1,a.updateCurrentLayout())};this.lastPage=function(){a.currentPageNumber!=a.pageList.length&&(a.currentPageNumber=a.pageList.length,a.updateCurrentLayout())};
this.nextPage=function(){a.currentPageNumber<a.pageList.length&&(a.currentPageNumber++,a.updateCurrentLayout())};this.prevPage=function(){1<a.currentPageNumber&&(a.currentPageNumber--,a.updateCurrentLayout())};c.$on(c.name+"-get-max-scroll-pos",function(b){m.setTempData(a.getMaxScrollPos())});c.$on(c.name+"-get-scroll-pos",function(b){m.setTempData(a.getScrollPos())});c.$on(c.name+"-set-scroll-pos",function(b,c){a.setScrollPos(c)});c.$on(c.name+"-scroll-to",function(b,c,f){a.scrollTo(c,f)});var xa=
!1;this.multiSelection=function(a){if(void 0!=a)xa=a;else return xa};this.columnSelection=function(b,d){if(b){var f=!0;a.options.selectedColumn&&(f=!p.isEqual(a.options.selectedColumn[a.options.columnFields.id],b[a.options.columnFields.id]));var g;g=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});f&&!1!==g&&(a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1,a.refresh(a.options.selectedColumn)),
a.options.selectedColumn=b,b[a.options.columnFields.selected]=!0,angular.isDefined(c.selectedColumn)&&(c.selectedColumn=b),a.refresh(a.options.selectedColumn),a.callAfterSelect(b))}else return a.options.selectedColumn};this.isRowSelected=function(a){return p.isSelected(a)};this.clearPrevSelection=function(b){for(var c=0;c<a.options.selectedRows.length;c++)b&&!p.isEqual(a.options.selectedRows[c][a.options.rowFields.id],b[a.options.rowFields.id])?a.options.selectedRows[c][a.options.rowFields.selected]=
!1:b||(a.options.selectedRows[c][a.options.rowFields.selected]=!1);a.options.selectedRows.length=0;b&&0!=b[a.options.rowFields.enabled]&&a.options.selectedRows.push(b);a.refreshRows()};this.markSelColumn=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b])};this.updateSelectionList=function(){for(var b=a.options.selectedRows.length-1;0<=b;)0==a.options.selectedRows[b][a.options.rowFields.enabled]&&a.options.selectedRows.splice(b,1),b--};this.rowSelection=function(b,d,f,g,k){if(b){if("none"!=
a.options.selectionMode)if(a.isRowEnabled(b)){var t=a.rowSelection(),m=!0;t&&(m=!p.isEqual(t[a.options.rowFields.id],b[a.options.rowFields.id])||f||g);var r=!0,r=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});if(!1!==r)if(f=d||f||g?!0:!1,m){m=!0;"multi-extended"==a.options.selectionMode&&(m=!a.isObjInSelList(b)||!f);m&&("one"==a.options.selectionMode?a.clearPrevSelection():ob&&d?a.clearPrevSelection():xa||f||"multi-simple"===a.options.selectionMode||
a.clearPrevSelection());a.options.selectedRow=b;if(ob&&d&&"one"!=a.options.selectionMode){if(d=a.getRowCurrentIndex(t),k=a.getRowCurrentIndex(b),d>k&&(t=d,d=k,k=t),a.isRowIndexInRange(d)&&a.isRowIndexInRange(k))for(;d<=k;d++)a.currentList[d][a.options.rowFields.selected]=!0,a.options.selectedRows.push(a.currentList[d])}else ob&&(xa||f||"multi-simple"===a.options.selectionMode)?(d=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],
b[a.options.rowFields.selected]=!d,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b})):(b[a.options.rowFields.selected]=!0,a.isObjInSelList(b)||a.options.selectedRows.push(b));angular.isDefined(c.selectedRow)&&(c.selectedRow=b);a.callAfterSelect(b);a.refresh(null,null,!0)}else xa||f||"multi-simple"===a.options.selectionMode?(d=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?
!1:b[a.options.rowFields.selected],k&&"undefined"!==k&&(d=k),b[a.options.rowFields.selected]=!d,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b}),a.callAfterSelect(b),a.refresh(null,null,!0)):xa||f||"multi-simple"===a.options.selectionMode||f||1!=a.options.selectedRows.length&&a.isObjInSelList(b)||a.clearPrevSelection(b)}else a.clearPrevSelection()}else return a.options.selectedRow};this.updateSelection=
function(b,c,f){b=b&&(b.shiftKey||b.ctrlKey||b.metaKey)?!0:!1;"multi-extended"==a.options.selectionMode&&0<a.options.selectedRows.length&&!f&&!xa&&!b&&(a.clearPrevSelection(),c[a.options.rowFields.selected]=!0,a.options.selectedRows.push(c),a.callAfterSelect(c),a.refresh(null,null,!0))};this.isObjInSelList=function(b){var c=!1,f=a.options.selectedRows;if(b&&f)for(var g=0;g<f.length;g++)if(p.isEqual(f[g][a.options.rowFields.id],b[a.options.rowFields.id])){c=!0;break}return c};c.$on(c.name+"-clear-selection",
function(b){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.clearPrevSelection();a.options.selectedRow=null});c.$on(c.name+"-get-hover-column",function(b,c){a.hoverColumn?m.setTempData(a.hoverColumn):c&&m.setTempData(a.getColumnAt({x:c.x,y:c.y}))});c.$on(c.name+"-get-selected-column",function(b){m.setTempData(a.columnSelection())});c.$on(c.name+"-set-selected-column",function(b,c){a.columnSelection(c)});c.$on(c.name+"-get-selected-row",
function(b){m.setTempData(a.rowSelection())});c.$on(c.name+"-set-selected-row",function(b,c){var d=g(function(){a.rowSelection(c);g.cancel(d)},1)});c.$on(c.name+"-get-selected-rows",function(b){m.setTempData(a.options.selectedRows)});c.$on(c.name+"-set-selected-rows",function(b,c){c&&Array.isArray(c)&&g(function(){for(var b=a.options.selectedRows.length=0;b<c.length;b++)c[b][a.options.rowFields.selected]=!0,a.options.selectedRows.push(c[b]);0<c.length?(a.options.selectedRow=c[c.length-1],a.callAfterSelect(a.options.selectedRow)):
a.options.selectedRow=null;a.refresh(null,null,!0)},1)});c.$on(c.name+"-move-column",function(b,c,f){a.moveColumn(c,f)});c.$on(c.name+"-move-row",function(b,c,f,g,k){a.moveRow(c,f,g,k)});c.$watch("options",function(b,c){b!==c&&(a.updateOptions(b),a.updateLayout())},!0);c.$watch("allowCellFocus",function(b,c){b!==c&&(a.options.allowCellFocus=b)});c.$watch("allowColumnReorder",function(b,c){b!==c&&(a.options.allowColumnReorder=b)});c.$watch("allowFilter",function(b,c){b!==c&&(a.options.allowFilter=
b)});c.$watch("allowFocus",function(b,c){b!==c&&(a.options.allowFocus=b)});c.$watch("allowDrag",function(b,c){b!==c&&(a.options.allowDrag=b,a.updateView())});c.$watch("allowDrop",function(b,c){b!==c&&(a.options.allowDrop=b,a.updateView())});c.$watch("autoExpand",function(b,c){b!==c&&(a.options.autoExpand=b)});c.$watch("autoSize",function(b,c){b!==c&&(a.options.autoSize=b,a.updateLayout())});c.$watch("controlStyle",function(b,c){b!==c&&a.updateControlStyle(b)});c.$watch("displayMode",function(b,c){b!==
c&&(a.options.displayMode=b,a.updateLayout())});c.$watch("editorSettings",function(b,c){b!==c&&a.updateEditorSettings(b)});c.$watch("enabled",function(b,c){b!==c&&(a.options.enabled=b,a.updateView(),a.options.paging.enabled&&a.options.paging.showControlPanel&&a.updatePaginationPanel(),a.callEnabledChanged(b))});c.$watch("expandingColumnIndex",function(b,c){b!==c&&(a.options.expandColIndex=b)});c.$watch("fields",function(b,c){b!==c&&(a.updateDataFields(b),a.UpdateData())});c.$watch("fillSpace",function(b,
c){b!==c&&(a.options.fillSpace=b)});c.$watch("gridLines",function(b,c){b!==c&&(a.options.gridLines=b,a.updateView())});c.$watch("hoverSelection",function(b,c){b!==c&&(a.options.hoverSelection=b)});c.$watch("indent",function(b,c){b!==c&&(a.options.indent=b,a.updateLayout())});c.$watch("mouseWheelSpeed",function(b,c){b!==c&&(a.options.mouseWheelSpeed=b)});c.$watch("labelEdit",function(b,c){b!==c&&(a.options.labelEdit=b)});c.$watch("maxRows",function(b,c){b!==c&&(a.options.maxRows=b,a.updateLayout())});
c.$watch("paging",function(b,c){b!==c&&(a.updatePaging(b),a.resetPageNumber(),a.updateCurrentLayout())},!0);c.$watch("pathSeparator",function(b,c){b!==c&&(a.options.pathSeparator=b)});c.$watch("rtl",function(b,c){b!==c&&(a.options.rtl=b,a.updateLayout())});c.$watch("rowHeight",function(b,c){b!==c&&(a.options.rowHeight=b,a.updateLayout())});c.$watch("rowIcon",function(b,c){b!==c&&(a.options.rowIcon=b,a.updateLayout())});a.resetSelection=function(){switch(a.options.selectionMode){case "none":a.clearPrevSelection();
break;default:a.clearPrevSelection(a.rowSelection())}};c.$watch("selectionMode",function(b,c){b!==c&&(a.options.selectionMode=b,a.resetSelection())});c.$watch("showExpandBoxes",function(b,c){b!==c&&(a.options.showExpandBoxes=b,a.updateLayout())});c.$watch("showFooter",function(b,c){b!==c&&(a.options.showFooter=b,a.updateLayout())});c.$watch("showHeader",function(b,c){b!==c&&(a.options.showHeader=b,a.updateLayout())});c.$watch("showIcons",function(b,c){b!==c&&(a.options.showIcons=b,a.updateLayout())});
c.$watch("selectedRow",function(b,c){b!==c&&(c&&(c[a.options.rowFields.selected]=!1),a.options.selectedRow=b,a.callAfterSelect(b))});this.sortComparer=this.sortColumn=null;c.$watch("sorting",function(b,c){b!==c&&(a.options.sorting=b)});c.$on(c.name+"-sort",function(b,c,f,g){a.sort(c,f,g)});this.sort=function(b,c,f){a.sortColumn=b;a.sortComparer=f;if("ascending"==c||"descending"==c||"none"==c)a.options.sorting=c;a.updateCurrentLayout();a.callChange()};this.getCellIndexInCollection=function(b,c,f){var d=
-1;if(b)for(var g=0;g<b.length;g++)if(void 0==b[g][a.options.cellFields.cid]){d=c;break}else if(b[g][a.options.cellFields.cid]==f){d=g;break}return d};this.isSortingAllowed=function(){return"ascending"==a.options.sorting||"descending"==a.options.sorting};this.applySorting=function(b){if(b&&(!a.sortColumn||0!=a.sortColumn[a.options.columnFields.visible])){var c=a.getColumnCurrentIndex(a.sortColumn),f=0<=c?c:a.options.expandColIndex;if(f<a.columnList.length){var g=a.columnList[f][a.options.columnFields.id];
a.sortColumn&&a.sortColumn[a.options.columnFields.comparer]?b.sort(a.sortColumn[a.options.columnFields.comparer]):a.sortComparer?b.sort(a.sortComparer):a.isSortingAllowed()&&b.sort(function(b,c){var d=null,k=null;if(b[a.options.rowFields.cells]){var m=a.getCellIndexInCollection(b[a.options.rowFields.cells],f,g);0<=m&&((d=b[a.options.rowFields.cells][m][a.options.cellFields.value])||(d=b[a.options.rowFields.cells][m][a.options.cellFields.text]),p.isObject(d)&&(d=d.value?d.value:d.text))}c[a.options.rowFields.cells]&&
(m=a.getCellIndexInCollection(c[a.options.rowFields.cells],f,g),0<=m&&((k=c[a.options.rowFields.cells][m][a.options.cellFields.value])||(k=c[a.options.rowFields.cells][m][a.options.cellFields.text]),p.isObject(k)&&(k=k.value?k.value:k.text)));d=void 0!=d?d:null;k=void 0!=k?k:null;switch(a.options.sorting){case "ascending":if(d<k)return-1;if(d>k)return 1;break;case "descending":if(d>k)return-1;if(d<k)return 1;break;default:return 0}})}}};var H=function(b){if(b){var c=p.isFieldAvailable(b.general,"iui-treegrid-column"),
f;f=(f=b.header)?{content:p.isFieldAvailable(f.content,"iui-treegrid-column-header-cell-content"),disabled:p.isFieldAvailable(f.disabled,"iui-treegrid-column-header-disabled"),normal:p.isFieldAvailable(f.normal,"iui-treegrid-column-header"),hovered:p.isFieldAvailable(f.hovered,"iui-treegrid-column-header-hovered"),selected:p.isFieldAvailable(f.selected,"iui-treegrid-column-header-selected")}:a.options.controlStyle.column.header;b=(b=b.footer)?{content:p.isFieldAvailable(b.content,"iui-treegrid-column-footer-cell-content"),
disabled:p.isFieldAvailable(b.disabled,"iui-treegrid-column-footer-disabled"),normal:p.isFieldAvailable(b.normal,"iui-treegrid-column-footer"),hovered:p.isFieldAvailable(b.hovered,"iui-treegrid-column-footer-hovered"),selected:p.isFieldAvailable(b.selected,"iui-treegrid-column-footer-selected")}:a.options.controlStyle.column.footer;return{general:c,header:f,footer:b}}return a.options.controlStyle.column};this.getExpandBoxStyle=function(b){return b?{general:p.isFieldAvailable(b.general,"iui-treegrid-expand-box"),
animated:p.isFieldAvailable(b.animated,"iui-treegrid-expand-box-load"),expanded:p.isFieldAvailable(b.expanded,"iui-treegrid-expand-box-open"),collapsed:p.isFieldAvailable(b.collapsed,"iui-treegrid-expand-box-close")}:a.options.controlStyle.row.expandBox};var Ib=function(b){if(b){var c;c=(c=b.general)?{disabled:p.isFieldAvailable(c.disabled,"iui-treegrid-row-disabled"),focused:p.isFieldAvailable(c.focused,"iui-treegrid-row-focused"),normal:p.isFieldAvailable(c.normal,"iui-treegrid-row"),hovered:p.isFieldAvailable(c.hovered,
"iui-treegrid-row-hovered"),selected:p.isFieldAvailable(c.selected,"iui-treegrid-row-selected")}:a.options.controlStyle.row.general;var f;var g=b.checkBox;g?(f=p.isFieldAvailable(g.general,"iui-checkbox"),g=(g=g.box)?{general:p.isFieldAvailable(g.general,"iui-checkbox-box"),disabled:p.isFieldAvailable(g.disabled,"iui-checkbox-disabled"),checked:p.isFieldAvailable(g.checked,"iui-checkbox-checked"),indeterminate:p.isFieldAvailable(g.indeterminate,"iui-checkbox-indeterminate"),unchecked:p.isFieldAvailable(g.unchecked,
"iui-checkbox-unchecked")}:a.options.controlStyle.row.checkBox.box,f={general:f,box:g}):f=a.options.controlStyle.row.checkBox;var g=a.getExpandBoxStyle(b.expandBox),k;k=(k=b.cell)?{content:p.isFieldAvailable(k.content,"iui-treegrid-row-cell-content"),general:p.isFieldAvailable(k.general,"iui-treegrid-row-cell"),disabled:p.isFieldAvailable(k.disabled,"iui-treegrid-row-cell-disabled"),focused:p.isFieldAvailable(k.focused,"iui-treegrid-row-cell-focused"),normal:p.isFieldAvailable(k.normal,"iui-treegrid-row-cell"),
hovered:p.isFieldAvailable(k.hovered,"iui-treegrid-row-cell-hovered"),selected:p.isFieldAvailable(k.selected,"iui-treegrid-row-cell-selected")}:a.options.controlStyle.row.cell;b=(b=b.fixed)?{disabled:p.isFieldAvailable(b.disabled,"iui-treegrid-row-fixed-disabled"),normal:p.isFieldAvailable(b.normal,"iui-treegrid-row-fixed"),hovered:p.isFieldAvailable(b.hovered,"iui-treegrid-row-fixed-hovered")}:a.options.controlStyle.row.fixed;return{general:c,checkBox:f,expandBox:g,cell:k,fixed:b}}return a.options.controlStyle.row},
B=function(b){return b?{content:p.isFieldAvailable(b.content,"iui-treegrid-row-cell-content"),general:p.isFieldAvailable(b.general,"iui-treegrid-row-cell"),disabled:p.isFieldAvailable(b.disabled,"iui-treegrid-row-cell-disabled"),focused:p.isFieldAvailable(b.focused,"iui-treegrid-row-cell-focused"),normal:p.isFieldAvailable(b.normal,"iui-treegrid-row-cell"),hovered:p.isFieldAvailable(b.hovered,"iui-treegrid-row-cell-hovered"),selected:p.isFieldAvailable(b.selected,"iui-treegrid-row-cell-selected")}:
a.options.controlStyle.cell};this.updateControlStyle=function(b){a.options.controlStyle=b?{general:p.isFieldAvailable(b.general,"iui-treegrid"),column:H(b.column),row:Ib(b.row),cell:B(b.cell)}:{general:p.isFieldAvailable(a.defaultStyle.general,"iui-treegrid"),column:H(a.defaultStyle.column),row:Ib(a.defaultStyle.row),cell:B(a.defaultStyle.cell)}};this.getCurrentColumnStyle=function(b,c,f){var d=a.options.controlStyle.column;b&&b.style&&(d=b.style);b=a.options.controlStyle.column.body;var g=d.body;
switch(c){case "header":b=a.options.controlStyle.column.header;g=d.header;break;case "footer":b=a.options.controlStyle.column.footer,g=d.footer}if(f)switch(f){case "content":return g&&g.content?g.content:b.content;case "disabled":return g&&g.disabled?g.disabled:b.disabled;case "hovered":return g&&g.hovered?g.hovered:b.hovered;case "selected":return g&&g.selected?g.selected:b.selected;default:return g&&g.normal?g.normal:b.normal}else return c?g?g:b:d?d:a.options.controlStyle.column};this.getCurrentRowStyle=
function(b,c){var d=a.options.controlStyle.row;if(b)switch(b[a.options.rowFields.style]){case "initial":break;case "parent":return a.getCurrentRowStyle(a.getParent(b),c);default:null!=b.style&&(d=b.style)}if(c){if(p.isString(d.general))return d.general;if(a.isRowFixed(b))switch(c){case "disabled":return d.fixed&&d.fixed.disabled?d.fixed.disabled:a.options.controlStyle.row.fixed.disabled;case "hovered":return d.fixed&&d.fixed.hovered?d.fixed.hovered:a.options.controlStyle.row.fixed.hovered;default:return d.fixed&&
d.fixed.normal?d.fixed.normal:a.options.controlStyle.row.fixed.normal}else switch(c){case "disabled":return d.general&&d.general.disabled?d.general.disabled:a.options.controlStyle.row.general.disabled;case "focused":return d.general&&d.general.focused?d.general.focused:a.options.controlStyle.row.general.focused;case "hovered":return d.general&&d.general.hovered?d.general.hovered:a.options.controlStyle.row.general.hovered;case "selected":return d.general&&d.general.selected?d.general.selected:a.options.controlStyle.row.general.selected;
default:return d.general&&d.general.normal?d.general.normal:a.options.controlStyle.row.general.normal}}else return d?d:a.options.controlStyle.row};this.getDefaultCellContentClass=function(){return"iui-treegrid-row-cell-content"};this.getDefaultCellLabelClass=function(){return"iui-treegrid-row-cell-label"};this.getDefaultCellBorderClass=function(){return"iui-treegrid-lines-both"};this.getCurrentCellStyle=function(b,c,f){var d=a.options.controlStyle.row.cell;if(c)switch(c[a.options.cellFields.style]){case "initial":break;
case "parent":b&&(d=B(a.getCurrentRowStyle(b)));break;default:c.style&&(d=c.style)}if(f)switch(f){case "content":return d.content?d.content:a.options.controlStyle.cell.content;case "disabled":return d.disabled?d.disabled:a.options.controlStyle.cell.disabled;case "focused":return d.focused?d.focused:a.options.controlStyle.cell.focused;case "hovered":return d.hovered?d.hovered:a.options.controlStyle.cell.hovered;case "selected":return d.selected?d.selected:a.options.controlStyle.cell.selected;default:return d.normal?
d.normal:a.options.controlStyle.cell.normal}else return d?d:a.options.controlStyle.row.cell}}]).directive("iuiTreegrid",["$compile","$timeout","$interval","IntegralUIInternalService","IntegralUIDragDrop","$window","IntegralUIListCtrlService",function(c,f,g,k,u,p,ia){return{restrict:"EA",controller:"IntegralUITreeGridController",transclude:!0,replace:!0,template:'<div class="iui-treegrid" data-element="treegrid"><div class="iui-treegrid-block"></div></div>',scope:{allowAnimation:"=",allowCellFocus:"=",
allowColumnReorder:"=",allowFilter:"=",allowFocus:"=",allowDrag:"=",allowDrop:"=",animationSpeed:"=",autoExpand:"=",autoSize:"=",columns:"=",controlStyle:"=",displayMode:"@",editorSettings:"=",enabled:"=",expandingColumnIndex:"=",fields:"=",fillSpace:"=",gridLines:"=",hoverSelection:"=",indent:"=",labelEdit:"=",maxRows:"=",mouseWheelSpeed:"@",name:"@",options:"=?",paging:"=?",pathSeparator:"@",rowHeight:"=",rowIcon:"=",rows:"=",selectedIndex:"=",selectedRow:"=",selectionMode:"@",showExpandBoxes:"=",
showFooter:"=",showHeader:"=",showIcons:"=",sorting:"@",afterCollapse:"&",afterEdit:"&",afterExpand:"&",afterLabelEdit:"&",afterSelect:"&",beforeCollapse:"&",beforeEdit:"&",beforeExpand:"&",beforeLabelEdit:"&",beforeSelect:"&",cellClick:"&",cellHover:"&",cellvalueChanged:"&",cellvalueChanging:"&",change:"&",clearColumns:"&",clearRows:"&",columnAdded:"&",columnAdding:"&",columnClick:"&",columnDblclick:"&",columnHover:"&",columnPoschanging:"&",columnPoschanged:"&",columnRemoved:"&",columnRemoving:"&",
columnRightclick:"&",columnSizechanged:"&",dragDrop:"&",dragEnter:"&",dragLeave:"&",dragOver:"&",enabledChanged:"&",events:"=?",gotFocus:"&",keyDown:"&",keyPress:"&",keyUp:"&",loadComplete:"&",lostFocus:"&",rowAdded:"&",rowAdding:"&",rowClick:"&",rowDblclick:"&",rowHover:"&",rowRemoved:"&",rowRemoving:"&",rowRightclick:"&",scrollposChanged:"&",selectionChanged:"&",updateComplete:"&"},link:function(m,q,rc,a,Sc){var E=this,ba=q.children().eq(0),L=angular.element('<div class="iui-scrollbar-vertical"><div class="iui-scroll-button-thumb-vertical"></div></div>'),
x=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),Oa=angular.element('<div class="iui-scrollbar-corner"></div>'),Ya=null,Pa=null,Qa=null,Hb=!1,D=angular.element('<input type="text" class="iui-label-editor" draggable="false" />');a.labelEditStatus=function(a){if(void 0!=a)Hb=a;else return Hb};var ob=function(){var b="iui-treegrid-block";a.options.showStatusIcons&&(b+=" "+b+"-shift-left");a.options.rtl&&(b+=" "+b+"-rtl");return b};
m.$on("$destroy",function(a){E.s2t();Ra&&(f.cancel(Ra),Ra=null);sa&&sa.unbind("mousedown");q.unbind("click dblclick dragenter dragleave dragend drop keydown mousedown mouseleave mousemove mousewheel scroll touchstart touchmove touchend");angular.element(p).unbind("dragenter",Tc);angular.element(p).unbind("dragover",Uc);angular.element(p).unbind("dragend",Vc);angular.element(p).unbind("keyup",Wc);angular.element(p).unbind("mousemove",Xc);angular.element(p).unbind("mousedown",Yc);angular.element(p).unbind("mouseup",
Zc);D&&D.unbind("blur focus keydown mousedown");$c();z&&z.$destroy();w&&w.$destroy()});a.dragIcon=document.createElement("img");a.dragIcon.width=1;q.append(a.getDropMarkWindow());a.dropMark();var xa=function(){Ya&&(f.cancel(Ya),Ya=null)};a.addDropMark=function(){var b;b=q[0];for(var c=null;b;){if(b===document.getElementsByTagName("body")[0]){c=b;break}b=b.offsetParent}if(b=c)angular.element(b).append(a.getDropMarkWindow()),a.dropMark()};a.removeDropMark=function(){a.getDropMarkWindow().remove()};
a.isDropInRange=function(b){b=a.getMousePos(b);var e=q[0].getBoundingClientRect();b.x-=angular.element(p)[0].pageXOffset;b.y-=angular.element(p)[0].pageYOffset;var c=e.top+C,e=e.bottom-I;J&&x&&(e-=x[0].offsetHeight);return b.y<c||b.y>e?!1:!0};var H=angular.element('<div style="opacity:0.75;position:absolute;z-index:999"></div>'),Ib=function(){H&&(H.remove(),H.css("top","-9999999px"),H.css("left","-9999999px"))};a.getCellElemFromRow=function(b){return b&&(b=a.getElemFromRow(b))?a.getChildElement(b,
"cell"):null};a.openEditor=function(b,c){if(b)switch(b.type){case "cell":c||(c=a.getColumnById(b[a.options.cellFields.cid]));if(!c){var e=a.getCellColumnIndex(b),l=a.columnsObj.getList();l&&0<=e&&e<l.length&&(c=l[e])}if(c){var e=a.getCellType(b,a.getColumnRealIndex(c)),l=a.getCellRowIndex(b),h=a.getCellColumnIndex(b);if(l=a.getElemFromCell(l,h,c[a.options.columnFields.fixed]))switch(e){case "checkbox":break;case "combobox":break;case "incell":a.openInCellEditor(l,b,c);break;case "dropdown":a.openDropDownEditor(l,
b,c);break;default:0!=b[a.options.cellFields.allowEdit]&&Jb(null,l,0)}}}};a.closeEditor=function(b,c,n){if(b)switch(b.type){case "cell":if(c||(c=a.getColumnById(b[a.options.cellFields.cid])),c)switch(a.getCellType(b,a.getColumnRealIndex(c))){case "incell":a.closeActiveEditor(b);break;case "dropdown":a.closeActiveEditor(b)}else a.closeActiveEditor()}else a.closeActiveEditor();n||"optimal"!=a.options.displayMode||a.updateView();d=null};var B=null,b=!1,d=null,t=null,r=angular.element('<span class="iui-edit-mark"></span>');
a.openInCellEditor=function(e,h,n){b&&a.closeActiveEditor(h,!0);R();if(h&&n&&(d=h,n='<div ng-include="'+n[a.options.columnFields.editorTemplate]+'"></div>',B=angular.element('<div class="iui-incell-editor"></div>'),B.append(c(n)(m.$parent)),0!=a.callBeforeEdit(h))){e.children().eq(0).append(B);b=!0;t="incell";fb();B.bind("mousedown",function(a){a.stopPropagation()});B.bind("mouseup",function(a){a.stopPropagation()});B.bind("click",function(a){a.stopPropagation()});B.bind("keydown",function(b){switch(b.keyCode){case 27:a.closeActiveEditor(d)}b.stopPropagation()});
B.bind("keypress",function(a){a.stopPropagation()});B.bind("keyup",function(a){a.stopPropagation()});var l=f(function(){var a=k.getPadding(e[0]),b=parseInt(getComputedStyle(e[0]).width,10)-(a.left+a.right),a=parseInt(getComputedStyle(e[0]).height,10)+2;B.css("width",b+"px");B.css("height",a+"px");B.css("top",e[0].offsetTop+"px");m.$apply();B.children&&1==B.children().length&&(b=B.children().eq(0),b.children&&1==b.children().length&&b.children().eq(0).css("height",a+"px"));f.cancel(l)},1)}};a.openDropDownEditor=
function(e,h,n){b&&a.closeActiveEditor(h,!0);R();if(h&&n&&(d=h,n='<div ng-include="'+n[a.options.columnFields.editorTemplate]+'"></div>',B=angular.element('<div class="iui-dropdown-editor"></div>'),B.append(c(n)(m.$parent)),0!=a.callBeforeEdit(h)))var l=f(function(){angular.element(gb).append(B);B.bind("mousedown",function(a){a.stopPropagation()});B.bind("mouseup",function(a){a.stopPropagation()});B.bind("click",function(a){a.stopPropagation()});b=!0;t="dropdown";var a=e[0].getBoundingClientRect(),
c=angular.element(p)[0].pageXOffset,h=angular.element(p)[0].pageYOffset,n=f(function(){var b=k.getPadding(e[0]),b=parseInt(getComputedStyle(e[0]).width,10)+(b.left+b.right),l=k.getPadding(B[0]),b=b-(l.left+l.right),l=parseInt(getComputedStyle(B[0]).width,10);b<l&&(b=l);l=a.right-(b+3)+c;B.css("top",a.bottom+h+"px");B.css("left",l+"px");B.css("width",b+"px");m.$apply();f.cancel(n)},1);f.cancel(l)},1)};a.closeActiveEditor=function(c,h){b=!1;R();B&&B.remove();t=d=null;h||a.callAfterEdit(c)};var R=function(){B&&
B.unbind("click keydown keypress keyup mousedown mouseup")},nb=function(a,b){a&&(r.addClass("iui-edit-mark iui-edit-mark-"+b),a.append(r),r.css("left",a[0].offsetLeft+a[0].offsetWidth-r[0].offsetWidth-2+"px"),r.css("top",a[0].offsetTop+(a[0].offsetHeight-r[0].offsetHeight)/2+"px"))},fb=function(){r&&("dropdown"!=t||"dropdown"==t&&!b)&&(r.removeAttr("class"),r.remove())},sc=null,Xa=angular.element('<div class="iui-dropdown-mark"><span></span></div>'),Yb=function(a,b){!a||hb&&!b||(a.append(Xa),Xa.css("top",
a[0].offsetTop+"px"),Xa.css("left",a[0].offsetLeft+a[0].offsetWidth-Xa[0].offsetWidth+"px"),Xa.css("height",getComputedStyle(a[0]).height))},za=function(a){!Xa||hb&&!a||Xa.remove()};a.getCellType=function(b,c){var e=null,l="label";b&&(e=a.getColumnById(b[a.options.cellFields.cid]));!e&&0<=c&&c<a.columnList.length&&(e=a.columnList[c]);e&&(l=e[a.options.columnFields.editorType]);return l};var gb=k.getBodyElem(q[0]),Kb=k.getUniqueId(4),ja=null,hb=!1,Lb=0,Ud=function(b,h,n){if(gb&&b.items&&0<b.items.length){b=
k.getUniqueId(4);var e=c('<iui-list name="'+b+'" style="position:absolute;top:-99px;height:100px" items="data['+h+"].column."+a.options.columnFields.editorSettings+'.items"></iui-list>')(z);angular.element(gb).append(e);ia.updateLayout(b);var y=f(function(){if(0<e.children().length){var a=e.children().eq(0);0<a.children().length&&(Lb=angular.element(a.children().eq(0))[0].offsetHeight,n&&(n.avgItemHeight=Lb))}e.remove();f.cancel(y)},1)}},ib=null,jb=function(b,h,n,l){var e=a.getCell(n,l);if(e!=sc&&
(sc=e,ja&&ja.remove(),ib&&ib.$destroy(),gb)){ib=m.$new();ib.data=a.columnList[l];d=e;var ya='<iui-list name="'+Kb+'" style="position:absolute;"',ya=ya+(' items="data.'+a.options.columnFields.editorSettings+'.items"'),ya=ya+(' item-icon="data.'+a.options.columnFields.editorSettings+'.itemIcon"'),ya=ya+(' show-icons="data.'+a.options.columnFields.editorSettings+'.showIcons"'),ya=ya+(' checkbox-settings="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings"'),ya=ya+(' show-check-boxes="data.'+
a.options.columnFields.editorSettings+'.checkBoxSettings.showCheckBoxes"');ja=c(ya+(' nav-selection="false" before-select="onCellValueChanging(e, '+n+", "+l+')" after-select="onCellValueChanged(e, '+n+", "+l+')"></iui-list>'))(ib);Lb=0;pb&&l<pb.length&&(Lb=pb[l].avgItemHeight);var g=f(function(){angular.element(gb).append(ja);var c=b[0].getBoundingClientRect(),l=angular.element(p)[0].pageXOffset,n=angular.element(p)[0].pageYOffset,n=c.bottom+n-1,c=c.left+l,l=b.children().eq(0),y=k.getPadding(l[0]),
l=parseInt(getComputedStyle(l[0]).width,10)+(y.left+y.right),y=k.getPadding(ja[0]),l=l-(y.left+y.right);void 0!=h.dropDownWidth&&l<h.dropDownWidth&&(l=h.dropDownWidth);y=void 0!=h.dropDownHeight?h.dropDownHeight:100;void 0!=h.maxDropDownItems&&(y=Lb*h.maxDropDownItems);ja.css("top",n+"px");ja.css("left",c+"px");ja.css("width",l+"px");ja.css("height",y+"px");ja.css("z-index","999");e&&e[a.options.cellFields.value]&&ia.selectedItem(Kb,e[a.options.cellFields.value]);ia.updateLayout(Kb);var d=f(function(){if(e&&
e[a.options.cellFields.value]){ia.ensureVisible(Kb,e[a.options.cellFields.value]);var b=f(function(){ia.focus(Kb,e[a.options.cellFields.value]);f.cancel(b)},1)}f.cancel(d)},10);Xa&&(za(!0),Yb(b,!0));hb=!0;Vd();f.cancel(g)},1)}};a.removeDropDownList=function(a){ja&&(sc=null,ja.remove(),hb=!1,a||za(),ja.unbind("keydown"));ib&&ib.$destroy();d=null};var Vd=function(){ja.bind("keydown",function(b){switch(b.keyCode){case 27:a.removeDropDownList(),za()}})},Jb=function(b,c,n){a.options.labelEdit&&(void 0===
n&&(n=500),Pa=f(function(){if(Pa)var a=f(function(){Zb(b,c,!0);f.cancel(a)},n);f.cancel(Pa)},n/3))},Mb=function(){Pa&&(f.cancel(Pa),Pa=null)},qb=null,rb=null,Zb=function(b,c,n){if(a.dragDropStatus())M=D[0].value,a.labelEditStatus(!1),D.unbind("blur focus keydown mousedown"),D.remove(),rb=qb=null;else{var e=a.getRowFromChildElem(c);if(e){var h=a.getRowCurrentIndex(e),d=a.getIndexFromElem(c),g=a.getCellObject(h,d),M="",M=c.children().eq(0);if(g)if(n){if(0!=a.callBeforeLabelEdit(g)){qb=e;rb=g;a.labelEditStatus(!0);
D.unbind("blur focus keydown mousedown");b=parseInt(getComputedStyle(c[0]).width,10)-4;n=parseInt(getComputedStyle(c[0]).height,10)-3;D.css("top",c[0].offsetTop+"px");D.css("left",c[0].offsetLeft+"px");D.css("width",b+"px");D.css("height",n+"px");M.append(D);D[0].value=g[a.options.cellFields.text];D.bind("keydown",function(b){switch(b.keyCode){case 13:g[a.options.cellFields.text]=D[0].value?D[0].value:"null";Zb(b,c,!1);break;case 27:Zb(b,c,!1)}b.stopPropagation()});D.bind("focus",function(b){var c=
angular.element(this);a.callGotFocus(b,qb,rb,!0,c[0].value)});D.bind("blur",function(a){Zb(a)});D.bind("mousedown",function(a){a.stopPropagation()});var k=f(function(){D[0].focus();D[0].select();f.cancel(k)},10)}}else M=D[0].value,a.labelEditStatus(!1),D.unbind("blur focus keydown mousedown"),D.remove(),a.updateView(),a.updateFocus(h,d),a.callAfterLabelEdit(g),a.callLostFocus(b,e,g,!0,M),rb=qb=null}else M=D[0].value,a.labelEditStatus(!1),D.unbind("blur focus keydown mousedown"),D.remove(),a.callAfterLabelEdit(),
a.updateView(),a.callLostFocus(b,qb,rb,!0,M),rb=qb=null}},ad=function(b){var c="";if(a.options.showExpandBoxes){var e=a.defaultStyle.row.expandBox.general;b[a.options.rowFields.style]&&b[a.options.rowFields.style].expandBox&&b[a.options.rowFields.style].expandBox.general!=e?e+=" "+b[a.options.rowFields.style].expandBox.general:a.options.controlStyle.row.expandBox.general!=e&&(e+=" "+a.options.controlStyle.row.expandBox.general);var l=a.getCurrentRowStyle(b),l=a.getExpandBoxStyle(l.expandBox);if(a.isThereChildRows||
b&&b[a.options.rowFields.hasChildren])c=e;e=b[a.options.rowFields.hasChildren]&&(a.isThereVisibleChildren(b)||!b[a.options.rowFields.rows]||b[a.options.rowFields.rows]&&0==b[a.options.rowFields.rows].length);b&&!a.isRowFixed(b)&&(e||a.isThereVisibleChildren(b))&&(0<=a.options.loadRows.indexOf(b)?c+=" "+l.animated:(c=b[a.options.rowFields.hasChildren]&&void 0===b[a.options.rowFields.expanded]?c+(" "+l.expanded):!1!==b[a.options.rowFields.expanded]?c+(" "+l.collapsed):c+(" "+l.expanded),!0===a.options.rtl&&
(c+="-rtl"),a.options.enabled&&a.isRowEnabled(b)||(c+="-disabled")))}return c};q.bind("mousemove",function(b){if(a.options.enabled&&0===b.button&&ra&&T){a.getColumnCurrentIndex(T);var c=a.getMousePos(b),e=c.y+16,c=c.x+20;Da.empty();Da.append("<span>"+T[a.options.columnFields.headerText]+"</span>");Da.css("top",e+"px");Da.css("left",c+"px");Da.css("display","block");bd();b.stopPropagation()}});var fd=function(){for(var b=0,c="none";3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var n=0;n<c.length;n++){var l=
angular.element(c[n]);cd(l);for(var l=l.find("td"),y=0;y<l.length;y++){var d=angular.element(l[y]);dd(a.getElement(d,"expandbox"));ed(d)}}b++;c=1==b?"left":"right"}},gd=function(){V&&V.unbind("dragover");U&&U.unbind("dragover");ka&&ka.unbind("dragover");la&&la.unbind("dragover");ca&&ca.unbind("dragover");ca&&ca.unbind("dragover")},$c=function(){gd();R();for(var b=0,c="none";3>b;){var n=a.getRowElems(c);if(n&&0<n.length)for(var l=0;l<n.length;l++){var y=angular.element(n[l]);cd(y);for(var y=y.find("td"),
d=0;d<y.length;d++){var f=angular.element(y[d]);dd(a.getElement(f,"expandbox"));ed(f)}}n=c;for(l=0;2>l;){rowFixed=0==l?"top":"bottom";if((y=a.getRowElems(n,rowFixed))&&0<y.length)for(d=0;d<y.length;d++){(f=angular.element(y[d]))&&f.unbind("mousedown mouseenter mouseleave");for(var f=f.find("td"),g=0;g<f.length;g++){var k=angular.element(f[g]);k&&k.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart")}}l++}if((n=a.getHeaderElem(c))&&0<n.length)for(l=0;l<n.length;l++)for(y=angular.element(n[l]),
y=y.find("td"),d=0;d<y.length;d++)(f=angular.element(y[d]))&&(c=a.getChildElement(f,"column-header-cell"))&&(c=a.getContentElement(c,"filter-button"))&&c.unbind("mousedown");b++;c=1==b?"left":"right"}},ae=function(){fd();for(var b=0,c="none";3>b;){var n=a.getRowElems(c);if(n&&0<n.length)for(var l,y=n.length-1,d=0;d<=y;d++){l=angular.element(n[d]);Wd(l);for(var f=l.find("td"),g=0;g<f.length;g++){var k=angular.element(f[g]);Xd(a.getElement(k,"expandbox"));Yd(k,a.getRowFromElem(l),g)}}for(n=0;2>n;){rowFixed=
0==n?"top":"bottom";if((l=a.getRowElems(c,rowFixed))&&0<l.length)for(d=0;d<l.length;d++)for(y=angular.element(l[d]),Zd(y),f=y.find("td"),g=0;g<f.length;g++)k=angular.element(f[g]),$d(k,a.getRowFromElem(y),g);n++}b++;c=1==b?"left":"right"}},ra=!1,T=null,sb=-1,$b=function(b,c){if(b){var e=a.getColumnCurrentIndex(b),l=a.getColumnWidth(b);return a.isColumnWithFixedWidth(e)||10<c.x&&c.x<l-10}return!1},vc=function(b){b=b.find("td");for(var c=0;c<b.length;c++)currentElem=angular.element(b[c]),currentElem.bind("click",
function(b){if(a.options.enabled&&1===b.which){var c=k.getClientMousePos(b,this),e=a.getColumnFromElem(this);e&&$b(e,c)&&a.callColumnClick(e,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("dblclick",function(b){b.preventDefault();if(a.options.enabled&&1===b.which){var c=k.getClientMousePos(b,this),e=a.getColumnFromElem(this);e&&$b(e,c)&&a.callColumnDblClick(e,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("mouseenter",function(b){if(a.options.enabled&&!W&&!ea){var c=a.getColumnFromElem(this);
c&&(a.hoverColumn=c,a.refresh(c),a.callColumnHover(c));if(1===b.which&&ra&&T&&a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&ma&&(ma.remove(),a.hoverColumn!=T)){var e=angular.element(this);e.append(ma);b=parseInt(getComputedStyle(e[0]).height,10);c=parseInt(getComputedStyle(ma[0]).height,10);e=k.getPadding(e[0]);ma.css("top",(b+e.top+e.bottom-c)/2+"px")}}}),currentElem.bind("mouseleave",function(b){!a.options.enabled||W||ea||(a.hoverColumn=null,(b=a.getColumnFromElem(this))&&a.refresh(b),
ma&&ma.remove(),W||q.css("cursor","default"))}),currentElem.bind("mousemove",function(b){if(a.options.enabled){var c=angular.element(this);if(1===b.which&&ra&&T&&a.hoverColumn&&a.hoverColumn!=T&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&T[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed])c=parseInt(getComputedStyle(c[0]).width,10),ma.empty(),sb=-1,b.offsetX>c/2?(sb=2,ma.append('<span class="iui-treegrid-column-reorder-mark-right"></span>'),ma.css("left","auto"),
ma.css("right","0")):(sb=1,ma.append('<span class="iui-treegrid-column-reorder-mark-left"></span>'),ma.css("left","0"),ma.css("right","auto"));else{b=k.getClientMousePos(b,this);var c=parseInt(a.getIndexFromElem(this),10),e=a.getColumnWidth(a.columnList[c]),n=10;a.isFilteringAllowed(a.columnList[c])&&(n=0);10>b.x&&!a.isColumnWithFixedWidth(c-1)&&hd(c,"left")?(q.css("cursor","ew-resize"),Sa="left"):b.x>e-n&&!a.isColumnWithFixedWidth(c)&&hd(c,"right")?(q.css("cursor","ew-resize"),Sa="right"):W||(q.css("cursor",
"default"),Sa="none")}}}),currentElem.bind("mouseup",function(b){if(a.options.enabled){if(1===b.which&&ra&&T&&a.hoverColumn&&a.hoverColumn!=T&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&T[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]&&0!=a.callColumnPosChanging(T,a.hoverColumn)){b=a.columnList[0];0<=a.options.expandColIndex&&a.options.expandColIndex<a.columnList.length&&(b=a.columnList[a.options.expandColIndex]);var c=a.getColumnCurrentIndex(T),c=a.getColumnRealIndex(c),
e=a.getColumnCurrentIndex(a.hoverColumn),e=a.getColumnRealIndex(e);c!=e&&(c<e?1==sb&&e--:c>e&&2==sb&&e++,a.columnsObj.moveObject(c,e),a.updateColumnList(),b=a.getColumnCurrentIndex(b),b!=a.options.expandColIndex&&(a.options.expandColIndex=b),a.updateLayout(),a.callColumnPosChanged(T,a.hoverColumn))}T=null;sb=-1;W=ra=!1;q.css("cursor","default")}}),currentElem.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor();k.getClientMousePos(b,this);
var c=parseInt(a.getIndexFromElem(this),10);if(0===b.button&&!W){var e=c,n="none";0<=c&&c<a.columnList.length&&(n=a.columnList[c][a.options.columnFields.fixed]);switch(Sa){case "left":"right"==n?e=c:(c=tc(e-1,n))?(e=a.getColumnCurrentIndex(c),0<=e&&e<a.columnList.length&&(a.columnList[e][a.options.columnFields.fixed]!=n?(e=-1,W=!1):W=!0)):W=!1;0<=e&&(W=!0);break;case "right":"right"==n?(c=uc(e+1,n))?(e=a.getColumnCurrentIndex(c),0<=e&&e<a.columnList.length&&(a.columnList[e][a.options.columnFields.fixed]!=
n?(e=-1,W=!1):W=!0)):W=!1:(e=c,W=!0)}!a.isColumnWithFixedWidth(e)&&W?a.setColumnResizingParams(e,Sa,a.getMousePos(b).x):W=!1}if(!W&&(e=a.getColumnFromChildElem(this)))switch(n=k.getClientMousePos(b,this),$b(e,n)&&a.columnSelection(e),b.which){case 1:a.options.allowColumnReorder&&0!=e[a.options.columnFields.allowDrag]&&0==ra&&(T=e,a.getMousePos(b),ra=!0,(e=k.getBodyElem(q[0]))&&angular.element(e).append(Da));break;case 3:$b(e,n)&&a.callColumnRightClick(e,a.getMousePos(b))}}b.stopPropagation()}),function(b){b&&
(b=a.getChildElement(b,"column-header-cell"))&&(b=a.getContentElement(b,"filter-button"))&&b.bind("mousedown",function(a){1==a.which&&be(this);a.stopPropagation()})}(currentElem)},sa=null,be=function(b){a.closeFilterWindow();var e=a.getColumnFromChildElem(b);if(e){var n=angular.element(b),l=n.parent().parent();if(gb){b='<div ng-include="'+e[a.options.columnFields.filterTemplate]+'"></div>';sa=angular.element('<div class="iui-filter-window"></div>');sa.append(c(b)(m.$parent));var y=f(function(){angular.element(gb).append(sa);
sa.bind("mousedown",function(a){a.stopPropagation()});n[0].getBoundingClientRect();var b=l[0].getBoundingClientRect(),c=angular.element(p)[0].pageXOffset,h=angular.element(p)[0].pageYOffset,d=f(function(){var l=b.bottom+h,n=b.right-(parseInt(getComputedStyle(sa[0]).width,10)+3)+c;e[a.options.columnFields.filterParams]&&"left"==e[a.options.columnFields.filterParams].templateAlignment&&(n=b.left+c);sa.css("top",l+"px");sa.css("left",n+"px");f.cancel(d)},1);f.cancel(y)},1)}}};a.closeFilterWindow=function(){sa&&
(sa.unbind("mousedown"),sa.remove())};var cd=function(a){a&&a.unbind("blur dragover dragend focus keydown keyup keypress mousedown mouseenter mouseleave")},Wd=function(b){b&&(b.bind("dragover",function(b){var c=a.getRowFromElem(this);if(c&&a.isRowEnabled(c)){if(a.isScrollBarVisible("vertical")){var c=a.getMousePos(b),e=q[0].getBoundingClientRect();c.x-=angular.element(p)[0].pageXOffset;c.y-=angular.element(p)[0].pageYOffset;var h=e.top+C+25,e=e.bottom-I-25;J&&x&&(e-=x[0].offsetHeight);c.y<h?ac(!1):
c.y>e?ac(!0):tb()}else tb();b.stopPropagation()}}),b.bind("dragend",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&(b.preventDefault(),a.dragDropStatus(!1),a.dropMark(),u.getData().source||u.clearData())}),b.bind("mouseenter",function(b){if(!ea){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&!ra&&(a.hoverRow=c,a.refresh(c),a.callRowHover(b,c),a.options.hoverSelection&&(Qa=f(function(){Qa&&a.rowSelection(c,b.shiftKey,b.ctrlKey,b.metaKey)},500)))}}),b.bind("mouseleave",function(b){ea||
(a.hoverRow=null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refresh(b),Qa&&(f.cancel(Qa),Qa=null))}),b.bind("keydown",function(b){var c=a.getRowFromElem(this);if(c&&a.isRowEnabled(c)){var e=!0;a.callKeyDown(b,c);var h=a.getRowCurrentIndex(c);switch(b.keyCode){case 9:id(b,c,h);break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:e=!1;break;case 33:jd(b,h);break;case 34:kd(b,h);break;case 35:ld(b,h);break;case 36:md(b,h);break;case 37:nd(b,
c,h);break;case 32:od(b,c);break;case 38:wc(b,h);break;case 39:pd(b,c,h);break;case 40:xc(b,h);break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}e&&b.stopPropagation()}}),b.bind("keyup",function(b){var c=a.getRowFromElem(this);if(c&&a.isRowEnabled(c)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,
c)}}),b.bind("keypress",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&a.callKeyPress(b,c)}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}),b.bind("focus",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)?a.callGotFocus(b,c):a.updateFocus()}),b.bind("blur",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&a.callLostFocus(b,c)}))},Xd=function(b){b&&(b.bind("dblclick",function(b){var c=a.getRowFromChildElem(this);
c&&a.isRowEnabled(c)&&(a.toggle(c),a.updateFocus(a.getRowCurrentIndex(c),a.options.expandColIndex),b.stopPropagation())}),b.bind("click",function(b){var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(a.toggle(c),a.updateFocus(a.getRowCurrentIndex(c),a.options.expandColIndex),b.stopPropagation())}),b.bind("touchend",function(b){b.preventDefault();var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(a.toggle(c),a.updateFocus(a.getRowCurrentIndex(c),a.options.expandColIndex),b.stopPropagation())}))},
dd=function(a){a&&a.unbind("click dblclick touchend")},bc={x:0,y:0},ub={x:0,y:0},vb=!1,yc=!1,Ta=null,qd=function(){return{x:angular.element(p)[0].pageXOffset,y:angular.element(p)[0].pageYOffset}},wb=function(a){var b=qd();return{x:a.x-b.x,y:a.y-b.y}},Yd=function(c,h,n){c&&(c.bind("dragstart",function(b){if(a.labelEditStatus())b.preventDefault();else{document.activeElement&&document.activeElement.blur();u.clearData();var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c))if(Mb(),a.isDragAllowed(c)){a.dragDropStatus(!0);
a.addDropMark();b.dataTransfer?(b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text",c[a.options.rowFields.id]?c[a.options.rowFields.id].toString():"")):b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="move",b.originalEvent.dataTransfer.setData("text",c[a.options.rowFields.id]?c[a.options.rowFields.id].toString():""));b={source:c,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":b.source=a.options.selectedRows;
break;case "multi-extended":b.source=a.options.selectedRows}u.setData(b)}else b.dataTransfer?b.dataTransfer.effectAllowed="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="none")}}),c.bind("dragover",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var e=angular.element(this);b.preventDefault();var l=!0;b.dataTransfer?l="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(l="none"===b.originalEvent.dataTransfer.effectAllowed?
!1:!0);if(l&&(c=a.getRowFromChildElem(e))){var l=e[0].getBoundingClientRect(),h=angular.element(p)[0].pageXOffset,n=angular.element(p)[0].pageYOffset,d=a.getMousePos(b);d.x-=l.left+h;d.y-=l.top+n;e=u.getDropPos(d,{x:0,y:0,width:e[0].offsetWidth,height:e[0].offsetHeight});h=u.getData();l=a.isDropAllowed(h.source,c,e);n={event:b,sourceTree:h.sourceCtrl?h.sourceCtrl.getCtrlName():"",dragRow:h.source,targetTree:a.getCtrlName(),targetRow:c,isDropAllowed:l,dropPos:e,mousePos:a.getMousePos(b)};n=a.callDragOver(n);
if(l&&!1!==n){n=a.getMousePos(b);b=n.y+16;n=n.x+20;d=a.getDropMarkWindow();d.empty();var f="iui-drop-marker-move-in";switch(e){case 1:f="iui-drop-marker-move-up";break;case 2:f="iui-drop-marker-move-down"}d.append("<span class='"+f+"'></span><span class='iui-drop-marker-title'>"+c[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:n});a.dropMark(l);u.setData({source:h.source,sourceList:h.sourceList,target:c,dropPos:e})}else b.dataTransfer?b.dataTransfer.dropEffect=
"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark()}}}),c.bind("drop",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var e=angular.element(this);b.preventDefault();xa();a.dropMark();c=!0;b.dataTransfer?c="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(c="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(c){var l=a.getRowFromChildElem(e);if(l){var e=u.getData(),
h=e.source;h||(h=a.getDnDSource(b));if(c=a.isDropAllowed(h,l,e.dropPos)){a.toggle(l,!0);var n=a.getMousePos(b);h&&(c={event:b,sourceTree:e.sourceCtrl?e.sourceCtrl.getCtrlName():"",dragRow:h,targetTree:a.getCtrlName(),targetRow:l,targetCell:a.getCellAt(n.x,n.y),isDropAllowed:c,dropPos:e.dropPos,mousePos:n},!1!==a.callDragDrop(c)&&(a.drop(e),m.$$phase||m.$apply()))}}}u.clearData();b.stopPropagation()}}),c.bind("dragenter",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){b.preventDefault();
if(a.options.autoExpand)var e=f(function(){Ya||(Ya=f(function(){Ya&&a.toggle(c,!0)},750));f.cancel(e)},1);var l=u.getData();l.source||(l.source=a.getDnDSource(b));l={event:b,sourceTree:l.sourceCtrl?l.sourceCtrl.getCtrlName():"",dragRow:l.source,targetTree:a.getCtrlName(),targetRow:l.target,mousePos:a.getMousePos(b)};a.callDragEnter(l);b.stopPropagation()}}),c.bind("dragleave",function(b){a.hoverRow=null;var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(b.preventDefault(),xa(),c=u.getData(),
c.source||(c.source=a.getDnDSource(b)),c={event:b,sourceTree:c.sourceCtrl?c.sourceCtrl.getCtrlName():"",dragRow:c.source,targetTree:a.getCtrlName(),targetRow:c.target,mousePos:a.getMousePos(b)},a.callDragLeave(c),b.stopPropagation())}),c.bind("touchstart",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)&&(c.preventDefault(),(e=a.getTouchData(c))&&0<e.length)){yc=!0;var l=f(function(){yc=!1;f.cancel(l)},750);bc=wb({x:e[0].pageX,y:e[0].pageY});a.closeFilterWindow();e=bc;if((e=a.getRowAt(e.x,
e.y))&&a.isRowEnabled(e)){var h=angular.element(this);a.mouseButtonStatus(!0);Ta=e;var n=a.getRowCurrentIndex(e),g=parseInt(a.getIndexFromElem(this),10),k=a.getCell(n,g),m=a.getCellType(k,g),p=null,q=a.options.editorSettings;h[0].focus();a.updateFocus(n,g);k&&(p=a.getColumnById(k[a.options.cellFields.cid]));!p&&0<=g&&g<a.columnList.length&&(p=a.columnList[g]);var r="click"==a.options.editorSettings.activate;p&&p[a.options.columnFields.editorSettings]&&(q=p[a.options.columnFields.editorSettings],r=
void 0!=q.activate?"click"==q.activate:r);k&&k!=d?a.closeEditor(d):a.closeEditor();switch(m){case "checkbox":break;case "combobox":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);k&&0!=k[a.options.cellFields.allowEdit]&&p&&r?jb(angular.element(this),q,n,g):a.removeDropDownList();break;case "incell":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);!b&&k&&0!=k[a.options.cellFields.allowEdit]&&r&&a.openInCellEditor(h,k,p);break;case "dropdown":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);!b&&k&&
0!=k[a.options.cellFields.allowEdit]&&r&&a.openDropDownEditor(h,k,p);break;default:a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey),a.removeDropDownList(),k&&0!=k[a.options.cellFields.allowEdit]&&r&&Jb(c,angular.element(this))}}}}),c.bind("touchmove",function(b){var c,e,l=a.getRowFromChildElem(this);if(l&&a.isRowEnabled(l)&&(l=a.getTouchData(b))&&0<l.length){ub=wb({x:l[0].pageX,y:l[0].pageY});var l=Math.abs(ub.x-bc.x),h=Math.abs(ub.y-bc.y),n=q[0].getBoundingClientRect();if(u.hitTest(ub.x,ub.y,n)){if(b.preventDefault(),
H&&H.css("display","block"),!yc)if(!vb&&(2<l||2<h)&&Ta&&a.isRowEnabled(Ta))if(angular.element(this),a.labelEditStatus())b.preventDefault();else{vb=!0;u.clearData();if((l=a.getTouchData(b))&&0<l.length&&(wb({x:l[0].pageX,y:l[0].pageY}),Ta&&a.isRowEnabled(Ta)&&(Mb(),a.isDragAllowed(Ta)))){a.dragDropStatus(!0);a.addDropMark();l={source:Ta,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":l.source=a.options.selectedRows;break;case "multi-extended":l.source=a.options.selectedRows}u.setData(l);
if(l=a.getCellElemFromRow(Ta))if(l=a.getContentElement(l))H.empty(),H.append(l.clone()),H.css("display","none"),q.append(H)}b.stopPropagation()}else if(vb&&(angular.element(this),b.preventDefault(),(h=a.getTouchData(b))&&0<h.length)){var l=qd(),d=wb({x:h[0].pageX,y:h[0].pageY});if(h=a.getRowAt(d.x,d.y)){var f=a.getCellElemFromRow(h);if(f){var n=f[0].getBoundingClientRect(),f=u.getDropPos({x:d.x-n.left,y:d.y-n.top},{x:0,y:0,width:f[0].offsetWidth,height:f[0].offsetHeight}),n=u.getData(),g=a.isDropAllowed(n.source,
h,f);b={event:b,sourceTree:n.sourceCtrl?n.sourceCtrl.getCtrlName():"",dragRow:n.source,targetTree:a.getCtrlName(),targetRow:h,isDropAllowed:g,dropPos:f,mousePos:d};e=q[0].getBoundingClientRect();c=d.x-e.left;e=d.y-e.top;H.css("top",e-16+"px");H.css("left",c+"px");H.css("display","block");b=a.callDragOver(b);if(g&&0!=b){b=d.y+l.y+16;l=d.x+l.x+20;d=a.getDropMarkWindow();d.empty();c="iui-drop-marker-move-in";switch(f){case 1:c="iui-drop-marker-move-up";break;case 2:c="iui-drop-marker-move-down"}d.append("<span class='"+
c+"'></span><span class='iui-drop-marker-title'>"+h[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:l});a.dropMark(g);u.setData({source:n.source,sourceList:n.sourceList,target:h,dropPos:f})}else a.dropMark(),H&&H.css("display","none")}}else n=q[0].getBoundingClientRect(),h=n.top+C,n=n.bottom-I,J&&x&&(n-=x[0].offsetHeight),!a.options.allowDrop||d.y<h||d.y>n?(a.dropMark(),H&&H.css("display","none")):(e=q[0].getBoundingClientRect(),c=d.x-e.left,e=d.y-e.top,
H.css("top",e-16+"px"),H.css("left",c+"px"),H.css("display","block"),h=u.getData(),n={source:h.source,sourceCtrl:h.sourceCtrl,target:null,dropPos:-1},u.setData(n),b={event:b,sourceTree:h.sourceCtrl?h.sourceCtrl.getCtrlName():"",dragRow:h.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:d},b=a.callDragOver(b),0==b?a.dropMark():(b=d.y+l.y+16,l=d.x+l.x+20,d=a.getDropMarkWindow(),d.empty(),d.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+
(m.name?m.name:"TreeGrid")+"</span>"),a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:l}),a.dropMark(!0)))}}else b.preventDefault(),a.dropMark(),a.cancelScrollTimer(),H&&H.css("display","none")}}),c.bind("touchend",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){if((c=a.getTouchData(b))&&0<c.length){var c=wb({x:c[0].pageX,y:c[0].pageY}),e=q[0].getBoundingClientRect();if(u.hitTest(c.x,c.y,e))if(vb){angular.element(this);b.preventDefault();xa();a.dropMark();Ib();if((c=
a.getTouchData(b))&&0<c.length){var c=wb({x:c[0].pageX,y:c[0].pageY}),l=a.getRowAt(c.x,c.y);if(l){var e=u.getData(),h=e.source,n=a.isDropAllowed(h,l,e.dropPos);n&&(a.toggle(l,!0),h&&(c={event:b,sourceTree:e.sourceCtrl?e.sourceCtrl.getCtrlName():"",dragRow:h,targetTree:a.getCtrlName(),targetRow:l,isDropAllowed:n,dropPos:e.dropPos,mousePos:c},c=a.callDragDrop(c),!1!==c&&(a.drop(e),m.$$phase||m.$apply())))}else a.dropMark(),l=q[0].getBoundingClientRect(),e=l.top+C,l=l.bottom-I,J&&x&&(l-=x[0].offsetHeight),
c.y>=e&&c.y<=l&&(e=u.getData(),e.source&&(c={event:b,sourceTree:e.sourceCtrl?e.sourceCtrl.getCtrlName():"",dragRow:e.source,targetTree:a.getCtrlName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:c},c=a.callDragDrop(c),!1!==c&&(a.drop(e),m.$$phase||m.$apply())))}u.clearData();a.dragDropStatus(!1);b.stopPropagation()}else a.mouseButtonStatus(!1),(c=a.getRowFromChildElem(this))&&a.isRowEnabled(c)&&a.updateSelection(b,c,b.shiftKey),Mb()}c=vb;a.removeDropMark();Ib();ub={x:0,y:0};
vb=!1;Ta=null;c&&b.stopPropagation()}}),c.bind("dblclick",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var l=angular.element(this);c.preventDefault();if(1===c.which){var h=a.getRowCurrentIndex(e),n=parseInt(a.getIndexFromElem(this),10),d=a.getCell(h,n),f=a.getCellType(d,n),g=null,k=a.options.editorSettings;d&&(g=a.getColumnById(d[a.options.cellFields.cid]));!g&&0<=n&&n<a.columnList.length&&(g=a.columnList[n]);var m="dblclick"==a.options.editorSettings.activate;g&&g[a.options.columnFields.editorSettings]&&
(k=g[a.options.columnFields.editorSettings],m=void 0!=k.activate?"dblclick"==k.activate:m);switch(f){case "checkbox":break;case "combobox":d&&0!=d[a.options.cellFields.allowEdit]&&g&&m?jb(angular.element(this),k,h,n):a.removeDropDownList();break;case "incell":!b&&d&&0!=d[a.options.cellFields.allowEdit]&&m&&a.openInCellEditor(l,d,g);break;case "dropdown":!b&&d&&0!=d[a.options.cellFields.allowEdit]&&m&&a.openDropDownEditor(l,d,g);break;default:a.removeDropDownList(),d&&0!=d[a.options.cellFields.allowEdit]&&
m&&Jb(c,angular.element(this),0)}0!=a.callRowDblClick(e,a.getMousePos(c))&&"checkbox"!=f&&"checkbox"!=f&&d&&!m&&(a.toggle(e),a.updateFocus(h,n))}c.stopPropagation()}}),c.bind("mouseenter",function(c){if(!ea){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)&&!ra){var l=a.getRowCurrentIndex(e),n=parseInt(a.getIndexFromElem(this),10);if(l=a.getCell(l,n))if(a.hoverCell=l,a.refresh(e),a.callCellHover(c,l),c=angular.element(this),l&&0!=l[a.options.cellFields.allowEdit])switch(n=a.getCellType(l,
n),n){case "combobox":hb||Yb(c);break;case "incell":b&&l==d||nb(c,n);break;case "dropdown":b&&l!=d||nb(c,n);break;default:za(),fb()}else za()}}}),c.bind("mouseleave",function(b){if(!ea&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);var c=parseInt(a.getIndexFromElem(this),10);a.getCell(b,c)&&(za(),fb())}}),c.bind("keydown",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var l=!0,n=angular.element(this);a.callKeyDown(c,e);var h=
a.getRowCurrentIndex(e),d=parseInt(a.getIndexFromElem(this),10),f=a.getCell(h,d),g=a.getCellType(f,d),k=a.getColumnById(f[a.options.cellFields.cid]);!k&&0<=d&&d<a.columnList.length&&(k=a.columnList[d]);switch(c.keyCode){case 9:id(c,e,h,d);break;case 13:switch(g){case "checkbox":rd(f,d);break;case "combobox":f&&0!=f[a.options.cellFields.allowEdit]?k&&jb(angular.element(this),k[a.options.columnFields.editorSettings],h,d):a.removeDropDownList();break;case "incell":!b&&f&&0!=f[a.options.cellFields.allowEdit]&&
a.openInCellEditor(n,f,k);break;case "dropdown":!b&&f&&0!=f[a.options.cellFields.allowEdit]&&a.openDropDownEditor(n,f,k);break;default:f&&0!=f[a.options.cellFields.allowEdit]&&Jb(c,angular.element(this),0)}break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:l=!1;break;case 33:jd(c,h,d);break;case 34:kd(c,h,d);break;case 35:ld(c,h,d);break;case 36:md(c,h,d);break;case 37:nd(c,e,h,d);break;case 32:od(c,e,f,d);break;case 38:wc(c,h,d);break;case 39:pd(c,
e,h,d);break;case 40:xc(c,h,d);break;default:(c.ctrlKey||c.metaKey)&&a.updateSelectionStatus("ctrl"),c.shiftKey&&a.updateSelectionStatus("shift")}l&&c.stopPropagation()}}),c.bind("keyup",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,c);b.stopPropagation()}}),c.bind("keypress",function(b){var c=
a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(a.callKeyPress(b,c),b.stopPropagation())}),c.bind("click",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){if(1===b.which){var e=a.getRowCurrentIndex(c),l=parseInt(a.getIndexFromElem(this),10),e=a.getCell(e,l);a.callCellClick(b,c,e,a.getMousePos(b));a.callRowClick(b,c,a.getMousePos(b))}b.stopPropagation()}}),c.bind("mousedown",function(c){a.closeFilterWindow();var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var h=
angular.element(this);a.mouseButtonStatus(!0);switch(c.which){case 1:var l=a.getRowCurrentIndex(e),n=parseInt(a.getIndexFromElem(this),10),f=a.getCell(l,n),g=a.getCellType(f,n),k=null,m=a.options.editorSettings;f&&(k=a.getColumnById(f[a.options.cellFields.cid]));!k&&0<=n&&n<a.columnList.length&&(k=a.columnList[n]);var p="click"==a.options.editorSettings.activate;k&&k[a.options.columnFields.editorSettings]&&(m=k[a.options.columnFields.editorSettings],p=void 0!=m.activate?"click"==m.activate:p);f&&
f!=d?a.closeEditor(d):a.closeEditor();switch(g){case "checkbox":break;case "combobox":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);f&&0!=f[a.options.cellFields.allowEdit]&&k&&p?jb(angular.element(this),m,l,n):a.removeDropDownList();break;case "dropdown":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);!b&&f&&0!=f[a.options.cellFields.allowEdit]&&p&&a.openDropDownEditor(h,f,k);break;case "incell":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);!b&&f&&0!=f[a.options.cellFields.allowEdit]&&p&&a.openInCellEditor(h,
f,k);break;default:if("image"==g?0!=m.allowSelection:1)a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey),a.removeDropDownList(),f&&0!=f[a.options.cellFields.allowEdit]&&p&&Jb(c,angular.element(this))}break;case 3:a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey),a.callRowRightClick(e,a.getMousePos(c))}c.stopPropagation()}}),c.bind("mouseup",function(b){a.mouseButtonStatus(!1);if(1==b.which){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var e=a.getRowCurrentIndex(c),n=parseInt(a.getIndexFromElem(this),
10),e=a.getCell(e,n),h=a.getCellType(e,n),l=null,d=a.options.editorSettings;e&&(l=a.getColumnById(e[a.options.cellFields.cid]));!l&&0<=n&&n<a.columnList.length&&(l=a.columnList[n]);l&&l[a.options.columnFields.editorSettings]&&(d=l[a.options.columnFields.editorSettings]);("image"==h?0!=d.allowSelection:1)&&a.updateSelection(b,c,b.shiftKey)}Mb()}}),c.bind("focus",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var n=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),
10),n=a.getCell(n,h);a.callGotFocus(c,e,n);if(n&&0!=n[a.options.cellFields.allowEdit])switch(c=angular.element(this),h=a.getCellType(n,h),h){case "combobox":hb||Yb(c);break;case "incell":b||nb(c,h);break;case "dropdown":b||nb(c,h);break;default:za()}else za()}}),c.bind("blur",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var e=a.getRowCurrentIndex(c),n=parseInt(a.getIndexFromElem(this),10),e=a.getCell(e,n);a.callLostFocus(b,c,e)}}))},ed=function(a){a&&a.unbind("blur click dragstart dragover drop dragenter dragleave dblclick focus keydown keypress keyup mouseenter mouseleave mousemove mousedown mouseup touchstart touchmove touchend")},
Zd=function(b){b&&(b.bind("mouseenter",function(b){if(!ea){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&!ra&&(a.hoverRow=c,a.refreshHover(c),a.callRowHover(b,c))}}),b.bind("mouseleave",function(b){ea||(a.hoverRow=null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refreshHover(b))}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}))},$d=function(c,h,n){c&&(c.bind("touchstart",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){c.preventDefault();
a.closeFilterWindow();c=angular.element(this);var e=a.getRowCurrentIndex(e),n=parseInt(a.getIndexFromElem(this),10),h=a.getCell(e,n),l=a.getCellType(h,n),f=null,g=a.options.editorSettings;c[0].focus();h&&(f=a.getColumnById(h[a.options.cellFields.cid]));!f&&0<=n&&n<a.columnList.length&&(f=a.columnList[n]);var k="click"==a.options.editorSettings.activate;f&&f[a.options.columnFields.editorSettings]&&(g=f[a.options.columnFields.editorSettings],k=void 0!=g.activate?"click"==g.activate:k);h&&h!=d?a.closeEditor(d):
a.closeEditor();switch(l){case "checkbox":break;case "combobox":h&&0!=h[a.options.cellFields.allowEdit]&&f&&k?jb(angular.element(this),g,e,n):a.removeDropDownList();break;case "incell":!b&&h&&0!=h[a.options.cellFields.allowEdit]&&k&&a.openInCellEditor(c,h,f);break;case "dropdown":!b&&h&&0!=h[a.options.cellFields.allowEdit]&&k&&a.openDropDownEditor(c,h,f);break;default:a.removeDropDownList()}}}),c.bind("mouseenter",function(c){if(!ea){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)&&!ra){var n=
a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10);if(n=a.getCell(n,h))if(a.hoverCell=n,a.refreshHover(e),a.callCellHover(c,n),c=angular.element(this),n&&0!=n[a.options.cellFields.allowEdit])switch(h=a.getCellType(n,h),h){case "combobox":hb||Yb(c);break;case "incell":b&&n==d||nb(c,h);break;case "dropdown":b&&n!=d||nb(c,h);break;default:za(),fb()}else za()}}}),c.bind("mouseleave",function(b){if(!ea&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);
var c=parseInt(a.getIndexFromElem(this),10);a.getCell(b,c)&&(za(),fb())}}),c.bind("click",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){if(1===b.which){var e=a.getRowCurrentIndex(c),n=parseInt(a.getIndexFromElem(this),10),e=a.getCell(e,n);a.callCellClick(b,c,e,a.getMousePos(b));a.callRowClick(b,c,a.getMousePos(b))}b.stopPropagation()}}),c.bind("dblclick",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var n=angular.element(this);c.preventDefault();if(1===
c.which){var h=a.getRowCurrentIndex(e),d=parseInt(a.getIndexFromElem(this),10),l=a.getCell(h,d),f=a.getCellType(l,d),g=null,k=a.options.editorSettings;l&&(g=a.getColumnById(l[a.options.cellFields.cid]));!g&&0<=d&&d<a.columnList.length&&(g=a.columnList[d]);var m="dblclick"==a.options.editorSettings.activate;g&&g[a.options.columnFields.editorSettings]&&(k=g[a.options.columnFields.editorSettings],m=void 0!=k.activate?"dblclick"==k.activate:m);switch(f){case "checkbox":break;case "combobox":l&&0!=l[a.options.cellFields.allowEdit]&&
g&&m?jb(angular.element(this),k,h,d):a.removeDropDownList();break;case "incell":!b&&l&&0!=l[a.options.cellFields.allowEdit]&&m&&a.openInCellEditor(n,l,g);break;case "dropdown":!b&&l&&0!=l[a.options.cellFields.allowEdit]&&m&&a.openDropDownEditor(n,l,g);break;default:a.removeDropDownList()}a.callRowDblClick(e,a.getMousePos(c))}c.stopPropagation()}}),c.bind("mousedown",function(c){a.closeFilterWindow();var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var n=angular.element(this);a.mouseButtonStatus(!0);
switch(c.which){case 1:var e=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10),l=a.getCell(e,h),f=a.getCellType(l,h),g=null,k=a.options.editorSettings;l&&(g=a.getColumnById(l[a.options.cellFields.cid]));!g&&0<=h&&h<a.columnList.length&&(g=a.columnList[h]);var m="click"==a.options.editorSettings.activate;g&&g[a.options.columnFields.editorSettings]&&(k=g[a.options.columnFields.editorSettings],m=void 0!=k.activate?"click"==k.activate:m);l&&l!=d?a.closeEditor(d):a.closeEditor();switch(f){case "checkbox":break;
case "combobox":l&&0!=l[a.options.cellFields.allowEdit]&&g&&m?jb(angular.element(this),k,e,h):a.removeDropDownList();break;case "dropdown":!b&&l&&0!=l[a.options.cellFields.allowEdit]&&m&&a.openDropDownEditor(n,l,g);break;case "incell":!b&&l&&0!=l[a.options.cellFields.allowEdit]&&m&&a.openInCellEditor(n,l,g);break;default:a.removeDropDownList()}break;case 3:a.callRowRightClick(e,a.getMousePos(c))}c.stopPropagation()}}),c.bind("mouseup",function(a){1==a.which&&Mb()}))};a.getTopRow=function(){return a.isRowIndexInRange(v-
1)?a.currentList[v]:0<a.currentList.length?a.currentList[0]:null};a.getFooterElem=function(a){switch(a){case "left":return ta;case "right":return fa}return Ea};a.getHeaderElem=function(a){switch(a){case "left":return ga;case "right":return X}return na};a.getRowElems=function(a,b){switch(a){case "left":switch(b){case "top":return ka?ka.find("tr"):null;case "bottom":return la?la.find("tr"):null;default:return Fa?Fa.find("tr"):null}case "right":switch(b){case "top":return ca?ca.find("tr"):null;case "bottom":return ua?
ua.find("tr"):null;default:return Ga?Ga.find("tr"):null}default:switch(b){case "top":return V?V.find("tr"):null;case "bottom":return U?U.find("tr"):null;default:return da?da.find("tr"):null}}};var sd=function(b){var c="";b.icon?c=b.icon:a.options.rowIcon&&(c=a.options.rowIcon);return c},id=function(b,c,n,l){var e=a.currentList.length;0<e&&(b.shiftKey?k.isEqual(c[a.options.rowFields.id],a.currentList[0][a.options.rowFields.id])||wc(b,n,l):k.isEqual(c[a.options.rowFields.id],a.currentList[e-1][a.options.rowFields.id])||
xc(b,n,l))},xc=function(b,c,n){b.preventDefault();focusDelayTime=0;var e=c,h=v+A-2,h=h<a.currentList.length-1?h:a.currentList.length-1;e>=h&&N&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);if(e=a.getNextRow(e)){c=a.getRowCurrentIndex(e);c>h&&N&&(a.ensureVisible(e,"bottom"),focusDelayTime=100);a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var d=f(function(){a.updateFocus(c,n);f.cancel(d)},focusDelayTime)}},wc=function(b,c,n){b.preventDefault();
focusDelayTime=0;var e=v,e=0<e?e:0;c==e&&N&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);var h=a.getPrevRow(c);if(h){c=a.getRowCurrentIndex(h);c<e&&N&&(a.ensureVisible(h,"bottom"),focusDelayTime=100);a.rowSelection(h,b.shiftKey,b.ctrlKey);var d=f(function(){a.updateFocus(c,n);f.cancel(d)},focusDelayTime)}},pd=function(b,c,n,d){b.preventDefault();if((void 0===d||0<=d&&d==a.options.expandColIndex)&&!a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&
0<c[a.options.rowFields.rows].length)a.toggle(c,!0),a.updateFocus(n,d);else if(0<=d){focusDelayTime=0;var e=d+1;b=a.columnList.length-1;e===b&&(focusDelayTime=1);if(0<=e&&e<=b){b=k.getPageRect(q);c=a.getElemFromCell(n,e);c=k.getPageRect(c);c.left+c.width>b.left+b.width&&(b=a.scrollPos,b.x+=c.width,a.setScrollPos(b));var h=f(function(){a.updateFocus(n,e);f.cancel(h)},focusDelayTime)}}},nd=function(b,c,n,d){b.preventDefault();if((void 0===d||0<=d&&d==a.options.expandColIndex)&&a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&
0<c[a.options.rowFields.rows].length)a.toggle(c,!1),a.updateFocus(n,d);else if(0<=d){focusDelayTime=0;var e=1<d?d-1:0;if(0<=e){b=k.getPageRect(q);c=a.getElemFromCell(n,e);c=k.getPageRect(c);c.left<b.left&&(b=a.scrollPos,b.x-=c.width,a.setScrollPos(b));var h=f(function(){a.updateFocus(n,e);f.cancel(h)},focusDelayTime)}}},jd=function(b,c,n){b.preventDefault();var e=c-A,e=0<e?e:0;if(e!==c){focusDelayTime=1;var h=a.getPrevRow(e+1);if(h){a.scrollTo(h);a.rowSelection(h,b.shiftKey,b.ctrlKey,b.metaKey);m.$apply();
var d=f(function(){a.updateFocus(a.getRowCurrentIndex(h),n);f.cancel(d)},focusDelayTime)}}},kd=function(b,c,n){b.preventDefault();var e=c+A;a.options.showHeader&&e--;a.options.showFooter&&e--;e=e<a.currentList.length-1?e:a.currentList.length-1;if(e!==c){focusDelayTime=1;var h=a.getNextRow(e-1);if(h){a.scrollTo(h,"bottom");a.rowSelection(h,b.shiftKey,b.ctrlKey,b.metaKey);m.$apply();var d=f(function(){a.updateFocus(a.getRowCurrentIndex(h),n);f.cancel(d)},focusDelayTime)}}},ld=function(b,c,n){b.preventDefault();
a.setScrollPos({x:a.scrollPos.x,y:O.y});var e=a.getLastRow();if(e){a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var h=f(function(){a.updateFocus(a.getRowCurrentIndex(e),n);f.cancel(h)},1)}},md=function(b,c,n){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:0});var e=a.getFirstRow();if(e){a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var h=f(function(){a.updateFocus(a.getRowCurrentIndex(e),n);f.cancel(h)},1)}},rd=function(b,c){if(b&&0!=b[a.options.cellFields.allowEdit]){var e=a.getColumnById(b[a.options.cellFields.cid]);
!e&&0<=c&&c<a.columnList.length&&(e=a.columnList[c]);if(e){var h=b[a.options.cellFields.value];if((e=e[a.options.columnFields.editorSettings])&&1==e.threeState)switch(k.isString(h)||(h="unchecked"),h){case "checked":h="unchecked";break;case "indeterminate":h="checked";break;default:h="indeterminate"}else h=k.isBoolean(h)?!h:!0;b[a.options.cellFields.value]=h;m.$apply()}}},od=function(b,c,n,d){b.preventDefault();rd(n,d);a.rowSelection(c,b.shiftKey,b.ctrlKey,b.metaKey,c.selected);m.$apply()},da=null,
V=null,U=null,Ha=angular.element('<div class="iui-treegrid-block iui-treegrid-block-top"></div>'),na=null,Ua=angular.element('<div class="iui-treegrid-block iui-treegrid-block-left"></div>'),K=0,xb=0,ga=null,ta=null,Fa=null,ka=null,la=null,Ia=angular.element('<div class="iui-treegrid-block iui-treegrid-block-right"></div>'),Aa=0,yb=0,X=null,fa=null,Ga=null,ca=null,ua=null,Ba=angular.element('<div class="iui-treegrid-block iui-treegrid-block-bottom"></div>'),Ea=null,v=0,z=null,w=null,oa=null,pa=null,
A=100,P=0,F=0,Za=0,cc=0,C=0,I=0,$a=0,dc=0,zb=0,ec=!1,ea=!1,Nb=9,Ob=9,fc=0,Ja=0,ab=0,kb=1,gc=0,hc=0,bb=0,Ab=0,ic=1,S=null,Y=null,J=!1,N=!1;this.scrollMousePos=null;var O={x:0,y:0},pb=[];m.verScrollVisibility=!1;m.$watch("verScrollVisibility",function(b,c){b!=c&&a.updateCurrentLayout(!0)});a.getColumnWidth=function(b){var c=100;b&&b[a.options.columnFields.width]&&(c=b[a.options.columnFields.width],k.isPercent(c)?(b=q[0].clientWidth-2*a.columnList.length,N&&L&&(b-=L[0].offsetWidth),c=Math.floor(parseInt(c,
10)/100*b)):k.isString&&(c=parseInt(c,10)));return c};var Pb=function(b){var c=0;if((b=a.getRowElems(b))&&0<b.length&&(b=angular.element(b[0]))&&(b=b.find("td"))&&0<b.length)for(var e=0;e<b.length;e++)var d=angular.element(b[e]),c=c+d[0].offsetWidth;return c},ce=function(){var b=0;if(a.options.showHeader||a.options.showFooter){var c=a.options.showHeader?a.getHeaderElem():a.getFooterElem();if(c&&(c=c.find("td"))&&0<c.length)for(var n=0;n<c.length;n++)var d=angular.element(c[n]),b=b+d[0].offsetWidth;
a.isThereLeftFixedColumns&&(ga?K=ga[0].offsetWidth:ta&&(K=ta[0].offsetWidth),b+=K);a.isThereRightFixedColumns&&(X?Aa=X[0].offsetWidth:fa&&(Aa=fa[0].offsetWidth),b+=Aa)}else 0<a.currentList.length&&(da&&(b+=Pb()),a.isThereLeftFixedColumns&&(b+=Pb("left")),a.isThereRightFixedColumns&&(b+=Pb("right")));return b};a.updateScrollVisibility=function(){var a=f(function(){J||(x.css("display","none"),O.x=0);N||(L.css("display","none"),O.y=0);J&&N||Oa.css("display","none");f.cancel(a)},1)};q.append(x);q.append(L);
q.append(Oa);a.updateScrollVisibility();var td=function(){return V?V[0].offsetHeight:ka?ka[0].offsetHeight:ca?ca[0].offsetHeight:0},ud=function(){return U?U[0].offsetHeight:la?la[0].offsetHeight:ua?ua[0].offsetHeight:0},Qb=0,Rb=999;a.updateViewSize=function(b){var c=f(function(){zb=0;var b=q[0].clientWidth;N&&L&&(b-=L[0].offsetWidth);J=!1;0<a.columnList.length&&(zb+=ce(),zb>b&&(x.unbind("mousedown"),x.css("display","block"),x.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();
a.closeFilterWindow();a.closeEditor(null,null,!0);b=k.getClientMousePos(b,this);var c=Math.floor(q[0].clientWidth);S&&(b.x<S[0].offsetLeft?a.setScrollPos({x:a.scrollPos.x-c,y:a.scrollPos.y}):b.x>S[0].offsetLeft+S[0].offsetWidth&&a.setScrollPos({x:a.scrollPos.x+c,y:a.scrollPos.y}))}}),S=angular.element(x.children().eq(0)),J=!0,S.bind("mousedown",function(b){a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which&&(E.scrollMousePos=a.getMousePos(b),ec=
!0));b.stopPropagation()})));N=!1;m.verScrollVisibility=!1;0<a.currentList.length&&!a.options.autoSize&&(b=0,a.options.paging.enabled&&Z&&(b=Z[0].offsetHeight),$a=td(),dc=ud(),b=q[0].clientHeight-b-(C+I)-$a-dc,J&&x&&(b-=x[0].offsetHeight),A=0<P?Math.floor(b/P)+1:0<C?Math.floor(b/C):100,A<a.currentList.length+1&&(L.unbind("mousedown"),L.css("display","block"),L.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor(null,null,!0);b=k.getClientMousePos(b,
this);var c=Math.floor(q[0].clientHeight);Y&&(b.y<Y[0].offsetTop?(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-c}),ac(!1,c)):b.y>Y[0].offsetTop+Y[0].offsetHeight&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+c}),ac(!0,c)))}}),Y=angular.element(L.children().eq(0)),N=!0,m.verScrollVisibility=!0,Y.bind("mousedown",function(b){if(a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which)){E.scrollMousePos=a.getMousePos(b);ea=!0;Qb=0;Rb=999;for(var c=
0,e=!1,n=!1,d=a.scrollPos.x+Za-(K+Aa),h=0;h<a.columnList.length;h++)if(!a.isColumnFixed(a.columnList[h])){var l=a.getColumnWidth(a.columnList[h])+4,c=c+l;!e&&c>=a.scrollPos.x&&(Qb=h,e=!0);!n&&c>=d&&(Rb=h,n=!0);if(e&&n)break}}b.stopPropagation()})));J||(x.unbind("mousedown"),O.x=0);N||(L.unbind("mousedown"),O.y=0);J&&N&&x.css("display","block");f.cancel(c);!J&&0<a.scrollPos.x&&a.setScrollPos({x:0,y:a.scrollPos.y});!N&&0<a.scrollPos.y&&a.setScrollPos({x:a.scrollPos.x,y:0})},1)};a.updateScrollView=function(){zc()};
var zc=function(){var b=f(function(){var c=0;a.options.paging.enabled&&Z&&(c=Z[0].offsetHeight);Za=q[0].offsetWidth-2;cc=q[0].offsetHeight-2-c;J&&(cc-=x[0].offsetHeight);N&&(Za-=L[0].offsetWidth);ba.css("width",Za+"px");ba.css("height",cc+"px");J&&(x.css("left","0px"),x.css("bottom",c+"px"),x.css("width",Za-2+"px"));var e=2;a.options.paging.enabled&&Z&&(e=4);N&&(L.css("top","0px"),L.css("right","0px"),L.css("height",cc-e+"px"));J&&N&&(Oa.css("left","auto"),Oa.css("right","0px"));var d=f(function(){$a=
td();dc=ud();var b=C+$a;J&&Za<zb&&(Ja=2,ab=x[0].clientWidth-4,fc=0,ab>Ja&&(fc=ab-Ja),Nb=Math.floor(fc*Za/zb),9>Nb&&(Nb=9),S.css("width",Nb+"px"),O.x=zb-Za,kb=O.x/(fc-Nb-2));var e=a.currentList.length+1;N&&0<a.currentList.length&&A<e&&(bb=2,Ab=L[0].clientHeight-4,gc=0,Ab>bb&&(gc=Ab-bb),Ob=Math.floor(gc*A/e),9>Ob&&(Ob=9),Y.css("height",Ob+"px"),ic=(e-A+1)/(gc-Ob-2),O.y=Math.floor((e-A+1)*P),0>O.y&&(O.y=0),0==v?Y.css("top",bb+"px"):v+A-1==a.currentList.length&&Y.css("top",Ab-Y[0].offsetHeight+"px"));
a.isThereLeftFixedColumns&&(ga?K=ga[0].offsetWidth:ta?K=ta[0].offsetWidth:0<a.currentList.length&&(K=Pb("left")),xb=q[0].clientHeight-c-C-I,J&&(xb-=x[0].offsetHeight),Ua.css("top",C+"px"),Ua.css("width",K+"px"),Ua.css("height",xb+"px"),na&&na.css("left",K+"px"),da&&da.css("left",K+"px"),V&&V.css("left",K+"px"),U&&U.css("left",K+"px"),Ea&&Ea.css("left",K+"px"));a.isThereRightFixedColumns&&(X?Aa=X[0].offsetWidth:fa?Aa=fa[0].offsetWidth:0<a.currentList.length&&(Aa=Pb("right")),yb=q[0].clientHeight-c-
C-I,J&&(yb-=x[0].offsetHeight),e=0,N&&(e=L[0].offsetWidth),X&&X.css("right",e+"px"),Ia.css("top",C+"px"),Ia.css("right",e+"px"),Ia.css("width",Aa+"px"),Ia.css("height",yb+"px"),fa&&fa.css("right",e+"px"));e=c;J&&x&&(e+=x[0].offsetHeight);Ba.css("bottom",e+"px");da&&da.css("top",b+"px");U&&U.css("bottom",I+"px");Fa&&Fa.css("top",$a+"px");Ga&&Ga.css("top",$a+"px");b=a.scrollPos.x;void 0!=b&&(0>b&&(b=0),b>O.x&&(b=O.x),a.scrollPos.x=b,b=!1!==a.options.rtl?Math.floor(a.scrollPos.x/kb)-(ab-S[0].offsetWidth-
Ja):Math.floor(a.scrollPos.x/kb)+Ja,J&&S&&S.css("left",b+"px"),Ac());a.updateAutoLayout();f.cancel(d)},1);f.cancel(b)},5)};a.updateColumnWidth=function(){if(a.options.fillSpace){for(var b=0,c=0;c<a.columnList.length;c++)b+=a.getColumnWidth(a.columnList[c])+4;if(b<q[0].clientWidth){for(var b=(q[0].clientWidth-b)/a.columnList.length,n,c=0;c<a.columnList.length;c++)n=a.getColumnWidth(a.columnList[c])+b,a.columnList[c][a.options.columnFields.width]=n;return!0}}return!1};m.onCellValueChanging=function(b,
c,n){var e=c+v,d=a.getCell(e,n);if(d&&0==d[a.options.cellFields.allowEdit])return!1;var d=!0,h=a.getColumnObject(n),f="label",g=null;h&&(f=h[a.options.columnFields.editorType],g=h[a.options.columnFields.editorSettings]);switch(f){case "checkbox":b=g&&1==g.threeState?b.checkState:b.checked;d=a.callCellValueChanging(a.getRowObject(e),a.getCellObject(e,n),b);break;case "combobox":d=a.callCellValueChanging(a.getRowObject(c),a.getCellObject(c,n),b.item)}return d};m.onCellValueChanged=function(b,c,d){var e=
c+v,n=a.getColumnObject(d),h="label",f=null;n&&(h=n[a.options.columnFields.editorType],f=n[a.options.columnFields.editorSettings]);switch(h){case "checkbox":b=f&&1==f.threeState?b.checkState:b.checked;a.callCellValueChanged(a.getRowObject(e),a.getCellObject(e,d),b);break;case "combobox":if(e=a.getCell(c,d))e[a.options.cellFields.value]=b.item,m.$apply(),"optimal"==a.options.displayMode&&a.updateView();a.removeDropDownList(!0);a.updateFocus(c,d);a.callCellValueChanged(a.getRowObject(c),a.getCellObject(c,
d),b.item)}};m.onEditorClick=function(b,c,d){c+=v;var e=a.getColumnObject(d),n="label";e&&(n=e[a.options.columnFields.editorType]);switch(n){case "checkbox":a.callCellClick(b,a.getRowObject(c),a.getCellObject(c,d),a.getMousePos(b))}};a.setDefaultCellValue=function(b,c,d){if(void 0==b[a.options.cellFields.value]){var e=void 0;switch(c){case "checkbox":e=d&&1==d.threeState?"unchecked":!1;break;case "image":e=""}void 0!=e&&(b[a.options.cellFields.value]=e)}};a.getColumnTemplateUrl=function(b,c){return c?
b[a.options.columnFields.templateSettings].footer?b[a.options.columnFields.templateSettings].footer.url:null:b[a.options.columnFields.templateSettings].header?b[a.options.columnFields.templateSettings].header.url:null};var Bb=function(b,c){c=void 0==c?"none":c;for(var e='<table cellpadding="0" cellspacing="0" style="position:absolute;',e=(b?e+'bottom:0;">':e+'top:0;">')+"<tr>",d,h=0;h<a.columnList.length;h++)d=a.columnList[h][a.options.columnFields.fixed],d=void 0==d?"none":d,d==c&&(b?(e+='<td iui-class="{{data['+
h+'].style.footer.general}}" data-index="'+h+'" data-element="column-footer">',e+='<div iui-class="{{data['+h+'].style.footer.cell}}" data-element="column-footer-cell"'):(e+='<td iui-class="{{data['+h+'].style.header.general}}" data-index="'+h+'" data-element="column-header">',e+='<div iui-class="{{data['+h+'].style.header.cell}}" data-element="column-header-cell"'),e+=' iui-contextmenu menu-items="data['+h+"].column."+a.options.columnFields.contextMenu+'"',b?(e+=' iui-style="overflow:hidden;width:{{data['+
h+"].width}}px;text-align:{{data["+h+"].footerAlignment}};",e=h==a.options.expandColIndex?e+("padding-left:{{data["+h+'].indent}}px;">'):e+'">',a.columnList[h][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[h],!0)?(e+='<iui-item-content obj="data['+h+"].column."+a.options.columnFields.templateSettings+'.footer.templateObj" template-url="{{data['+h+"].column."+a.options.columnFields.templateSettings+'.footer.url}}"',e+=' data-element="footer-template-content" ng-cloak></iui-item-content>'):
a.columnList[h][a.options.columnFields.footerContent]?e+=a.columnList[h][a.options.columnFields.footerContent]:a.columnList[h][a.options.columnFields.footerTemplate]?e+='<div ng-include="'+a.columnList[h][a.options.columnFields.footerTemplate]+'" style="margin:0;padding:0"></div>':(e+='<span iui-class="{{data['+h+'].style.footer.content}}" data-element="cell-content"',e+=' iui-tooltip="data['+h+"].column."+a.options.columnFields.footerTooltip+'">',e+="{{data["+h+"].column."+a.options.columnFields.footerText+
"}}</span>")):(e+=' iui-style="overflow:hidden;width:{{data['+h+"].width}}px;text-align:{{data["+h+"].headerAlignment}};",e=h==a.options.expandColIndex?e+("padding-left:{{data["+h+'].indent}}px;">'):e+'">',e+='<span iui-class="{{data['+h+'].style.header.content}}" data-element="cell-content"',e+=' iui-tooltip="data['+h+"].column."+a.options.columnFields.headerTooltip+'">',e+="{{data["+h+"].column."+a.options.columnFields.headerText+"}}</span>",e+='<span iui-class="{{data['+h+'].style.filtering}}" data-index="'+
h+'" data-element="filter-button" ng-show="data['+h+'].showFiltering"></span>',e+='<span iui-class="{{data['+h+'].style.sorting}}" data-index="'+h+'" data-element="sort-button" ng-show="data['+h+'].showSorting"></span>'),e+="</div>",e+="</td>");return e+"</tr></table>"},va=function(b,c,d,l){if("optimal"==a.options.displayMode){c=void 0==c?"none":c;l='<tr class="iui-treegrid-row" data-index="'+b+'" data-fixed="'+l+'"';d&&(l+=' style="position:absolute;top:-9999px"');l+=">";for(var e=0;e<a.columnList.length;e++)d=
a.columnList[e][a.options.columnFields.fixed],d=void 0==d?"none":d,d==c&&(l+='<td class="iui-treegrid-row-cell" data-element="cell" data-index="'+e+'">',l+="<div",l+=' class="iui-treegrid-row-cell-content" data-element="cell-content"',l+=' iui-contextmenu menu-items="data['+b+"].row."+a.options.rowFields.contextMenu+'" menu-update="{{data['+b+'].updateContextMenu}}"',l+=' style="width:0px;text-align:left;opacity:0;',0<a.options.rowHeight&&(l+="height:"+a.options.rowHeight+"px;"),l=e==a.options.expandColIndex?
l+'padding-left:0px;">':l+'">',l+=vd(b,e),l+="</div>",l+="</td>");return l+"</tr>"}c=void 0==c?"none":c;l='<tr iui-class="{{data['+b+'].style}}" data-index="{{data['+b+'].index}}" data-fixed="'+l+'" tabindex="{{data['+b+'].tabindex}}"';d&&(l+=' style="position:absolute;top:-9999px"');l+=">";for(e=0;e<a.columnList.length;e++)d=a.columnList[e][a.options.columnFields.fixed],d=void 0==d?"none":d,d==c&&(l+='<td iui-class="{{data['+b+"].cells["+e+'].style.cell}}" data-element="cell" data-index="'+e+'" draggable="{{data['+
b+'].draggable}}" tabindex="{{data['+b+"].cells["+e+'].tabindex}}">',l+='<div ng-show="data['+b+'].visible"',l+=' iui-class="{{data['+b+"].cells["+e+'].style.content}}" data-element="cell-content"',l+=' iui-contextmenu menu-items="data['+b+"].row."+a.options.rowFields.contextMenu+'" menu-update="{{data['+b+'].updateContextMenu}}"',l+=' iui-style="width:{{data['+b+"].cells["+e+"].width}}px;text-align:{{data["+b+"].cells["+e+"].alignment}};",0<a.options.rowHeight&&(l+="height:"+a.options.rowHeight+
"px;"),l=e==a.options.expandColIndex?l+("padding-left:{{data["+b+"].cells["+e+'].indent}}px;">'):l+'">',l+=vd(b,e),l+="</div>",l+="</td>");return l+"</tr>"},vd=function(b,c){if("optimal"==a.options.displayMode){var e="";c===a.options.expandColIndex&&(e+='<span data-element="expandbox"></span><span data-element="icon"></span>');var d=a.columnList[c][a.options.columnFields.editorSettings],h=cb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":e+='<iui-checkbox name="cb-'+
k.getUniqueId(4)+'"';d&&1==d.threeState?(e+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(e+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));e+=' click="onEditorClick(e, '+
b+", "+c+')"';d&&d.style&&(e+=' control-style="data['+b+"].cells["+c+'].editorStyle"');e=e+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="</iui-checkbox>";break;case "combobox":e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+
'">');e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";e+="</span>";break;case "image":e+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';e+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:h&&""!=h?e+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+
'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(e=e+'<span class="iui-treegrid-row-cell-label" data-element="content"'+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),e+=".</span>")}return e}e="";c===a.options.expandColIndex&&(e=e+('<span iui-class="{{data['+b+'].expandBox}}" data-element="expandbox" ng-show="data['+b+'].expandBoxVisible"></span>')+
('<span iui-class="{{data['+b+'].icon}}" data-element="icon" ng-show="data['+b+'].iconVisible"></span>'));d=a.columnList[c][a.options.columnFields.editorSettings];h=cb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":e+='<iui-checkbox name="cb-'+k.getUniqueId(4)+'"';d&&1==d.threeState?(e+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+
b+", "+c+')"')+' three-state="true"'):(e+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));e+=' click="onEditorClick(e, '+b+", "+c+')"';d&&d.style&&(e+=' control-style="data['+b+"].cells["+c+'].editorStyle"');e=e+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+
b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="</iui-checkbox>";break;case "combobox":e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";e+="</span>";break;case "image":e+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+
'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';e+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:h&&""!=h?e+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+
(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.text+"}}",e+="</span>")}return e},de=function(){P=0;if(0<a.options.rowHeight){var b={top:0,bottom:0};if(a.options.controlStyle&&a.options.controlStyle.row&&a.options.controlStyle.row.cell&&a.options.controlStyle.row.cell.content){var d=angular.element('<div class="'+a.options.controlStyle.row.cell.content+'" style="position:absolute;top:-9999999px;">Temp</div>');
q.append(d);b=k.getPadding(d[0]);d.remove()}P=a.options.rowHeight+b.top+b.bottom+3}else if(0<a.currentList.length&&w){for(var b=[],n=[],d=[],l=[],g=[],m=[],p=0,M=0;M<a.currentList.length&&10>M;M++)b.push(va(M,"none",!0)),n.push(c(b[M])(w)),q.append(n[M]),a.isThereLeftFixedColumns&&(d.push(va(M,"left",!0)),l.push(c(d[M])(w)),q.append(l[M])),a.isThereRightFixedColumns&&(g.push(va(M,"right",!0)),m.push(c(g[M])(w)),q.append(m[M])),p++;if(0<p)var r=f(function(){for(var b=0,c=0,e=0,d=0;d<p;d++)b+=n[d][0].offsetHeight,
n[d].remove(),a.isThereLeftFixedColumns&&(c+=l[d][0].offsetHeight,l[d].remove()),a.isThereRightFixedColumns&&(e+=m[d][0].offsetHeight,m[d].remove());P=Math.floor(Math.max(Math.max(b,c),e)/p);f.cancel(r)},1)}},G=null,Bc=0,Cc=0,Z=angular.element('<div class="iui-pagination-panel"></div>'),ee=function(){G&&G.$destroy();Z.empty();Z.remove();Cc=Bc=0;if(a.options.paging.showControlPanel){G=m.$new();G.currentPage=0;G.minPages=0;G.numPages=a.pageList.length;0<G.numPages&&0==G.currentPage&&(G.currentPage=
1);G.onFirstPage=function(){a.options.enabled&&(a.firstPage(),G.currentPage=a.currentPageNumber)};G.onLastPage=function(){a.options.enabled&&(a.lastPage(),G.currentPage=a.currentPageNumber)};G.onNextPage=function(){a.options.enabled&&(a.nextPage(),G.currentPage=a.currentPageNumber)};G.onPrevPage=function(){a.options.enabled&&(a.prevPage(),G.currentPage=a.currentPageNumber)};G.$watch("currentPage",function(b,c){a.options.enabled&&b!=c&&1<=b&&b<=a.pageList.length&&a.setCurrentPage(b)});Bc=q[0].clientWidth;
var b="iui-pagination-panel-button";a.options.enabled||(b+=" iui-pagination-panel-button-disabled");for(var d="",n=0;6>n;n++)switch(n){case 0:d+='<span class="'+b+' iui-pagination-first" ng-click="onFirstPage()"></span>';break;case 1:d+='<span class="'+b+' iui-pagination-prev" ng-click="onPrevPage()"></span>';break;case 2:d+='<input class="iui-pagination-panel-input" ng-model="currentPage" type="number" ng-attr-min="{{minPages}}" ng-attr-max="{{numPages}}" />';break;case 3:d+='<span class="iui-pagination-panel-label"> / {{numPages}}</span>';
break;case 4:d+='<span class="'+b+' iui-pagination-next" ng-click="onNextPage()"></span>';break;case 5:d+='<span class="'+b+' iui-pagination-last" ng-click="onLastPage()"></span>'}b=c(d)(G);Z.append(b);q.append(Z);Z.css("width",Bc+"px");b&&(k.getMargin(b[0]),d=k.getPadding(Z[0]),Cc=b[0].offsetHeight+(d.top+d.bottom)-2,Z.css("height",Cc+"px"));a.updatePaginationPanel()}};a.updatePaginationPanel=function(){var b=1;a.options.enabled||(b=.5);if(Z){var c=Z.find("span"),d;if(c&&0<c.length)for(var l=0;l<
c.length;l++)d=angular.element(c[l]),d.css("opacity",b);(c=Z.find("input"))&&0<c.length&&(d=angular.element(c[0]),a.options.enabled?d.removeAttr("disabled"):d.attr("disabled","true"))}};a.resetPageNumber=function(){a.currentPageNumber=1;G&&(G.currentPage=0<G.numPages?1:0)};a.updatePageNumber=function(){a.currentPageNumber>a.pageList.length&&(0==a.pageList.length?a.resetPageNumber():(a.currentPageNumber=a.pageList.length,G&&(G.currentPage=a.currentPageNumber)))};var Va=angular.element('<div class="iui-treegrid-block" style="position:absolute;top:-9999999px"></div>'),
qa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-top" style="position:absolute;top:-9999999px"></div>'),wa=angular.element('<div class="iui-treegrid-block iui-treegrid-block-bottom" style="position:absolute;top:-9999999px"></div>'),Ka=angular.element('<div class="iui-treegrid-block iui-treegrid-block-left" style="position:absolute;top:-9999999px"></div>'),La=angular.element('<div class="iui-treegrid-block iui-treegrid-block-right" style="position:absolute;top:-9999999px"></div>');
angular.element('<div class="iui-treegrid-block iui-treegrid-block-top" style="position:absolute;top:-9999999px"></div>');var wd=function(){Va&&(Va.empty(),Va.remove());qa&&(qa.empty(),qa.remove());wa&&(wa.empty(),wa.remove());Ka&&(Ka.empty(),Ka.remove());La&&(La.empty(),La.remove())},fe=function(){if(1<a.updateStatus)Q("end");else var b=f(function(){if(0<a.columnList.length&&1==a.updateStatus){z=m.$new();z.data=xd();a.refreshColumns();z.$apply();var e;for(e=I=C=0;e<a.columnList.length;e++){var d=
{columnID:void 0!=a.columnList[e][a.options.columnFields.id]?a.columnList[e][a.options.columnFields.id]:e,avgItemHeight:0};switch(a.columnList[e][a.options.columnFields.editorType]){case "combobox":Ud(a.columnList[e].editorSettings,e,d);pb.push(d);break;default:pb.push(d)}}a.options.showHeader&&(q.append(qa),ha&&(Ha.css("opacity",aa.opacity),qa.css("opacity",aa.opacity)),e=Bb(),na=angular.element(c(e)(z)),qa.append(na),a.isThereLeftFixedColumns&&(e=Bb(!1,"left"),ga=c(e)(z),qa.append(ga),ga.css("z-index",
"2"),ga.addClass("iui-treegrid-column-header-left")),a.isThereRightFixedColumns&&(e=Bb(!1,"right"),X=c(e)(z),qa.append(X),X.css("right","0"),X.css("z-index","1"),X.addClass("iui-treegrid-column-header-right")));a.options.showFooter&&(q.append(wa),ha&&(Ba.css("opacity",aa.opacity),wa.css("opacity",aa.opacity)),e=Bb(!0),Ea=c(e)(z),wa.append(Ea),a.isThereLeftFixedColumns&&(e=Bb(!0,"left"),ta=c(e)(z),wa.append(ta),ta.css("z-index","2"),ta.addClass("iui-treegrid-column-footer-left")),a.isThereRightFixedColumns&&
(e=Bb(!0,"right"),fa=c(e)(z),wa.append(fa),fa.css("right","0"),fa.css("z-index","1"),fa.addClass("iui-treegrid-column-footer-right")));var l,g;e=-1;for(d=0;d<a.columnList.length;d++)if(g=l=null,a.columnList[d][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[d])?(l=a.columnList[d][a.options.columnFields.templateSettings].header,e=1):a.columnList[d][a.options.columnFields.headerContent]?(l=a.columnList[d][a.options.columnFields.headerContent],e=2):a.columnList[d][a.options.columnFields.headerTemplate]&&
(l=a.columnList[d][a.options.columnFields.headerTemplate],e=3),a.columnList[d][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[d],!0)?g=a.columnList[d][a.options.columnFields.templateSettings].footer:a.columnList[d][a.options.columnFields.footerContent]?g=a.columnList[d][a.options.columnFields.footerContent]:a.columnList[d][a.options.columnFields.footerTemplate]&&(g=a.columnList[d][a.options.columnFields.footerTemplate]),(l||g)&&(g=a.getElemFromColumn(a.columnList[d],
a.columnList[d][a.options.columnFields.fixed]))&&l&&l&&(g=a.getChildElement(g,"column-header-cell")))switch(g.empty(),e){case 1:z&&(l='<iui-item-content obj="data['+d+"].column."+a.options.columnFields.templateSettings+'.header.templateObj" template-url="{{data['+d+"].column."+a.options.columnFields.templateSettings+'.header.url}}" draggable="{{data['+d+'].draggable}}"',l+=' data-element="header-template-content" ng-cloak></iui-item-content>',g.append(c(l)(z)));break;case 2:g.append(c(l)(m.$parent));
break;case 3:l='<div ng-include="'+l+'"',a.columnList[d][a.options.columnFields.headerTemplateModel]&&(l+=' onload="'+a.columnList[d][a.options.columnFields.headerTemplateModel]+'"'),l+=' style="margin:0;padding:0"></div>',g.append(c(l)(m.$parent))}Ca(40);Q("rows")}else Ca(70),Q("scroll");f.cancel(b)},1)},ge=function(){if(1<a.updateStatus)Q("end");else var b=f(function(){var e=0;a.options.paging.enabled&&Z&&(e=Z[0].offsetHeight);if(0<a.columnList.length){var d=0;if(a.options.showHeader&&na){C=na[0].offsetHeight;
a.isThereLeftFixedColumns&&ga?C=ga[0].offsetHeight:a.isThereRightFixedColumns&&X&&(C=X[0].offsetHeight);var l=0,g=na.find("td");if(g&&0<g.length)for(var k=0;k<g.length;k++)var p=angular.element(g[k]),l=l+p[0].offsetWidth;l>q[0].clientWidth&&(l=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),l.css("bottom","-9999px"),q.append(l),d=l[0].offsetHeight,l.remove());qa.css("width",q[0].clientWidth+"px");qa.css("height",C+"px");a.isThereLeftFixedColumns&&
(K=ga[0].offsetWidth,xb=q[0].clientHeight-C-I,na.css("left",K+"px"));a.isThereRightFixedColumns&&(Aa=X[0].offsetWidth,yb=q[0].clientHeight-C-I)}a.options.showFooter&&(I=Ea[0].offsetHeight,a.isThereLeftFixedColumns&&ta?I=ta[0].offsetHeight:a.isThereRightFixedColumns&&fa&&(I=fa[0].offsetHeight),wa.css("width",q[0].clientWidth+"px"),wa.css("height",I+"px"),a.isThereLeftFixedColumns&&(K=ta[0].offsetWidth,xb=q[0].clientHeight-C-I,Ea.css("left",K+"px")),a.isThereRightFixedColumns&&(Aa=fa[0].offsetWidth,
yb=q[0].clientHeight-C-I));yd();if(0<a.currentList.length){w=m.$new();w.data=Dc();oa=m.$new();oa.data=zd();pa=m.$new();pa.data=Ad();a.refreshRows();w.$apply();oa.$apply();pa.$apply();de();var M=f(function(){a.updateAutoLayout();fd();da&&da.remove();V&&V.remove();U&&U.remove();Fa&&Fa.remove();ka&&ka.remove();la&&la.remove();Ga&&Ga.remove();ca&&ca.remove();ua&&ua.remove();F=0;for(var b="",h=0;h<a.currentTopList.length;h++)b+=va(h,"none",!1,"top"),F++;0<F&&(V=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-top-block" style="position:absolute;top:'+
C+'px;"></table>'),V.append(c(b)(oa)),Va.append(V));F=0;b="";for(h=0;h<a.currentBottomList.length;h++)b+=va(h,"none",!1,"bottom"),F++;0<F&&(U=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-bottom-block" style="position:absolute;bottom:'+I+'px;"></table>'),U.append(c(b)(pa)),Va.append(U));a.options.autoSize?A=0<a.options.maxRows?a.options.maxRows:500:(b=q[0].clientHeight-e-(C+I)-d,A=0<P?Math.floor(b/P)+1:0<C?Math.floor(b/C)+1:100);F=0;b="";for(h=0;h<A;h++)b+=va(h),
F++;if(0<F){da=angular.element('<table cellpadding="0" cellspacing="0" style="position:absolute;top:'+(C+$a)+'px;"></table>');da.append(c(b)(w));Va.append(da);if(a.isThereLeftFixedColumns){b="";for(h=F=0;h<a.currentTopList.length;h++)b+=va(h,"left",!1,"top"),F++;0<F&&(ka=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-top-block iui-treegrid-rows-left-top" style="position:absolute;"></table>'),ka.append(c(b)(oa)),Ka.append(ka));b="";for(h=F=0;h<a.currentBottomList.length;h++)b+=
va(h,"left",!1,"bottom"),F++;0<F&&(la=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-bottom-block iui-treegrid-rows-left-bottom" style="position:absolute;bottom:0;"></table>'),la.append(c(b)(pa)),Ka.append(la));da.css("left",K+"px");b="";for(h=F=0;h<A;h++)b+=va(h,"left"),F++;0<F&&(Fa=angular.element('<table class="iui-treegrid-rows-left" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Fa.append(c(b)(w)),Ka.append(Fa),q.append(Ka),ha&&(Ua.css("opacity",
aa.opacity),Ka.css("opacity",aa.opacity)))}if(a.isThereRightFixedColumns){b="";for(h=F=0;h<a.currentTopList.length;h++)b+=va(h,"right",!1,"top"),F++;0<F&&(ca=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-top-block iui-treegrid-rows-right-top" style="position:absolute;"></table>'),ca.append(c(b)(oa)),La.append(ca));b="";for(h=F=0;h<a.currentBottomList.length;h++)b+=va(h,"right",!1,"bottom"),F++;0<F&&(ua=angular.element('<table cellpadding="0" cellspacing="0" class="iui-treegrid-rows-bottom-block iui-treegrid-rows-right-bottom" style="position:absolute;bottom:0;"></table>'),
ua.append(c(b)(pa)),La.append(ua));b="";for(h=F=0;h<A;h++)b+=va(h,"right"),F++;0<F&&(Ga=angular.element('<table class="iui-treegrid-rows-right" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Ga.append(c(b)(w)),La.append(Ga),q.append(La),ha&&(Ia.css("opacity",aa.opacity),La.css("opacity",aa.opacity)))}}Ca(70);Q("scroll");f.cancel(M)},1)}else Ca(70),Q("scroll")}else Ca(70),Q("scroll");f.cancel(b)},1)},Cb=function(b){b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&
b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none");a.dropMark()},he=function(){1<a.updateStatus?Q("end"):(1==a.updateStatus&&(gd(),Va&&(ba.empty(),ba.append(Va.children()),V&&V.bind("dragover",function(a){Cb(a);a.stopPropagation()}),U&&U.bind("dragover",function(a){Cb(a);a.stopPropagation()})),qa&&(Ha.empty(),Ha.append(qa.children()),a.options.showHeader&&(Ha.css("width",q[0].clientWidth+"px"),Ha.css("height",C+"px")),q.append(Ha)),wa&&(Ba.empty(),Ba.append(wa.children()),
a.options.showFooter&&(Ba.css("width",q[0].clientWidth+"px"),Ba.css("height",I+"px")),q.append(Ba)),Ka&&(Ua.empty(),Ua.append(Ka.children()),q.append(Ua),ka&&ka.bind("dragover",function(a){Cb(a);a.stopPropagation()}),la&&la.bind("dragover",function(a){Cb(a);a.stopPropagation()})),La&&(Ia.empty(),Ia.append(La.children()),q.append(Ia),ca&&ca.bind("dragover",function(a){Cb(a);a.stopPropagation()}),ua&&ua.bind("dragover",function(a){Cb(a);a.stopPropagation()})),a.updateViewSize(),a.updateViewSize(),a.updateScrollVisibility(),
a.updateScrollView()),Ca(80,"complete"),Q("complete"))},ie=function(){switch(aa.type){case "circular":1==a.updateStatus&&(Bd(),Db=0,db=!0,a.callLoadComplete());break;case "linear":Cd(!1);break;default:Db=0,db=!0,1==a.updateStatus&&a.callLoadComplete()}a.updateActive=!1;a.updateStatus--;if(0<a.updateStatus)Eb=a.updateActive=!0,1==a.updateStatus?Q("start"):Q("end");else if(Ec())var b=f(function(){"optimal"==a.options.displayMode&&a.updateGridElements();a.updateView();a.callUpdateComplete();f.cancel(b)},
1);else"optimal"==a.options.displayMode&&(a.updateGridElements(),a.updateView()),a.callUpdateComplete()},Sb=[],Tb=[],Ub=[];a.updateGridElements=function(){if("optimal"==a.options.displayMode){var b=0,c="none";Sb.length=0;Tb.length=0;Ub.length=0;for(var d=Sb;3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var l,f,g=0;g<c.length;g++){l=angular.element(c[g]);f={rowElem:l,cellList:[]};if(g<A){l=l.find("td");for(var k=0;k<l.length;k++){var m=angular.element(l[k]),p=a.getContentElement(m);if(p){var q=k;m[0].attributes&&
m[0].attributes["data-index"]&&(q=parseInt(m[0].attributes["data-index"].value,10));m={cell:m,block:p,expandBox:null,icon:null,content:null};q==a.options.expandColIndex&&(m.expandBox=angular.element(a.getContentElement(p,"expandbox")),m.icon=angular.element(a.getContentElement(p,"icon")));var r="content";switch(a.columnList[q][a.options.columnFields.editorType]){case "checkbox":r="checkbox";break;case "image":r="image";break;default:(q=cb(q))&&""!=q&&(r="template-content")}m.content=angular.element(a.getContentElement(p,
r));f.cellList.push(m)}}}d.push(f)}b++;1==b?(c="left",d=Tb):(c="right",d=Ub)}}};var Q=function(b){if(Eb&&!lb)switch(b){case "start":1<a.updateStatus?Q("end"):(a.updateColumnList(),a.options.paging.enabled&&a.updatePageList(),a.updateCurrentList(),Ca(10),Q("init"));break;case "init":1<a.updateStatus?Q("end"):(pb.length=0,$c(),ec||ea||zc(),wd(),Ea=na=U=V=da=null,xb=K=0,la=ka=Fa=ga=null,yb=Aa=0,ua=ca=Ga=X=null,z&&z.$destroy(),w&&w.$destroy(),a.options.paging.enabled&&ee(),q.append(Va),Ca(20),Q("columns"));
break;case "columns":fe();break;case "rows":qa?a.options.showHeader&&qa.find("td").length<a.columnList.length?f(function(){Q(b)},1):ge():f(function(){Q(b)},1);break;case "scroll":he();break;case "complete":1<a.updateStatus?Q("end"):(wd(),Ca(90),Q("events"));break;case "events":1<a.updateStatus||(a.allowEvents=!0,a.options.showHeader&&(na&&vc(na),a.isThereLeftFixedColumns&&ga&&vc(ga),a.isThereRightFixedColumns&&X&&vc(X)),0<a.currentList.length&&ae(),Ca(100));Q("end");break;case "end":ie()}else f(function(){Q(b)},
1)},Dd=5,jc=0,mb=0,kc=0,Ed=0,lb=!1,lc=!1,aa={type:"none",speed:"normal",opacity:0},Fc=null,ha=!1,db=!1,Cd=function(b){var c=g(function(){b?mb++:mb--;kc=(q[0].clientHeight-mb)/2+2;Vb.css("height",mb+"px");Wa.css("top",kc+"px");b&&mb>=Dd?(ha=!0,Ca(0),db=lb=!1,g.cancel(c)):!b&&0>=mb&&(Wa&&Wa.remove(),Db=0,db=!0,a.callLoadComplete(),g.cancel(c))},20)},Bd=function(){Fc&&g.cancel(Fc);Ma&&Ma.remove()};a.beginLoad=function(a){if(!lb)switch(lb=!0,aa=a?{type:void 0!=a.type?a.type:"none",speed:void 0!=a.speed?
a.speed:"normal",opacity:void 0!=a.opacity?a.opacity:0}:{type:"none",speed:"normal",opacity:0},Gc(aa.opacity),aa.type){case "circular":Bd();q.append(Ma);Ma.css("top",(q[0].clientHeight-Ma[0].offsetHeight)/2+"px");Ma.css("left",(q[0].clientWidth-Ma[0].offsetWidth)/2+"px");ha=!0;db=lb=!1;var b=0,c=3;switch(aa.speed){case "veryfast":c=7;break;case "fast":c=5;break;case "slow":c=2;break;case "veryslow":c=1}Fc=g(function(){b+=c;360<b&&(b=0);var a="rotate("+b+"deg)";Ma.css("-ms-transform",a);Ma.css("-webkit-transform",
a);Ma.css("transform",a)},1);break;case "linear":a=angular.element('<div class="iui-load-block-progress" style="position:absolute;left:-9999px"></div>');q.append(a);Dd=parseInt(getComputedStyle(a[0]).height,10);a.remove();Vb.css("width","0px");Vb.css("height","0px");q.append(Wa);Db=0;jc=Math.floor(.5*q[0].clientWidth);mb=0;kc=q[0].clientHeight/2+2;Ed=(q[0].clientWidth-jc)/2;Wa.css("width",jc+"px");Wa.css("top",kc+"px");Wa.css("left",Ed+"px");Wa.css("opacity","1");Cd(!0);break;default:ha=!0,db=lb=
!1}};a.endLoad=function(b){if(!lc)if(lc=!0,b=a.options.loadRows.indexOf(b),0<=b&&a.options.loadRows.splice(b,1),ha){ha=!1;var c=3,e=aa.opacity,d=g(function(){db&&(10<c||1<=e?(Gc(1),lc=lb=db=!1,aa={type:"none",speed:"normal"},g.cancel(d)):(e+=c/10,Gc(e),c+=3))},1)}else lc=!1};var Gc=function(a){Ha&&Ha.css("opacity",a);Ua&&Ua.css("opacity",a);ba&&ba.css("opacity",a);Ia&&Ia.css("opacity",a);Ba&&Ba.css("opacity",a);x&&x.css("opacity",a);L&&L.css("opacity",a);Oa&&Oa.css("opacity",a)},Vb=angular.element('<div class="iui-load-block-progress"></div>'),
Wa=angular.element('<div class="iui-load-block"></div>');Wa.append(Vb);var Db=0,Eb=!1,Ma=angular.element('<div class="iui-load-circular"></div>'),Ca=function(a){if(ha&&"linear"==aa.type){Eb=!1;var b=Math.floor(jc*a/100),c=Db;a=10;switch(aa.speed){case "veryfast":a=2;break;case "fast":a=5;break;case "slow":a=15;break;case "veryslow":a=20}var e=b>c?Math.floor((b-c)/a):1,e=0<e?e:1,d=g(function(){c+=e;Vb.css("width",c+"px");c>=b&&(Db=b,Eb=!0,g.cancel(d))},1)}else Eb=!0};a.updateStatus=0;a.updateActive=
!1;a.updateAutoLayout=function(){if(a.options.autoSize){var b=a.currentList.length*P+C+I,b=b+($a+dc);J&&x&&(b+=x[0].offsetHeight);q.css("height",b+"px")}};a.updateLayout=function(b){q.append(E.$tw);E.s1t(E.twp);b=!0;for(var c=q.parent();"body"!=c[0].tagName.toLowerCase();){if("none"==getComputedStyle(c[0]).display){b=!1;break}c=c.parent()}b&&a.allowUpdate&&(a.updateStatus++,a.updateActive||(a.updateActive=!0,a.allowEvents=!1,q.removeClass("iui-treegrid-block-rtl"),a.options.rtl&&q.addClass("iui-treegrid-block-rtl"),
ba.removeClass("iui-treegrid-block-shift-left iui-treegrid-block-rtl"),ba.addClass(ob()),P=0,A=100,I=C=0,Eb=!0,Q("start")))};a.updateCurrentLayout=function(b){if(a.allowUpdate)if(0==a.currentList.length)a.updateLayout();else{a.options.paging.enabled&&(a.updatePageList(),G&&(G.minPages=0<a.pageList.length?1:0,G.numPages=a.pageList.length),a.updatePageNumber());a.updateCurrentList();a.updateView();var c=f(function(){a.updateViewSize();a.updateViewSize();b||a.updateScrollVisibility();a.updateScrollView();
f.cancel(c)},1)}};var je=function(b,c){var e=a.options.enabled&&a.options.allowColumnReorder&&b[a.options.columnFields.allowDrag],d=b[a.options.columnFields.headerAlignment],h=b[a.options.columnFields.footerAlignment],f=a.isFilteringAllowed(b),g=a.isSortingAllowed()&&b==a.sortColumn,k=a.getColumnWidth(b),k=0<=k?k:0,m=Hc(b);k<m.min&&(k=m.min);k>m.max&&(k=m.max);return{draggable:e,headerAlignment:d,footerAlignment:h,index:c,indent:0,column:b,showFiltering:f,showSorting:g,style:{header:{},footer:{}},
width:k}},Fd=function(b,c){var e=0;if(c==a.options.expandColIndex){var d,h=a.columnList[a.options.expandColIndex],e=a.getColumnWidth(h),f=e-a.indentList[b],f=0<=f?f:0;d={top:0,right:0,bottom:0,left:0};(h=a.getElemFromColumn(h,h[a.options.columnFields.fixed]))&&(h=a.getChildElement(h,"column-header-cell"))&&(d=k.getPadding(h[0]));d=d.left+a.indentList[b];0==f&&(d=e);e=d}return e},Ic=function(b,c,d){var e=c;d&&(d=a.columnList[c][a.options.columnFields.id])&&(e=a.getCellIndexById(a.currentList[b][a.options.rowFields.cells],
c,d));return e},Gd=function(b){return a.columnList[b][a.options.columnFields.contentAlignment]?a.columnList[b][a.options.columnFields.contentAlignment]:"left"},Hd=function(b,c){var e=a.columnList[c],d=a.getColumnWidth(e),e=Hc(e);d<e.min&&(d=e.min);d>e.max&&(d=e.max);c==a.options.expandColIndex&&(d-=a.indentList[b]);return 0<=d?d:0},Jc=function(b,c){return 1==a.options.allowFocus&&1==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])&&0<=c?a.getTabIndex().toString()+(b+1).toString()+c.toString():
""},Id=function(b){return 1==a.options.allowFocus&&0==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])?a.getTabIndex().toString()+(b+1).toString():""},Jd=function(b,c,d){if(0<=c){var e=a.currentList[b][a.options.rowFields.cells];switch(d){case "top":e=a.currentTopList[b][a.options.rowFields.cells];break;case "bottom":e=a.currentBottomList[b][a.options.rowFields.cells]}if(c<e.length)return e[c]}return{}},cb=function(b){return a.columnList[b][a.options.columnFields.cellTemplateUrl]?a.columnList[b][a.options.columnFields.cellTemplateUrl]:
""},Kc=function(b,c,d,f){for(var e=[],h=0;h<a.columnList.length;h++){var l=Ic(c,h,d),n=d?Jd(c,l,f):{},g=Gd(h),k=a.columnList[h][a.options.columnFields.editorSettings],k=k&&k.style?k.style:null,m;if(d)a:{if(0<=l&&(m=a.currentList[c][a.options.rowFields.cells],l<m.length)){m=1==a.options.enabled&&m[l][a.options.cellFields.enabled];break a}m=1==a.options.enabled}else m=!1;var p=d&&!f?Fd(c,h):0,q=l,r=d?Jc(c,h):"",t=cb(h),u;if(d){var v=c;u=l;var w=cb(h),v=Jd(v,u);u=0<=u&&w&&""!=w&&v&&void 0!=v[a.options.cellFields.templateObj]&&
null!=v[a.options.cellFields.templateObj]?!0:!1}else u=!1;if(d)a:{if(0<=l&&(w=a.currentList[c][a.options.rowFields.cells],l<w.length)){w=w[l][a.options.cellFields.text];break a}w=""}else w="";if(d)a:{if(0<=l&&(v=a.currentList[c][a.options.rowFields.cells],l<v.length)){v=v[l][a.options.cellFields.value];break a}v=null}else v=null;l={related:n,alignment:g,editorStyle:k,enabled:m,indent:p,index:q,style:{},tabindex:r,templateUrl:t,templateVisible:u,text:w,value:v,visible:d?0<=l?!0:!1:!1,width:d?Hd(c,
h):0};e.push(l)}return{cells:e,expandBox:d?ad(b):"",expandBoxVisible:d&&!f?0!=a.options.showExpandBoxes:!1,draggable:d&&!f?a.isRowEnabled(b)&&a.isDragAllowed(b):!1,icon:d?sd(b):"",iconVisible:d?0!=a.options.showIcons&&(b.icon||a.options.rowIcon):!1,index:c,row:d?b:{},style:{},tabindex:d&&!f?Id(c):"",updateContextMenu:d?null!=b[a.options.rowFields.contextMenu]:!1,visible:d}},xd=function(){for(var b=[],c=0;c<a.columnList.length;c++)b.push(je(a.columnList[c],c));return b},Dc=function(){for(var b=[],
c=v;c<v+A;c++)b.push(Kc(a.currentList[c],c,c<a.currentList.length));return b},zd=function(){for(var b=[],c=0;c<a.currentTopList.length;c++)b.push(Kc(a.currentTopList[c],c,c<a.currentTopList.length,"top"));return b},Ad=function(){for(var b=[],c=0;c<a.currentBottomList.length;c++)b.push(Kc(a.currentBottomList[c],c,c<a.currentBottomList.length,"bottom"));return b},yd=function(){for(var b=0;b<a.columnList.length;b++)if(a.isFilteringAllowed(a.columnList[b])){var c=a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);
c&&(c=a.getChildElement(c,"column-header-cell"))&&(c=a.getContentElement(c,"filter-button"))&&(c.css("top",(C-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),c.css("right","2px"))}a.isSortingAllowed()&&a.sortColumn&&(b=a.getElemFromColumn(a.sortColumn,a.sortColumn[a.options.columnFields.fixed]))&&(c=a.getChildElement(b,"column-header-cell"))&&(c=a.getContentElement(c,"sort-button"))&&(c.css("top",(C-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),a.isFilteringAllowed(a.sortColumn)?c.css("right",
"22px"):c.css("right","2px"))};a.getRowScope=function(){return w};var Ld=function(){if(z&&w&&(a.allowEvents=!1,Lc(!1),0<a.columnList.length&&(z.data=xd(),w.data=Dc(),oa&&(oa.data=zd()),pa&&(pa.data=Ad()),a.options.selectedRow&&!a.isRowEnabled(a.options.selectedRow)&&(a.options.selectedRow[a.options.rowFields.selected]=!1,a.options.selectedRow=null,a.updateSelectionList()),a.refresh(null,null,!1),z.$apply(),w.$apply(),oa&&oa.$apply(),pa&&pa.$apply(),yd(),a.allowEvents=!0,0>=a.options.rowHeight&&Ec()&&
(a.isThereLeftFixedColumns||a.isThereRightFixedColumns))))for(var b=v;0<=b&&b<v+A&&b<a.currentList.length;b++)Kd(a.currentList[b])},Mc=function(b,c){var e=0;if(b&&w){var d=a.getElemFromRow(b,c);d&&(e=d[0].offsetHeight)}return e},Ec=function(){for(var b=!1,c=0;c<a.columnList.length;c++){var d=cb(c);if(d&&""!=d){b=!0;break}}return b},Nc=function(b,c){var e=a.getElemFromRow(b,c);if(e&&(e=e.find("td"))&&0<e.length)for(var d=0;d<e.length;d++){var h=angular.element(e[d]);(h=a.getContentElement(h))&&h.css("height",
"auto")}},Oc=function(b,c,d){if((b=a.getElemFromRow(b,c))&&(b=b.find("td"))&&0<b.length)for(c=0;c<b.length;c++){var e=angular.element(b[c]),e=a.getContentElement(e),f=k.getBorderWidth(e[0]),h=k.getPadding(e[0]);e&&e.css("height",d-(f.top+f.bottom)-(h.top+h.bottom)-2.85+"px")}},Kd=function(a){Nc(a,"none");Nc(a,"left");Nc(a,"right");var b=Mc(a),c=Mc(a,"left"),e=Mc(a,"right"),b=Math.max(Math.max(b,c),e);Oc(a,"none",b);Oc(a,"left",b);Oc(a,"right",b)};a.updateView=function(b,c){if(b)Ld(),a.updateCurrentView(c);
else var e=f(function(){Ld();a.updateCurrentView(c);f.cancel(e)},1)};a.updateVerticalScrollView=function(){if(w&&(a.allowEvents=!1,Lc(!1),w.data=Dc(),a.refresh(null,null,!1,!0),w.$apply(),a.updateCurrentView(!0),a.allowEvents=!0,0>=a.options.rowHeight&&Ec()&&(a.isThereLeftFixedColumns||a.isThereRightFixedColumns)))for(var b=v;0<=b&&b<v+A&&b<a.currentList.length;b++)Kd(a.currentList[b])};a.updateCurrentView=function(b){if("optimal"==a.options.displayMode)for(var c=0,e="none",d=Sb;3>c;){var f=0,g=a.columnList.length,
k=0;if("none"==e&&b)for(var f=Qb,g=Rb,m=0;m<f&&m<a.columnList.length;m++)a.isColumnFixed(a.columnList[m])||k++;if(d&&0<d.length)for(m=0;m<d.length;m++)if(m<A&&m<a.currentList.length&&m+v<a.currentList.length){var p=a.currentList[m+v];d[m].rowElem&&(d[m].rowElem.attr("data-index",m+v),d[m].rowElem.attr("tabindex",Id(m+v)));for(var q=k,r=f;r<=g&&r<a.columnList.length;r++){var t=a.columnList[r][a.options.columnFields.fixed]?a.columnList[r][a.options.columnFields.fixed]:"none";if(t==e&&q<d[m].cellList.length){d[m].cellList[q].block.css("width",
Hd(m+v,r)+"px");d[m].cellList[q].block.css("text-align",Gd(r));d[m].cellList[q].block.css("opacity",1);d[m].cellList[q].cell.attr("draggable",a.isRowEnabled(p)&&a.isDragAllowed(p));d[m].cellList[q].cell.attr("tabindex",Jc(m+v,r));var t="",u=Ic(m+v,r,!0);0<=u&&u<a.currentList[m+v][a.options.rowFields.cells].length&&(r==a.options.expandColIndex&&(d[m].cellList[q].block.css("padding-left",Fd(m+v,r)+"px"),d[m].cellList[q].expandBox&&(d[m].cellList[q].expandBox.removeAttr("class"),d[m].cellList[q].expandBox.addClass(ad(p))),
d[m].cellList[q].icon&&(d[m].cellList[q].icon.removeAttr("class"),d[m].cellList[q].icon.addClass(sd(p)))),t=p[a.options.rowFields.cells][u][a.options.cellFields.text],"combobox"==a.columnList[r][a.options.columnFields.editorType]&&(t=p[a.options.rowFields.cells][u][a.options.cellFields.value]?p[a.options.rowFields.cells][u][a.options.cellFields.value].text:""));if(d[m].cellList[q].content)switch(a.columnList[r][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(u=
cb(r))&&""!=u||d[m].cellList[q].content.text(t)}q++}}}else for(d[m].rowElem&&(d[m].rowElem.attr("data-index",m+v),d[m].rowElem.attr("tabindex","")),q=k,r=f;r<=g&&r<a.columnList.length;r++)if(t=a.columnList[r][a.options.columnFields.fixed]?a.columnList[r][a.options.columnFields.fixed]:"none",t==e&&q<d[m].cellList.length){u=r;d[m].cellList[q].block.css("width","0px");d[m].cellList[q].cell.attr("draggable",!1);d[m].cellList[q].cell.attr("tabindex","");u==a.options.expandColIndex&&(d[m].cellList[q].block.css("padding-left",
"0px"),d[m].cellList[q].expandBox&&d[m].cellList[q].expandBox.removeAttr("class"),d[m].cellList[q].icon&&d[m].cellList[q].icon.removeAttr("class"));if(d[m].cellList[q].content){switch(a.columnList[u][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(u=cb(r))&&""!=u||d[m].cellList[q].content.html("")}d[m].cellList[q].content.attr("draggable",!1);d[m].cellList[q].content.attr("tabindex",Jc(m+v,r))}q++}c++;1==c?(e="left",d=Tb):(e="right",d=Ub)}};var mc=function(b,
c,d,f){var e={cell:"",content:"",general:"",label:""};switch(d){case "column":f?(d=a.defaultStyle.column.footer.normal,a.options.controlStyle.column.footer.normal!=d&&(d+=" "+a.options.controlStyle.column.footer.normal),e.general=d,e.cell="iui-treegrid-column-footer-cell",d=a.defaultStyle.column.footer.content,a.options.controlStyle.column.footer.content!=d&&(d+=" "+a.options.controlStyle.column.footer.content)):(d=a.defaultStyle.column.header.normal,a.options.controlStyle.column.header.normal!=d&&
(d+=" "+a.options.controlStyle.column.header.normal),e.general=d,e.cell="iui-treegrid-column-header-cell",d=a.defaultStyle.column.header.content,a.options.controlStyle.column.header.content!=d&&(d+=" "+a.options.controlStyle.column.header.content));e.content=d;break;case "row":d=a.defaultStyle.row.general.normal;a.isRowFixed(b)?(d=a.defaultStyle.row.fixed.normal,a.options.controlStyle.row.fixed.normal!=d&&(d+=" "+a.options.controlStyle.row.fixed.normal)):a.options.controlStyle.row.general.normal!=
d&&(d+=" "+a.options.controlStyle.row.general.normal);e.general=d;break;case "cell":d=a.defaultStyle.row.cell.normal;a.options.controlStyle.row.cell.normal!=d&&(d+=" "+a.options.controlStyle.row.cell.normal);switch(a.options.gridLines){case "none":d=c==v+A-1||c==a.currentList.length-1?d+" iui-treegrid-lines-horizontal":d+" iui-treegrid-lines-none";break;case "horizontal":d+=" iui-treegrid-lines-horizontal";break;case "vertical":d=c==v+A-1||c==a.currentList.length-1?d+" iui-treegrid-lines-both":d+
" iui-treegrid-lines-vertical";break;default:d+=" iui-treegrid-lines-both"}e.general=d;d=a.defaultStyle.row.cell.content;a.options.controlStyle.row.cell.content!=d&&(d+=" "+a.options.controlStyle.row.cell.content);e.content=d;e.label=a.getDefaultCellLabelClass()}return e},Md=function(b){var c="";a.isFilteringAllowed(b)&&(b=a.getObjState(b),c="iui-filtering","selected"==b?c+=" iui-filtering-selected":"hovered"==b&&(c+=" iui-filtering-hovered"));return c},Nd=function(b){var c="";a.isSortingAllowed()&&
b==a.sortColumn&&(b=a.getObjState(b),"ascending"==a.options.sorting?(c="iui-sort-ascending","selected"==b?c+=" iui-sort-ascending-selected":"hovered"==b&&(c+=" iui-sort-ascending-hovered")):(c="iui-sort-descending","selected"==b?c+=" iui-sort-descending-selected":"hovered"==b&&(c+=" iui-sort-descending-hovered")));return c},Na=function(b,c,d,f){var e=a.getObjState(b);d=mc(b,d,b.type,f);switch(b.type){case "column":f?(c=a.getCurrentColumnStyle(b,"footer",e),c!=a.options.controlStyle.column.footer.normal&&
(d.general+=" "+c),b=a.getCurrentColumnStyle(b,"footer","content"),b!=a.options.controlStyle.column.footer.content&&(d.content+=" "+b)):(c=a.getCurrentColumnStyle(b,"header",e),c!=a.options.controlStyle.column.header.normal&&(d.general+=" "+c),b=a.getCurrentColumnStyle(b,"header","content"),b!=a.options.controlStyle.column.header.content&&(d.content+=" "+b));break;case "row":c=a.getCurrentRowStyle(b,e);a.isRowFixed(b)?c!=a.options.controlStyle.row.fixed.normal&&(d.general+=" "+c):c!=a.options.controlStyle.row.general.normal&&
(d.general+=" "+c);break;case "cell":f=a.getCurrentCellStyle(c,b,e),f!=a.options.controlStyle.row.cell.normal&&(d.general+=" "+f),b=a.getCurrentCellStyle(c,b,"content"),b!=a.options.controlStyle.row.cell.content&&(d.content+=" "+b)}return d},Fb=function(a,b,c,d){var e=w;switch(d){case "top":e=oa;break;case "bottom":e=pa}e&&(e.data[a].cells[b].style.cell=c.general,e.data[a].cells[b].style.content=c.content,e.data[a].cells[b].style.label=c.label)},Od=function(b){if(w&&(b-=v,0<=b&&b<w.data.length&&w.data[b].visible)){w.data[b].style=
a.defaultStyle.row.general.normal;for(var c=0;c<a.columnList.length;c++)w.data[b].cells[c].style.cell=a.defaultStyle.row.cell.normal+" iui-treegrid-cell-empty"}};a.refreshColumns=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b],null,!1)};a.refreshRows=function(){for(var b=v;b<v+A;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):Od(b);for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],
null,!1)};var Pd=function(b,c,d,f,g){if(d&&b[a.options.rowFields.fixed]==f&&(c=c.indexOf(b),0<=c&&c<d.data.length&&d.data[c].visible)){d.data[c].style=Na(b).general;for(var e=mc(b,c,"cell"),h=0;h<a.columnList.length&&h<d.data[c].cells.length;h++){var l=d.data[c].cells[h].index;if(0<=l){var n=b[a.options.rowFields.cells];l<n.length?(l=Na(n[l],b,c),Fb(c,h,l,f)):Fb(c,h,e,f)}else Fb(c,h,e,f)}void 0==g&&d&&d.$apply()}};a.refreshHover=function(b){"optimal"==a.options.displayMode?a.refresh(b,null,null,!0):
a.refresh(b)};a.refresh=function(b,c,d,f){"optimal"==a.options.displayMode?a.refreshOptimal(b,c,d,f):a.refreshNormal(b,c,d)};a.refreshNormal=function(b,c,d){if(b)switch(b.type){case "column":z&&(c=a.getColumnCurrentIndex(b),0<=c&&c<z.data.length&&(1==a.options.showHeader&&(z.data[c].style.header=Na(b)),1==a.options.showFooter&&(z.data[c].style.footer=Na(b,null,-1,!0)),z.data[c].style.filtering=Md(b),z.data[c].style.sorting=Nd(b),void 0==d&&z&&z.$apply()));break;case "row":if(w&&!a.isRowFixed(b)){c=
a.getRowCurrentIndex(b);var e=c-v;if(0<=e&&e<w.data.length&&w.data[e].visible){w.data[e].style=Na(b).general;for(var f=mc(b,c,"cell"),h=0;h<a.columnList.length&&h<w.data[e].cells.length;h++){var g=w.data[e].cells[h].index;if(0<=g){var n=b[a.options.rowFields.cells];g<n.length?(g=Na(n[g],b,c),Fb(e,h,g)):Fb(e,h,f)}else Fb(e,h,f)}void 0==d&&w&&w.$apply()}}Pd(b,a.currentTopList,oa,"top",d);Pd(b,a.currentBottomList,pa,"bottom",d)}else{for(h=0;h<a.columnList.length;h++)a.refresh(a.columnList[h],null,!1);
for(b=v;b<v+A;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):Od(b);1==d&&w&&w.$apply();for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);1==d&&oa&&oa.$apply();for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1);1==d&&pa&&pa.$apply()}};a.refreshOptimal=function(b,c,d,f){if(b)switch(b.type){case "column":z&&(c=a.getColumnCurrentIndex(b),0<=c&&c<z.data.length&&(1==a.options.showHeader&&(z.data[c].style.header=Na(b)),1==a.options.showFooter&&
(z.data[c].style.footer=Na(b,null,-1,!0)),z.data[c].style.filtering=Md(b),z.data[c].style.sorting=Nd(b),void 0==d&&z&&z.$apply()));break;case "row":a.refreshCurrentView(b,f)}else{for(b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b],null,!1);for(b=v;b<v+A;b++)b<a.currentList.length?a.refreshCurrentView(a.currentList[b]):Qd(b-v)}};var Qd=function(b,c){for(var d=0,e="none",f=Sb;3>d;){var h=b,g=0,k=a.columnList.length,m=0;if("none"==e&&c)for(var g=Qb,k=Rb,p=0;p<g&&p<a.columnList.length;p++)a.isColumnFixed(a.columnList[p])||
m++;if(f&&0<f.length&&0<=h&&h<f.length&&w)for(Wb(f[h].rowElem,a.defaultStyle.row.general.normal);g<=k&&g<a.columnList.length;g++)(a.columnList[g][a.options.columnFields.fixed]?a.columnList[g][a.options.columnFields.fixed]:"none")==e&&m<f[h].cellList.length&&(Wb(f[h].cellList[m].cell,a.defaultStyle.row.cell.normal+" iui-treegrid-cell-empty"),m++);d++;1==d?(e="left",f=Tb):(e="right",f=Ub)}},Wb=function(a,b){a&&(a.removeAttr("class"),a.addClass(b))};a.refreshCurrentView=function(b,c){for(var d=0,e="none",
f=Sb;3>d;){var h=b,g=c;if(h)switch(h.type){case "row":if(w&&f&&0<f.length){var k=a.getRowCurrentIndex(h),m=k-v;if(0<=m&&m<f.length&&m<w.data.length&&w.data[m].visible){Wb(f[m].rowElem,Na(h).general);var p=0,q=a.columnList.length,r=0;if("none"==e&&g)for(p=Qb,q=Rb,g=0;g<p&&g<a.columnList.length;g++)a.isColumnFixed(a.columnList[g])||r++;for(;p<=q&&p<a.columnList.length;p++)(a.columnList[p][a.options.columnFields.fixed]?a.columnList[p][a.options.columnFields.fixed]:"none")==e&&r<f[m].cellList.length&&
(g=Ic(k,p,!0),0<=g&&g<a.currentList[k][a.options.rowFields.cells].length?Wb(f[m].cellList[r].cell,Na(a.currentList[k][a.options.rowFields.cells][g],h,k).general):Wb(f[m].cellList[r].cell,mc(k,"cell").general),r++)}}}else for(h=v;h<v+A;h++)h<a.currentList.length?a.refreshCurrentView(a.currentList[h],!0):Qd(h,!0);d++;1==d?(e="left",f=Tb):(e="right",f=Ub)}};a.moveColumn=function(b,c){if(b&&0!=a.callColumnPosChanging(b)){var d=a.columnList[0];0<=a.options.expandColIndex&&a.options.expandColIndex<a.columnList.length&&
(d=a.columnList[a.options.expandColIndex]);var e=a.getColumnCurrentIndex(b),f=a.getColumnRealIndex(e),g=-1,h=a.getFullColumnList();switch(c){case "first":g=0;break;case "left":(e=tc(e-1,b[a.options.columnFields.fixed],!0))&&(g=a.getColumnRealIndex(a.getColumnCurrentIndex(e)));break;case "right":(e=uc(e+1,b[a.options.columnFields.fixed],!0))&&(g=a.getColumnRealIndex(a.getColumnCurrentIndex(e)));break;case "last":g=h.length-1}0<=g&&g<h.length&&f!=g&&(f<g?"first"!=c&&"left"!=c||g--:f>g&&("last"!=c&&
"right"!=c||g++),a.columnsObj.moveObject(f,g),a.updateColumnList(),d=a.getColumnCurrentIndex(d),d!=a.options.expandColIndex?(a.options.expandColIndex=d,a.updateLayout()):a.updateView(),a.callColumnPosChanged(T,a.hoverColumn))}};a.moveRow=function(b,c,d,f){if(b){a.allowUpdate=!1;var e=-1;switch(d){case "first":e=0;break;case "at":e=f}if(Array.isArray(b)){f=[];for(var g=0;g<b.length;g++){for(var h=!1,l=a.getParent(b[g]);l;){if(0<=b.indexOf(l)){h=!0;break}l=a.getParent(l)}h||f.push(b[g])}if(0<f.length)if(b=
a.getObjCurrentIndex(f[0]),g=a.getObjCurrentIndex(f[f.length-1]),b<=g)for(g=0;g<f.length;g++)Pc(f[g],c,e,d);else for(g=f.length-1;0<=g;g--)Pc(f[g],c,e,d)}else Pc(b,c,e,d);a.allowUpdate=!0;a.updateCurrentLayout();a.callChange()}};var Pc=function(b,c,d,f){a.rowsObj.removeAt(b,-1,null,a.objIsRemoved)&&("first"==f||"last"==f||"at"==f?a.rowsObj.insertAt(b,d,c,a.rowIsAdded):"before"==f?a.rowsObj.insertByRef(b,c,!1,a.rowIsAdded):"after"==f&&a.rowsObj.insertByRef(b,c,!0,a.rowIsAdded))},Sa="none",W=!1,nc=
-1,Sa="none",oc=0,pc=0;m.$watch(function(){return q[0].offsetWidth},function(b,c){100==A?a.updateLayout():b!=c&&(Ha&&Ha.css("width",q[0].clientWidth+"px"),Ba&&Ba.css("width",q[0].clientWidth+"px"),a.updateCurrentLayout())});var Ra=null;m.$watch(function(){return q[0].offsetHeight},function(b,c){b!=c&&(a.options.autoSize?a.updateCurrentLayout():(Ra&&(f.cancel(Ra),Ra=null),Ra=f(function(){a.updateLayout();f.cancel(Ra);Ra=null},250)))});a.isColumnWithFixedWidth=function(b){var c=a.columnList;return c&&
0<=b&&b<c.length?c[b][a.options.columnFields.fixedWidth]?c[b][a.options.columnFields.fixedWidth]:!1:!1};a.setColumnResizingParams=function(b,c,d){0<=b&&b<a.columnList.length&&(nc=b,Sa=c,pc=d,oc=a.getColumnWidth(a.columnList[b]))};var Rd=function(b){return b&&0!=b[a.options.columnFields.visible]?!0:!1};a.isColumnFixed=function(b){return!b||"left"!=b[a.options.columnFields.fixed]&&"right"!=b[a.options.columnFields.fixed]?!1:!0};var tc=function(b,c,d){var e=null;c=void 0==c?"none":c;for(var f=b;0<=f;f--)if(!d||
d&&Rd(a.columnList[f]))if(b=a.columnList[f][a.options.columnFields.fixed],b=void 0==b?"none":b,b==c){e=a.columnList[f];break}return e},uc=function(b,c,d){var e=null;c=void 0==c?"none":c;for(var f=b;f<a.columnList.length;f++)if(!d||d&&Rd(a.columnList[f]))if(b=a.columnList[f][a.options.columnFields.fixed],b=void 0==b?"none":b,b==c){e=a.columnList[f];break}return e},hd=function(b,c){if(0<=b&&b<a.columnList.length){var d=a.columnList[b];if(d)switch(columnFixedType=d[a.options.columnFields.fixed],c){case "left":if("right"!=
columnFixedType){if(!tc(b-1,d[a.options.columnFields.fixed]))return!1}else if(!columnFixedType||"none"==columnFixedType)return 0<b;break;case "right":if("right"==columnFixedType&&!uc(b+1,d[a.options.columnFields.fixed]))return!1}}return!0};a.resizeColumn=function(b,c,d){0>c&&(c=0);var e;if(e=a.getHeaderElem(d))e=angular.element(e.find("tr")),a.resizeColumnCells(e,b,c,1,d);a.resizeRows(b,c,d);a.resizeRows(b,c,d,"top");a.resizeRows(b,c,d,"bottom");if(e=a.getFooterElem(d))e=angular.element(e.find("tr")),
a.resizeColumnCells(e,b,c,2,d);0<=b&&b<a.columnList.length&&a.callColumnSizeChanged(a.columnList[b])};a.resizeRows=function(b,c,d,f){var e=a.getRowElems(d,f);if(e){var g={top:0,right:0,bottom:0,left:0},h=a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);h&&(h=a.getChildElement(h,"column-header-cell"))&&(g=k.getPadding(h[0]));for(h=0;h<e.length;h++)currentRowElem=angular.element(e[h]),a.resizeColumnCells(angular.element(e[h]),b,c,0,d,!0,g,f)}};a.resizeColumnCells=function(b,
c,d,f,g,k,m,p){if(b){var e=-1;k&&(e=a.getRowCurrentIndex(a.getRowFromElem(b)));b=0;0<=e&&!p&&(b=a.indentList[e]);switch(f){case 1:f=a.getElemFromColumnCell(c,g);break;case 2:f=a.getElemFromColumnCell(c,g,!0);break;default:f=a.getElemFromCell(e,c,g,p)}f&&0<f.children().length&&(f=f.children().eq(0))&&(m=m?m.left+b:b,g=d,0<=e&&c==a.options.expandColIndex&&(g-=m),g=0<=g?g:0,f.css("width",g+"px"),c==a.options.expandColIndex&&(0==g?f.css("padding-left",d+"px"):f.css("padding-left",m+"px")))}};var Tc=function(b){a.dropMark()},
Uc=function(a){tb()},Vc=function(b){a.removeDropMark();a.dragIcon&&angular.element(a.dragIcon).remove();a.cancelScrollTimer();a.dragDropStatus(!1)};angular.element(p).bind("dragenter",Tc);angular.element(p).bind("dragover",Uc);angular.element(p).bind("dragend",Vc);var ma=angular.element('<div class="iui-treegrid-column-reorder-mark"><span></span></div>'),Da=angular.element('<div class="iui-treegrid-column-reorder-tooltip"><span></span></div>'),bd=function(b){var c="initial";ra&&T&&(!a.hoverColumn||
T==a.hoverColumn||a.hoverColumn&&0==a.hoverColumn.allowDrop||a.hoverColumn&&T[a.options.columnFields.fixed]!=a.hoverColumn[a.options.columnFields.fixed])&&(c="not-allowed",b&&Da&&Da.css("display","none"));q.css("cursor",c);document.body.style.cursor=c},Hc=function(b){return b?{min:k.isFieldAvailable(b[a.options.columnFields.minWidth],0),max:k.isFieldAvailable(b[a.options.columnFields.maxWidth],9999999)}:{min:0,max:9999999}},Xc=function(b){if(0===b.button&&0<=nc&&"none"!=Sa){var c=a.getMousePos(b),
d=nc,e=a.columnList;if(0<=d&&d<e.length){var f=oc+c.x-pc;"right"==e[d][a.options.columnFields.fixed]&&(f=oc-(c.x-pc));f=0<=f?f:0;c=Hc(e[d]);f>=c.min&&f<=c.max&&(e[d][a.options.columnFields.width]=f,a.resizeColumn(d,f,e[d][a.options.columnFields.fixed]),a.updateViewSize(),a.updateScrollVisibility(),zc())}}ec?ha||1!==b.which||(S[0].getBoundingClientRect(),b=a.getMousePos(b),E.scrollMousePos||(E.scrollMousePos=b),d=S[0].offsetLeft+(b.x-E.scrollMousePos.x),d<Ja?d=Ja:d+S[0].offsetWidth>ab&&(d=ab-S[0].offsetWidth),
S.css("left",d+"px"),E.scrollMousePos=b,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.x=!1!==a.options.rtl?parseInt((ab-S[0].offsetLeft-S[0].offsetWidth)*kb,10):parseInt((S[0].offsetLeft-Ja)*kb,10),Ac(),(Qc(a.scrollPos)||a.scrollPos.x!=a.prevScrollPos.x)&&a.callScrollPosChanged()):ea&&(ha||1!==b.which||(Y[0].getBoundingClientRect(),b=a.getMousePos(b),E.scrollMousePos||(E.scrollMousePos=b),d=Y[0].offsetTop+(b.y-E.scrollMousePos.y),d<bb?d=bb:d+Y[0].offsetHeight>Ab&&(d=Ab-Y[0].offsetHeight),
Y.css("top",d+"px"),E.scrollMousePos=b,hc=d-bb,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.y=Math.floor(hc*ic*P),(Qc(a.scrollPos)||a.scrollPos.y!=a.prevScrollPos.y)&&a.callScrollPosChanged(),newIndex=0<P?Math.floor(a.scrollPos.y/P):0,newIndex+A-1>a.currentList.length&&(newIndex=a.currentList.length-A+1,newIndex+=5),0>newIndex&&(newIndex=0),newIndex!==v&&(v=newIndex,a.updateVerticalScrollView())))},Yc=function(b){a.removeDropDownList();a.closeEditor(d);a.closeFilterWindow();fb()},
Zc=function(b){bd(!0);Da&&Da.remove();ra=!1;nc=-1;Sa="none";pc=oc=0;W=!1;q.css("cursor","default");a.dropMark();ea&&a.updateView();tb();E.scrollMousePos=null;ea=ec=!1;q.css("cursor","default");document.body.style.cursor="default"},Wc=function(b){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}};angular.element(p).bind("mousemove",Xc);angular.element(p).bind("mousedown",Yc);angular.element(p).bind("mouseup",
Zc);angular.element(p).bind("keyup",Wc);var Rc=!1,Gb=0,qc=null,Sd=.5;a.isScrollBarVisible=function(a){switch(a){case "horizontal":return J;case "vertical":return N}return J&&N};a.prevScrollPos={x:0,y:0};a.scrollPos={x:0,y:0};a.getMaxScrollPos=function(){return O};a.getScrollPos=function(){return a.scrollPos};a.setScrollPos=function(b,c){if(!ha&&b){var d=!0;0>b.x&&(b.x=0,d=!1);b.x>O.x&&(b.x=O.x,d=!1);0>b.y&&(b.y=0,d=!1);b.y>O.y&&(b.y=O.y,d=!1);a.scrollPos=b;hc=Math.floor(a.scrollPos.y/(P*ic));var e,
f=bb+hc;e=!1!==a.options.rtl?Math.floor(a.scrollPos.x/kb)-(ab-S[0].offsetWidth-Ja):Math.floor(a.scrollPos.x/kb)+Ja;J&&S&&S.css("left",e+"px");N&&Y&&Y.css("top",f+"px");Ac();Lc(!0,c);d&&a.callScrollPosChanged()}};var Qc=function(a){return 0<a.x&&a.x<O.x||0<a.y&&a.y<O.y},ac=function(b,c,d){Rc||(a.updateFocus(),Gb=0,Rc=!0,qc=g(function(){var d=c,e=a.getScrollPos();d||(0===Gb&&(Gb=5),Gb+=5+ic,Sd+=.5,d=Gb+=Math.floor(Sd));e.y=b?e.y+d:e.y-d;a.setScrollPos(e);(0>=e.y||a.getScrollPos().y<e.y)&&tb()},d?d:
100))},tb=function(){qc&&(g.cancel(qc),qc=null);Rc=!1;Gb=0};a.cancelScrollTimer=function(){tb()};a.scrollTo=function(b,c){if(b){var d=a.getRowCurrentIndex(b);if(a.isRowIndexInRange(d)){var e;e=d;switch(c){case "center":e=Math.floor(A/2)-1;e=d>e?d-e:0;break;case "bottom":e=A-2,a.options.showHeader&&e--,a.options.showFooter&&e--,e=d>e?d-e:0}a.setScrollPos({x:a.scrollPos.x,y:e*P})}}};var Ac=function(){var b=a.scrollPos.x;0>b&&(b=0);b>O.x&&(b=O.x);b*=-1;na&&na.css("left",b+K+"px");Ea&&Ea.css("left",b+
K+"px");da&&da.css("left",b+K+"px");V&&V.css("left",b+K+"px");U&&U.css("left",b+K+"px")},Lc=function(b,c){if(!(0==b&&0>=P)){newIndex=0<P?Math.floor(a.scrollPos.y/P):0;a.scrollPos.y==O.y&&newIndex--;if(a.currentList.length>=A&&newIndex+A-1>a.currentList.length){newIndex=a.currentList.length-A+1;var d=a.getRowElems();d||(d=a.getRowElems("left"));d||(d=a.getRowElems("right"));d&&0<d.length&&(d=angular.element(d[d.length-1]),d[0].offsetTop+d[0].offsetHeight>q[0].clientHeight-(C+I)&&newIndex++)}0>newIndex&&
(newIndex=0);newIndex!=v&&(v=newIndex,0!=b&&a.updateView(c))}};q.bind("scroll",function(a){q[0].scrollTop=0;q[0].scrollLeft=0});var Td=function(b,c){if(N){document.activeElement&&document.activeElement.blur();a.removeDropDownList();a.closeEditor(d);a.closeFilterWindow();fb();var e=a.hoverRow;a.hoverRow=null;a.refresh(e);e=Math.floor(q[0].clientHeight/4);switch(a.options.mouseWheelSpeed){case "veryslow":e=P;break;case "slow":e=2*P;break;case "fast":e=Math.floor(q[0].clientHeight/2)-C-I-P;break;case "veryfast":e=
Math.floor(q[0].clientHeight-C-I-P)}a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y};a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+e*c*-1},!0);Qc(a.scrollPos)||a.scrollPos.y==a.prevScrollPos.y||a.callScrollPosChanged()}};q.bind("mousewheel",function(b){if(0==a.options.autoSize&&(b.preventDefault(),!ha&&a.options.enabled)){var c=0;b.wheelDelta?c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,b.originalEvent.wheelDelta||-b.originalEvent.detail)));Td(b,
c)}});q.bind("DOMMouseScroll",function(b){if(0==a.options.autoSize&&(b.preventDefault(),!ha&&a.options.enabled)){var c=0;b.detail?c=Math.max(-1,Math.min(1,-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,-b.originalEvent.detail)));Td(b,c)}});var Xb={x:0,y:0},eb={x:0,y:0};q.bind("touchstart",function(b){b.preventDefault();a.options.enabled&&(b=a.getTouchData(b))&&0<b.length&&(Xb={x:b[0].pageX,y:b[0].pageY})});q.bind("touchend",function(b){if(a.options.enabled){(b=a.getTouchData(b))&&0<b.length&&
(eb={x:b[0].pageX,y:b[0].pageY});var c=eb.x-Xb.x,d=eb.y-Xb.y;(20<Math.abs(c)||20<Math.abs(d))&&document.activeElement&&document.activeElement.blur();var e=!1,f=!1,k=Xb,m=a.scrollPos.x,p=a.scrollPos.y,q=g(function(){var b=a.scrollPos;-20>c?(k.x-=10,k.x>eb.x?b.x+=10:(b.x=m-c,e=!0)):20<c?(k.x+=10,k.x<eb.x?b.x-=10:(b.x=m-c,e=!0)):e=!0;-20>d?(k.y-=10,k.y>eb.y?b.y+=10:(b.y=p-d,f=!0)):20<d?(k.y+=10,k.y<eb.y?b.y-=10:(b.y=p-d,f=!0)):f=!0;a.setScrollPos(b);e&&f&&g.cancel(q)},5);Xb=eb}});E=this;this.crpar=function(){return["si",
"tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=this.crpar();this.$tw=angular.element(this.crtr(E.tpar));this.tmp=300;this.twp=200*this.tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display",
"block"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"))};this.s1t=function(a){E.s3t();this.trlTime=f(function(){E.trActive||(E.trCount=0,E.trActive=!0,E.trId=g(function(){E.animTr()},1E3))},a)};this.s3t=function(){this.trId&&(g.cancel(this.trId),this.trId=null);this.trlTime&&(f.cancel(this.trlTime),
this.trlTime=null);this.trActive=!1};this.s2t=function(){this.s3t();this.trActive=!1;this.$tw.remove()};q.append(this.$tw);this.s1t(this.twp);angular.isDefined(m.options)?a.updateOptions(m.options):(0==m.allowAnimation&&(a.options.allowAnimation=m.allowAnimation),0==m.allowCellFocus&&(a.options.allowCellFocus=m.allowCellFocus),1==m.allowColumnReorder&&(a.options.allowColumnReorder=m.allowColumnReorder),1==m.allowDrag&&(a.options.allowDrag=m.allowDrag),0==m.allowDrop&&(a.options.allowDrop=m.allowDrop),
1==m.allowFilter&&(a.options.allowFilter=m.allowFilter),0==m.allowFocus&&(a.options.allowFocus=m.allowFocus),0==m.autoExpand&&(a.options.autoExpand=m.autoExpand),1==m.autoSize&&(a.options.autoSize=m.autoSize),angular.isDefined(m.animationSpeed)&&200!==m.animationSpeed&&(a.options.animationSpeed=m.animationSpeed),angular.isDefined(m.controlStyle)&&a.updateControlStyle(m.controlStyle),angular.isDefined(m.displayMode)&&(a.options.displayMode=m.displayMode),angular.isDefined(m.editorSettings)&&a.updateEditorSettings(m.editorSettings),
angular.isDefined(m.expandingColumnIndex)&&(a.options.expandColIndex=m.expandingColumnIndex),angular.isDefined(m.fields)&&(a.updateDataFields(m.fields),a.updateData()),0==m.enabled&&(a.options.enabled=m.enabled),1==m.fillSpace&&(a.options.fillSpace=m.fillSpace),angular.isDefined(m.gridLines)&&(a.options.gridLines=m.gridLines),1==m.hoverSelection&&(a.options.hoverSelection=m.hoverSelection),angular.isDefined(m.indent)&&(a.options.indent=m.indent),angular.isDefined(m.labelEdit)&&(a.options.labelEdit=
m.labelEdit),angular.isDefined(m.maxRows)&&(a.options.maxRows=m.maxRows),angular.isDefined(m.mouseWheelSpeed)&&(a.options.mouseWheelSpeed=m.mouseWheelSpeed),angular.isDefined(m.paging)&&a.updatePaging(m.paging),angular.isDefined(m.rowHeight)&&(a.options.rowHeight=m.rowHeight),angular.isDefined(m.rowIcon)&&(a.options.rowIcon=m.rowIcon),1==m.rtl&&(a.options.rtl=m.rtl),angular.isDefined(m.selectedIndex)&&(a.options.selectedIndex=m.selectedIndex),angular.isDefined(m.selectedRow)&&(a.options.selectedRow=
m.selectedRow),angular.isDefined(m.selectionMode)&&(a.options.selectionMode=m.selectionMode),!1===m.showExpandBoxes&&(a.options.showExpandBoxes=m.showExpandBoxes),0==m.showFooter&&(a.options.showFooter=m.showFooter),0==m.showHeader&&(a.options.showHeader=m.showHeader),0==m.showIcons&&(a.options.showIcons=m.showIcons),angular.isDefined(m.sorting)&&(a.options.sorting=m.sorting));a.updateLayout()}}}]);