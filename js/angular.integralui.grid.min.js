/*
  filename: angular.integralui.grid.min.js
  version : 3.2.117
  Copyright © 2014-2017 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUIGridService",["$rootScope",function(c){var e=null;return{addColumn:function(p,l){c.$broadcast(p+"-add-column",l)},clearColumns:function(p){c.$broadcast(p+"-clear-columns")},insertColumnAt:function(p,l,e){c.$broadcast(p+"-insert-column-at",l,e)},insertColumnBefore:function(p,l,e){c.$broadcast(p+"-insert-column-before",l,e)},insertColumnAfter:function(p,l,e){c.$broadcast(p+"-insert-column-after",l,e)},removeColumn:function(p,l){c.$broadcast(p+"-remove-column",
l)},removeColumnAt:function(p,l){c.$broadcast(p+"-remove-column-at",l)},addGroup:function(p,l){c.$broadcast(p+"-add-group",l)},clearGroups:function(p){c.$broadcast(p+"-clear-groups")},insertGroupAt:function(p,l,e){c.$broadcast(p+"-insert-group-at",l,e)},insertGroupBefore:function(p,l,e){c.$broadcast(p+"-insert-group-before",l,e)},insertGroupAfter:function(p,l,e){c.$broadcast(p+"-insert-group-after",l,e)},removeGroup:function(p,l){c.$broadcast(p+"-remove-group",l)},removeGroupAt:function(p,l){c.$broadcast(p+
"-remove-group-at",l)},addRow:function(p,l){c.$broadcast(p+"-add-row",l)},clearRows:function(p){c.$broadcast(p+"-clear-rows")},insertRowAt:function(p,l,e){c.$broadcast(p+"-insert-row-at",l,e)},insertRowBefore:function(p,l,e){c.$broadcast(p+"-insert-row-before",l,e)},insertRowAfter:function(p,l,e){c.$broadcast(p+"-insert-row-after",l,e)},removeRow:function(p,l){c.$broadcast(p+"-remove-row",l)},removeRowAt:function(p,l){c.$broadcast(p+"-remove-row-at",l)},exportToJSON:function(p,l,e,h){c.$broadcast(p+
"-export-json",l,e,h);p=this.getTempData();this.clearTempData();return p?p:""},loadData:function(p,l,e){c.$broadcast(p+"-load-data",l,e)},openEditor:function(p,l){c.$broadcast(p+"-open-editor",l)},closeEditor:function(p,l){c.$broadcast(p+"-close-editor",l)},filter:function(p,l,e){c.$broadcast(p+"-filter",l,e)},findRowById:function(p,l){c.$broadcast(p+"-find-row-by-id",l);var e=this.getTempData();this.clearTempData();return e?e:null},findRowByText:function(p,l){c.$broadcast(p+"-find-row-by-text",l);
var e=this.getTempData();this.clearTempData();return e?e:null},getCellAt:function(p,e){c.$broadcast(p+"-get-cell-at",e);var l=this.getTempData();this.clearTempData();return l?l:null},getRowAt:function(p,e){c.$broadcast(p+"-get-row-at",e);var l=this.getTempData();this.clearTempData();return l?l:null},focus:function(p,e){c.$broadcast(p+"-focus",e)},clearTempData:function(){e=null},ensureVisible:function(p,e){c.$broadcast(p+"-ensure-visible",e)},getTempData:function(){return e},getHoverColumn:function(p,
e){c.$broadcast(p+"-get-hover-column",e);var l=this.getTempData();this.clearTempData();return l?l:null},getList:function(p){c.$broadcast(p+"-get-list");p=this.getTempData();this.clearTempData();return p?p:[]},setTempData:function(c){e=c},topRow:function(p,e){if(e)c.$broadcast(p+"-set-top-row",e);else return c.$broadcast(p+"-get-top-row"),e=this.getTempData(),this.clearTempData(),e?e:null},beginLoad:function(e,l){c.$broadcast(e+"-begin-load",l)},endLoad:function(e){c.$broadcast(e+"-end-load")},moveColumn:function(e,
l,B){c.$broadcast(e+"-move-column",l,B)},moveRow:function(e,l,B,h,xa){c.$broadcast(e+"-move-row",l,B,h,xa)},getScrollPos:function(e){c.$broadcast(e+"-get-scroll-pos");e=this.getTempData();this.clearTempData();return e?e:{x:0,y:0}},getMaxScrollPos:function(e){c.$broadcast(e+"-get-max-scroll-pos");e=this.getTempData();this.clearTempData();return e?e:{x:0,y:0}},setScrollPos:function(e,l){c.$broadcast(e+"-set-scroll-pos",l)},scrollTo:function(e,l,B){c.$broadcast(e+"-scroll-to",l,B)},currentPage:function(e,
l){if(void 0!=l&&null!=l)c.$broadcast(e+"-set-current-page",l);else{c.$broadcast(e+"-get-current-page");var p=this.getTempData();this.clearTempData();return void 0!=p?p:-1}},firstPage:function(e){c.$broadcast(e+"-first-page")},lastPage:function(e){c.$broadcast(e+"-last-page")},nextPage:function(e){c.$broadcast(e+"-next-page")},prevPage:function(e){c.$broadcast(e+"-prev-page")},clearSelection:function(e){c.$broadcast(e+"-clear-selection")},selectedColumn:function(e,l){if(l)c.$broadcast(e+"-set-selected-column",
l);else{c.$broadcast(e+"-get-selected-column");var p=this.getTempData();this.clearTempData();return p?p:null}},selectedRow:function(e,l){if(l)c.$broadcast(e+"-set-selected-row",l);else{c.$broadcast(e+"-get-selected-row");var p=this.getTempData();this.clearTempData();return p?p:null}},selectedRows:function(e,l){if(l)c.$broadcast(e+"-set-selected-rows",l);else{c.$broadcast(e+"-get-selected-rows");var p=this.getTempData();this.clearTempData();return p?p:null}},sort:function(e,l,B,h){c.$broadcast(e+"-sort",
l,B,h)},refresh:function(e,l,B){c.$broadcast(e+"-refresh",l,B)},resumeLayout:function(e,l){c.$broadcast(e+"-resume-layout",l)},suspendLayout:function(e,l){c.$broadcast(e+"-suspend-layout",l)},updateLayout:function(e,l){c.$broadcast(e+"-update-layout",l)},updateView:function(e){c.$broadcast(e+"-update-view")}}}]).controller("IntegralUIGridController",["$scope","$element","$timeout","$window","$interval","IntegralUIInternalService","IntegralUIDataService","IntegralUIGridService","IntegralUIDragDrop",
"IntegralUIFilter",function(c,e,p,l,B,h,xa,k,q,tc){var a=this;this.suppressProcess=!1;this.hoverCell=this.hoverRow=this.hoverColumn=null;a.defaultCheckBoxStyle={general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",unchecked:"iui-checkbox-unchecked"}};a.defaultStyle={general:"iui-grid",column:{general:{content:"iui-grid-column-cell-content",disabled:"iui-grid-column-disabled",normal:"iui-grid-column",
hovered:"iui-grid-column-hovered",selected:"iui-grid-column-selected"},header:{content:"iui-grid-column-header-cell-content",disabled:"iui-grid-column-header-disabled",normal:"iui-grid-column-header",hovered:"iui-grid-column-header-hovered",selected:"iui-grid-column-header-selected"},body:{content:"iui-grid-column-body-cell-content",disabled:"iui-grid-column-body-disabled",normal:"iui-grid-column-body",hovered:"iui-grid-column-body-hovered",selected:"iui-grid-column-body-selected"},footer:{content:"iui-grid-column-footer-cell-content",
disabled:"iui-grid-column-footer-disabled",normal:"iui-grid-column-footer",hovered:"iui-grid-column-footer-hovered",selected:"iui-grid-column-footer-selected"}},row:{general:{disabled:"iui-grid-row-disabled",focused:"iui-grid-row-focused",normal:"iui-grid-row",hovered:"iui-grid-row-hovered",selected:"iui-grid-row-selected"},checkBox:{general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",
unchecked:"iui-checkbox-unchecked"}},expandBox:{general:"iui-grid-expand-box",animated:"iui-grid-expand-box-load",expanded:"iui-grid-expand-box-open",collapsed:"iui-grid-expand-box-close"},cell:{content:"iui-grid-row-cell-content",general:"iui-grid-row-cell",disabled:"iui-grid-row-cell-disabled",focused:"iui-grid-row-cell-focused",normal:"iui-grid-row-cell",hovered:"iui-grid-row-cell-hovered",selected:"iui-grid-row-cell-selected"},fixed:{disabled:"iui-grid-row-fixed-disabled",normal:"iui-grid-row-fixed",
hovered:"iui-grid-row-fixed-hovered"}},cell:{content:"iui-grid-row-cell-content",general:"iui-grid-row-cell",disabled:"iui-grid-row-cell-disabled",focused:"iui-grid-row-cell-focused",normal:"iui-grid-row-cell",hovered:"iui-grid-row-cell-hovered",selected:"iui-grid-row-cell-selected"}};this.updateGrouping=function(b){a.options.grouping=b?{enabled:h.isFieldAvailable(b.enabled,!1),showColumns:h.isFieldAvailable(b.showColumns,!1)}:{enabled:!1,showColumns:!1}};this.updatePaging=function(b){a.options.paging=
b?{enabled:h.isFieldAvailable(b.enabled,!1),showControlPanel:h.isFieldAvailable(b.showControlPanel,!0),pageSize:h.isFieldAvailable(b.pageSize,100)}:{enabled:!1,showControlPanel:!0,pageSize:100}};this.updateOptions=function(b){b?(a.options={allowAnimation:h.isFieldAvailable(b.allowAnimation,!0),allowCellFocus:h.isFieldAvailable(b.allowCellFocus,!0),allowColumnReorder:h.isFieldAvailable(b.allowColumnReorder,!1),allowDrag:h.isFieldAvailable(b.allowDrag,!1),allowDrop:h.isFieldAvailable(b.allowDrop,!0),
allowFilter:h.isFieldAvailable(b.allowFilter,!1),allowFocus:h.isFieldAvailable(b.allowFocus,!0),animationSpeed:200,autoExpand:h.isFieldAvailable(b.autoExpand,!0),autoUpdate:h.isFieldAvailable(b.autoUpdate,!0),controlStyle:a.defaultStyle,displayMode:h.isFieldAvailable(b.displayMode,"normal"),editorSettings:{activate:"click"},enabled:h.isFieldAvailable(b.enabled,!0),expandColIndex:h.isFieldAvailable(b.expandColIndex,void 0!=a.options.expandColIndex?a.options.expandColIndex:0),fillSpace:h.isFieldAvailable(b.fillSpace,
!1),gridLines:h.isFieldAvailable(b.gridLines,"both"),hoverSelection:h.isFieldAvailable(b.hoverSelection,!1),indent:h.isFieldAvailable(b.indent,15),labelEdit:h.isFieldAvailable(b.labelEdit,!1),loadRows:[],mouseWheelSpeed:h.isFieldAvailable(b.mouseWheelSpeed,"normal"),pathSeparator:h.isFieldAvailable(b.pathSeparator,"\\"),rowHeight:h.isFieldAvailable(b.rowHeight,-1),rtl:h.isFieldAvailable(b.rtl,!1),selectedColumn:h.isFieldAvailable(b.selectedColumn,a.options.selectedColumn?a.options.selectedColumn:
null),selectedIndex:-1,selectedRow:h.isFieldAvailable(b.selectedRow,a.options.selectedRow?a.options.selectedRow:null),selectedRows:a.options.selectedRows?a.options.selectedRows:[],selectionMode:h.isFieldAvailable(b.selectionMode,"one"),showFooter:h.isFieldAvailable(b.showFooter,!0),showHeader:h.isFieldAvailable(b.showHeader,!0),showIcons:h.isFieldAvailable(b.showIcons,!0),sorting:h.isFieldAvailable(b.sorting,"none")},a.updateGrouping(b.grouping),a.updatePaging(b.paging),a.updateDataFields(b.dataFields),
a.updateControlStyle(b.controlStyle)):(a.options={allowAnimation:!0,allowCellFocus:!0,allowColumnReorder:!1,allowDrag:!1,allowDrop:!0,allowFilter:!1,allowFocus:!0,animationSpeed:200,autoExpand:!0,autoUpdate:!0,controlStyle:a.defaultStyle,displayMode:"normal",editorSettings:{activate:"click"},enabled:!0,expandColIndex:0,fillSpace:!1,gridLines:"both",hoverSelection:!1,indent:15,labelEdit:!1,loadRows:[],mouseWheelSpeed:"normal",pathSeparator:"\\",rowHeight:-1,rtl:!1,selectedColumn:null,selectedIndex:-1,
selectedRow:null,selectedRows:[],selectionMode:"one",showFooter:!0,showHeader:!0,showIcons:!0,sorting:"none"},a.updateGrouping(),a.updatePaging(),a.updateDataFields())};a.options={};this.updateColumnFields=function(b){a.options.columnFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFilter:b.allowFilter?b.allowFilter:"allowFilter",allowGrouping:b.allowGrouping?b.allowGrouping:"allowGrouping",cellTemplateUrl:b.cellTemplateUrl?b.cellTemplateUrl:
"cellTemplateUrl",comparer:b.comparer?b.comparer:"comparer",contentAlignment:b.contentAlignment?b.contentAlignment:"contentAlignment",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",editorType:b.editorType?b.editorType:"editorType",editorSettings:b.editorSettings?b.editorSettings:"editorSettings",editorTemplate:b.editorTemplate?b.editorTemplate:"editorTemplate",filterParams:b.filterParams?b.filterParams:"filterParams",filterTemplate:b.filterTemplate?b.filterTemplate:"filterTemplate",fixed:b.fixed?
b.fixed:"fixed",fixedWidth:b.fixedWidth?b.fixedWidth:"fixedWidth",footerAlignment:b.footerAlignment?b.footerAlignment:"footerAlignment",footerContent:b.footerContent?b.footerContent:"footerContent",footerTemplate:b.footerTemplate?b.footerTemplate:"footerTemplate",footerTemplateModel:b.footerTemplateModel?b.footerTemplateModel:"footerTemplateModel",footerText:b.footerText?b.footerText:"footerText",footerTooltip:b.footerTooltip?b.footerTooltip:"footerTooltip",groupText:b.groupText?b.groupText:"groupText",
headerAlignment:b.headerAlignment?b.headerAlignment:"headerAlignment",headerContent:b.headerContent?b.headerContent:"headerContent",headerTemplate:b.headerTemplate?b.headerTemplate:"headerTemplate",headerTemplateModel:b.headerTemplateModel?b.headerTemplateModel:"headerTemplateModel",headerText:b.headerText?b.headerText:"headerText",headerTooltip:b.headerTooltip?b.headerTooltip:"headerTooltip",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",minWidth:b.minWidth?b.minWidth:"minWidth",maxWidth:b.maxWidth?
b.maxWidth:"maxWidth",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateSettings:b.templateSettings?b.templateSettings:"templateSettings",visible:b.visible?b.visible:"visible",width:b.width?b.width:"width"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFilter:"allowFilter",allowGrouping:"allowGrouping",cellTemplateUrl:"cellTemplateUrl",comparer:"comparer",contentAlignment:"contentAlignment",contextMenu:"contextMenu",editorType:"editorType",editorSettings:"editorSettings",
editorTemplate:"editorTemplate",filterParams:"filterParams",filterTemplate:"filterTemplate",footerTemplateModel:"footerTemplateModel",fixed:"fixed",fixedWidth:"fixedWidth",footerAlignment:"footerAlignment",footerContent:"footerContent",footerTemplate:"footerTemplate",footerText:"footerText",footerTooltip:"footerTooltip",groupText:"groupText",headerAlignment:"headerAlignment",headerContent:"headerContent",headerTemplate:"headerTemplate",headerTemplateModel:"headerTemplateModel",headerText:"headerText",
headerTooltip:"headerTooltip",icon:"icon",id:"id",minWidth:"minWidth",maxWidth:"maxWidth",selected:"selected",style:"style",templateSettings:"templateSettings",visible:"visible",width:"width"};a.columnsObj&&a.columnsObj.updateDataFields(a.options.columnFields)};this.updateRowFields=function(b){a.options.rowFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFocus:b.allowFocus?b.allowFocus:"allowFocus",cells:b.cells?b.cells:"cells",content:b.content?
b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",expanded:b.expanded?b.expanded:"expanded",fixed:b.fixed?b.fixed:"fixed",hasChildren:b.hasChildren?b.hasChildren:"hasChildren",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",objects:b.rows?b.rows:"rows",pid:b.pid?b.pid:"pid",rows:b.rows?b.rows:"rows",selected:b.selected?b.selected:"selected",statusIcon:b.statusIcon?b.statusIcon:"statusIcon",style:b.style?b.style:"style",subobjects:b.cells?b.cells:
"cells",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFocus:"allowFocus",cells:"cells",content:"content",contextMenu:"contextMenu",enabled:"enabled",expanded:"expanded",fixed:"fixed",hasChildren:"hasChildren",icon:"icon",id:"id",objects:"rows",pid:"pid",rows:"rows",selected:"selected",statusIcon:"statusIcon",style:"style",subobjects:"cells",text:"text",tooltip:"tooltip"};a.rowsObj&&a.rowsObj.updateDataFields(a.getRowFields(a.options.rowFields))};
this.updateCellFields=function(b){a.options.cellFields=b?{allowEdit:b.allowEdit?b.allowEdit:"allowEdit",cid:b.cid?b.cid:"cid",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",labelEdit:b.labelEdit?b.labelEdit:"labelEdit",rid:b.rid?b.rid:"rid",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateObj:b.templateObj?b.templateObj:"templateObj",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:
"tooltip",value:b.value?b.value:"value"}:{allowEdit:"allowEdit",cid:"cid",content:"content",contextMenu:"contextMenu",enabled:"enabled",labelEdit:"labelEdit",rid:"rid",selected:"selected",style:"style",templateObj:"templateObj",text:"text",tooltip:"tooltip",value:"value"}};this.updateDataFields=function(b){b?(a.updateColumnFields(b.column),a.updateRowFields(b.row),a.updateCellFields(b.cell)):(a.updateColumnFields(),a.updateRowFields(),a.updateCellFields())};a.updateOptions();c.$on(c.name+"-add-column",
function(b,f){a.columnsObj.insertAt(f,-1,null,a.columnIsAdded)});c.$on(c.name+"-clear-columns",function(b){a.columnsObj.clear(null,a.columnsAreCleared)});c.$on(c.name+"-insert-column-at",function(b,f,c){a.columnsObj.insertAt(f,c,null,a.columnIsAdded)});c.$on(c.name+"-insert-column-after",function(b,f,c){a.columnsObj.insertByRef(f,c,!0,a.columnIsAdded)});c.$on(c.name+"-insert-column-before",function(b,f,c){a.columnsObj.insertByRef(f,c,!1,a.columnIsAdded)});c.$on(c.name+"-remove-column",function(b,
f){a.columnsObj.removeAt(f,-1,null,a.columnIsRemoved)});c.$on(c.name+"-remove-column-at",function(b,f){a.columnsObj.removeAt(null,f,null,a.columnIsRemoved)});this.columnsAreCleared=function(){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.updateLayout()};a.columnIsAdded=function(){a.updateLayout()};a.columnIsRemoved=function(){a.updateLayout()};c.$on(c.name+"-add-group",function(b,f){0>a.groupsObj.getList().indexOf(f)&&a.groupsObj.insertAt(f,
-1,null,a.groupIsAdded)});c.$on(c.name+"-clear-groups",function(b){a.groupsObj.clear(null,a.groupsAreCleared)});c.$on(c.name+"-insert-group-at",function(b,f,c){0>a.groupsObj.getList().indexOf(f)&&a.groupsObj.insertAt(f,c,null,a.groupIsAdded)});c.$on(c.name+"-insert-group-after",function(b,f,c){0>a.groupsObj.getList().indexOf(f)&&a.groupsObj.insertByRef(f,c,!0,a.groupIsAdded)});c.$on(c.name+"-insert-group-before",function(b,f,c){0>a.groupsObj.getList().indexOf(f)&&a.groupsObj.insertByRef(f,c,!1,a.groupIsAdded)});
c.$on(c.name+"-remove-group",function(b,f){a.groupsObj.removeAt(f,-1,null,a.groupIsRemoved)});c.$on(c.name+"-remove-group-at",function(b,f){a.groupsObj.removeAt(null,f,null,a.groupIsRemoved)});this.groupsAreCleared=function(){a.updateLayout();a.callGroupChange()};a.groupIsAdded=function(b){a.updateLayout();a.callGroupChange(b)};a.groupIsRemoved=function(b){a.updateLayout();a.callGroupChange(b)};c.$on(c.name+"-add-row",function(b,f){a.rowsObj.insertAt(f,-1,null,a.rowIsAdded)});c.$on(c.name+"-clear-rows",
function(b){a.rowsObj.clear(null,a.rowsAreCleared)});c.$on(c.name+"-insert-row-at",function(b,f,c){a.rowsObj.insertAt(f,c,null,a.rowIsAdded)});c.$on(c.name+"-insert-row-after",function(b,f,c){a.rowsObj.insertByRef(f,c,!0,a.rowIsAdded)});c.$on(c.name+"-insert-row-before",function(b,f,c){a.rowsObj.insertByRef(f,c,!1,a.rowIsAdded)});c.$on(c.name+"-remove-row",function(b,f){a.rowsObj.removeAt(f,-1,null,a.rowIsRemoved)});c.$on(c.name+"-remove-row-at",function(b,f){a.rowsObj.removeAt(null,f,null,a.rowIsRemoved)});
this.rowsAreCleared=function(b){b||(a.clearPrevSelection(),a.options.selectedRow=null,a.setScrollPos({x:0,y:0}));a.updateCurrentLayout()};this.rowIsAdded=function(){a.updateCurrentLayout()};this.rowIsRemoved=function(){a.updateCurrentLayout()};this.objIsRemoved=function(){a.updateCurrentLayout()};a.groups=[];a.groupList=[];a.groupLevel=-1;this.updateGroupList=function(){a.groupList.length=0;var b=a.groupsObj.getList();b&&(a.groups=b);if(a.options.grouping.enabled&&0<a.groups.length&&(b=a.rowsObj.getList()))for(var f=
0;f<b.length;f++){var c=b[f],y=c[a.options.rowFields.cells];if(y&&0<y.length){for(var e,h=null,l=0;l<a.groups.length;l++){e=a.groups[l];e=e[a.options.columnFields.id];var k=l;e&&(k=a.getCellIndexById(y,l,e));if(0<=k&&k<y.length){(e=y[k][a.options.cellFields.text])&&""!=e||(e=void 0!=y[k][a.options.cellFields.value]?y[k][a.options.cellFields.value].toString():"undefined");var k=null,p=a.groupList;h&&(p=h[a.options.rowFields.rows]);if(p)for(var q=0;q<p.length;q++)if(p[q][a.options.rowFields.text]==
e){k=p[q];break}k||(k={},k[a.options.rowFields.text]=e,k[a.options.rowFields.cells]=[{cid:a.columnList[a.options.expandColIndex][a.options.columnFields.id],text:e}],k.type="group",h?(h[a.options.rowFields.rows]||(h[a.options.rowFields.rows]=[]),h[a.options.rowFields.rows].push(k)):a.groupList.push(k));h=k}}h&&(h[a.options.rowFields.rows]||(h[a.options.rowFields.rows]=[]),h[a.options.rowFields.rows].push(c))}}};this.callGroupRemoving=function(a){return angular.isDefined(c.events)&&c.events.groupRemoving?
c.events.groupRemoving({group:a}):c.groupRemoving({e:{group:a}})};this.callGroupRemoved=function(a){return angular.isDefined(c.events)&&c.events.groupRemoved?c.events.groupRemoved({group:a}):c.groupRemoved({e:{group:a}})};this.callGroupChange=function(a){angular.isDefined(c.events)&&c.events.groupChange?c.events.groupChange({group:a}):c.groupChange({e:{group:a}})};a.columnList=[];a.columnFilterList=[];a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;this.updateColumnList=function(){a.columnList.length=
0;a.columnFilterList.length=0;a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var b=a.columnsObj.getList();if(b)for(var f=0;f<b.length;f++){var c=b[f];c.type="column";c[a.options.columnFields.id]||(c[a.options.columnFields.id]=h.getUniqueId());if(0!=c[a.options.columnFields.visible]){var y=!0;a.options.grouping.enabled&&(y=0<=a.groups.indexOf(c)?a.options.grouping.showColumns:!0);if(y)switch(y=(y=c[a.options.columnFields.filterParams])?tc.createTree(y.conditions,y.formula):null,a.columnFilterList.push({cid:c[a.options.columnFields.id],
tree:y}),a.columnList.push(c),c[a.options.columnFields.fixed]){case "left":a.isThereLeftFixedColumns||(a.isThereLeftFixedColumns=!0);break;case "right":a.isThereRightFixedColumns||(a.isThereRightFixedColumns=!0)}}}};var Dd=function(b){for(var f=null,c=0;c<a.columnFilterList.length;c++)if(a.columnFilterList[c].cid==b){f=a.columnFilterList[c].tree;break}return f},G=function(b,f){if(0==a.options.allowFilter||"group"==b.type)return!0;var c=!0;if(b)for(var y,e,h,l=0;l<b[a.options.rowFields.cells].length;l++){c=
!0;h=b[a.options.rowFields.cells][l];y=h[a.options.cellFields.cid];e=a.getColumnById(y);!e&&l<a.columnList.length&&(e=a.columnList[l]);if(e&&e[a.options.columnFields.filterParams]){e=e[a.options.columnFields.filterParams];var k=h[a.options.cellFields.value]?h[a.options.cellFields.value]:h[a.options.cellFields.text];e&&(c=e.callback?e.callback(k,h,b):tc.match(k,e.conditions,e.formula,Dd(y),e.caseSensitive))}if(!c)break}return c},ea=a.options.indent;a.currentPageList=[];a.pageList=[];a.onlyCurrentPage=
!1;a.currentList=[];a.fullIndentList=[];a.fullList=[];a.indentList=[];a.longestRow=null;a.isThereChildRows=!1;a.pageRowCount=0;a.pageNumber=0;a.currentPageNumber=1;a.currentTopList=[];a.currentBottomList=[];this.isThereVisibleChildren=function(b){var f=!1;if(b&&(b=b[a.options.rowFields.rows])&&0<b.length)for(var c=0;c<b.length;c++)if(G(b[c])&&!a.isRowFixed(b[c])){f=!0;break}return f};var N=function(b,f,c,y){b.type||(b.type="row");b[a.options.rowFields.id]||(b[a.options.rowFields.id]=h.getUniqueId());
c&&(b[a.options.rowFields.pid]=c);c=!0;var t=b[a.options.rowFields.cells];if(t&&0<t.length){c=G(b,y);for(var e,l,k,p=0;p<a.columnList.length;p++){k=a.columnList[p];e=k[a.options.columnFields.id];l=k[a.options.columnFields.editorType];k=k[a.options.columnFields.editorSettings];var q=p;e&&(q=a.getCellIndexById(t,p,e));0<=q&&q<t.length&&(t[q].type="cell",t[q][a.options.cellFields.rid]=b[a.options.rowFields.id],a.setDefaultCellValue(t[q],l,k))}}if(c)if(y)a.fullList.push(b),a.fullIndentList.push(f);else if(a.options.paging.enabled)a.onlyCurrentPage?
a.currentPageList.push({row:b,indent:f}):(b[a.options.rowFields.pid]||a.pageRowCount++,a.pageRowCount>a.options.paging.pageSize&&(a.pageRowCount=1,a.pageNumber++,a.pageList.push([])),a.pageList[a.pageNumber].push({row:b,indent:f}));else switch(b[a.options.rowFields.fixed]){case "top":a.currentTopList.push(b);break;case "bottom":a.currentBottomList.push(b);break;default:a.currentList.push(b),a.indentList.push(f)}return c},C=function(b,f,c,y){if(!b[a.options.rowFields.rows])return c=N(b,f,c,y);if((c=
N(b,f,c,y))&&!a.isRowFixed(b)){var t=0,e;if("group"==b.type&&(y||a.isRowExpanded(b))){var h=b[a.options.rowFields.rows];if(h){a.applySorting(h);for(var l=0;l<h.length;l++)(e=C(h[l],f+ea,b[a.options.rowFields.id],y))&&t++}}y||a.isThereChildRows||!(0<t||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))||(a.isThereChildRows=!0)}return c};this.isRowFixed=function(b){return!b||"top"!=b[a.options.rowFields.fixed]&&"bottom"!=b[a.options.rowFields.fixed]?
!1:!0};this.getFullList=function(){a.fullList.length=0;a.fullIndentList.length=0;for(var b=a.rowsObj.getList(),f=0;f<b.length;f++)C(b[f],0,null,!0);return a.fullList};this.getCurrentList=function(){return a.currentList};this.updateCurrentList=function(){a.currentList.length=0;a.indentList.length=0;a.currentTopList.length=0;a.currentBottomList.length=0;ea=a.options.indent;if(a.options.paging.enabled){if(1<=a.currentPageNumber&&a.currentPageNumber<=a.pageList.length)for(var b=0;b<a.pageList[a.currentPageNumber-
1].length;b++)a.currentList.push(a.pageList[a.currentPageNumber-1][b].row),a.indentList.push(a.pageList[a.currentPageNumber-1][b].indent)}else{a.isThereChildRows=!1;var f=a.rowsObj.getList();a.options.grouping.enabled&&0<a.groups.length&&(f=a.groupList);if(f)for(a.applySorting(f),b=0;b<f.length;b++)C(f[b],0,null,!1)}};this.updatePageList=function(){a.pageList.length=0;a.pageRowCount=0;a.pageNumber=0;a.isThereChildRows=!1;ea=a.options.indent;var b=a.rowsObj.getList();a.options.grouping.enabled&&0<
a.groups.length&&(b=a.groupList);if(b&&0<b.length){a.applySorting(b);a.pageList.push([]);for(var f=0;f<b.length;f++)C(b[f],0,null,!1);0<a.pageList.length&&0==a.pageList[a.pageList.length-1].length&&a.pageList.splice(a.pageList.length-1,1)}};this.columnEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearColumns?c.events.clearColumns():c.clearColumns(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.columnAdded?c.events.columnAdded({column:a.e.column}):c.columnAdded(a)},
objAdding:function(a){return angular.isDefined(c.events)&&c.events.columnAdding?c.events.columnAdding({column:a.e.column}):c.columnAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.columnRemoved?c.events.columnRemoved({column:a.e.column}):c.columnRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.columnRemoving?c.events.columnRemoving({column:a.e.column}):c.columnRemoving(a)}};this.groupEvents={clear:function(a){return angular.isDefined(c.events)&&
c.events.clearGroups?c.events.clearGroups():c.clearGroups(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.groupAdded?c.events.groupAdded({group:a.e.group}):c.groupAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.groupAdding?c.events.groupAdding({group:a.e.group}):c.groupAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.groupRemoved?c.events.groupRemoved({group:a.e.group}):c.groupRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&
c.events.groupRemoving?c.events.groupRemoving({group:a.e.group}):c.groupRemoving(a)}};this.rowEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearRows?c.events.clearRows():c.clearRows(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.rowAdded?c.events.rowAdded({row:a.e.row}):c.rowAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.rowAdding?c.events.rowAdding({row:a.e.row}):c.rowAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&
c.events.rowRemoved?c.events.rowRemoved({row:a.e.row}):c.rowRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.rowRemoving?c.events.rowRemoving({row:a.e.row}):c.rowRemoving(a)}};this.getRowFields=function(a){return{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",pid:a.pid?a.pid:"pid",objects:a.rows?a.rows:"rows",subobjects:a.cells?a.cells:"cells",text:a.text?a.text:"text"}};a.columnsObj=new xa({objects:c.columns,events:a.columnEvents,
fields:a.options.columnFields});a.rowsObj=new xa({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.groupsObj=new xa({objects:c.groups,events:a.groupEvents,fields:a.options.columnFields});c.$on(c.name+"-load-data",function(b,f,c){a.loadData(f,c)});c.$on(c.name+"-export-json",function(b,f,c,e){k.setTempData(a.exportToJSON(f,c,e))});this.exportToJSON=function(b,f,c){var t=c,t=t?t:null,e=a.columnsObj.getList();b=JSON.stringify(e,b?b:[a.options.columnFields.allowDrag,a.options.columnFields.allowDrop,
a.options.columnFields.allowFilter,a.options.columnFields.allowGrouping,a.options.columnFields.cellTemplateUrl,a.options.columnFields.contentAlignment,a.options.columnFields.contextMenu,a.options.columnFields.editorType,a.options.columnFields.editorSettings,a.options.columnFields.editorTemplate,a.options.columnFields.filterParams,a.options.columnFields.filterTemplate,a.options.columnFields.fixed,a.options.columnFields.fixedWidth,a.options.columnFields.footerAlignment,a.options.columnFields.footerContent,
a.options.columnFields.footerTemplate,a.options.columnFields.footerText,a.options.columnFields.footerTooltip,a.options.columnFields.groupText,a.options.columnFields.headerAlignment,a.options.columnFields.headerContent,a.options.columnFields.headerTemplate,a.options.columnFields.headerText,a.options.columnFields.headerTooltip,a.options.columnFields.icon,a.options.columnFields.id,a.options.columnFields.selected,a.options.columnFields.style,a.options.columnFields.templateSettings,a.options.columnFields.visible,
a.options.columnFields.width],t);c=c?c:null;t=a.getFullList();f=JSON.stringify(t,f?f:[a.options.rowFields.allowCellFocus,a.options.rowFields.allowDrag,a.options.rowFields.allowDrop,a.options.rowFields.allowFocus,a.options.rowFields.cells,a.options.rowFields.content,a.options.rowFields.contextMenu,a.options.rowFields.enabled,a.options.rowFields.expanded,a.options.rowFields.fixed,a.options.rowFields.hasChildren,a.options.rowFields.icon,a.options.rowFields.id,a.options.rowFields.pid,a.options.rowFields.selected,
a.options.rowFields.statusIcon,a.options.rowFields.style,a.options.rowFields.text,a.options.rowFields.tooltip,a.options.cellFields.rid],c);return'[\n{ "columns": '+b+' },\n{ "rows": '+f+" }\n]"};this.loadData=function(b,f){a.suspendLayout();a.updateDataFields(f);a.rowsObj.clear(null,a.rowsAreCleared);if(angular.isDefined(c.rows))for(var t=c.rows.length=0;t<b.length;t++)c.rows.push(b[t]);a.rowsObj=new xa({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.resumeLayout()};
this.updateData=function(){a.options.rowFields.dataSource&&(a.loadData(a.options.rowFields.dataSource),a.rowsObj=new xa({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)}))};var Xa=!1;this.dragDropStatus=function(a){if(void 0!=a)Xa=a;else return Xa};this.getDnDSource=function(a){return{text:a.dataTransfer?a.dataTransfer.getData("text"):a.originalEvent.dataTransfer?a.originalEvent.dataTransfer.getData("text"):""}};this.getTouchData=function(a){return a.changedTouches?a.changedTouches:
a.originalEvent?a.originalEvent.changedTouches:null};var kb=angular.element('<div class="iui-drop-marker" data-element="dropmark"></div>');this.getDropMarkLine=function(){return dropMarkLine};a.getMousePos=function(a){return{x:a.pageX?a.pageX:a.originalEvent?a.originalEvent.pageX:0,y:a.pageY?a.pageY:a.originalEvent?a.originalEvent.pageY:0}};this.getGridName=function(){return angular.isDefined(c.name)?c.name:""};e.bind("dragenter",function(b){b.preventDefault();if(a.options.enabled){var f=q.getData();
f.source||(f.source=a.getDnDSource(b));b={event:b,sourceCtrl:f.sourceCtrl?f.sourceCtrl.getGridName():"",dragRow:f.source,targetCtrl:a.getGridName(),targetRow:f.target,mousePos:a.getMousePos(b)};a.callDragEnter(b)}});e.bind("dragover",function(b){b.preventDefault();if(!a.options.enabled||!a.isDropInRange(b)||a.options.grouping.enabled&&0<a.groups.length)a.dropMark(),b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect=
"none");else{var f=!0;b.dataTransfer?f="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(f="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(f)if(b.dataTransfer?b.dataTransfer.dropEffect=a.options.allowDrop?"move":"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect=a.options.allowDrop?"move":"none"),f=q.getData(),f.source||(f.source=a.getDnDSource(b)),q.setData({source:f.source,sourceCtrl:f.sourceCtrl,
target:null,dropPos:-1}),f={event:b,sourceCtrl:f.sourceCtrl?f.sourceCtrl.getGridName():"",dragRow:f.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)},0==a.callDragOver(f))b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark();else{f=a.getMousePos(b);b=f.y+16;var f=f.x+20,t=a.getDropMarkWindow();t.empty();t.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+
(c.name?c.name:"Grid")+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:f});a.dropMark(!0)}}});e.bind("drop",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();if(a.isDropInRange(b)){var f=!0;b.dataTransfer?f="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(f="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(f&&(f=q.getData(),f.source||(f.source=a.getDnDSource(b)),f.source)){var t={event:b,sourceCtrl:f.sourceCtrl?
f.sourceCtrl.getGridName():"",dragRow:f.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:a.getMousePos(b)};!1!==a.callDragDrop(t)&&(a.drop(f),c.$$phase||c.$apply())}}q.clearData()}b.stopPropagation()});e.bind("dragleave",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();var f=q.getData();f.source||(f.source=a.getDnDSource(b));b={event:b,sourceCtrl:f.sourceCtrl?f.sourceCtrl.getGridName():"",dragRow:f.source,targetCtrl:a.getGridName(),
targetRow:f.target,mousePos:a.getMousePos(b)};a.callDragLeave(b);a.cancelScrollTimer()}});e.bind("dragend",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),q.getData().source||q.clearData(),a.dragDropStatus(!1))});e.bind("mouseleave",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),a.hoverColumn=null,a.hoverRow=null,a.hoverCell=null)});this.containsMousePos=function(a,f){return q.hitTest(a,f,{left:0,top:0,right:e[0].clientWidth,bottom:e[0].clientHeight})};this.isPopupActive=
function(){return!1};var Ya=function(b,f){var c=a.options.rowFields;if(!b[c.cells]){b[c.cells]=[];var e={};e[a.options.cellFields.text]=b[f.text];b[c.cells].push(e)}b[c.rows]||(b[c.rows]=[]);b[c.rows].length=0;if(b[f.items]&&0<b[f.items].length)for(e=0;e<b[f.items].length;e++)b[c.rows].push(Ya(b[f.items][e],f));return b},Za=function(b,f){var c=!1;f.sourceCtrl&&(c=f.sourceCollection.removeAt(b,-1,null,f.sourceCtrl.objIsRemoved));c&&("item"==b.type&&(b=Ya(b,f.sourceCtrl.options.dataFields)),1===f.dropPos||
2===f.dropPos?1===f.dropPos?a.rowsObj.insertByRef(b,f.target,!1,a.rowIsAdded):a.rowsObj.insertByRef(b,f.target,!0,a.rowIsAdded):a.rowsObj.insertAt(b,-1,null,a.rowIsAdded))};this.setDropSelection=function(b,f){var c=b;!c&&0<=f&&f<a.currentList.length&&(c=a.currentList[f]);a.clearPrevSelection(c);a.rowSelection(c)};this.drop=function(b){if(b&&b.sourceCtrl){b.sourceCtrl.suppressProcess=!0;a.allowUpdate=!1;b.sourceCtrl.allowUpdate=!1;var f=b.source,c=-1;if(Array.isArray(b.source)){0<b.source.length&&
(c=b.sourceCtrl.getObjCurrentIndex(b.source[b.source.length-1]));for(var e=[],h=0;h<b.source.length;h++){for(var l=!1,k=b.sourceCollection.getParent(b.source[h]);k;){if(b.sourceCtrl.isObjInSelList(k)){l=!0;break}k=b.sourceCollection.getParent(k)}l||e.push(b.source[h])}if(0<e.length)if(f=e[e.length-1],h=b.sourceCtrl.getObjCurrentIndex(e[0]),l=b.sourceCtrl.getObjCurrentIndex(f),h<=l)for(h=0;h<e.length;h++)Za(e[h],b);else for(h=e.length-1;0<=h;h--)Za(e[h],b)}else c=b.sourceCtrl.getObjCurrentIndex(b.source),
Za(b.source,b);b.sourceCtrl!==a?(a.allowUpdate=!0,b.sourceCtrl.allowUpdate=!0,a.updateCurrentLayout(),b.sourceCtrl.updateCurrentLayout()):(a.allowUpdate=!0,a.updateCurrentLayout());b.sourceCtrl.multiSelection(!1);var q=p(function(){b.sourceCtrl!==a&&b.sourceCtrl.setDropSelection(null,c);a.setDropSelection(f);a.updateFocus(a.getObjCurrentIndex(f),0);p.cancel(q)},1);b.sourceCtrl.suppressProcess=!1}};this.isDragAllowed=function(b){return a.options.allowDrag?b&&"row"==b.type&&(b[a.options.rowFields.allowDrag]||
void 0===b[a.options.rowFields.allowDrag])?!0:!1:!1};this.isDropAllowed=function(b,f,c){if((c=a.options.allowDrop)&&b&&f&&(c=a.isRowFixed(f)||"row"!=f.type||!f[a.options.rowFields.allowDrop]&&void 0!==f[a.options.rowFields.allowDrop]?!1:!0))if(Array.isArray(b))for(var t=0;t<b.length;t++){if(b[t][a.options.rowFields.pid]&&f[a.options.rowFields.pid]&&!h.isEqual(b[t][a.options.rowFields.pid],f[a.options.rowFields.pid])){c=!1;break}else if(h.isEqual(b[t][a.options.rowFields.id],f[a.options.rowFields.id])){c=
!1;break}if(!c)break}else b[a.options.rowFields.pid]&&f[a.options.rowFields.pid]&&!h.isEqual(b[a.options.rowFields.pid],f[a.options.rowFields.pid])?c=!1:h.isEqual(b[a.options.rowFields.id],f[a.options.rowFields.id])&&(c=!1);return c};this.getDropMarkWindow=function(){for(var a=kb,f=angular.element(document.body).children(),c=0;c<f.length;c++){var e=angular.element(f[c]);if(e[0].attributes&&e[0].attributes["data-element"]&&"dropmark"===e[0].attributes["data-element"].value){a=e;break}}return a};this.dropMark=
function(b,f){f||(f=a.getDropMarkWindow());if(f){var c="none";this.options.allowDrop&&(c=b?"block":"none");angular.element(f).css("display",c)}};this.updateDropMarkElem=function(a,f){a&&f&&(a.css("top",f.top+"px"),a.css("left",f.left+"px"),a.css("width",f.width+"px"))};c.$on(c.name+"-open-editor",function(b,f){a.openEditor(f)});c.$on(c.name+"-close-editor",function(b,f){a.closeEditor(f)});this.updateEditorSettings=function(b){a.options.editorSettings=b?{activate:h.isFieldAvailable(b.activate,"click")}:
{activate:"click"}};this.allowEvents=!0;this.callAfterEdit=function(a){angular.isDefined(c.events)&&c.events.afterEdit&&c.events.afterEdit({cell:a});c.afterEdit({e:{cell:a}})};this.callAfterLabelEdit=function(a){angular.isDefined(c.events)&&c.events.afterLabelEdit&&c.events.afterLabelEdit({cell:a});c.afterLabelEdit({e:{cell:a}})};this.callAfterSelect=function(a){angular.isDefined(c.events)&&c.events.afterSelect?c.events.afterSelect({object:a}):c.afterSelect({e:{object:a}});angular.isDefined(c.events)&&
c.events.selectionChanged?c.events.selectionChanged({object:a}):c.selectionChanged({e:{object:a}})};this.callBeforeEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeEdit?c.events.beforeEdit({cell:a}):c.beforeEdit({e:{cell:a}})};this.callBeforeLabelEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeLabelEdit?c.events.beforeLabelEdit({cell:a}):c.beforeLabelEdit({e:{cell:a}})};this.callCellValueChanging=function(b,f,t){var e=!0;a.allowEvents&&(e=angular.isDefined(c.events)&&
c.events.cellvalueChanging?c.events.cellvalueChanging({row:b,cell:f,value:t}):c.cellvalueChanging({e:{row:b,cell:f,value:t}}));return e};this.callCellValueChanged=function(b,f,t){a.allowEvents&&(angular.isDefined(c.events)&&c.events.cellvalueChanged?c.events.cellvalueChanged({row:b,cell:f,value:t}):c.cellvalueChanged({e:{row:b,cell:f,value:t}}))};this.callChange=function(){angular.isDefined(c.events)&&c.events.change?c.events.change():c.change()};this.callColumnClick=function(a,f){angular.isDefined(c.events)&&
c.events.columnClick&&c.events.columnClick({column:a,mousePos:f});c.columnClick({e:{column:a,mousePos:f}})};this.callColumnDblClick=function(a,f){angular.isDefined(c.events)&&c.events.columnDblclick&&c.events.columnDblclick({column:a,mousePos:f});c.columnDblclick({e:{column:a,mousePos:f}})};this.callColumnHover=function(a){angular.isDefined(c.events)&&c.events.columnHover&&c.events.columnHover({column:a});c.columnHover({e:{column:a}})};this.callColumnPosChanging=function(a,f){return angular.isDefined(c.events)&&
c.events.columnPoschanging?c.events.columnPoschanging({sourceColumn:a,targetColumn:f}):c.columnPoschanging({e:{sourceColumn:a,targetColumn:f}})};this.callColumnPosChanged=function(a,f){angular.isDefined(c.events)&&c.events.columnPoschanged&&c.events.columnPoschanged({sourceColumn:a,targetColumn:f});c.columnPoschanged({e:{sourceColumn:a,targetColumn:f}})};this.callColumnRightClick=function(a,f){angular.isDefined(c.events)&&c.events.columnRightclick&&c.events.columnRightclick({column:a,mousePos:f});
c.columnRightclick({e:{column:a,mousePos:f}})};this.callColumnSizeChanged=function(a,f){angular.isDefined(c.events)&&c.events.columnSizechanged&&c.events.columnSizechanged({column:a});c.columnSizechanged({e:{column:a}})};this.callDragEnter=function(a){angular.isDefined(c.events)&&c.events.dragEnter?c.events.dragEnter({event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragEnter({e:{event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,
targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callDragOver=function(b){var f=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragOver?c.events.dragOver({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:f,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):c.dragOver({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,
targetCell:f,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragDrop=function(b){var f=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragDrop?c.events.dragDrop({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:f,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):c.dragDrop({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,
targetRow:b.targetRow,targetCell:f,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragLeave=function(a){angular.isDefined(c.events)&&c.events.dragLeave?c.events.dragLeave({event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragLeave({e:{event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callCellClick=function(a,
f,t,e){angular.isDefined(c.events)&&c.events.cellClick&&c.events.cellClick({event:a,row:f,cell:t,mousePos:e});c.cellClick({e:{event:a,row:f,cell:t,mousePos:e}})};this.callCellHover=function(a,f){angular.isDefined(c.events)&&c.events.cellHover?c.events.cellHover({event:a,cell:f}):c.cellHover({e:{event:a,cell:f}})};this.callEnabledChanged=function(a){angular.isDefined(c.events)&&c.events.enabledChanged?c.events.enabledChanged({enabled:a}):c.enabledChanged({e:{enabled:a}})};this.callRowClick=function(a,
f,t){angular.isDefined(c.events)&&c.events.rowClick?c.events.rowClick({event:a,row:f,mousePos:t}):c.rowClick({e:{event:a,row:f,mousePos:t}})};this.callRowDblClick=function(a,f){return angular.isDefined(c.events)&&c.events.rowDblClick?c.events.rowDblClick({row:a,mousePos:f}):c.rowDblclick({e:{row:a,mousePos:f}})};this.callRowHover=function(a,f){angular.isDefined(c.events)&&c.events.rowHover?c.events.rowHover({event:a,row:f}):c.rowHover({e:{event:a,row:f}})};this.callRowRightClick=function(a,f){angular.isDefined(c.events)&&
c.events.rowRightClick&&c.events.rowRightClick({row:a,mousePos:f});c.rowRightclick({e:{row:a,mousePos:f}})};this.callKeyDown=function(a,f){angular.isDefined(c.events)&&c.events.keyDown?c.events.keyDown({event:a,row:f}):c.keyDown({e:{event:a,row:f}})};this.callKeyPress=function(a,f){angular.isDefined(c.events)&&c.events.keyPress?c.events.keyPress({event:a,row:f}):c.keyPress({e:{event:a,row:f}})};this.callKeyUp=function(a,f){angular.isDefined(c.events)&&c.events.keyUp?c.events.keyUp({event:a,row:f}):
c.keyUp({e:{event:a,row:f}})};this.callScrollPosChanged=function(){angular.isDefined(c.events)&&c.events.scrollPosChanged?c.events.scrollPosChanged({scrollPos:a.scrollPos}):c.scrollposChanged({e:{scrollPos:a.scrollPos}})};e.bind("click",function(b){a.options.enabled&&1===b.which&&a.callRowClick(b,null,a.getMousePos(b))});e.bind("dblclick",function(b){b.preventDefault();a.options.enabled&&1===b.which&&a.callRowDblClick(null,a.getMousePos(b));b.stopPropagation()});e.bind("mousedown",function(b){a.options.enabled&&
3===b.which&&a.callRowRightClick(null,a.getMousePos(b));a.removeDropDownList();a.closeFilterWindow();a.closeEditor();b.stopPropagation()});this.expandList=[];this.expandIndentList=[];this.suppressWatchScrollVisibility=!1;var Yb=function(b,f,c){b.type||(b.type="row");b[a.options.rowFields.id]||(b[a.options.rowFields.id]=h.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var e=b[a.options.rowFields.cells];if(e&&0<e.length){c=G(b);for(var t,l,k,p=0;p<a.columnList.length;p++){k=a.columnList[p];t=
k[a.options.columnFields.id];l=k[a.options.columnFields.editorType];k=k[a.options.columnFields.editorSettings];var q=p;t&&(q=a.getCellIndexById(e,p,t));0<=q&&q<e.length&&(e[q].type="cell",a.setDefaultCellValue(e[q],l,k))}}c&&(a.expandList.push(b),a.expandIndentList.push(f));return c},H=function(b,f,c){if(!b[a.options.rowFields.rows])return c=Yb(b,f+ea,c);if(c=Yb(b,f+ea,c)){var e=0,t;if("group"==b.type&&a.isRowExpanded(b)){var h=b[a.options.rowFields.rows];if(h){a.applySorting(h);for(var l=0;l<h.length;l++)(t=
H(h[l],f+ea,b[a.options.rowFields.id]))&&e++}}!a.isThereChildRows&&(0<e||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))&&(a.isThereChildRows=!0)}return c};this.expand=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(!a.isRowExpanded(b)){var f=a.getRowCurrentIndex(b);if(b=a.getList(b)){a.applySorting(b);for(var c=0;c<b.length;c++)H(b[c],a.indentList[f],null)}if(0<a.expandList.length){a.allowEvents=!1;f++;Array.prototype.splice.apply(a.currentList,
[f,0].concat(a.expandList));Array.prototype.splice.apply(a.indentList,[f,0].concat(a.expandIndentList));a.getRowScope()?a.updateView():a.updateLayout();var e=p(function(){a.suppressWatchScrollVisibility=!0;a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();a.allowEvents=!0;var b=p(function(){a.suppressWatchScrollVisibility=!1;p.cancel(b)},10);p.cancel(e)},1)}}};this.collapse=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(a.isRowExpanded(b)){var f=
null,c=!1,e=b,h=-1,l=a.getRowCurrentIndex(b);for(b=a.getParent(b);b&&!c;){f=a.getList(b);for(h=f.indexOf(e)+1;!c&&h<f.length;)e=f[h],0<a.getRowCurrentIndex(e)&&(c=!0),h++;c||(e=b);b=a.getParent(b)}if(!c&&e)for(f=a.getList(),a.options.grouping.enabled&&0<a.groups.length&&(f=a.groupList),h=f.indexOf(e)+1;h<f.length;)if(e=f[h],0<a.getRowCurrentIndex(e)){c=!0;break}else h++;l++;f=a.currentList.length-l;c&&(f=a.getRowCurrentIndex(e)-l);if(0<f){a.currentList.splice(l,f);a.indentList.splice(l,f);a.getRowScope()?
a.updateView():a.updateLayout();var k=p(function(){a.suppressWatchScrollVisibility=!0;a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();a.allowEvents=!0;var b=p(function(){a.suppressWatchScrollVisibility=!1;p.cancel(b)},10);p.cancel(k)},1)}}};this.toggle=function(b,f){if(b){if((b[a.options.rowFields.hasChildren]||b[a.options.rowFields.rows]&&0!=b[a.options.rowFields.rows].length)&&!(f&&0!=b[a.options.rowFields.expanded]||!1===f&&0==b[a.options.rowFields.expanded])){a.updateType=
"view";var c=void 0!==f?f:!1!==b[a.options.rowFields.expanded]?!0:!1,c=void 0!=f?f:!c;c!=b[a.options.rowFields.expanded]&&(0!=c?a.expand(b):a.collapse(b),b[a.options.rowFields.expanded]=c)}}else{for(var c=a.getFullList(),e=0;e<c.length;e++)c[e][a.options.rowFields.expanded]=f;a.updateCurrentLayout()}};this.isFilteringAllowed=function(b){return b&&b[a.options.columnFields.allowFilter]};c.$on(c.name+"-filter",function(b,f,c){a.filter(f,c)});this.filter=function(b,c){if(b)b[a.options.columnFields.filterParams]=
c;else for(var f=0;f<a.columnList.length;f++)a.columnList[f][a.options.columnFields.filterParams]=null;a.closeFilterWindow();a.updateCurrentLayout();a.callChange()};this.callGotFocus=function(a,f,e,h,l){angular.isDefined(c.events)&&c.events.gotFocus?c.events.gotFocus({event:a,row:f,cell:e,edit:void 0!=h?!0:!1,editValue:l}):c.gotFocus({e:{event:a,row:f,cell:e,edit:void 0!=h?!0:!1,editValue:l}})};this.callLostFocus=function(a,f,e,h,l){angular.isDefined(c.events)&&c.events.lostFocus?c.events.lostFocus({event:a,
row:f,cell:e,edit:void 0!=h?!0:!1,editValue:l}):c.lostFocus({e:{event:a,row:f,cell:e,edit:void 0!=h?!0:!1,editValue:l}})};this.getTabIndex=function(){return e[0].attributes&&e[0].attributes.tabindex?e[0].attributes.tabindex.value:""};this.updateFocus=function(b,c){if(1==a.options.allowFocus)var f=p(function(){if(a.isRowIndexInRange(b)){var t="none";0<=c&&c<a.columnList.length&&(t=a.columnList[c][a.options.columnFields.fixed]);var h=a.getElemFromRow(a.currentList[b],t);h&&(1==a.options.allowCellFocus&&
0<=c&&c<a.columnList.length?(t=a.getElemFromCell(b,c,t))&&t[0].focus():h[0].focus())}else e[0].focus();p.cancel(f)},5)};c.$on(c.name+"-focus",function(b,c){if(c){var f,e;switch(c.type){case "group":f=a.getRowCurrentIndex(c);a.updateFocus(f);break;case "row":f=a.getRowCurrentIndex(c);a.updateFocus(f);break;case "cell":f=a.getCellRowIndex(c),e=a.getCellColumnIndex(c),a.updateFocus(f,e)}}else a.updateFocus()});var Gb=!1;this.getCell=function(b,c){if(0<=b&&b<a.currentList.length){var f=a.currentList[b],
e=a.getColumnRealIndex(c);0<=c&&c<a.columnList.length&&(e=a.getCellIndexById(f[a.options.rowFields.cells],c,a.columnList[c].id));if(f[a.options.rowFields.cells]&&0<=e&&e<f[a.options.rowFields.cells].length)return f[a.options.rowFields.cells][e]}return null};this.getCellObject=function(b,c){if(0<=b&&b<a.currentList.length){var f=a.currentList[b],e=a.getColumnRealIndex(c);0<=c&&c<a.columnList.length&&(e=a.getCellIndexById(f[a.options.rowFields.cells],c,a.columnList[c].id));if(f[a.options.rowFields.cells]&&
0<=e&&e<f[a.options.rowFields.cells].length)return f[a.options.rowFields.cells][e]}return null};this.getCellIndexById=function(b,c,e){var f=-1;if(b){c=a.getColumnRealIndex(c);for(var t=0;t<b.length;t++)if(void 0==b[t][a.options.cellFields.cid]){f=c;break}else if(b[t][a.options.cellFields.cid]==e){f=t;break}}return f};this.getCellIndexFromRow=function(b,c){var f=-1;if(b&&c&&c[a.options.rowFields.cells])for(var e=0;e<c[a.options.rowFields.cells].length;e++)if(c[a.options.rowFields.cells][e]==b){f=e;
break}return f};this.getCellColumnIndex=function(b){if(b)if(b[a.options.cellFields.cid]){if(b=a.getColumnById(b[a.options.cellFields.cid]))return a.getColumnCurrentIndex(b)}else return a.getCellColumnIndexFromRow(b);return-1};this.getCellColumnIndexFromRow=function(b){if(b&&b[a.options.cellFields.rid]){var c=a.findRowById(b[a.options.cellFields.rid]);if(c&&(c=c[a.options.rowFields.cells])&&0<c.length)return c.indexOf(b)}return-1};this.getCellRowIndex=function(b){return b&&b[a.options.cellFields.rid]&&
(b=a.findRowById(b[a.options.cellFields.rid]))?a.getRowCurrentIndex(b):-1};this.getColumnById=function(b){for(var c=null,e=0;e<a.columnList.length;e++)if(a.columnList[e][a.options.columnFields.id]==b){c=a.columnList[e];break}return c};this.getColumnObject=function(b){return 0<=b&&b<a.columnList.length?a.columnList[b]:null};this.getRowObject=function(b){return 0<=b&&b<a.currentList.length?a.currentList[b]:null};this.isRowExpanded=function(b){return b?b[a.options.rowFields.expanded]||void 0===b[a.options.rowFields.expanded]?
!0:!1:!0};this.getContentElement=function(a,c){var b=null;c||(c="cell-content");if(a&&0<a.children().length)for(var f=a.children(),e=0;e<f.length;e++){var h=angular.element(f.eq(e));if(h[0].attributes&&h[0].attributes["data-element"]&&h[0].attributes["data-element"].value==c){b=h;break}}return b};this.getElement=function(a,c){var b=null;c||(c="cell-content");if(a&&0<a.children().length){a=a.children().eq(0);for(var f=a.children(),e=0;e<f.length;e++){var h=angular.element(f.eq(e));if(h[0].attributes&&
h[0].attributes["data-element"]&&h[0].attributes["data-element"].value==c){b=h;break}}}return b};this.getChildElement=function(a,c){var b=null;c||(c="content");if(a&&0<a.children().length)for(var f=a.children(),e=0;e<f.length;e++){var h=angular.element(f.eq(e));if(h[0].attributes&&h[0].attributes["data-element"]&&h[0].attributes["data-element"].value==c){b=h;break}}return b};this.getElemFromColumn=function(b,c,e){var f=null;if(b){b=a.getColumnCurrentIndex(b);var h=a.getHeaderElem(c);"footer"==e&&
(h=a.getFooterElem(c));if(h&&(c=h.find("td"))&&0<c.length)for(e=0;e<c.length;e++)if(h=angular.element(c[e]),h[0].attributes["data-index"]&&h[0].attributes["data-index"].value.toString()===b.toString()){f=h;break}}return f};this.getElemFromRow=function(b,c,e){var f=null;if(b&&(b=a.getRowCurrentIndex(b,e),(c=a.getRowElems(c,e))&&0<c.length))for(e=0;e<c.length;e++){var h=angular.element(c[e]);if(h[0].attributes["data-index"]&&h[0].attributes["data-index"].value.toString()===b.toString()){f=h;break}}return f};
this.getElemFromCell=function(b,c,e,h){var f=null;if(a.isRowIndexInRange(b,h)){switch(h){case "top":b=a.getElemFromRow(a.currentTopList[b],e,h);break;case "bottom":b=a.getElemFromRow(a.currentBottomList[b],e,h);break;default:b=a.getElemFromRow(a.currentList[b],e,h)}if(b&&(b=b.find("td"))&&0<b.length)for(e=0;e<b.length;e++)if(h=angular.element(b[e]),h[0].attributes["data-index"]&&h[0].attributes["data-index"].value.toString()===c.toString()){f=h;break}}return f};this.getElemFromColumnCell=function(b,
c,e){var f=null;if((c=e?a.getFooterElem(c):a.getHeaderElem(c))&&(c=c.find("td"))&&0<c.length)for(e=0;e<c.length;e++){var h=angular.element(c[e]);if(h[0].attributes["data-index"]&&h[0].attributes["data-index"].value.toString()===b.toString()){f=h;break}}return f};this.getIndent=function(b){var c=0;if(b)for(parent=a.rowsObj.getParent(b);parent;)c+=a.options.indent,parent=a.rowsObj.getParent(parent);return c};this.getObjState=function(b){if(b)switch(b.type){case "column":if(0==a.options.enabled)return"disabled";
if(1==b[a.options.columnFields.selected])return"selected";if(b==a.hoverColumn)return"hovered";break;case "group":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";if(1==b.selected)return"selected";if(b==a.hoverRow)return"hovered";break;case "row":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";if(1==b[a.options.rowFields.selected])return"selected";if(b==a.hoverRow)return"hovered";break;case "cell":if(0==a.options.enabled||0==b[a.options.cellFields.enabled])return"disabled";
if(1==b[a.options.cellFields.selected])return"selected";if(b==a.hoverCell)return"hovered"}return"normal"};this.getColumnAt=function(b,c){if(void 0==b||void 0==c)return a.hoverColumn;var f,e,l=null;f="left";for(var k=0;!l&&3>k;){if(f=a.getHeaderElem(f)){var p=f.find("td");if(p&&0<p.length)for(var q=0;q<p.length;q++)if(f=angular.element(p[q]),e=h.getPageRect(f),h.checkHit(b,c,e)){l=a.getColumnFromElem(f);break}}k++;f=1==k?"right":"none"}return l};this.getCellAt=function(b,c){var f=null,e=a.getRowAt(b,
c);if(e){var l,k,p=a.getElemFromRow(e).find("td");if(p&&0<p.length)for(var q=0;q<p.length&&!(l=angular.element(p[q]),k=h.getPageRect(l),h.checkHit(b,c,k)&&(f=a.getRowCurrentIndex(e),l=a.getIndexFromElem(l),f=a.getCellObject(f,l)));q++);}return f};this.getRowAt=function(b,c){var f,e,l=null;f="none";for(var k=0;!l&&3>k;){var p=a.getRowElems(f);if(p&&0<p.length)for(var q=0;q<p.length;q++)if(f=angular.element(p[q]),e=h.getPageRect(f),h.checkHit(b,c,e)){l=a.getRowFromElem(f);break}k++;f=1==k?"left":"right"}return l};
this.getRowCurrentIndex=function(b){if(b){switch(b[a.options.rowFields.fixed]){case "top":return a.currentTopList?a.currentTopList.indexOf(b):-1;case "bottom":return a.currentBottomList?a.currentBottomList.indexOf(b):-1}return a.currentList?a.currentList.indexOf(b):-1}return-1};this.getObjCurrentIndex=function(b){return a.getRowCurrentIndex(b)};this.getRowFromChildElem=function(b){if(b&&(b=angular.element(b))){for(b=b.parent();b&&b[0].tagName&&"tr"!==b[0].tagName.toLowerCase();)b=b.parent();return b?
a.getRowFromElem(b):null}return null};this.getColumnCurrentIndex=function(b){return b&&a.columnList?a.columnList.indexOf(b):-1};this.getFullColumnList=function(){return a.columnsObj.getList()};this.getColumnRealIndex=function(b){var c=a.columnsObj.getList();return 0<=b&&b<c.length&&b<a.columnList.length?c.indexOf(a.columnList[b]):-1};this.getColumnFromChildElem=function(b){return b?a.getColumnFromElem(b):null};this.getColumnFromElem=function(b){return b&&(b=angular.element(b))&&b[0].attributes["data-index"]&&
(b=b[0].attributes["data-index"].value,0<=b&&b<a.columnList.length)?a.columnList[b]:null};this.getIndexFromElem=function(a){return a&&(a=angular.element(a))&&a[0].attributes["data-index"]?a[0].attributes["data-index"].value:-1};this.getRowFromElem=function(b){if(b&&(b=angular.element(b))&&b[0].attributes["data-index"]){var c=b[0].attributes["data-index"].value,e="none";b&&b[0].attributes["data-fixed"]&&(e=b[0].attributes["data-fixed"].value);switch(e){case "top":if(a.isRowIndexInRange(c,e))return a.currentTopList[c];
break;case "bottom":if(a.isRowIndexInRange(c,e))return a.currentBottomList[c];break;default:if(a.isRowIndexInRange(c))return a.currentList[c]}}};this.isRowIndexInRange=function(b,c){switch(c){case "top":return 0<=b&&b<a.currentTopList.length;case "bottom":return 0<=b&&b<a.currentBottomList.length}return 0<=b&&b<a.currentList.length};this.isColIndexInRange=function(b){return 0<=b&&b<a.columnList.length};this.isRowEnabled=function(b){return b&&1==a.options.enabled&&h.isEnabled(b[a.options.rowFields.enabled])};
this.mouseButtonStatus=function(a){Gb=a};c.$on(c.name+"-ensure-visible",function(b,c){a.ensureVisible(c)});c.$on(c.name+"-find-row-by-id",function(b,c){k.setTempData(a.findRowById(c))});c.$on(c.name+"-find-row-by-text",function(b,c){k.setTempData(a.findRowByText(c))});c.$on(c.name+"-get-list",function(b,c){k.setTempData(a.getList(c))});c.$on(c.name+"-get-top-row",function(b){k.setTempData(a.getTopRow())});c.$on(c.name+"-set-top-row",function(b,c){a.ensureVisible(c)});this.ensureVisible=function(b,
c){if(b){for(var f=[],e=a.getParent(b);e;)f.push(e),e=a.getParent(e);for(e=f.length-1;0<=e;e--)f[e][a.options.rowFields.expanded]=!0;a.updateCurrentLayout();var h=p(function(){c=void 0!=c?c:"center";a.scrollTo(b,c);p.cancel(h)},100)}};this.findRowById=function(b){return a.rowsObj.findObjectById(b)};this.findRowByText=function(b){return a.rowsObj.findObjectByText(b)};this.getLevel=function(a){var b=0;for(a=this.getParent(a);a;)b++,a=this.getParent(a);return b};this.findParent=function(b,c){var f=null;
if(b&&c)for(var e=0;!f&&e<c.length;)f=c[e][a.options.rowFields.id]&&b[a.options.rowFields.pid]&&c[e][a.options.rowFields.id].toString()===b[a.options.rowFields.pid].toString()?c[e]:a.findParent(b,c[e][a.options.rowFields.rows]),e++;return f};this.getParent=function(b){return b?a.findParent(b,a.groupList):null};this.getList=function(b){return a.rowsObj.getList(b)};this.getFirstRow=function(){for(var b=null,c=0;c<a.currentList.length;c++)if(h.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=
a.currentList[c];break}return b};this.getPrevRow=function(b){var c=null;if(0<=b&&b<a.currentList.length)for(--b;0<=b;b--)if(h.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getNextRow=function(b){var c=null;for(b+=1;b<a.currentList.length;b++)if(h.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getLastRow=function(){for(var b=null,c=a.currentList.length-1;0<=c;c--)if(h.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=
a.currentList[c];break}return b};this.updateSelectionStatus=function(b){switch(b){case "shift":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}break;case "ctrl":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}}};e.bind("keydown",function(b){if(a.options.enabled)switch(b.keyCode){case 16:a.updateSelectionStatus("shift");
break;case 17:a.updateSelectionStatus("ctrl");break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}});this.allowUpdate=!0;this.updateType="all";this.suspendLayout=function(b){a.allowUpdate=!1};this.resumeLayout=function(b){a.allowUpdate=!0;b?a.updateCurrentLayout():a.updateLayout()};c.$on(c.name+"-refresh",function(b,c,e){a.refresh(c,e)});c.$on(c.name+"-resume-layout",function(b,c){a.resumeLayout(c)});c.$on(c.name+"-suspend-layout",function(b,
c){a.suspendLayout(c)});c.$on(c.name+"-update-layout",function(b,c){c?a.updateCurrentLayout():a.updateLayout()});c.$on(c.name+"-update-view",function(b){a.updateView()});c.$on(c.name+"-begin-load",function(b,c){a.beginLoad(c)});c.$on(c.name+"-end-load",function(b){a.endLoad()});this.callLoadComplete=function(){angular.isDefined(c.events)&&c.events.loadComplete?c.events.loadComplete():c.loadComplete()};this.callUpdateComplete=function(){angular.isDefined(c.events)&&c.events.updateComplete?c.events.updateComplete():
c.updateComplete()};c.$on(c.name+"-get-current-page",function(b){k.setTempData(a.currentPageNumber)});c.$on(c.name+"-set-current-page",function(b,c){a.setCurrentPage(c)});c.$on(c.name+"-first-page",function(b){a.firstPage()});c.$on(c.name+"-last-page",function(b){a.lastPage()});c.$on(c.name+"-next-page",function(b){a.nextPage()});c.$on(c.name+"-prev-page",function(b){a.prevPage()});this.setCurrentPage=function(b){a.currentPageNumber!=b&&1<=b&&b<=a.pageList.length&&(a.currentPageNumber=b,a.updateCurrentLayout())};
this.firstPage=function(){1!=a.currentPageNumber&&(a.currentPageNumber=1,a.updateCurrentLayout())};this.lastPage=function(){a.currentPageNumber!=a.pageList.length&&(a.currentPageNumber=a.pageList.length,a.updateCurrentLayout())};this.nextPage=function(){a.currentPageNumber<a.pageList.length&&(a.currentPageNumber++,a.updateCurrentLayout())};this.prevPage=function(){1<a.currentPageNumber&&(a.currentPageNumber--,a.updateCurrentLayout())};c.$on(c.name+"-get-max-scroll-pos",function(b){k.setTempData(a.getMaxScrollPos())});
c.$on(c.name+"-get-scroll-pos",function(b){k.setTempData(a.getScrollPos())});c.$on(c.name+"-set-scroll-pos",function(b,c){a.setScrollPos(c)});c.$on(c.name+"-scroll-to",function(b,c,e){a.scrollTo(c,e)});var Ha=!1;this.shiftFirstSelectedRow=null;this.multiSelection=function(a){if(void 0!=a)Ha=a;else return Ha};this.columnSelection=function(b,f){if(b){var e=!0;a.options.selectedColumn&&(e=!h.isEqual(a.options.selectedColumn[a.options.columnFields.id],b[a.options.columnFields.id]));var l;l=angular.isDefined(c.events)&&
c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});e&&!1!==l&&(a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1,a.refresh(a.options.selectedColumn)),a.options.selectedColumn=b,b[a.options.columnFields.selected]=!0,angular.isDefined(c.selectedColumn)&&(c.selectedColumn=b),a.refresh(a.options.selectedColumn),a.callAfterSelect(b))}else return a.options.selectedColumn};this.isRowSelected=function(a){return h.isSelected(a)};this.clearPrevSelection=
function(b){for(var c=0;c<a.options.selectedRows.length;c++)b&&!h.isEqual(a.options.selectedRows[c][a.options.rowFields.id],b[a.options.rowFields.id])?a.options.selectedRows[c][a.options.rowFields.selected]=!1:b||(a.options.selectedRows[c][a.options.rowFields.selected]=!1);a.options.selectedRows.length=0;b&&0!=b[a.options.rowFields.enabled]&&a.options.selectedRows.push(b);a.refreshRows()};this.markSelColumn=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b])};this.rowSelection=
function(b,f,e,l,k){if(b){if("none"!=a.options.selectionMode)if(a.isRowEnabled(b)){var p=a.rowSelection(),q=!0;p&&(q=!h.isEqual(p[a.options.rowFields.id],b[a.options.rowFields.id]));var t=!0,t=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});if(!1!==t)if(e=f||e||l?!0:!1,q){q=!0;"multi-extended"==a.options.selectionMode&&(q=!a.isObjInSelList(b)||!e||f);q&&("one"==a.options.selectionMode?a.clearPrevSelection():Gb&&f?a.clearPrevSelection():
Ha||e||"multi-simple"===a.options.selectionMode||a.clearPrevSelection());a.options.selectedRow=b;if(Gb&&f&&"one"!=a.options.selectionMode){if(a.shiftFirstSelectedRow||(a.shiftFirstSelectedRow=p),f=a.getRowCurrentIndex(a.shiftFirstSelectedRow),k=a.getRowCurrentIndex(b),f>k&&(p=f,f=k,k=p),a.isRowIndexInRange(f)&&a.isRowIndexInRange(k))for(;f<=k;f++)a.currentList[f][a.options.rowFields.selected]=!0,a.options.selectedRows.push(a.currentList[f])}else Gb&&(Ha||e||"multi-simple"===a.options.selectionMode)?
(f=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],b[a.options.rowFields.selected]=!f,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b})):(b[a.options.rowFields.selected]=!0,a.isObjInSelList(b)||a.options.selectedRows.push(b)),a.shiftFirstSelectedRow=null;angular.isDefined(c.selectedRow)&&(c.selectedRow=b);a.callAfterSelect(b);
a.refresh(null,null,!0)}else Ha||e||"multi-simple"===a.options.selectionMode?(f=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],k&&"undefined"!==k&&(f=k),b[a.options.rowFields.selected]=!f,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b}),a.shiftFirstSelectedRow=null,a.callAfterSelect(b),a.refresh(null,null,!0)):Ha||
e||"multi-simple"===a.options.selectionMode||(e||1!=a.options.selectedRows.length&&a.isObjInSelList(b)||a.clearPrevSelection(b),a.shiftFirstSelectedRow=null)}else a.clearPrevSelection()}else return a.options.selectedRow};this.updateSelection=function(b,c,e){b=b&&(b.shiftKey||b.ctrlKey||b.metaKey)?!0:!1;"multi-extended"==a.options.selectionMode&&0<a.options.selectedRows.length&&!e&&!Ha&&!b&&(a.clearPrevSelection(),c[a.options.rowFields.selected]=!0,a.options.selectedRows.push(c),a.callAfterSelect(c),
a.refresh(null,null,!0))};this.isObjInSelList=function(b){var c=!1,e=a.options.selectedRows;if(b&&e)for(var l=0;l<e.length;l++)if(h.isEqual(e[l][a.options.rowFields.id],b[a.options.rowFields.id])){c=!0;break}return c};c.$on(c.name+"-clear-selection",function(b){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.clearPrevSelection();a.options.selectedRow=null});c.$on(c.name+"-get-hover-column",function(b,c){a.hoverColumn?k.setTempData(a.hoverColumn):
c&&k.setTempData(a.getColumnAt({x:c.x,y:c.y}))});c.$on(c.name+"-get-selected-column",function(b){k.setTempData(a.columnSelection())});c.$on(c.name+"-set-selected-column",function(b,c){a.columnSelection(c)});c.$on(c.name+"-get-selected-row",function(b){k.setTempData(a.rowSelection())});c.$on(c.name+"-set-selected-row",function(b,c){var f=p(function(){a.rowSelection(c);p.cancel(f)},1)});c.$on(c.name+"-get-selected-rows",function(b){k.setTempData(a.options.selectedRows)});c.$on(c.name+"-set-selected-rows",
function(b,c){c&&Array.isArray(c)&&p(function(){for(var b=a.options.selectedRows.length=0;b<c.length;b++)c[b][a.options.rowFields.selected]=!0,a.options.selectedRows.push(c[b]);0<c.length?(a.options.selectedRow=c[c.length-1],a.callAfterSelect(a.options.selectedRow)):a.options.selectedRow=null;a.refresh(null,null,!0)},1)});c.$on(c.name+"-move-column",function(b,c,e){a.moveColumn(c,e)});c.$on(c.name+"-move-row",function(b,c,e,h,l){a.moveRow(c,e,h,l)});c.$watch("options",function(b,c){b!==c&&(a.updateOptions(b),
a.updateLayout())},!0);c.$watch("allowCellFocus",function(b,c){b!==c&&(a.options.allowCellFocus=b)});c.$watch("allowColumnReorder",function(b,c){b!==c&&(a.options.allowColumnReorder=b)});c.$watch("allowFilter",function(b,c){b!==c&&(a.options.allowFilter=b)});c.$watch("allowFocus",function(b,c){b!==c&&(a.options.allowFocus=b)});c.$watch("allowDrag",function(b,c){b!==c&&(a.options.allowDrag=b,a.updateView())});c.$watch("allowDrop",function(b,c){b!==c&&(a.options.allowDrop=b,a.updateView())});c.$watch("autoExpand",
function(b,c){b!==c&&(a.options.autoExpand=b)});c.$watch("autoUpdate",function(b,c){b!==c&&(a.options.autoUpdate=b,a.updateLayout())});c.$watch("controlStyle",function(b,c){b!==c&&a.updateControlStyle(b)});c.$watch("displayMode",function(b,c){b!==c&&(a.options.displayMode=b,a.updateLayout())});c.$watch("editorSettings",function(b,c){b!==c&&a.updateEditorSettings(b)});c.$watch("enabled",function(b,c){b!==c&&(a.options.enabled=b,a.updateView(),a.options.grouping.enabled&&a.updateGroupPanel(),a.options.paging.enabled&&
a.options.paging.showControlPanel&&a.updatePaginationPanel(),a.callEnabledChanged(b))});c.$watch("expandingColumnIndex",function(b,c){b!==c&&(a.options.expandColIndex=b)});c.$watch("fields",function(b,c){b!==c&&(a.updateDataFields(b),a.UpdateData())});c.$watch("fillSpace",function(b,c){b!==c&&(a.options.fillSpace=b)});c.$watch("gridLines",function(b,c){b!==c&&(a.options.gridLines=b,a.updateView())});c.$watch("grouping",function(b,c){b!==c&&(a.updateGrouping(b),a.updateLayout())},!0);c.$watch("hoverSelection",
function(b,c){b!==c&&(a.options.hoverSelection=b)});c.$watch("indent",function(b,c){b!==c&&(a.options.indent=b,a.updateLayout())});c.$watch("mouseWheelSpeed",function(b,c){b!==c&&(a.options.mouseWheelSpeed=b)});c.$watch("rowHeight",function(b,c){b!==c&&(a.options.rowHeight=b,a.updateLayout())});c.$watch("rowIcon",function(b,c){b!==c&&(a.options.rowIcon=b,a.updateLayout())});c.$watch("labelEdit",function(b,c){b!==c&&(a.options.labelEdit=b)});c.$watch("paging",function(b,c){b!==c&&(a.updatePaging(b),
a.resetPageNumber(),a.updateCurrentLayout())},!0);c.$watch("pathSeparator",function(b,c){b!==c&&(a.options.pathSeparator=b)});c.$watch("rtl",function(b,c){b!==c&&(a.options.rtl=b,a.updateLayout())});a.resetSelection=function(){switch(a.options.selectionMode){case "none":a.clearPrevSelection();break;default:a.clearPrevSelection(a.rowSelection())}};c.$watch("selectionMode",function(b,c){b!==c&&(a.options.selectionMode=b,a.resetSelection())});c.$watch("showFooter",function(b,c){b!==c&&(a.options.showFooter=
b,a.updateLayout())});c.$watch("showHeader",function(b,c){b!==c&&(a.options.showHeader=b,a.updateLayout())});c.$watch("showIcons",function(b,c){b!==c&&(a.options.showIcons=b,a.updateLayout())});c.$watch("selectedRow",function(b,c){b!==c&&(c&&(c[a.options.rowFields.selected]=!1),a.options.selectedRow=b,a.callAfterSelect(b))});this.sortComparer=this.sortColumn=null;c.$watch("sorting",function(b,c){b!==c&&(a.options.sorting=b)});c.$on(c.name+"-sort",function(b,c,e,h){a.sort(c,e,h)});this.sort=function(b,
c,e){a.sortColumn=b;a.sortComparer=e;if("ascending"==c||"descending"==c||"none"==c)a.options.sorting=c;a.updateCurrentLayout();a.callChange()};this.getCellIndexInCollection=function(b,c,e){var f=-1;if(b)for(var h=0;h<b.length;h++)if(void 0==b[h][a.options.cellFields.cid]){f=c;break}else if(b[h][a.options.cellFields.cid]==e){f=h;break}return f};this.isSortingAllowed=function(){return"ascending"==a.options.sorting||"descending"==a.options.sorting};this.applySorting=function(b){if(b&&(!a.sortColumn||
0!=a.sortColumn[a.options.columnFields.visible])){var c=a.getColumnCurrentIndex(a.sortColumn),e=0<=c?c:a.options.expandColIndex;if(e<a.columnList.length){var l=a.columnList[e][a.options.columnFields.id];a.sortColumn&&a.sortColumn[a.options.columnFields.comparer]?b.sort(a.sortColumn[a.options.columnFields.comparer]):a.sortComparer?b.sort(a.sortComparer):a.isSortingAllowed()&&b.sort(function(b,c){var f=null,k=null;if(b[a.options.rowFields.cells]){var p=a.getCellIndexInCollection(b[a.options.rowFields.cells],
e,l);0<=p&&((f=b[a.options.rowFields.cells][p][a.options.cellFields.value])||(f=b[a.options.rowFields.cells][p][a.options.cellFields.text]),h.isObject(f)&&(f=f.value?f.value:f.text))}c[a.options.rowFields.cells]&&(p=a.getCellIndexInCollection(c[a.options.rowFields.cells],e,l),0<=p&&((k=c[a.options.rowFields.cells][p][a.options.cellFields.value])||(k=c[a.options.rowFields.cells][p][a.options.cellFields.text]),h.isObject(k)&&(k=k.value?k.value:k.text)));f=void 0!=f?f:null;k=void 0!=k?k:null;switch(a.options.sorting){case "ascending":if(f<
k)return-1;if(f>k)return 1;break;case "descending":if(f>k)return-1;if(f<k)return 1;break;default:return 0}})}}};var K=function(b){if(b){var c=h.isFieldAvailable(b.general,"iui-grid-column"),e;e=(e=b.header)?{content:h.isFieldAvailable(e.content,"iui-grid-column-header-cell-content"),disabled:h.isFieldAvailable(e.disabled,"iui-grid-column-header-disabled"),normal:h.isFieldAvailable(e.normal,"iui-grid-column-header"),hovered:h.isFieldAvailable(e.hovered,"iui-grid-column-header-hovered"),selected:h.isFieldAvailable(e.selected,
"iui-grid-column-header-selected")}:a.options.controlStyle.column.header;b=(b=b.footer)?{content:h.isFieldAvailable(b.content,"iui-grid-column-footer-cell-content"),disabled:h.isFieldAvailable(b.disabled,"iui-grid-column-footer-disabled"),normal:h.isFieldAvailable(b.normal,"iui-grid-column-footer"),hovered:h.isFieldAvailable(b.hovered,"iui-grid-column-footer-hovered"),selected:h.isFieldAvailable(b.selected,"iui-grid-column-footer-selected")}:a.options.controlStyle.column.footer;return{general:c,header:e,
footer:b}}return a.options.controlStyle.column};this.getExpandBoxStyle=function(b){return b?{general:h.isFieldAvailable(b.general,"iui-grid-expand-box"),animated:h.isFieldAvailable(b.animated,"iui-grid-expand-box-load"),expanded:h.isFieldAvailable(b.expanded,"iui-grid-expand-box-open"),collapsed:h.isFieldAvailable(b.collapsed,"iui-grid-expand-box-close")}:a.options.controlStyle.row.expandBox};var Zb=function(b){if(b){var c;c=(c=b.general)?{disabled:h.isFieldAvailable(c.disabled,"iui-grid-row-disabled"),
focused:h.isFieldAvailable(c.focused,"iui-grid-row-focused"),normal:h.isFieldAvailable(c.normal,"iui-grid-row"),hovered:h.isFieldAvailable(c.hovered,"iui-grid-row-hovered"),selected:h.isFieldAvailable(c.selected,"iui-grid-row-selected")}:a.options.controlStyle.row.general;var e;var l=b.checkBox;l?(e=h.isFieldAvailable(l.general,"iui-checkbox"),l=(l=l.box)?{general:h.isFieldAvailable(l.general,"iui-checkbox-box"),disabled:h.isFieldAvailable(l.disabled,"iui-checkbox-disabled"),checked:h.isFieldAvailable(l.checked,
"iui-checkbox-checked"),indeterminate:h.isFieldAvailable(l.indeterminate,"iui-checkbox-indeterminate"),unchecked:h.isFieldAvailable(l.unchecked,"iui-checkbox-unchecked")}:a.options.controlStyle.row.checkBox.box,e={general:e,box:l}):e=a.options.controlStyle.row.checkBox;var l=a.getExpandBoxStyle(b.expandBox),k;k=(k=b.cell)?{content:h.isFieldAvailable(k.content,"iui-grid-row-cell-content"),general:h.isFieldAvailable(k.general,"iui-grid-row-cell"),disabled:h.isFieldAvailable(k.disabled,"iui-grid-row-cell-disabled"),
focused:h.isFieldAvailable(k.focused,"iui-grid-row-cell-focused"),normal:h.isFieldAvailable(k.normal,"iui-grid-row-cell"),hovered:h.isFieldAvailable(k.hovered,"iui-grid-row-cell-hovered"),selected:h.isFieldAvailable(k.selected,"iui-grid-row-cell-selected")}:a.options.controlStyle.row.cell;b=(b=b.fixed)?{disabled:h.isFieldAvailable(b.disabled,"iui-grid-row-fixed-disabled"),normal:h.isFieldAvailable(b.normal,"iui-grid-row-fixed"),hovered:h.isFieldAvailable(b.hovered,"iui-grid-row-fixed-hovered")}:a.options.controlStyle.row.fixed;
return{general:c,checkBox:e,expandBox:l,cell:k,fixed:b}}return a.options.controlStyle.row},D=function(b){return b?{content:h.isFieldAvailable(b.content,"iui-grid-row-cell-content"),general:h.isFieldAvailable(b.general,"iui-grid-row-cell"),disabled:h.isFieldAvailable(b.disabled,"iui-grid-row-cell-disabled"),focused:h.isFieldAvailable(b.focused,"iui-grid-row-cell-focused"),normal:h.isFieldAvailable(b.normal,"iui-grid-row-cell"),hovered:h.isFieldAvailable(b.hovered,"iui-grid-row-cell-hovered"),selected:h.isFieldAvailable(b.selected,
"iui-grid-row-cell-selected")}:a.options.controlStyle.cell};this.updateControlStyle=function(b){a.options.controlStyle=b?{general:h.isFieldAvailable(b.general,"iui-grid"),column:K(b.column),row:Zb(b.row),cell:D(b.cell)}:{general:h.isFieldAvailable(a.defaultStyle.general,"iui-grid"),column:K(a.defaultStyle.column),row:Zb(a.defaultStyle.row),cell:D(a.defaultStyle.cell)}};this.getCurrentColumnStyle=function(b,c,e){var f=a.options.controlStyle.column;b&&b.style&&(f=b.style);b=a.options.controlStyle.column.body;
var h=f.body;switch(c){case "header":b=a.options.controlStyle.column.header;h=f.header;break;case "footer":b=a.options.controlStyle.column.footer,h=f.footer}if(e)switch(e){case "content":return h&&h.content?h.content:b.content;case "disabled":return h&&h.disabled?h.disabled:b.disabled;case "hovered":return h&&h.hovered?h.hovered:b.hovered;case "selected":return h&&h.selected?h.selected:b.selected;default:return h&&h.normal?h.normal:b.normal}else return c?h?h:b:f?f:a.options.controlStyle.column};this.getCurrentRowStyle=
function(b,c){var e=a.options.controlStyle.row;if(b)switch(b[a.options.rowFields.style]){case "initial":break;case "parent":return a.getCurrentRowStyle(a.getParent(b),c);default:null!=b.style&&(e=b.style)}if(c){if(h.isString(e.general))return e.general;if(a.isRowFixed(b))switch(c){case "disabled":return e.fixed&&e.fixed.disabled?e.fixed.disabled:a.options.controlStyle.row.fixed.disabled;case "hovered":return e.fixed&&e.fixed.hovered?e.fixed.hovered:a.options.controlStyle.row.fixed.hovered;default:return e.fixed&&
e.fixed.normal?e.fixed.normal:a.options.controlStyle.row.fixed.normal}else switch(c){case "disabled":return e.general&&e.general.disabled?e.general.disabled:a.options.controlStyle.row.general.disabled;case "focused":return e.general&&e.general.focused?e.general.focused:a.options.controlStyle.row.general.focused;case "hovered":return e.general&&e.general.hovered?e.general.hovered:a.options.controlStyle.row.general.hovered;case "selected":return e.general&&e.general.selected?e.general.selected:a.options.controlStyle.row.general.selected;
default:return e.general&&e.general.normal?e.general.normal:a.options.controlStyle.row.general.normal}}else return e?e:a.options.controlStyle.row};this.getDefaultCellContentClass=function(){return"iui-grid-row-cell-content"};this.getDefaultCellLabelClass=function(){return"iui-grid-row-cell-label"};this.getDefaultCellBorderClass=function(){return"iui-grid-lines-both"};this.getCurrentCellStyle=function(b,c,e){var f=a.options.controlStyle.row.cell;if(c)switch(c[a.options.cellFields.style]){case "initial":break;
case "parent":b&&(f=D(a.getCurrentRowStyle(b)));break;default:c.style&&(f=c.style)}if(e)switch(e){case "content":return f.content?f.content:a.options.controlStyle.cell.content;case "disabled":return f.disabled?f.disabled:a.options.controlStyle.cell.disabled;case "focused":return f.focused?f.focused:a.options.controlStyle.cell.focused;case "hovered":return f.hovered?f.hovered:a.options.controlStyle.cell.hovered;case "selected":return f.selected?f.selected:a.options.controlStyle.cell.selected;default:return f.normal?
f.normal:a.options.controlStyle.cell.normal}else return f?f:a.options.controlStyle.row.cell}}]).directive("iuiGrid",["$compile","$timeout","$interval","IntegralUIInternalService","IntegralUIDragDrop","$window","IntegralUIListCtrlService",function(c,e,p,l,B,h,xa){return{restrict:"EA",controller:"IntegralUIGridController",transclude:!0,replace:!0,template:'<div class="iui-grid" data-element="grid"><div class="iui-grid-block"></div></div>',scope:{allowAnimation:"=",allowCellFocus:"=",allowColumnReorder:"=",
allowFilter:"=",allowFocus:"=",allowDrag:"=",allowDrop:"=",animationSpeed:"=",autoExpand:"=",autoUpdate:"=",columns:"=",controlStyle:"=",displayMode:"@",editorSettings:"=",enabled:"=",expandingColumnIndex:"=",fields:"=",fillSpace:"=",gridLines:"=",grouping:"=",groups:"=",hoverSelection:"=",indent:"=",labelEdit:"=",mouseWheelSpeed:"@",name:"@",options:"=?",paging:"=?",rowHeight:"=",rowIcon:"=",rows:"=",selectedIndex:"=",selectedRow:"=",selectionMode:"@",showFooter:"=",showHeader:"=",showIcons:"=",
sorting:"@",afterEdit:"&",afterLabelEdit:"&",afterSelect:"&",beforeEdit:"&",beforeLabelEdit:"&",beforeSelect:"&",cellClick:"&",cellHover:"&",cellvalueChanged:"&",cellvalueChanging:"&",change:"&",clearColumns:"&",clearGroups:"&",clearRows:"&",columnAdded:"&",columnAdding:"&",columnClick:"&",columnDblclick:"&",columnHover:"&",columnPoschanging:"&",columnPoschanged:"&",columnRemoved:"&",columnRemoving:"&",columnRightclick:"&",columnSizechanged:"&",dragDrop:"&",dragEnter:"&",dragLeave:"&",dragOver:"&",
enabledChanged:"&",events:"=?",gotFocus:"&",groupAdded:"&",groupAdding:"&",groupChange:"&",groupRemoved:"&",groupRemoving:"&",keyDown:"&",keyPress:"&",keyUp:"&",loadComplete:"&",lostFocus:"&",rowAdded:"&",rowAdding:"&",rowClick:"&",rowDblclick:"&",rowHover:"&",rowRemoved:"&",rowRemoving:"&",rowRightclick:"&",scrollposChanged:"&",selectionChanged:"&",updateComplete:"&"},link:function(k,q,tc,a,Dd){var G=this,ea=q.children().eq(0),N=angular.element('<div class="iui-scrollbar-vertical"><div class="iui-scroll-button-thumb-vertical"></div></div>'),
C=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),Xa=angular.element('<div class="iui-scrollbar-corner"></div>'),kb=null,Ya=null,Za=null,Yb=!1,H=angular.element('<input type="text" class="iui-label-editor" draggable="false" />');a.labelEditStatus=function(a){if(void 0!=a)Yb=a;else return Yb};var Gb=function(){var d="iui-grid-block";a.options.showStatusIcons&&(d+=" "+d+"-shift-left");a.options.rtl&&(d+=" "+d+"-rtl");return d};k.$on("$destroy",
function(a){G.s2t();$a&&(e.cancel($a),$a=null);ab&&(e.cancel(ab),ab=null);w&&(w.unbind("mouseenter mouseleave mousemove mouseup"),Ed());Ba&&Ba.unbind("mousedown");q.unbind("click dblclick dragenter dragleave dragend drop keydown mousedown mouseleave mousemove mousewheel scroll touchstart touchmove touchend");angular.element(h).unbind("dragenter",Fd);angular.element(h).unbind("dragover",Gd);angular.element(h).unbind("dragend",Hd);angular.element(h).unbind("keyup",Id);angular.element(h).unbind("mousemove",
Jd);angular.element(h).unbind("mousedown",Kd);angular.element(h).unbind("mouseup",Ld);H&&H.unbind("blur focus keydown mousedown");Md();z&&z.$destroy();u&&u.$destroy()});a.dragIcon=document.createElement("img");a.dragIcon.width=1;q.append(a.getDropMarkWindow());a.dropMark();var Ha=function(){kb&&(e.cancel(kb),kb=null)};a.addDropMark=function(){var d;d=q[0];for(var b=null;d;){if(d===document.getElementsByTagName("body")[0]){b=d;break}d=d.offsetParent}if(d=b)angular.element(d).append(a.getDropMarkWindow()),
a.dropMark()};a.removeDropMark=function(){a.getDropMarkWindow().remove()};a.isDropInRange=function(d){d=a.getMousePos(d);var b=q[0].getBoundingClientRect();d.x-=angular.element(h)[0].pageXOffset;d.y-=angular.element(h)[0].pageYOffset;var c=b.top+E,b=b.bottom-L;M&&C&&(b-=C[0].offsetHeight);return d.y<c||d.y>b?!1:!0};var K=angular.element('<div style="opacity:0.75;position:absolute;z-index:999"></div>'),Zb=function(){K&&(K.remove(),K.css("top","-9999999px"),K.css("left","-9999999px"))};a.getCellElemFromRow=
function(d){return d&&(d=a.getElemFromRow(d))?a.getChildElement(d,"cell"):null};a.openEditor=function(d,b){if(d)switch(d.type){case "cell":b||(b=a.getColumnById(d[a.options.cellFields.cid]));if(!b){var c=a.getCellColumnIndex(d),g=a.columnsObj.getList();g&&0<=c&&c<g.length&&(b=g[c])}if(b){var c=a.getCellType(d,a.getColumnRealIndex(b)),g=a.getCellRowIndex(d),x=a.getCellColumnIndex(d);if(g=a.getElemFromCell(g,x,b[a.options.columnFields.fixed]))switch(c){case "checkbox":break;case "combobox":break;case "incell":a.openInCellEditor(g,
d,b);break;case "dropdown":a.openDropDownEditor(g,d,b);break;default:0!=d[a.options.cellFields.allowEdit]&&$b(null,g,0)}}}};a.closeEditor=function(d,b,c){if(d)switch(d.type){case "cell":if(b||(b=a.getColumnById(d[a.options.cellFields.cid])),b)switch(a.getCellType(d,a.getColumnRealIndex(b))){case "incell":a.closeActiveEditor(d);break;case "dropdown":a.closeActiveEditor(d)}else a.closeActiveEditor()}else a.closeActiveEditor();c||"optimal"!=a.options.displayMode||a.updateView();f=null};var D=null,b=
!1,f=null,t=null,y=angular.element('<span class="iui-edit-mark"></span>');a.openInCellEditor=function(d,g,m){b&&a.closeActiveEditor(g,!0);uc();if(g&&m&&(f=g,m='<div ng-include="'+m[a.options.columnFields.editorTemplate]+'"></div>',D=angular.element('<div class="iui-incell-editor"></div>'),D.append(c(m)(k.$parent)),0!=a.callBeforeEdit(g))){d.children().eq(0).append(D);b=!0;t="incell";ub();D.bind("mousedown",function(a){a.stopPropagation()});D.bind("mouseup",function(a){a.stopPropagation()});D.bind("click",
function(a){a.stopPropagation()});D.bind("keydown",function(d){switch(d.keyCode){case 27:a.closeActiveEditor(f)}d.stopPropagation()});D.bind("keypress",function(a){a.stopPropagation()});D.bind("keyup",function(a){a.stopPropagation()});var n=e(function(){var a=l.getPadding(d[0]),b=parseInt(getComputedStyle(d[0]).width,10)-(a.left+a.right),a=parseInt(getComputedStyle(d[0]).height,10)+2;D.css("width",b+"px");D.css("height",a+"px");D.css("top",d[0].offsetTop+"px");k.$apply();D.children&&1==D.children().length&&
(b=D.children().eq(0),b.children&&1==b.children().length&&b.children().eq(0).css("height",a+"px"));e.cancel(n)},1)}};a.openDropDownEditor=function(d,g,m){b&&a.closeActiveEditor(g,!0);uc();if(g&&m&&(f=g,m='<div ng-include="'+m[a.options.columnFields.editorTemplate]+'"></div>',D=angular.element('<div class="iui-dropdown-editor"></div>'),D.append(c(m)(k.$parent)),0!=a.callBeforeEdit(g)))var n=e(function(){angular.element(vb).append(D);D.bind("mousedown",function(a){a.stopPropagation()});D.bind("mouseup",
function(a){a.stopPropagation()});D.bind("click",function(a){a.stopPropagation()});b=!0;t="dropdown";var a=d[0].getBoundingClientRect(),c=angular.element(h)[0].pageXOffset,g=angular.element(h)[0].pageYOffset,m=e(function(){var b=l.getPadding(d[0]),b=parseInt(getComputedStyle(d[0]).width,10)+(b.left+b.right),n=l.getPadding(D[0]),b=b-(n.left+n.right),n=parseInt(getComputedStyle(D[0]).width,10);b<n&&(b=n);n=a.right-(b+3)+c;D.css("top",a.bottom+g+"px");D.css("left",n+"px");D.css("width",b+"px");k.$apply();
e.cancel(m)},1);e.cancel(n)},1)};a.closeActiveEditor=function(d,c){b=!1;uc();D&&D.remove();t=f=null;c||a.callAfterEdit(d)};var uc=function(){D&&D.unbind("click keydown keypress keyup mousedown mouseup")},Fb=function(a,b){a&&(y.addClass("iui-edit-mark iui-edit-mark-"+b),a.append(y),y.css("left",a[0].offsetLeft+a[0].offsetWidth-y[0].offsetWidth-2+"px"),y.css("top",a[0].offsetTop+(a[0].offsetHeight-y[0].offsetHeight)/2+"px"))},ub=function(){y&&("dropdown"!=t||"dropdown"==t&&!b)&&(y.removeAttr("class"),
y.remove())},Sc=null,jb=angular.element('<div class="iui-dropdown-mark"><span></span></div>'),vc=function(a,b){!a||wb&&!b||(a.append(jb),jb.css("top",a[0].offsetTop+"px"),jb.css("left",a[0].offsetLeft+a[0].offsetWidth-jb[0].offsetWidth+"px"),jb.css("height",getComputedStyle(a[0]).height))},Ja=function(a){!jb||wb&&!a||jb.remove()};a.getCellType=function(d,b){var c=null,g="label";d&&(c=a.getColumnById(d[a.options.cellFields.cid]));!c&&0<=b&&b<a.columnList.length&&(c=a.columnList[b]);c&&(g=c[a.options.columnFields.editorType]);
return g};var vb=l.getBodyElem(q[0]),ac=l.getUniqueId(4),qa=null,wb=!1,bc=0,Se=function(d,b,m){if(vb&&d.items&&0<d.items.length){d=l.getUniqueId(4);var g=c('<iui-list name="'+d+'" style="position:absolute;top:-99px;height:100px" items="data['+b+"].column."+a.options.columnFields.editorSettings+'.items"></iui-list>')(z);angular.element(vb).append(g);xa.updateLayout(d);var x=e(function(){if(0<g.children().length){var a=g.children().eq(0);0<a.children().length&&(bc=angular.element(a.children().eq(0))[0].offsetHeight,
m&&(m.avgItemHeight=bc))}g.remove();e.cancel(x)},1)}},xb=null,yb=function(d,b,m,n){var g=a.getCell(m,n);if(g!=Sc&&(Sc=g,qa&&qa.remove(),xb&&xb.$destroy(),vb)){xb=k.$new();xb.data=a.columnList[n];f=g;var Ia='<iui-list name="'+ac+'" style="position:absolute;"',Ia=Ia+(' items="data.'+a.options.columnFields.editorSettings+'.items"'),Ia=Ia+(' item-icon="data.'+a.options.columnFields.editorSettings+'.itemIcon"'),Ia=Ia+(' show-icons="data.'+a.options.columnFields.editorSettings+'.showIcons"'),Ia=Ia+(' checkbox-settings="data.'+
a.options.columnFields.editorSettings+'.checkBoxSettings"'),Ia=Ia+(' show-check-boxes="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings.showCheckBoxes"');qa=c(Ia+(' nav-selection="false" before-select="onCellValueChanging(e, '+m+", "+n+')" after-select="onCellValueChanged(e, '+m+", "+n+')"></iui-list>'))(xb);bc=0;Hb&&n<Hb.length&&(bc=Hb[n].avgItemHeight);var Re=e(function(){angular.element(vb).append(qa);var c=d[0].getBoundingClientRect(),n=angular.element(h)[0].pageXOffset,m=angular.element(h)[0].pageYOffset,
m=c.bottom+m-1,c=c.left+n,n=d.children().eq(0),x=l.getPadding(n[0]),n=parseInt(getComputedStyle(n[0]).width,10)+(x.left+x.right),x=l.getPadding(qa[0]),n=n-(x.left+x.right);void 0!=b.dropDownWidth&&n<b.dropDownWidth&&(n=b.dropDownWidth);x=void 0!=b.dropDownHeight?b.dropDownHeight:100;void 0!=b.maxDropDownItems&&(x=bc*b.maxDropDownItems);qa.css("top",m+"px");qa.css("left",c+"px");qa.css("width",n+"px");qa.css("height",x+"px");qa.css("z-index","999");g&&g[a.options.cellFields.value]&&xa.selectedItem(ac,
g[a.options.cellFields.value]);xa.updateLayout(ac);var f=e(function(){if(g&&g[a.options.cellFields.value]){xa.ensureVisible(ac,g[a.options.cellFields.value]);var d=e(function(){xa.focus(ac,g[a.options.cellFields.value]);e.cancel(d)},1)}e.cancel(f)},10);jb&&(Ja(!0),vc(d,!0));wb=!0;Te();e.cancel(Re)},1)}};a.removeDropDownList=function(a){qa&&(Sc=null,qa.remove(),wb=!1,a||Ja(),qa.unbind("keydown"));xb&&xb.$destroy();f=null};var Te=function(){qa.bind("keydown",function(d){switch(d.keyCode){case 27:a.removeDropDownList(),
Ja()}})},$b=function(d,b,c){a.options.labelEdit&&(void 0===c&&(c=500),Ya=e(function(){if(Ya)var a=e(function(){wc(d,b,!0);e.cancel(a)},c);e.cancel(Ya)},c/3))},cc=function(){Ya&&(e.cancel(Ya),Ya=null)},Ib=null,Jb=null,wc=function(d,b,c){if(a.dragDropStatus())h=H[0].value,a.labelEditStatus(!1),H.unbind("blur focus keydown mousedown"),H.remove(),Jb=Ib=null;else{var n=a.getRowFromChildElem(b);if(n){var g=a.getRowCurrentIndex(n),m=a.getIndexFromElem(b),f=a.getCellObject(g,m),h="",h=b.children().eq(0);
if(f)if(c){if(0!=a.callBeforeLabelEdit(f)){Ib=n;Jb=f;a.labelEditStatus(!0);H.unbind("blur focus keydown mousedown");d=parseInt(getComputedStyle(b[0]).width,10)-4;c=parseInt(getComputedStyle(b[0]).height,10)-3;H.css("top",b[0].offsetTop+"px");H.css("left",b[0].offsetLeft+"px");H.css("width",d+"px");H.css("height",c+"px");h.append(H);H[0].value=f[a.options.cellFields.text];H.bind("keydown",function(d){switch(d.keyCode){case 13:f[a.options.cellFields.text]=H[0].value?H[0].value:"null";wc(d,b,!1);break;
case 27:wc(d,b,!1)}d.stopPropagation()});H.bind("focus",function(d){var b=angular.element(this);a.callGotFocus(d,Ib,Jb,!0,b[0].value)});H.bind("blur",function(a){wc(a)});H.bind("mousedown",function(a){a.stopPropagation()});var l=e(function(){H[0].focus();H[0].select();e.cancel(l)},10)}}else h=H[0].value,a.labelEditStatus(!1),H.unbind("blur focus keydown"),H.remove(),a.updateView(),a.updateFocus(g,m),a.callAfterLabelEdit(f),a.callLostFocus(d,n,f,!0,h),Jb=Ib=null}else h=H[0].value,a.labelEditStatus(!1),
H.unbind("blur focus keydown mousedown"),H.remove(),a.callAfterLabelEdit(),a.updateView(),a.callLostFocus(d,Ib,Jb,!0,h),Jb=Ib=null}},Od=function(d){var b="",c=a.defaultStyle.row.expandBox.general;d[a.options.rowFields.style]&&d[a.options.rowFields.style].expandBox&&d[a.options.rowFields.style].expandBox.general!=c?c+=" "+d[a.options.rowFields.style].expandBox.general:a.options.controlStyle.row.expandBox.general!=c&&(c+=" "+a.options.controlStyle.row.expandBox.general);var n=a.getCurrentRowStyle(d),
n=a.getExpandBoxStyle(n.expandBox);if(a.isThereChildRows||d&&d[a.options.rowFields.hasChildren])b=c;c=d[a.options.rowFields.hasChildren]&&(a.isThereVisibleChildren(d)||!d[a.options.rowFields.rows]||d[a.options.rowFields.rows]&&0==d[a.options.rowFields.rows].length);d&&!a.isRowFixed(d)&&(c||a.isThereVisibleChildren(d))&&(b=d[a.options.rowFields.hasChildren]&&void 0===d[a.options.rowFields.expanded]?b+(" "+n.expanded):!1!==d[a.options.rowFields.expanded]?b+(" "+n.collapsed):b+(" "+n.expanded),!0===
a.options.rtl&&(b+="-rtl"),a.options.enabled&&a.isRowEnabled(d)||(b+="-disabled"));return b};q.bind("mousemove",function(d){if(a.options.enabled&&0===d.button&&aa&&A){a.getColumnCurrentIndex(A);var b=a.getMousePos(d),c=b.y+16,b=b.x+20;fa.empty();fa.append("<span>"+A[a.options.columnFields.headerText]+"</span>");fa.css("top",c+"px");fa.css("left",b+"px");fa.css("display","block");Pd();d.stopPropagation()}});var Sd=function(){for(var d=0,b="none";3>d;){if((b=a.getRowElems(b))&&0<b.length)for(var c=
0;c<b.length;c++){var n=angular.element(b[c]);Qd(n);for(var n=n.find("td"),x=0;x<n.length;x++){var e=angular.element(n[x]),f=a.getElement(e,"expandbox");f&&f.unbind("click touchend");Rd(e)}}d++;b=1==d?"left":"right"}},Md=function(){uc();for(var d=0,b="none";3>d;){var c=a.getRowElems(b);if(c&&0<c.length)for(var n=0;n<c.length;n++){var x=angular.element(c[n]);Qd(x);for(var x=x.find("td"),e=0;e<x.length;e++){var f=angular.element(x[e]),h=a.getElement(f,"expandbox");h&&h.unbind("click touchend");Rd(f)}}c=
b;for(n=0;2>n;){rowFixed=0==n?"top":"bottom";if((x=a.getRowElems(c,rowFixed))&&0<x.length)for(e=0;e<x.length;e++)for((f=angular.element(x[e]))&&f.unbind("mousedown mouseenter mouseleave"),f=f.find("td"),h=0;h<f.length;h++){var l=angular.element(f[h]);l&&l.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart")}n++}if((c=a.getHeaderElem(b))&&0<c.length)for(n=0;n<c.length;n++)for(x=angular.element(c[n]),x=x.find("td"),e=0;e<x.length;e++)(f=angular.element(x[e]))&&(b=a.getChildElement(f,
"column-header-cell"))&&(b=a.getContentElement(b,"filter-button"))&&b.unbind("mousedown");d++;b=1==d?"left":"right"}},Ze=function(){Sd();for(var d=0,b="none";3>d;){var c=a.getRowElems(b);if(c&&0<c.length)for(var n,x=c.length-1,e=0;e<=x;e++){n=angular.element(c[e]);Ue(n);for(var f=n.find("td"),h=0;h<f.length;h++){var l=angular.element(f[h]);Ve(a.getElement(l,"expandbox"));We(l,a.getRowFromElem(n),h)}}for(c=0;2>c;){rowFixed=0==c?"top":"bottom";if((n=a.getRowElems(b,rowFixed))&&0<n.length)for(e=0;e<
n.length;e++)for(x=angular.element(n[e]),Xe(x),f=x.find("td"),h=0;h<f.length;h++)l=angular.element(f[h]),Ye(l,a.getRowFromElem(x),h);c++}d++;b=1==d?"left":"right"}},aa=!1,A=null,zb=-1,xc=function(d,b){if(d){var c=a.getColumnCurrentIndex(d),n=a.getColumnWidth(d);return a.isColumnWithFixedWidth(c)||10<b.x&&b.x<n-10}return!1},Vc=function(d){d=d.find("td");for(var b=0;b<d.length;b++)currentElem=angular.element(d[b]),currentElem.bind("click",function(d){lb();if(a.options.enabled&&1===d.which){var b=l.getClientMousePos(d,
this),c=a.getColumnFromElem(this);c&&xc(c,b)&&a.callColumnClick(c,a.getMousePos(d))}d.stopPropagation()}),currentElem.bind("dblclick",function(d){d.preventDefault();if(a.options.enabled&&1===d.which){var b=l.getClientMousePos(d,this),c=a.getColumnFromElem(this);c&&xc(c,b)&&a.callColumnDblClick(c,a.getMousePos(d))}d.stopPropagation()}),currentElem.bind("contextmenu",function(d){var b=a.getColumnFromElem(this);b&&(Ka=b,b[a.options.columnFields.contextMenu]&&0<b[a.options.columnFields.contextMenu].length&&
d.preventDefault(),Td(d,b),d.stopPropagation())}),currentElem.bind("mouseenter",function(d){if(a.options.enabled&&!W&&!la){var b=a.getColumnFromElem(this);b&&(a.hoverColumn=b,a.refresh(b),a.callColumnHover(b));if(1===d.which&&aa&&A&&a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&ra&&(ra.remove(),a.hoverColumn!=A)){var c=angular.element(this);c.append(ra);d=parseInt(getComputedStyle(c[0]).height,10);b=parseInt(getComputedStyle(ra[0]).height,10);c=l.getPadding(c[0]);ra.css("top",
(d+c.top+c.bottom-b)/2+"px")}}}),currentElem.bind("mouseleave",function(d){!a.options.enabled||W||la||(a.hoverColumn=null,(d=a.getColumnFromElem(this))&&a.refresh(d),ra&&ra.remove(),W||q.css("cursor","default"))}),currentElem.bind("mousemove",function(d){if(a.options.enabled){var b=angular.element(this);if(1===d.which&&aa&&A&&a.hoverColumn&&a.hoverColumn!=A&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&A[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed])b=parseInt(getComputedStyle(b[0]).width,
10),ra.empty(),zb=-1,d.offsetX>b/2?(zb=2,ra.append('<span class="iui-grid-column-reorder-mark-right"></span>'),ra.css("left","auto"),ra.css("right","0")):(zb=1,ra.append('<span class="iui-grid-column-reorder-mark-left"></span>'),ra.css("left","0"),ra.css("right","auto"));else{d=l.getClientMousePos(d,this);var b=parseInt(a.getIndexFromElem(this),10),c=a.getColumnWidth(a.columnList[b]),g=10;a.isFilteringAllowed(a.columnList[b])&&(g=0);10>d.x&&!a.isColumnWithFixedWidth(b-1)&&Ud(b,"left")?(q.css("cursor",
"ew-resize"),bb="left"):d.x>c-g&&!a.isColumnWithFixedWidth(b)&&Ud(b,"right")?(q.css("cursor","ew-resize"),bb="right"):W||(q.css("cursor","default"),bb="none")}}}),currentElem.bind("mouseup",function(d){if(a.options.enabled){if(1===d.which&&aa&&A&&a.hoverColumn&&a.hoverColumn!=A&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&A[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]&&0!=a.callColumnPosChanging(A,a.hoverColumn)){d=a.columnList[0];0<=a.options.expandColIndex&&
a.options.expandColIndex<a.columnList.length&&(d=a.columnList[a.options.expandColIndex]);var b=a.getColumnCurrentIndex(A),b=a.getColumnRealIndex(b),c=a.getColumnCurrentIndex(a.hoverColumn),c=a.getColumnRealIndex(c);b!=c&&(b<c?1==zb&&c--:b>c&&2==zb&&c++,a.columnsObj.moveObject(b,c),a.updateColumnList(),d=a.getColumnCurrentIndex(d),d!=a.options.expandColIndex&&(a.options.expandColIndex=d),a.updateLayout(),a.callColumnPosChanged(A,a.hoverColumn))}A=null;zb=-1;W=aa=!1;q.css("cursor","default")}}),currentElem.bind("mousedown",
function(d){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor();l.getClientMousePos(d,this);var b=parseInt(a.getIndexFromElem(this),10);if(0===d.button&&!W){var c=b,g="none";0<=b&&b<a.columnList.length&&(g=a.columnList[b][a.options.columnFields.fixed]);switch(bb){case "left":"right"==g?c=b:(b=Tc(c-1,g))?(c=a.getColumnCurrentIndex(b),0<=c&&c<a.columnList.length&&(a.columnList[c][a.options.columnFields.fixed]!=g?(c=-1,W=!1):W=!0)):W=!1;0<=c&&(W=!0);break;case "right":"right"==
g?(b=Uc(c+1,g))?(c=a.getColumnCurrentIndex(b),0<=c&&c<a.columnList.length&&(a.columnList[c][a.options.columnFields.fixed]!=g?(c=-1,W=!1):W=!0)):W=!1:(c=b,W=!0)}!a.isColumnWithFixedWidth(c)&&W?a.setColumnResizingParams(c,bb,a.getMousePos(d).x):W=!1}if(!W&&(c=a.getColumnFromChildElem(this)))switch(g=l.getClientMousePos(d,this),xc(c,g)&&a.columnSelection(c),d.which){case 1:a.options.allowColumnReorder&&0!=c[a.options.columnFields.allowDrag]&&0==aa&&0!=c[a.options.columnFields.allowGrouping]&&(A=c,a.getMousePos(d),
aa=!0,(c=l.getBodyElem(q[0]))&&angular.element(c).append(fa));break;case 3:xc(c,g)&&a.callColumnRightClick(c,a.getMousePos(d))}}d.stopPropagation()}),function(d){d&&(d=a.getChildElement(d,"column-header-cell"))&&(d=a.getContentElement(d,"filter-button"))&&d.bind("mousedown",function(a){1==a.which&&$e(this);a.stopPropagation()})}(currentElem)},Ba=null,$e=function(d){a.closeFilterWindow();var b=a.getColumnFromChildElem(d);if(b){var m=angular.element(d),n=m.parent().parent();if(vb){d='<div ng-include="'+
b[a.options.columnFields.filterTemplate]+'"></div>';Ba=angular.element('<div class="iui-filter-window"></div>');Ba.append(c(d)(k.$parent));var x=e(function(){angular.element(vb).append(Ba);Ba.bind("mousedown",function(a){a.stopPropagation()});m[0].getBoundingClientRect();var d=n[0].getBoundingClientRect(),c=angular.element(h)[0].pageXOffset,g=angular.element(h)[0].pageYOffset,f=e(function(){var n=d.bottom+g,m=d.right-(parseInt(getComputedStyle(Ba[0]).width,10)+3)+c;b[a.options.columnFields.filterParams]&&
"left"==b[a.options.columnFields.filterParams].templateAlignment&&(m=d.left+c);Ba.css("top",n+"px");Ba.css("left",m+"px");e.cancel(f)},1);e.cancel(x)},1)}}};a.closeFilterWindow=function(){Ba&&(Ba.unbind("mousedown"),Ba.remove())};var Qd=function(a){a&&a.unbind("click contextmenu blur dragover dragend focus keydown keyup keypress mousedown mouseenter mouseleave")},Ue=function(d){d&&(d.bind("click",function(a){a.preventDefault();lb()}),d.bind("contextmenu",function(d){var b=a.getRowFromElem(this);b&&
a.isRowEnabled(b)&&(Ka=b,b[a.options.rowFields.contextMenu]&&0<b[a.options.rowFields.contextMenu].length&&d.preventDefault(),Td(d,b),d.stopPropagation())}),d.bind("dragover",function(d){var b=a.getRowFromElem(this);if(b&&a.isRowEnabled(b)){if(a.isScrollBarVisible("vertical")){var b=a.getMousePos(d),c=q[0].getBoundingClientRect();b.x-=angular.element(h)[0].pageXOffset;b.y-=angular.element(h)[0].pageYOffset;var g=c.top+E+25,c=c.bottom-L-25;M&&C&&(c-=C[0].offsetHeight);b.y<g?yc(!1):b.y>c?yc(!0):Kb()}else Kb();
d.stopPropagation()}}),d.bind("dragend",function(b){var d=a.getRowFromElem(this);d&&a.isRowEnabled(d)&&(b.preventDefault(),a.dragDropStatus(!1),a.dropMark(),B.getData().source||B.clearData())}),d.bind("mouseenter",function(d){if(!la){var b=a.getRowFromElem(this);b&&a.isRowEnabled(b)&&!aa&&(a.hoverRow=b,a.refresh(b),a.callRowHover(d,b),a.options.hoverSelection&&(Za=e(function(){Za&&a.rowSelection(b,d.shiftKey,d.ctrlKey,d.metaKey)},500)))}}),d.bind("mouseleave",function(b){la||(a.hoverRow=null,(b=a.getRowFromElem(this))&&
a.isRowEnabled(b)&&a.refresh(b),Za&&(e.cancel(Za),Za=null))}),d.bind("keydown",function(b){var d=a.getRowFromElem(this);if(d&&a.isRowEnabled(d)){var c=!0;a.callKeyDown(b,d);var g=a.getRowCurrentIndex(d);switch(b.keyCode){case 9:Vd(b,d,g);break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:c=!1;break;case 33:Wd(b,g);break;case 34:Xd(b,g);break;case 35:Yd(b,g);break;case 36:Zd(b,g);break;case 37:$d(b,d,g);break;case 32:ae(b,d);break;case 38:Wc(b,
g);break;case 39:be(b,d,g);break;case 40:Xc(b,g);break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}c&&b.stopPropagation()}}),d.bind("keyup",function(b){var d=a.getRowFromElem(this);if(d&&a.isRowEnabled(d)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,d)}}),d.bind("keypress",function(b){var d=a.getRowFromElem(this);
d&&a.isRowEnabled(d)&&a.callKeyPress(b,d)}),d.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}),d.bind("focus",function(b){var d=a.getRowFromElem(this);d&&a.isRowEnabled(d)?a.callGotFocus(b,d):a.updateFocus()}),d.bind("blur",function(b){var d=a.getRowFromElem(this);d&&a.isRowEnabled(d)&&a.callLostFocus(b,d)}))},Ve=function(b){b&&(b.bind("click",function(b){var d=a.getRowFromChildElem(this);d&&a.isRowEnabled(d)&&(a.toggle(d),a.updateFocus(a.getRowCurrentIndex(d),
a.options.expandColIndex),b.stopPropagation())}),b.bind("touchend",function(b){b.preventDefault();var d=a.getRowFromChildElem(this);d&&a.isRowEnabled(d)&&(a.toggle(d),a.updateFocus(a.getRowCurrentIndex(d),a.options.expandColIndex),b.stopPropagation())}))},zc={x:0,y:0},Lb={x:0,y:0},Mb=!1,Yc=!1,cb=null,ce=function(){return{x:angular.element(h)[0].pageXOffset,y:angular.element(h)[0].pageYOffset}},Nb=function(a){var b=ce();return{x:a.x-b.x,y:a.y-b.y}},We=function(d,c,m){d&&(d.bind("dragstart",function(b){if(a.labelEditStatus())b.preventDefault();
else{document.activeElement&&document.activeElement.blur();B.clearData();var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d))if(cc(),a.isDragAllowed(d)){a.dragDropStatus(!0);a.addDropMark();b.dataTransfer?(b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text",d[a.options.rowFields.id]?d[a.options.rowFields.id].toString():"")):b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="move",b.originalEvent.dataTransfer.setData("text",d[a.options.rowFields.id]?
d[a.options.rowFields.id].toString():""));b={source:d,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":b.source=a.options.selectedRows;break;case "multi-extended":b.source=a.options.selectedRows}B.setData(b)}else b.dataTransfer?b.dataTransfer.effectAllowed="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="none")}}),d.bind("dragover",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){var c=
angular.element(this);b.preventDefault();var g=!0;b.dataTransfer?g="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(g="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(g&&(d=a.getRowFromChildElem(c))){var g=c[0].getBoundingClientRect(),n=angular.element(h)[0].pageXOffset,m=angular.element(h)[0].pageYOffset,e=a.getMousePos(b);e.x-=g.left+n;e.y-=g.top+m;c=B.getDropPos(e,{x:0,y:0,width:c[0].offsetWidth,height:c[0].offsetHeight},!0);n=B.getData();
g=a.isDropAllowed(n.source,d,c);m={event:b,sourceCtrl:n.sourceCtrl?n.sourceCtrl.getGridName():"",dragRow:n.source,targetCtrl:a.getGridName(),targetRow:d,isDropAllowed:g,dropPos:c,mousePos:a.getMousePos(b)};m=a.callDragOver(m);if(g&&!1!==m){m=a.getMousePos(b);b=m.y+16;m=m.x+20;e=a.getDropMarkWindow();e.empty();var f="";switch(c){case 1:f="iui-drop-marker-move-up";break;case 2:f="iui-drop-marker-move-down"}e.append("<span class='"+f+"'></span><span class='iui-drop-marker-title'>"+d[a.options.rowFields.text]+
"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:m});a.dropMark(g);B.setData({source:n.source,sourceList:n.sourceList,target:d,dropPos:c})}else b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark()}}}),d.bind("drop",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){var c=angular.element(this);b.preventDefault();Ha();a.dropMark();d=!0;b.dataTransfer?d="none"===
b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d){var g=a.getRowFromChildElem(c);if(g){var c=B.getData(),n=c.source;n||(n=a.getDnDSource(b));if(d=a.isDropAllowed(n,g,c.dropPos))a.toggle(g,!0),n&&(d={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:n,targetCtrl:a.getGridName(),targetRow:g,isDropAllowed:d,dropPos:c.dropPos,mousePos:a.getMousePos(b)},!1!==a.callDragDrop(d)&&(a.drop(c),
k.$$phase||k.$apply()))}}B.clearData();b.stopPropagation()}}),d.bind("dragenter",function(b){var d=a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){b.preventDefault();if(a.options.autoExpand)var c=e(function(){kb||(kb=e(function(){kb&&a.toggle(d,!0)},750));e.cancel(c)},1);var g=B.getData();g.source||(g.source=a.getDnDSource(b));g={event:b,sourceCtrl:g.sourceCtrl?g.sourceCtrl.getGridName():"",dragRow:g.source,targetCtrl:a.getGridName(),targetRow:g.target,mousePos:a.getMousePos(b)};a.callDragEnter(g);
b.stopPropagation()}}),d.bind("dragleave",function(b){a.hoverRow=null;var d=a.getRowFromChildElem(this);d&&a.isRowEnabled(d)&&(b.preventDefault(),Ha(),d=B.getData(),d.source||(d.source=a.getDnDSource(b)),d={event:b,sourceCtrl:d.sourceCtrl?d.sourceCtrl.getGridName():"",dragRow:d.source,targetCtrl:a.getGridName(),targetRow:d.target,mousePos:a.getMousePos(b)},a.callDragLeave(d),b.stopPropagation())}),d.bind("touchstart",function(d){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&(d.preventDefault(),
(c=a.getTouchData(d))&&0<c.length)){Yc=!0;var g=e(function(){Yc=!1;e.cancel(g)},750);zc=Nb({x:c[0].pageX,y:c[0].pageY});a.closeFilterWindow();c=zc;if((c=a.getRowAt(c.x,c.y))&&a.isRowEnabled(c)){var n=angular.element(this);a.mouseButtonStatus(!0);cb=c;var m=a.getRowCurrentIndex(c),h=parseInt(a.getIndexFromElem(this),10),l=a.getCell(m,h),k=a.getCellType(l,h),p=null,q=a.options.editorSettings;n[0].focus();a.updateFocus(m,h);l&&(p=a.getColumnById(l[a.options.cellFields.cid]));!p&&0<=h&&h<a.columnList.length&&
(p=a.columnList[h]);var r="click"==a.options.editorSettings.activate;p&&p[a.options.columnFields.editorSettings]&&(q=p[a.options.columnFields.editorSettings],r=void 0!=q.activate?"click"==q.activate:r);l&&l!=f?a.closeEditor(f):a.closeEditor();switch(k){case "checkbox":break;case "combobox":a.rowSelection(c,d.shiftKey,d.ctrlKey,d.metaKey);l&&0!=l[a.options.cellFields.allowEdit]&&p&&r?yb(angular.element(this),q,m,h):a.removeDropDownList();break;case "incell":a.rowSelection(c,d.shiftKey,d.ctrlKey,d.metaKey);
!b&&l&&0!=l[a.options.cellFields.allowEdit]&&r&&a.openInCellEditor(n,l,p);break;case "dropdown":a.rowSelection(c,d.shiftKey,d.ctrlKey,d.metaKey);!b&&l&&0!=l[a.options.cellFields.allowEdit]&&r&&a.openDropDownEditor(n,l,p);break;default:a.rowSelection(c,d.shiftKey,d.ctrlKey,d.metaKey),a.removeDropDownList(),l&&0!=l[a.options.cellFields.allowEdit]&&r&&$b(d,angular.element(this))}}}}),d.bind("touchmove",function(b){var d,c,g=a.getRowFromChildElem(this);if(g&&a.isRowEnabled(g)&&(g=a.getTouchData(b))&&
0<g.length){Lb=Nb({x:g[0].pageX,y:g[0].pageY});var g=Math.abs(Lb.x-zc.x),n=Math.abs(Lb.y-zc.y),m=q[0].getBoundingClientRect();if(B.hitTest(Lb.x,Lb.y,m)){if(b.preventDefault(),K&&K.css("display","block"),!Yc)if(!Mb&&(2<g||2<n)&&cb&&a.isRowEnabled(cb))if(angular.element(this),a.labelEditStatus())b.preventDefault();else{Mb=!0;B.clearData();if((g=a.getTouchData(b))&&0<g.length&&(Nb({x:g[0].pageX,y:g[0].pageY}),cb&&a.isRowEnabled(cb)&&(cc(),a.isDragAllowed(cb)))){a.dragDropStatus(!0);a.addDropMark();g=
{source:cb,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":g.source=a.options.selectedRows;break;case "multi-extended":g.source=a.options.selectedRows}B.setData(g);if(g=a.getCellElemFromRow(cb))if(g=a.getContentElement(g))K.empty(),K.append(g.clone()),K.css("display","none"),q.append(K)}b.stopPropagation()}else if(Mb&&(angular.element(this),b.preventDefault(),(n=a.getTouchData(b))&&0<n.length)){var g=ce(),e=Nb({x:n[0].pageX,y:n[0].pageY});if(n=a.getRowAt(e.x,
e.y)){var f=a.getCellElemFromRow(n);if(f){var m=f[0].getBoundingClientRect(),f=B.getDropPos({x:e.x-m.left,y:e.y-m.top},{x:0,y:0,width:f[0].offsetWidth,height:f[0].offsetHeight},!0),m=B.getData(),h=a.isDropAllowed(m.source,n,f);b={event:b,sourceCtrl:m.sourceCtrl?m.sourceCtrl.getGridName():"",dragRow:m.source,targetCtrl:a.getGridName(),targetRow:n,isDropAllowed:h,dropPos:f,mousePos:e};c=q[0].getBoundingClientRect();d=e.x-c.left;c=e.y-c.top;K.css("top",c-16+"px");K.css("left",d+"px");K.css("display",
"block");b=a.callDragOver(b);if(h&&0!=b){b=e.y+g.y+16;g=e.x+g.x+20;e=a.getDropMarkWindow();e.empty();d="iui-drop-marker-move-in";switch(f){case 1:d="iui-drop-marker-move-up";break;case 2:d="iui-drop-marker-move-down"}e.append("<span class='"+d+"'></span><span class='iui-drop-marker-title'>"+n[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:g});a.dropMark(h);B.setData({source:m.source,sourceList:m.sourceList,target:n,dropPos:f})}else a.dropMark(),K&&K.css("display",
"none")}}else m=q[0].getBoundingClientRect(),n=m.top+E,m=m.bottom-L,M&&C&&(m-=C[0].offsetHeight),!a.options.allowDrop||e.y<n||e.y>m?(a.dropMark(),K&&K.css("display","none")):(c=q[0].getBoundingClientRect(),d=e.x-c.left,c=e.y-c.top,K.css("top",c-16+"px"),K.css("left",d+"px"),K.css("display","block"),n=B.getData(),m={source:n.source,sourceCtrl:n.sourceCtrl,target:null,dropPos:-1},B.setData(m),b={event:b,sourceCtrl:n.sourceCtrl?n.sourceCtrl.getGridName():"",dragRow:n.source,targetCtrl:a.getGridName(),
targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:e},b=a.callDragOver(b),0==b?a.dropMark():(b=e.y+g.y+16,g=e.x+g.x+20,e=a.getDropMarkWindow(),e.empty(),e.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(k.name?k.name:"Grid")+"</span>"),a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:g}),a.dropMark(!0)))}}else b.preventDefault(),a.dropMark(),a.cancelScrollTimer(),K&&K.css("display","none")}}),d.bind("touchend",function(b){var d=
a.getRowFromChildElem(this);if(d&&a.isRowEnabled(d)){if((d=a.getTouchData(b))&&0<d.length){var d=Nb({x:d[0].pageX,y:d[0].pageY}),c=q[0].getBoundingClientRect();if(B.hitTest(d.x,d.y,c))if(Mb){angular.element(this);b.preventDefault();Ha();a.dropMark();Zb();if((d=a.getTouchData(b))&&0<d.length){var d=Nb({x:d[0].pageX,y:d[0].pageY}),g=a.getRowAt(d.x,d.y);if(g){var c=B.getData(),n=c.source,m=a.isDropAllowed(n,g,c.dropPos);m&&(a.toggle(g,!0),n&&(d={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():
"",dragRow:n,targetCtrl:a.getGridName(),targetRow:g,isDropAllowed:m,dropPos:c.dropPos,mousePos:d},d=a.callDragDrop(d),!1!==d&&(a.drop(c),k.$$phase||k.$apply())))}else a.dropMark(),g=q[0].getBoundingClientRect(),c=g.top+E,g=g.bottom-L,M&&C&&(g-=C[0].offsetHeight),d.y>=c&&d.y<=g&&(c=B.getData(),c.source&&(d={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:c.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:d},d=a.callDragDrop(d),
!1!==d&&(a.drop(c),k.$$phase||k.$apply())))}B.clearData();a.dragDropStatus(!1);b.stopPropagation()}else a.mouseButtonStatus(!1),(d=a.getRowFromChildElem(this))&&a.isRowEnabled(d)&&a.updateSelection(b,d,b.shiftKey),cc()}d=Mb;a.removeDropMark();Zb();Lb={x:0,y:0};Mb=!1;cb=null;d&&b.stopPropagation()}}),d.bind("dblclick",function(d){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var g=angular.element(this);d.preventDefault();if(1===d.which){var n=a.getRowCurrentIndex(c),m=parseInt(a.getIndexFromElem(this),
10),e=a.getCell(n,m),f=a.getCellType(e,m),h=null,l=a.options.editorSettings;e&&(h=a.getColumnById(e[a.options.cellFields.cid]));!h&&0<=m&&m<a.columnList.length&&(h=a.columnList[m]);var k="dblclick"==a.options.editorSettings.activate;h&&h[a.options.columnFields.editorSettings]&&(l=h[a.options.columnFields.editorSettings],k=void 0!=l.activate?"dblclick"==l.activate:k);switch(f){case "checkbox":break;case "combobox":e&&0!=e[a.options.cellFields.allowEdit]&&h&&k?yb(angular.element(this),l,n,m):a.removeDropDownList();
break;case "incell":!b&&e&&0!=e[a.options.cellFields.allowEdit]&&k&&a.openInCellEditor(g,e,h);break;case "dropdown":!b&&e&&0!=e[a.options.cellFields.allowEdit]&&k&&a.openDropDownEditor(g,e,h);break;default:a.removeDropDownList(),e&&0!=e[a.options.cellFields.allowEdit]&&k&&$b(d,angular.element(this),0)}0!=a.callRowDblClick(c,a.getMousePos(d))&&"checkbox"!=f&&"checkbox"!=f&&e&&!k&&(a.toggle(c),a.updateFocus(n,m))}d.stopPropagation()}}),d.bind("mouseenter",function(d){if(!la){var c=a.getRowFromChildElem(this);
if(c&&a.isRowEnabled(c)&&!aa){var g=a.getRowCurrentIndex(c),m=parseInt(a.getIndexFromElem(this),10);if(g=a.getCell(g,m))if(a.hoverCell=g,a.refresh(c),a.callCellHover(d,g),d=angular.element(this),g&&0!=g[a.options.cellFields.allowEdit])switch(m=a.getCellType(g,m),m){case "combobox":wb||vc(d);break;case "incell":b&&g==f||Fb(d,m);break;case "dropdown":b&&g!=f||Fb(d,m);break;default:Ja(),ub()}else Ja()}}}),d.bind("mouseleave",function(d){if(!la&&(a.hoverCell=null,(d=a.getRowFromChildElem(this))&&a.isRowEnabled(d))){d=
a.getRowCurrentIndex(d);var b=parseInt(a.getIndexFromElem(this),10);a.getCell(d,b)&&(Ja(),ub())}}),d.bind("keydown",function(d){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var g=!0,m=angular.element(this);a.callKeyDown(d,c);var n=a.getRowCurrentIndex(c),e=parseInt(a.getIndexFromElem(this),10),f=a.getCell(n,e),h=a.getCellType(f,e),l=a.getColumnById(f[a.options.cellFields.cid]);!l&&0<=e&&e<a.columnList.length&&(l=a.columnList[e]);switch(d.keyCode){case 9:Vd(d,c,n,e);break;case 13:switch(h){case "checkbox":de(f,
e);break;case "combobox":f&&0!=f[a.options.cellFields.allowEdit]?l&&yb(angular.element(this),l[a.options.columnFields.editorSettings],n,e):a.removeDropDownList();break;case "incell":!b&&f&&0!=f[a.options.cellFields.allowEdit]&&a.openInCellEditor(m,f,l);break;case "dropdown":!b&&f&&0!=f[a.options.cellFields.allowEdit]&&a.openDropDownEditor(m,f,l);break;default:f&&0!=f[a.options.cellFields.allowEdit]&&$b(d,angular.element(this),0)}break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");
break;case 27:g=!1;break;case 33:Wd(d,n,e);break;case 34:Xd(d,n,e);break;case 35:Yd(d,n,e);break;case 36:Zd(d,n,e);break;case 37:$d(d,c,n,e);break;case 32:ae(d,c,f,e);break;case 38:Wc(d,n,e);break;case 39:be(d,c,n,e);break;case 40:Xc(d,n,e);break;default:(d.ctrlKey||d.metaKey)&&a.updateSelectionStatus("ctrl"),d.shiftKey&&a.updateSelectionStatus("shift")}g&&d.stopPropagation()}}),d.bind("keyup",function(d){var b=a.getRowFromChildElem(this);if(b&&a.isRowEnabled(b)){switch(d.keyCode){case 16:a.multiSelection(!1);
break;case 17:a.multiSelection(!1);break;default:d.ctrlKey||d.metaKey||a.multiSelection(!1),d.shiftKey||a.multiSelection(!1)}a.callKeyUp(d,b);d.stopPropagation()}}),d.bind("keypress",function(d){var b=a.getRowFromChildElem(this);b&&a.isRowEnabled(b)&&(a.callKeyPress(d,b),d.stopPropagation())}),d.bind("click",function(d){var b=a.getRowFromChildElem(this);if(b&&a.isRowEnabled(b)){if(1===d.which){var c=a.getRowCurrentIndex(b),g=parseInt(a.getIndexFromElem(this),10),c=a.getCell(c,g);a.callCellClick(d,
b,c,a.getMousePos(d));a.callRowClick(d,b,a.getMousePos(d))}d.stopPropagation()}}),d.bind("mousedown",function(d){a.closeFilterWindow();var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var g=angular.element(this);a.mouseButtonStatus(!0);switch(d.which){case 1:var m=a.getRowCurrentIndex(c),n=parseInt(a.getIndexFromElem(this),10),e=a.getCell(m,n),h=a.getCellType(e,n),l=null,k=a.options.editorSettings;e&&(l=a.getColumnById(e[a.options.cellFields.cid]));!l&&0<=n&&n<a.columnList.length&&(l=a.columnList[n]);
var p="click"==a.options.editorSettings.activate;l&&l[a.options.columnFields.editorSettings]&&(k=l[a.options.columnFields.editorSettings],p=void 0!=k.activate?"click"==k.activate:p);e&&e!=f?a.closeEditor(f):a.closeEditor();switch(h){case "checkbox":break;case "combobox":a.rowSelection(c,d.shiftKey,d.ctrlKey,d.metaKey);e&&0!=e[a.options.cellFields.allowEdit]&&l&&p?yb(angular.element(this),k,m,n):a.removeDropDownList();break;case "dropdown":a.rowSelection(c,d.shiftKey,d.ctrlKey,d.metaKey);!b&&e&&0!=
e[a.options.cellFields.allowEdit]&&p&&a.openDropDownEditor(g,e,l);break;case "incell":a.rowSelection(c,d.shiftKey,d.ctrlKey,d.metaKey);!b&&e&&0!=e[a.options.cellFields.allowEdit]&&p&&a.openInCellEditor(g,e,l);break;default:if("image"==h?0!=k.allowSelection:1)a.rowSelection(c,d.shiftKey,d.ctrlKey,d.metaKey),a.removeDropDownList(),e&&0!=e[a.options.cellFields.allowEdit]&&p&&$b(d,angular.element(this))}break;case 3:a.rowSelection(c,d.shiftKey,d.ctrlKey,d.metaKey),a.callRowRightClick(c,a.getMousePos(d))}d.stopPropagation()}}),
d.bind("mouseup",function(d){a.mouseButtonStatus(!1);if(1==d.which){var b=a.getRowFromChildElem(this);if(b&&a.isRowEnabled(b)){var c=a.getRowCurrentIndex(b),g=parseInt(a.getIndexFromElem(this),10),c=a.getCell(c,g),m=a.getCellType(c,g),n=null,e=a.options.editorSettings;c&&(n=a.getColumnById(c[a.options.cellFields.cid]));!n&&0<=g&&g<a.columnList.length&&(n=a.columnList[g]);n&&n[a.options.columnFields.editorSettings]&&(e=n[a.options.columnFields.editorSettings]);("image"==m?0!=e.allowSelection:1)&&a.updateSelection(d,
b,d.shiftKey)}cc()}}),d.bind("focus",function(d){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var g=a.getRowCurrentIndex(c),m=parseInt(a.getIndexFromElem(this),10),g=a.getCell(g,m);a.callGotFocus(d,c,g);if(g&&0!=g[a.options.cellFields.allowEdit])switch(d=angular.element(this),m=a.getCellType(g,m),m){case "combobox":wb||vc(d);break;case "incell":b||Fb(d,m);break;case "dropdown":b||Fb(d,m);break;default:Ja()}else Ja()}}),d.bind("blur",function(d){var b=a.getRowFromChildElem(this);if(b&&
a.isRowEnabled(b)){var c=a.getRowCurrentIndex(b),g=parseInt(a.getIndexFromElem(this),10),c=a.getCell(c,g);a.callLostFocus(d,b,c)}}))},Rd=function(a){a&&a.unbind("blur click dragstart dragover drop dragenter dragleave dblclick focus keydown keypress keyup mouseenter mouseleave mousemove mousedown mouseup touchstart touchmove touchend")},Xe=function(d){d&&(d.bind("mouseenter",function(d){if(!la){var b=a.getRowFromElem(this);b&&a.isRowEnabled(b)&&!aa&&(a.hoverRow=b,a.refreshHover(b),a.callRowHover(d,
b))}}),d.bind("mouseleave",function(d){la||(a.hoverRow=null,(d=a.getRowFromElem(this))&&a.isRowEnabled(d)&&a.refreshHover(d))}),d.bind("mousedown",function(d){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}))},Ye=function(d,c,m){d&&(d.bind("touchstart",function(d){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){d.preventDefault();a.closeFilterWindow();d=angular.element(this);var c=a.getRowCurrentIndex(c),g=parseInt(a.getIndexFromElem(this),10),m=a.getCell(c,g),n=a.getCellType(m,
g),e=null,h=a.options.editorSettings;d[0].focus();m&&(e=a.getColumnById(m[a.options.cellFields.cid]));!e&&0<=g&&g<a.columnList.length&&(e=a.columnList[g]);var l="click"==a.options.editorSettings.activate;e&&e[a.options.columnFields.editorSettings]&&(h=e[a.options.columnFields.editorSettings],l=void 0!=h.activate?"click"==h.activate:l);m&&m!=f?a.closeEditor(f):a.closeEditor();switch(n){case "checkbox":break;case "combobox":m&&0!=m[a.options.cellFields.allowEdit]&&e&&l?yb(angular.element(this),h,c,
g):a.removeDropDownList();break;case "incell":!b&&m&&0!=m[a.options.cellFields.allowEdit]&&l&&a.openInCellEditor(d,m,e);break;case "dropdown":!b&&m&&0!=m[a.options.cellFields.allowEdit]&&l&&a.openDropDownEditor(d,m,e);break;default:a.removeDropDownList()}}}),d.bind("mouseenter",function(d){if(!la){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)&&!aa){var g=a.getRowCurrentIndex(c),m=parseInt(a.getIndexFromElem(this),10);if(g=a.getCell(g,m))if(a.hoverCell=g,a.refreshHover(c),a.callCellHover(d,
g),d=angular.element(this),g&&0!=g[a.options.cellFields.allowEdit])switch(m=a.getCellType(g,m),m){case "combobox":wb||vc(d);break;case "incell":b&&g==f||Fb(d,m);break;case "dropdown":b&&g!=f||Fb(d,m);break;default:Ja(),ub()}else Ja()}}}),d.bind("mouseleave",function(d){if(!la&&(a.hoverCell=null,(d=a.getRowFromChildElem(this))&&a.isRowEnabled(d))){d=a.getRowCurrentIndex(d);var b=parseInt(a.getIndexFromElem(this),10);a.getCell(d,b)&&(Ja(),ub())}}),d.bind("click",function(d){var b=a.getRowFromChildElem(this);
if(b&&a.isRowEnabled(b)){if(1===d.which){var c=a.getRowCurrentIndex(b),g=parseInt(a.getIndexFromElem(this),10),c=a.getCell(c,g);a.callCellClick(d,b,c,a.getMousePos(d));a.callRowClick(d,b,a.getMousePos(d))}d.stopPropagation()}}),d.bind("dblclick",function(d){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var g=angular.element(this);d.preventDefault();if(1===d.which){var m=a.getRowCurrentIndex(c),n=parseInt(a.getIndexFromElem(this),10),e=a.getCell(m,n),f=a.getCellType(e,n),h=null,l=a.options.editorSettings;
e&&(h=a.getColumnById(e[a.options.cellFields.cid]));!h&&0<=n&&n<a.columnList.length&&(h=a.columnList[n]);var k="dblclick"==a.options.editorSettings.activate;h&&h[a.options.columnFields.editorSettings]&&(l=h[a.options.columnFields.editorSettings],k=void 0!=l.activate?"dblclick"==l.activate:k);switch(f){case "checkbox":break;case "combobox":e&&0!=e[a.options.cellFields.allowEdit]&&h&&k?yb(angular.element(this),l,m,n):a.removeDropDownList();break;case "incell":!b&&e&&0!=e[a.options.cellFields.allowEdit]&&
k&&a.openInCellEditor(g,e,h);break;case "dropdown":!b&&e&&0!=e[a.options.cellFields.allowEdit]&&k&&a.openDropDownEditor(g,e,h);break;default:a.removeDropDownList()}a.callRowDblClick(c,a.getMousePos(d))}d.stopPropagation()}}),d.bind("mousedown",function(d){a.closeFilterWindow();var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var g=angular.element(this);a.mouseButtonStatus(!0);switch(d.which){case 1:var c=a.getRowCurrentIndex(c),m=parseInt(a.getIndexFromElem(this),10),n=a.getCell(c,m),e=
a.getCellType(n,m),h=null,l=a.options.editorSettings;n&&(h=a.getColumnById(n[a.options.cellFields.cid]));!h&&0<=m&&m<a.columnList.length&&(h=a.columnList[m]);var k="click"==a.options.editorSettings.activate;h&&h[a.options.columnFields.editorSettings]&&(l=h[a.options.columnFields.editorSettings],k=void 0!=l.activate?"click"==l.activate:k);n&&n!=f?a.closeEditor(f):a.closeEditor();switch(e){case "checkbox":break;case "combobox":n&&0!=n[a.options.cellFields.allowEdit]&&h&&k?yb(angular.element(this),l,
c,m):a.removeDropDownList();break;case "dropdown":!b&&n&&0!=n[a.options.cellFields.allowEdit]&&k&&a.openDropDownEditor(g,n,h);break;case "incell":!b&&n&&0!=n[a.options.cellFields.allowEdit]&&k&&a.openInCellEditor(g,n,h);break;default:a.removeDropDownList()}break;case 3:a.callRowRightClick(c,a.getMousePos(d))}d.stopPropagation()}}),d.bind("mouseup",function(a){1==a.which&&cc()}))};a.getTopRow=function(){return a.isRowIndexInRange(v-1)?a.currentList[v]:0<a.currentList.length?a.currentList[0]:null};
a.getFooterElem=function(a){switch(a){case "left":return Ca;case "right":return ma}return Qa};a.getHeaderElem=function(a){switch(a){case "left":return na;case "right":return X}return sa};a.getRowElems=function(a,b){switch(a){case "left":switch(b){case "top":return ta?ta.find("tr"):null;case "bottom":return ua?ua.find("tr"):null;default:return Ra?Ra.find("tr"):null}case "right":switch(b){case "top":return ga?ga.find("tr"):null;case "bottom":return Da?Da.find("tr"):null;default:return Sa?Sa.find("tr"):
null}default:switch(b){case "top":return ha?ha.find("tr"):null;case "bottom":return Y?Y.find("tr"):null;default:return ia?ia.find("tr"):null}}};var ee=function(d){var b="";d.icon?b=d.icon:a.options.rowIcon&&(b=a.options.rowIcon);return b},Zc=function(d){return d.icon||a.options.rowIcon},Vd=function(d,b,c,n){var g=a.currentList.length;0<g&&(d.shiftKey?l.isEqual(b[a.options.rowFields.id],a.currentList[0][a.options.rowFields.id])||Wc(d,c,n):l.isEqual(b[a.options.rowFields.id],a.currentList[g-1][a.options.rowFields.id])||
Xc(d,c,n))},Xc=function(d,b,c){d.preventDefault();focusDelayTime=0;var g=b,m=v+F-2,m=m<a.currentList.length-1?m:a.currentList.length-1;g>=m&&O&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);if(g=a.getNextRow(g)){b=a.getRowCurrentIndex(g);b>m&&O&&(a.ensureVisible(g,"bottom"),focusDelayTime=100);a.rowSelection(g,d.shiftKey,d.ctrlKey,d.metaKey);var f=e(function(){a.updateFocus(b,c);e.cancel(f)},focusDelayTime)}},Wc=function(d,b,c){d.preventDefault();
focusDelayTime=0;var g=v,g=0<g?g:0;b==g&&O&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);var m=a.getPrevRow(b);if(m){b=a.getRowCurrentIndex(m);b<g&&O&&(a.ensureVisible(m,"bottom"),focusDelayTime=100);a.rowSelection(m,d.shiftKey,d.ctrlKey,d.metaKey);var f=e(function(){a.updateFocus(b,c);e.cancel(f)},focusDelayTime)}},be=function(d,b,c,n){d.preventDefault();if((void 0===n||0<=n&&n==a.options.expandColIndex)&&!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&
0<b[a.options.rowFields.rows].length)a.toggle(b,!0),a.updateFocus(c,n);else if(0<=n){focusDelayTime=0;var g=n+1;d=a.columnList.length-1;g===d&&(focusDelayTime=1);if(0<=g&&g<=d){d=l.getPageRect(q);b=a.getElemFromCell(c,g);b=l.getPageRect(b);b.left+b.width>d.left+d.width&&(d=a.scrollPos,d.x+=b.width,a.setScrollPos(d));var m=e(function(){a.updateFocus(c,g);e.cancel(m)},focusDelayTime)}}},$d=function(d,b,c,n){d.preventDefault();if((void 0===n||0<=n&&n==a.options.expandColIndex)&&a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&
0<b[a.options.rowFields.rows].length)a.toggle(b,!1),a.updateFocus(c,n);else if(0<=n){focusDelayTime=0;var g=1<n?n-1:0;if(0<=g){d=l.getPageRect(q);b=a.getElemFromCell(c,g);b=l.getPageRect(b);b.left<d.left&&(d=a.scrollPos,d.x-=b.width,a.setScrollPos(d));var m=e(function(){a.updateFocus(c,g);e.cancel(m)},focusDelayTime)}}},Wd=function(d,b,c){d.preventDefault();var g=b-F,g=0<g?g:0;if(g!==b){focusDelayTime=1;var m=a.getPrevRow(g+1);if(m){a.scrollTo(m);a.rowSelection(m,d.shiftKey,d.ctrlKey,d.metaKey);k.$apply();
var f=e(function(){a.updateFocus(a.getRowCurrentIndex(m),c);e.cancel(f)},focusDelayTime)}}},Xd=function(d,b,c){d.preventDefault();var g=b+F;a.options.showHeader&&g--;a.options.showFooter&&g--;g=g<a.currentList.length-1?g:a.currentList.length-1;if(g!==b){focusDelayTime=1;var m=a.getNextRow(g-1);if(m){a.scrollTo(m,"bottom");a.rowSelection(m,d.shiftKey,d.ctrlKey,d.metaKey);k.$apply();var f=e(function(){a.updateFocus(a.getRowCurrentIndex(m),c);e.cancel(f)},focusDelayTime)}}},Yd=function(d,b,c){d.preventDefault();
a.setScrollPos({x:a.scrollPos.x,y:P.y});var g=a.getLastRow();if(g){a.rowSelection(g,d.shiftKey,d.ctrlKey,d.metaKey);var m=e(function(){a.updateFocus(a.getRowCurrentIndex(g),c);e.cancel(m)},1)}},Zd=function(d,b,c){d.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:0});var g=a.getFirstRow();if(g){a.rowSelection(g,d.shiftKey,d.ctrlKey,d.metaKey);var m=e(function(){a.updateFocus(a.getRowCurrentIndex(g),c);e.cancel(m)},1)}},de=function(d,b){if(d&&0!=d[a.options.cellFields.allowEdit]){var c=a.getColumnById(d[a.options.cellFields.cid]);
!c&&0<=b&&b<a.columnList.length&&(c=a.columnList[b]);if(c){var g=d[a.options.cellFields.value];if((c=c[a.options.columnFields.editorSettings])&&1==c.threeState)switch(l.isString(g)||(g="unchecked"),g){case "checked":g="unchecked";break;case "indeterminate":g="checked";break;default:g="indeterminate"}else g=l.isBoolean(g)?!g:!0;d[a.options.cellFields.value]=g;k.$apply()}}},ae=function(d,b,c,n){d.preventDefault();de(c,n);a.rowSelection(b,d.shiftKey,d.ctrlKey,d.metaKey,b.selected);k.$apply()},ia=null,
ha=null,Y=null,La=angular.element('<div class="iui-grid-block iui-grid-block-top"></div>'),sa=null,db=angular.element('<div class="iui-grid-block iui-grid-block-left"></div>'),Q=0,Ob=0,na=null,Ca=null,Ra=null,ta=null,ua=null,Ta=angular.element('<div class="iui-grid-block iui-grid-block-right"></div>'),Ma=0,Pb=0,X=null,ma=null,Sa=null,ga=null,Da=null,Na=angular.element('<div class="iui-grid-block iui-grid-block-bottom"></div>'),Qa=null,v=0,z=null,u=null,va=null,wa=null,F=100,S=0,I=0,mb=0,Ac=0,E=0,
L=0,Qb=0,Bc=!1,la=!1,dc=9,ec=9,Cc=0,Ua=0,nb=0,Ab=1,Dc=0,Ec=0,ob=0,Rb=0,Fc=1,T=null,ba=null,M=!1,O=!1;this.scrollMousePos=null;var P={x:0,y:0},Hb=[];k.verScrollVisibility=!1;k.$watch("verScrollVisibility",function(d,b){a.suppressWatchScrollVisibility||d==b||a.updateCurrentLayout()});a.getColumnWidth=function(d){var b=100;d&&d[a.options.columnFields.width]&&(b=d[a.options.columnFields.width],l.isPercent(b)?(d=q[0].clientWidth-2*a.columnList.length,O&&N&&(d-=N[0].offsetWidth),b=Math.floor(parseInt(b,
10)/100*d)):l.isString&&(b=parseInt(b,10)));return b};var fc=function(d){var b=0;if((d=a.getRowElems(d))&&0<d.length&&(d=angular.element(d[0]))&&(d=d.find("td"))&&0<d.length)for(var c=0;c<d.length;c++)var n=angular.element(d[c]),b=b+n[0].offsetWidth;return b},af=function(){var b=0;if(a.options.showHeader||a.options.showFooter){var c=a.options.showHeader?a.getHeaderElem():a.getFooterElem();if(c&&(c=c.find("td"))&&0<c.length)for(var m=0;m<c.length;m++)var n=angular.element(c[m]),b=b+n[0].offsetWidth;
a.isThereLeftFixedColumns&&(na?Q=na[0].offsetWidth:Ca&&(Q=Ca[0].offsetWidth),b+=Q);a.isThereRightFixedColumns&&(X?Ma=X[0].offsetWidth:ma&&(Ma=ma[0].offsetWidth),b+=Ma)}else 0<a.currentList.length&&(ia&&(b+=fc()),a.isThereLeftFixedColumns&&(b+=fc("left")),a.isThereRightFixedColumns&&(b+=fc("right")));return b};a.updateScrollVisibility=function(){var a=e(function(){M||(C.css("display","none"),P.x=0);O||(N.css("display","none"),P.y=0);M&&O||Xa.css("display","none");e.cancel(a)},1)};q.append(C);q.append(N);
q.append(Xa);a.updateScrollVisibility();var fe=function(){return ha?ha[0].offsetHeight:ta?ta[0].offsetHeight:ga?ga[0].offsetHeight:0},ge=function(){return Y?Y[0].offsetHeight:ua?ua[0].offsetHeight:Da?Da[0].offsetHeight:0},gc=0,hc=999;a.updateViewSize=function(){var b=e(function(){var d=0;a.options.grouping.enabled&&w&&(d=w[0].offsetHeight);Qb=0;var c=q[0].clientWidth;O&&N&&(c-=N[0].offsetWidth);M=!1;0<a.columnList.length&&(Qb+=af(),Qb>c&&(C.unbind("mousedown"),C.css("display","block"),C.bind("mousedown",
function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor(null,null,!0);b=l.getClientMousePos(b,this);var d=Math.floor(q[0].clientWidth);T&&(b.x<T[0].offsetLeft?a.setScrollPos({x:a.scrollPos.x-d,y:a.scrollPos.y}):b.x>T[0].offsetLeft+T[0].offsetWidth&&a.setScrollPos({x:a.scrollPos.x+d,y:a.scrollPos.y}))}}),T=angular.element(C.children().eq(0)),M=!0,T.bind("mousedown",function(b){a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,
!0),1===b.which&&(G.scrollMousePos=a.getMousePos(b),Bc=!0));b.stopPropagation()})));O=!1;k.verScrollVisibility=!1;0<a.currentList.length&&(c=0,a.options.paging.enabled&&V&&(c=V[0].offsetHeight),topRowHeight=fe(),bottomRowHeight=ge(),d=q[0].clientHeight-d-c-(E+L)-topRowHeight-bottomRowHeight,M&&C&&(d-=C[0].offsetHeight),F=0<S?Math.floor(d/S)+1:0<E?Math.floor(d/E):100,F<a.currentList.length+1&&(N.unbind("mousedown"),N.css("display","block"),N.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();
a.closeFilterWindow();a.closeEditor(null,null,!0);b=l.getClientMousePos(b,this);var d=Math.floor(q[0].clientHeight);ba&&(b.y<ba[0].offsetTop?(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-d}),yc(!1,d)):b.y>ba[0].offsetTop+ba[0].offsetHeight&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+d}),yc(!0,d)))}}),ba=angular.element(N.children().eq(0)),O=!0,k.verScrollVisibility=!0,ba.bind("mousedown",function(b){if(a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,
!0),1===b.which)){G.scrollMousePos=a.getMousePos(b);la=!0;gc=0;hc=999;for(var d=0,c=!1,g=!1,m=a.scrollPos.x+mb-(Q+Ma),n=0;n<a.columnList.length;n++)if(!a.isColumnFixed(a.columnList[n])){var e=a.getColumnWidth(a.columnList[n])+4,d=d+e;!c&&d>=a.scrollPos.x&&(gc=n,c=!0);!g&&d>=m&&(hc=n,g=!0);if(c&&g)break}}b.stopPropagation()})));M||(C.unbind("mousedown"),P.x=0);O||(N.unbind("mousedown"),P.y=0);M&&O&&C.css("display","block");!M&&0<a.scrollPos.x&&a.setScrollPos({x:0,y:a.scrollPos.y});!O&&0<a.scrollPos.y&&
a.setScrollPos({x:a.scrollPos.x,y:0});e.cancel(b)},1)};a.updateScrollView=function(){$c()};var $c=function(){var b=e(function(){var d=0;a.options.grouping.enabled&&w&&(d=w[0].offsetHeight);var c=0;a.options.paging.enabled&&V&&(c=V[0].offsetHeight);mb=q[0].offsetWidth-2;Ac=q[0].offsetHeight-2-d-c;M&&(Ac-=C[0].offsetHeight);O&&(mb-=N[0].offsetWidth);ea.css("margin-top",d+"px");ea.css("width",mb+"px");ea.css("height",Ac+"px");M&&(C.css("left","0px"),C.css("bottom",c+"px"),C.css("width",mb-2+"px"));var n=
2;a.options.paging.enabled&&V&&(n=4);O&&(N.css("top",d+"px"),N.css("right","0px"),N.css("height",Ac-n+"px"));M&&O&&(Xa.css("left","auto"),Xa.css("right","0px"));var f=e(function(){topRowHeight=fe();bottomRowHeight=ge();var b=E+topRowHeight;M&&mb<Qb&&(Ua=2,nb=C[0].clientWidth-4,Cc=0,nb>Ua&&(Cc=nb-Ua),dc=Math.floor(Cc*mb/Qb),9>dc&&(dc=9),T.css("width",dc+"px"),P.x=Qb-mb,Ab=P.x/(Cc-dc-2));var g=a.currentList.length+1;O&&0<a.currentList.length&&F<g&&(ob=2,Rb=N[0].clientHeight-4,Dc=0,Rb>ob&&(Dc=Rb-ob),
ec=Math.floor(Dc*F/g),9>ec&&(ec=9),ba.css("height",ec+"px"),Fc=(g-F+1)/(Dc-ec-2),P.y=Math.floor((g-F+1)*S),0>P.y&&(P.y=0),0==v?ba.css("top",ob+"px"):v+F-1==a.currentList.length&&ba.css("top",Rb-ba[0].offsetHeight+"px"));a.isThereLeftFixedColumns&&(na?Q=na[0].offsetWidth:Ca?Q=Ca[0].offsetWidth:0<a.currentList.length&&(Q=fc("left")),Ob=q[0].clientHeight-d-c-E-L,M&&(Ob-=C[0].offsetHeight),db.css("top",d+E+"px"),db.css("width",Q+"px"),db.css("height",Ob+"px"),sa&&sa.css("left",Q+"px"),ia&&ia.css("left",
Q+"px"),Qa&&Qa.css("left",Q+"px"));a.isThereRightFixedColumns&&(X?Ma=X[0].offsetWidth:ma?Ma=ma[0].offsetWidth:0<a.currentList.length&&(Ma=fc("right")),Pb=q[0].clientHeight-d-c-E-L,M&&(Pb-=C[0].offsetHeight),g=0,O&&(g=N[0].offsetWidth),X&&X.css("right",g+"px"),Ta.css("top",d+E+"px"),Ta.css("right",g+"px"),Ta.css("width",Ma+"px"),Ta.css("height",Pb+"px"),ma&&ma.css("right",g+"px"));g=c;M&&C&&(g+=C[0].offsetHeight);Na.css("bottom",g+"px");ia&&ia.css("top",b+"px");Y&&Y.css("bottom",L+"px");Ra&&Ra.css("top",
topRowHeight+"px");Sa&&Sa.css("top",topRowHeight+"px");b=a.scrollPos.x;void 0!=b&&(0>b&&(b=0),b>P.x&&(b=P.x),a.scrollPos.x=b,b=!1!==a.options.rtl?Math.floor(a.scrollPos.x/Ab)-(nb-T[0].offsetWidth-Ua):Math.floor(a.scrollPos.x/Ab)+Ua,M&&T&&T.css("left",b+"px"),ad());e.cancel(f)},1);e.cancel(b)},5)};a.updateColumnWidth=function(){if(a.options.fillSpace){for(var b=0,c=0;c<a.columnList.length;c++)b+=a.getColumnWidth(a.columnList[c])+4;if(b<q[0].clientWidth){for(var b=(q[0].clientWidth-b)/a.columnList.length,
m,c=0;c<a.columnList.length;c++)m=a.getColumnWidth(a.columnList[c])+b,a.columnList[c][a.options.columnFields.width]=m;return!0}}return!1};k.onCellValueChanging=function(b,c,m){var d=c+v,g=a.getCell(d,m);if(g&&0==g[a.options.cellFields.allowEdit])return!1;var g=!0,e=a.getColumnObject(m),f="label",h=null;e&&(f=e[a.options.columnFields.editorType],h=e[a.options.columnFields.editorSettings]);switch(f){case "checkbox":b=h&&1==h.threeState?b.checkState:b.checked;g=a.callCellValueChanging(a.getRowObject(d),
a.getCellObject(d,m),b);break;case "combobox":g=a.callCellValueChanging(a.getRowObject(c),a.getCellObject(c,m),b.item)}return g};k.onCellValueChanged=function(b,c,m){var d=c+v,g=a.getColumnObject(m),e="label",f=null;g&&(e=g[a.options.columnFields.editorType],f=g[a.options.columnFields.editorSettings]);switch(e){case "checkbox":b=f&&1==f.threeState?b.checkState:b.checked;a.callCellValueChanged(a.getRowObject(d),a.getCellObject(d,m),b);break;case "combobox":if(d=a.getCell(c,m))d[a.options.cellFields.value]=
b.item,k.$apply(),"optimal"==a.options.displayMode&&a.updateView();a.removeDropDownList(!0);a.updateFocus(c,m);a.callCellValueChanged(a.getRowObject(c),a.getCellObject(c,m),b.item)}};k.onEditorClick=function(b,c,m){c+=v;var d=a.getColumnObject(m),g="label";d&&(g=d[a.options.columnFields.editorType]);switch(g){case "checkbox":a.callCellClick(b,a.getRowObject(c),a.getCellObject(c,m),a.getMousePos(b))}};a.setDefaultCellValue=function(b,c,m){if(void 0==b[a.options.cellFields.value]){var d=void 0;switch(c){case "checkbox":d=
m&&1==m.threeState?"unchecked":!1;break;case "image":d=""}void 0!=d&&(b[a.options.cellFields.value]=d)}};a.getColumnTemplateUrl=function(b,c){return c?b[a.options.columnFields.templateSettings].footer?b[a.options.columnFields.templateSettings].footer.url:null:b[a.options.columnFields.templateSettings].header?b[a.options.columnFields.templateSettings].header.url:null};var Sb=function(b,c){c=void 0==c?"none":c;for(var d='<table cellpadding="0" cellspacing="0" style="position:absolute;',d=(b?d+'bottom:0;">':
d+'top:0;">')+"<tr>",g,e=0;e<a.columnList.length;e++)g=a.columnList[e][a.options.columnFields.fixed],g=void 0==g?"none":g,g==c&&(b?(d+='<td iui-class="{{data['+e+'].style.footer.general}}" data-index="'+e+'" data-element="column-footer">',d+='<div iui-class="{{data['+e+'].style.footer.cell}}" data-element="column-footer-cell"'):(d+='<td iui-class="{{data['+e+'].style.header.general}}" data-index="'+e+'" data-element="column-header">',d+='<div iui-class="{{data['+e+'].style.header.cell}}" data-element="column-header-cell"'),
b?(d+=' iui-style="overflow:hidden;width:{{data['+e+"].width}}px;text-align:{{data["+e+"].footerAlignment}};",d=e==a.options.expandColIndex?d+("padding-left:{{data["+e+'].indent}}px;">'):d+'">',a.columnList[e][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[e],!0)?(d+='<iui-item-content obj="data['+e+"].column."+a.options.columnFields.templateSettings+'.footer.templateObj" template-url="{{data['+e+"].column."+a.options.columnFields.templateSettings+'.footer.url}}"',d+=
' data-element="footer-template-content" ng-cloak></iui-item-content>'):a.columnList[e][a.options.columnFields.footerContent]?d+=a.columnList[e][a.options.columnFields.footerContent]:a.columnList[e][a.options.columnFields.footerTemplate]?d+='<div ng-include="'+a.columnList[e][a.options.columnFields.footerTemplate]+'" style="margin:0;padding:0"></div>':(d+='<span iui-class="{{data['+e+'].style.footer.content}}" data-element="cell-content"',d+=' iui-tooltip="data['+e+"].column."+a.options.columnFields.footerTooltip+
'">',d+="{{data["+e+"].column."+a.options.columnFields.footerText+"}}</span>")):(d+=' iui-style="overflow:hidden;width:{{data['+e+"].width}}px;text-align:{{data["+e+"].headerAlignment}};",d=e==a.options.expandColIndex?d+("padding-left:{{data["+e+'].indent}}px;">'):d+'">',d+='<span iui-class="{{data['+e+'].style.header.content}}" data-element="cell-content"',d+=' iui-tooltip="data['+e+"].column."+a.options.columnFields.headerTooltip+'">',d+="{{data["+e+"].column."+a.options.columnFields.headerText+
"}}</span>",d+='<span iui-class="{{data['+e+'].style.filtering}}" data-index="'+e+'" data-element="filter-button" ng-show="data['+e+'].showFiltering"></span>',d+='<span iui-class="{{data['+e+'].style.sorting}}" data-index="'+e+'" data-element="sort-button" ng-show="data['+e+'].showSorting"></span>'),d+="</div>",d+="</td>");return d+"</tr></table>"},Ea=function(b,c,m,e){if("optimal"==a.options.displayMode){c=void 0==c?"none":c;e='<tr class="iui-grid-row" data-index="'+b+'" data-fixed="'+e+'"';m&&(e+=
' style="position:absolute;top:-9999px"');e+=">";for(var d=0;d<a.columnList.length;d++)m=a.columnList[d][a.options.columnFields.fixed],m=void 0==m?"none":m,m==c&&(e+='<td class="iui-grid-row-cell" data-element="cell" data-index="'+d+'">',e+="<div",e+=' class="iui-grid-row-cell-content" data-element="cell-content"',e+=' style="width:0px;text-align:left;opacity:0;',0<a.options.rowHeight&&(e+="height:"+a.options.rowHeight+"px;"),e=d==a.options.expandColIndex?e+'padding-left:0px;">':e+'">',e+=he(b,d),
e+="</div>",e+="</td>");return e+"</tr>"}c=void 0==c?"none":c;e='<tr iui-class="{{data['+b+'].style}}" data-index="{{data['+b+'].index}}" data-fixed="'+e+'" tabindex="{{data['+b+'].tabindex}}"';m&&(e+=' style="position:absolute;top:-9999px"');e+=">";for(d=0;d<a.columnList.length;d++)m=a.columnList[d][a.options.columnFields.fixed],m=void 0==m?"none":m,m==c&&(e+='<td iui-class="{{data['+b+"].cells["+d+'].style.cell}}" data-element="cell" data-index="'+d+'" draggable="{{data['+b+'].draggable}}" tabindex="{{data['+
b+"].cells["+d+'].tabindex}}">',e+='<div ng-show="data['+b+'].visible"',e+=' iui-class="{{data['+b+"].cells["+d+'].style.content}}" data-element="cell-content"',e+=' iui-style="width:{{data['+b+"].cells["+d+"].width}}px;text-align:{{data["+b+"].cells["+d+"].alignment}};",0<a.options.rowHeight&&(e+="height:"+a.options.rowHeight+"px;"),e=d==a.options.expandColIndex?e+("padding-left:{{data["+b+"].cells["+d+'].indent}}px;">'):e+'">',e+=he(b,d),e+="</div>",e+="</td>");return e+"</tr>"},he=function(b,c){if("optimal"==
a.options.displayMode){var d="";c===a.options.expandColIndex&&(d+='<span data-element="expandbox"></span><span data-element="icon"></span>');var g=a.columnList[c][a.options.columnFields.editorSettings],e=pb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":d+='<iui-checkbox name="cb-'+l.getUniqueId(4)+'"';g&&1==g.threeState?(d+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',d=d+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+
')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(d+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',d=d+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));d+=' click="onEditorClick(e, '+b+", "+c+')"';g&&g.style&&(d+=' control-style="data['+b+"].cells["+c+'].editorStyle"');d=d+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+
b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');d+="</iui-checkbox>";break;case "combobox":d=d+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');d+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";d+="</span>";break;case "image":d+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+
b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';d+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:e&&""!=e?d+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':
(d=d+'<span class="iui-grid-row-cell-label" data-element="content"'+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),d+=".</span>")}return d}d="";c===a.options.expandColIndex&&(d=d+('<span iui-class="{{data['+b+'].expandBox}}" data-element="expandbox" ng-show="data['+b+'].expandBoxVisible"></span>')+('<span iui-class="{{data['+b+'].icon}}" data-element="icon" ng-show="data['+b+'].iconVisible"></span>'));g=a.columnList[c][a.options.columnFields.editorSettings];
e=pb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":d+='<iui-checkbox name="cb-'+l.getUniqueId(4)+'"';g&&1==g.threeState?(d+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',d=d+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(d+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',d=d+(' checked-changing="onCellValueChanging(e, '+
b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));d+=' click="onEditorClick(e, '+b+", "+c+')"';g&&g.style&&(d+=' control-style="data['+b+"].cells["+c+'].editorStyle"');d=d+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');d+="</iui-checkbox>";break;case "combobox":d=d+('<span iui-class="{{data['+b+"].cells["+
c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');d+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";d+="</span>";break;case "image":d+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';d+=' iui-tooltip="data['+b+"].cells["+c+"].related."+
a.options.cellFields.tooltip+'">';break;default:e&&""!=e?d+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(d=d+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),d+="{{data["+
b+"].cells["+c+"].related."+a.options.cellFields.text+"}}",d+="</span>")}return d},w=angular.element('<div class="iui-grid-grouping-panel"></div>'),ca=null,ic=null,Bb=-1,qb=!1,U=angular.element('<div style="opacity:0.75;position:absolute;top:-9999px;z-index:999;pointer-events:none;"></div>'),bd=0,oa=angular.element('<div style="display:inline-block;"></div>'),rb=[],cd=function(b){var d=b[a.options.columnFields.groupText];d&&""!=d||(d=b[a.options.columnFields.headerText]);return d},cf=function(){Ed();
w.unbind("mouseenter mouseleave mousemove mouseup");w.empty();w.remove();rb.length=0;if(a.options.grouping.enabled){var b="",c=0;if(0<a.groups.length)for(var m=0;m<a.groups.length;m++){var e="iui-grid-grouping-panel-item";m<a.groups.length-1&&(e+=" iui-grid-grouping-marker");var f=cd(a.groups[m]),b=b+('<div class="'+e+'" data-index="'+m+'">'),b=b+('<p class="iui-grid-grouping-panel-item-label">'+f+"</p>"),b=b+'<span class="iui-grid-grouping-panel-item-button"></span></div>'}else m=angular.element('<span class="iui-grid-grouping-panel-item" style="position:absolute;top:-999px;">Temp</span>'),
q.append(m),c=m[0].offsetHeight,m.remove();if(""!=b){var k=angular.element(b);w.append(k)}ja&&w.css("opacity",ka.opacity);q.append(w);e=0;f=w.find("div");for(m=0;m<f.length;m++){var p=angular.element(f[m]),Nd=l.getMargin(p[0]);rb.push({x:e,width:p[0].offsetWidth});e+=p[0].offsetWidth+Nd.left+Nd.right}m=l.getPadding(w[0]);w.bind("mouseenter",function(b){a.options.enabled&&1==b.which&&aa&&A&&(U.empty(),U.append('<div class="iui-grid-grouping-panel-item">'+A[a.options.columnFields.headerText]+"</div>"),
w.append(U),bd=U[0].offsetWidth,U.css("display","none"),qb=!0,ca=null);b.stopPropagation()});w.bind("mousemove",function(b){if(a.options.enabled&&1==b.which&&(aa&&A||qb&&ca)){var d=w[0].getBoundingClientRect(),c=angular.element(h)[0].pageXOffset,g=angular.element(h)[0].pageYOffset,e=a.getMousePos(b);e.x-=d.left+c;e.y-=d.top+g;d="";A?d=cd(A):ca&&(d=cd(ca));ie(b,d);fa&&fa.css("display","none");q.css("cursor","default");document.body.style.cursor="default";ic=null;d=-1;ca&&(d=a.groups.indexOf(ca));for(c=
rb.length-1;0<=c;c--)if(e.x>=rb[c].x){e.x<=rb[c].x+rb[c].width&&(ic=a.groups[c]);if(g=a.getElemFromGroup(a.groups[c]))Bb=c,oa.css("display","inline-block"),A&&oa.css("width",g[0].offsetWidth+"px"),A?e.x<=rb[c].x+rb[c].width?(e=je(ic))?(e=a.getElemFromGroup(e))&&e.after(oa):w.prepend(oa):g.after(oa):0==c?w.prepend(oa):d>c?(e=je(ic))&&(e=a.getElemFromGroup(e))&&e.after(oa):g.after(oa);Bb=0>Bb?0:Bb>a.groups.length-1?a.groups.length-1:Bb;break}}b.stopPropagation()});w.bind("mouseup",function(b){if(a.options.enabled&&
1==b.which&&(aa&&A||qb&&ca)){if(qb&&ca){var d=a.groups.indexOf(ca),c=Bb;d!=c?(a.moveObject(d,c,a.groups),a.updateLayout(),a.callGroupChange(ca)):(d=a.getElemFromGroup(ca))&&d.css("display","inline-block")}else ic?(c=Bb,0>a.groups.indexOf(A)&&(a.groups.splice(c,0,A),a.updateLayout(),a.callGroupChange(A))):0>a.groups.indexOf(A)&&(a.groups.push(A),a.updateLayout(),a.callGroupChange(A));U&&U.remove();oa&&oa.remove();A=null;zb=-1;qb=aa=!1;ca=null;fa&&fa.remove();q.css("cursor","default");document.body.style.cursor=
"default";b.stopPropagation()}});w.bind("mouseleave",function(b){a.options.enabled&&(oa&&oa.remove(),U&&U.css("display","none"))});w.css("width",q[0].clientWidth+"px");""==b?w.css("height",c+(m.top+m.bottom)-2+"px"):k&&w.css("height",k[0].offsetHeight+(m.top+m.bottom)-2+"px");bf();a.updateGroupPanel()}};a.updateGroupPanel=function(){var b=1;a.options.enabled||(b=.5);if(w){var c=w.find("span"),e;if(c&&0<c.length)for(var n=0;n<c.length;n++)e=angular.element(c[n]),e.css("opacity",b);if((c=w.find("p"))&&
0<c.length)for(n=0;n<c.length;n++)e=angular.element(c[n]),a.options.enabled?e.removeClass("iui-grid-grouping-panel-item-disabled"):e.addClass("iui-grid-grouping-panel-item-disabled")}};var ie=function(b,c){U.empty();U.append('<div class="iui-grid-grouping-panel-item"><p class="iui-grid-grouping-panel-item-label">'+c+"</p></div>");w.append(U);var d=l.getPadding(w[0]),g=w[0].getBoundingClientRect(),e=angular.element(h)[0].pageXOffset,f=angular.element(h)[0].pageYOffset,k=a.getMousePos(b);k.x-=g.left+
e;k.y-=g.top+f;bd=U[0].offsetWidth;g=k.x-bd/2;U.css("top",d.top+"px");U.css("left",g+"px");U.css("display","block")};a.getGroupFromElem=function(b){return b&&(b=angular.element(b))&&(b=b.parent(),b[0].attributes["data-index"]&&(b=b[0].attributes["data-index"].value,a.isGroupIndexinRange(b,a.groups)))?a.groups[b]:null};a.getElemFromGroup=function(b){var d=null;if(b){b=a.groups.indexOf(b);for(var c=w.find("div"),e=0;e<c.length;e++){var f=angular.element(c[e]);if(f[0].attributes&&f[0].attributes["data-index"]&&
f[0].attributes["data-index"].value==b){d=f;break}}}return d};var je=function(b){return b&&(b=a.groups.indexOf(b)-1,a.isGroupIndexinRange(b,a.groups))?a.groups[b]:null},Ed=function(){for(var a=w.find("p"),b=0;b<a.length;b++){var c=angular.element(a[b]);c.unbind("mousedown")}a=w.find("span");for(b=0;b<a.length;b++)c=angular.element(a[b]),c.unbind("mousedown")},bf=function(){for(var b=w.find("p"),c=0;c<b.length;c++){var e=angular.element(b[c]);e.bind("mousedown",function(b){if(a.options.enabled&&1==
b.which){var d=angular.element(this),c=d.parent();qb=!0;ca=a.getGroupFromElem(d);oa.css("width",c[0].offsetWidth+6+"px");oa.css("display","inline-block");c.after(oa);c.css("display","none");ie(b,ca[a.options.columnFields.headerText])}b.stopPropagation()})}b=w.find("span");for(c=0;c<b.length;c++)e=angular.element(b[c]),e.bind("mousedown",function(b){if(a.options.enabled){var d=a.getGroupFromElem(this);if(d){var c=a.groups.indexOf(d);0<=c&&0!=a.callGroupRemoving(d)&&(a.groups.splice(c,1),a.updateLayout(),
a.callGroupRemoved(d),a.callGroupChange(d))}}b.stopPropagation()})};a.isGroupIndexinRange=function(a,b){return 0<=a&&a<b.length?!0:!1};a.moveObject=function(b,c,e){a.isGroupIndexinRange(b,e)&&a.isGroupIndexinRange(c,e)&&e.splice(c,0,e.splice(b,1)[0])};var df=function(){S=0;if(0<a.options.rowHeight){var b={top:0,bottom:0};if(a.options.controlStyle&&a.options.controlStyle.row&&a.options.controlStyle.row.cell&&a.options.controlStyle.row.cell.content){var g=angular.element('<div class="'+a.options.controlStyle.row.cell.content+
'" style="position:absolute;top:-9999999px;">Temp</div>');q.append(g);b=l.getPadding(g[0]);g.remove()}S=a.options.rowHeight+b.top+b.bottom+3}else if(0<a.currentList.length&&u){for(var b=[],m=[],g=[],n=[],f=[],h=[],k=0,p=0;p<a.currentList.length&&10>p;p++)b.push(Ea(p,"none",!0)),m.push(c(b[p])(u)),q.append(m[p]),a.isThereLeftFixedColumns&&(g.push(Ea(p,"left",!0)),n.push(c(g[p])(u)),q.append(n[p])),a.isThereRightFixedColumns&&(f.push(Ea(p,"right",!0)),h.push(c(f[p])(u)),q.append(h[p])),k++;if(0<k)var r=
e(function(){for(var b=0,d=0,c=0,g=0;g<k;g++)b+=m[g][0].offsetHeight,m[g].remove(),a.isThereLeftFixedColumns&&(d+=n[g][0].offsetHeight,n[g].remove()),a.isThereRightFixedColumns&&(c+=h[g][0].offsetHeight,h[g].remove());S=Math.floor(Math.max(Math.max(b,d),c)/k);e.cancel(r)},1)}},J=null,dd=0,ed=0,V=angular.element('<div class="iui-pagination-panel"></div>'),ef=function(){J&&J.$destroy();V.empty();V.remove();ed=dd=0;if(a.options.paging.showControlPanel){J=k.$new();J.currentPage=0;J.minPages=0;J.numPages=
a.pageList.length;0<J.numPages&&0==J.currentPage&&(J.currentPage=1);J.onFirstPage=function(){a.options.enabled&&(a.firstPage(),J.currentPage=a.currentPageNumber)};J.onLastPage=function(){a.options.enabled&&(a.lastPage(),J.currentPage=a.currentPageNumber)};J.onNextPage=function(){a.options.enabled&&(a.nextPage(),J.currentPage=a.currentPageNumber)};J.onPrevPage=function(){a.options.enabled&&(a.prevPage(),J.currentPage=a.currentPageNumber)};J.$watch("currentPage",function(b,d){a.options.enabled&&b!=
d&&1<=b&&b<=a.pageList.length&&a.setCurrentPage(b)});dd=q[0].clientWidth;for(var b="",g=0;6>g;g++)switch(g){case 0:b+='<span class="iui-pagination-panel-button iui-pagination-first" ng-click="onFirstPage()"></span>';break;case 1:b+='<span class="iui-pagination-panel-button iui-pagination-prev" ng-click="onPrevPage()"></span>';break;case 2:b+='<input class="iui-pagination-panel-input" ng-model="currentPage" type="number" ng-attr-min="{{minPages}}" ng-attr-max="{{numPages}}" />';break;case 3:b+='<span class="iui-pagination-panel-label"> / {{numPages}}</span>';
break;case 4:b+='<span class="iui-pagination-panel-button iui-pagination-next" ng-click="onNextPage()"></span>';break;case 5:b+='<span class="iui-pagination-panel-button iui-pagination-last" ng-click="onLastPage()"></span>'}b=c(b)(J);V.append(b);q.append(V);V.css("width",dd+"px");b&&(l.getMargin(b[0]),g=l.getPadding(V[0]),ed=b[0].offsetHeight+(g.top+g.bottom)-2,V.css("height",ed+"px"));a.updatePaginationPanel()}};a.updatePaginationPanel=function(){var b=1;a.options.enabled||(b=.5);if(V){var c=V.find("span"),
e;if(c&&0<c.length)for(var n=0;n<c.length;n++)e=angular.element(c[n]),e.css("opacity",b);(c=V.find("input"))&&0<c.length&&(e=angular.element(c[0]),a.options.enabled?e.removeAttr("disabled"):e.attr("disabled","true"))}};a.resetPageNumber=function(){a.currentPageNumber=1;J&&(J.currentPage=0<J.numPages?1:0)};a.updatePageNumber=function(){a.currentPageNumber>a.pageList.length&&(0==a.pageList.length?a.resetPageNumber():(a.currentPageNumber=a.pageList.length,J&&(J.currentPage=a.currentPageNumber)))};var eb=
angular.element('<div class="iui-grid-block" style="position:absolute;top:-9999999px"></div>'),pa=angular.element('<div class="iui-grid-block iui-grid-block-top" style="position:absolute;top:-9999999px"></div>'),Fa=angular.element('<div class="iui-grid-block iui-grid-block-bottom" style="position:absolute;top:-9999999px"></div>'),fb=angular.element('<div class="iui-grid-block iui-grid-block-left" style="position:absolute;top:-9999999px"></div>'),gb=angular.element('<div class="iui-grid-block iui-grid-block-right" style="position:absolute;top:-9999999px"></div>'),
ke=function(){eb&&(eb.empty(),eb.remove());pa&&(pa.empty(),pa.remove());Fa&&(Fa.empty(),Fa.remove());fb&&(fb.empty(),fb.remove());gb&&(gb.empty(),gb.remove())},ff=function(){if(1<a.updateStatus)R("end");else var b=e(function(){if(0<a.columnList.length&&1==a.updateStatus){var d=0;a.options.grouping.enabled&&w&&(d=w[0].offsetHeight);z=k.$new();z.data=le();a.refreshColumns();z.$apply();for(var m=L=E=0;m<a.columnList.length;m++){var n={columnID:void 0!=a.columnList[m][a.options.columnFields.id]?a.columnList[m][a.options.columnFields.id]:
m,avgItemHeight:0};switch(a.columnList[m][a.options.columnFields.editorType]){case "combobox":Se(a.columnList[m].editorSettings,m,n);Hb.push(n);break;default:Hb.push(n)}}a.options.showHeader&&(q.append(pa),ja&&(La.css("opacity",ka.opacity),pa.css("opacity",ka.opacity)),pa.css("top",d+"px"),d=Sb(),sa=angular.element(c(d)(z)),pa.append(sa),a.isThereLeftFixedColumns&&(d=Sb(!1,"left"),na=c(d)(z),pa.append(na),na.css("z-index","2"),na.addClass("iui-grid-column-header-left")),a.isThereRightFixedColumns&&
(d=Sb(!1,"right"),X=c(d)(z),pa.append(X),X.css("right","0"),X.css("z-index","1"),X.addClass("iui-grid-column-header-right")));a.options.showFooter&&(q.append(Fa),ja&&(Na.css("opacity",ka.opacity),Fa.css("opacity",ka.opacity)),d=Sb(!0),Qa=c(d)(z),Fa.append(Qa),a.isThereLeftFixedColumns&&(d=Sb(!0,"left"),Ca=c(d)(z),Fa.append(Ca),Ca.css("z-index","2"),Ca.addClass("iui-grid-column-footer-left")),a.isThereRightFixedColumns&&(d=Sb(!0,"right"),ma=c(d)(z),Fa.append(ma),ma.css("right","0"),ma.css("z-index",
"1"),ma.addClass("iui-grid-column-footer-right")));for(var f,d=-1,m=0;m<a.columnList.length;m++)if(f=n=null,a.columnList[m][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[m])?(n=a.columnList[m][a.options.columnFields.templateSettings].header,d=1):a.columnList[m][a.options.columnFields.headerContent]?(n=a.columnList[m][a.options.columnFields.headerContent],d=2):a.columnList[m][a.options.columnFields.headerTemplate]&&(n=a.columnList[m][a.options.columnFields.headerTemplate],
d=3),a.columnList[m][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[m],!0)?f=a.columnList[m][a.options.columnFields.templateSettings].footer:a.columnList[m][a.options.columnFields.footerContent]?f=a.columnList[m][a.options.columnFields.footerContent]:a.columnList[m][a.options.columnFields.footerTemplate]&&(f=a.columnList[m][a.options.columnFields.footerTemplate]),(n||f)&&(f=a.getElemFromColumn(a.columnList[m],a.columnList[m][a.options.columnFields.fixed]))&&n&&n&&(f=
a.getChildElement(f,"column-header-cell")))switch(f.empty(),d){case 1:z&&(n='<iui-item-content obj="data['+m+"].column."+a.options.columnFields.templateSettings+'.header.templateObj" template-url="{{data['+m+"].column."+a.options.columnFields.templateSettings+'.header.url}}" draggable="{{data['+m+'].draggable}}"',n+=' data-element="header-template-content" ng-cloak></iui-item-content>',f.append(c(n)(z)));break;case 2:f.append(c(n)(k.$parent));break;case 3:n='<div ng-include="'+n+'"',a.columnList[m][a.options.columnFields.headerTemplateModel]&&
(n+=' onload="'+a.columnList[m][a.options.columnFields.headerTemplateModel]+'"'),n+=' style="margin:0;padding:0"></div>',f.append(c(n)(k.$parent))}Oa(40);R("rows")}else Oa(70),R("scroll");e.cancel(b)},1)},gf=function(){if(1<a.updateStatus)R("end");else var b=e(function(){if(0<a.columnList.length){var d=0;a.options.grouping.enabled&&w&&(d=w[0].offsetHeight);var m=0;a.options.paging.enabled&&V&&(m=V[0].offsetHeight);var n=0;if(a.options.showHeader&&sa){E=sa[0].offsetHeight;a.isThereLeftFixedColumns&&
na?E=na[0].offsetHeight:a.isThereRightFixedColumns&&X&&(E=X[0].offsetHeight);var f=0,h=sa.find("td");if(h&&0<h.length)for(var l=0;l<h.length;l++)var p=angular.element(h[l]),f=f+p[0].offsetWidth;f>q[0].clientWidth&&(f=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),f.css("bottom","-9999px"),q.append(f),n=f[0].offsetHeight,f.remove());pa.css("width",q[0].clientWidth+"px");pa.css("height",E+"px");a.isThereLeftFixedColumns&&(Q=na[0].offsetWidth,
Ob=q[0].clientHeight-E-L,sa.css("left",Q+"px"));a.isThereRightFixedColumns&&(Ma=X[0].offsetWidth,Pb=q[0].clientHeight-E-L)}a.options.showFooter&&(L=Qa[0].offsetHeight,a.isThereLeftFixedColumns&&Ca?L=Ca[0].offsetHeight:a.isThereRightFixedColumns&&ma&&(L=ma[0].offsetHeight),Fa.css("width",q[0].clientWidth+"px"),Fa.css("height",L+"px"),a.isThereLeftFixedColumns&&(Q=Ca[0].offsetWidth,Ob=q[0].clientHeight-E-L,Qa.css("left",Q+"px")),a.isThereRightFixedColumns&&(Ma=ma[0].offsetWidth,Pb=q[0].clientHeight-
E-L));me();if(0<a.currentList.length){u=k.$new();u.data=fd();va=k.$new();va.data=ne();wa=k.$new();wa.data=oe();a.refreshRows();u.$apply();va.$apply();wa.$apply();df();var r=e(function(){Sd();ia&&ia.remove();ha&&ha.remove();Y&&Y.remove();Ra&&Ra.remove();ta&&ta.remove();ua&&ua.remove();Sa&&Sa.remove();ga&&ga.remove();Da&&Da.remove();I=0;for(var b="",g=0;g<a.currentTopList.length;g++)b+=Ea(g,"none",!1,"top"),I++;0<I&&(ha=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block" style="position:absolute;top:'+
E+'px;"></table>'),ha.append(c(b)(va)),eb.append(ha));I=0;b="";for(g=0;g<a.currentBottomList.length;g++)b+=Ea(g,"none",!1,"bottom"),I++;0<I&&(Y=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block" style="position:absolute;bottom:'+L+'px;"></table>'),Y.append(c(b)(wa)),eb.append(Y));b=q[0].clientHeight-d-m-(E+L)-n;F=0<S?Math.floor(b/S)+1:0<E?Math.floor(b/E)+1:100;I=0;b="";for(g=0;g<F;g++)b+=Ea(g),I++;if(0<I){ia=angular.element('<table cellpadding="0" cellspacing="0" style="position:absolute;top:'+
(E+topRowHeight)+'px;"></table>');ia.append(c(b)(u));eb.append(ia);if(a.isThereLeftFixedColumns){b="";for(g=I=0;g<a.currentTopList.length;g++)b+=Ea(g,"left",!1,"top"),I++;0<I&&(ta=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block iui-grid-rows-left-top" style="position:absolute;"></table>'),ta.append(c(b)(va)),fb.append(ta));b="";for(g=I=0;g<a.currentBottomList.length;g++)b+=Ea(g,"left",!1,"bottom"),I++;0<I&&(ua=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block iui-grid-rows-left-bottom" style="position:absolute;bottom:0;"></table>'),
ua.append(c(b)(wa)),fb.append(ua));ia.css("left",Q+"px");b="";for(g=I=0;g<F;g++)b+=Ea(g,"left"),I++;0<I&&(Ra=angular.element('<table class="iui-grid-rows-left" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Ra.append(c(b)(u)),fb.append(Ra),q.append(fb),ja&&db.css("opacity",ka.opacity))}if(a.isThereRightFixedColumns){b="";for(g=I=0;g<a.currentTopList.length;g++)b+=Ea(g,"right",!1,"top"),I++;0<I&&(ga=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block iui-grid-rows-right-top" style="position:absolute;"></table>'),
ga.append(c(b)(va)),gb.append(ga));b="";for(g=I=0;g<a.currentBottomList.length;g++)b+=Ea(g,"right",!1,"bottom"),I++;0<I&&(Da=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block iui-grid-rows-right-bottom" style="position:absolute;bottom:0;"></table>'),Da.append(c(b)(wa)),gb.append(Da));b="";for(g=I=0;g<F;g++)b+=Ea(g,"right"),I++;0<I&&(Sa=angular.element('<table class="iui-grid-rows-right" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Sa.append(c(b)(u)),
gb.append(Sa),q.append(gb),ja&&Ta.css("opacity",ka.opacity))}}Oa(70);R("scroll");e.cancel(r)},1)}else Oa(70),R("scroll")}else Oa(70),R("scroll");e.cancel(b)},1)},Tb=function(b){b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none");a.dropMark()},hf=function(){if(1<a.updateStatus)R("end");else{if(1==a.updateStatus){ha&&ha.unbind("dragover");Y&&Y.unbind("dragover");ta&&ta.unbind("dragover");ua&&ua.unbind("dragover");
ga&&ga.unbind("dragover");ga&&ga.unbind("dragover");eb&&(ea.empty(),ea.append(eb.children()),ha&&ha.bind("dragover",function(a){Tb(a);a.stopPropagation()}),Y&&Y.bind("dragover",function(a){Tb(a);a.stopPropagation()}));if(pa){var b=0;a.options.grouping.enabled&&w&&(b=w[0].offsetHeight);La.css("top",b+"px");La.empty();La.append(pa.children());a.options.showHeader&&(La.css("width",q[0].clientWidth+"px"),La.css("height",E+"px"));q.append(La)}Fa&&(Na.empty(),Na.append(Fa.children()),a.options.showFooter&&
(Na.css("width",q[0].clientWidth+"px"),Na.css("height",L+"px")),q.append(Na));fb&&(db.empty(),db.append(fb.children()),q.append(db),ta&&ta.bind("dragover",function(a){Tb(a);a.stopPropagation()}),ua&&ua.bind("dragover",function(a){Tb(a);a.stopPropagation()}));gb&&(Ta.empty(),Ta.append(gb.children()),q.append(Ta),ga&&ga.bind("dragover",function(a){Tb(a);a.stopPropagation()}),Da&&Da.bind("dragover",function(a){Tb(a);a.stopPropagation()}));a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();
a.updateScrollView()}Oa(80,"complete");R("complete")}},jf=function(){switch(ka.type){case "circular":1==a.updateStatus&&(pe(),Ub=0,sb=!0,a.callLoadComplete());break;case "linear":qe(!1);break;default:Ub=0,sb=!0,1==a.updateStatus&&a.callLoadComplete()}a.updateActive=!1;a.updateStatus--;if(0<a.updateStatus)Vb=a.updateActive=!0,1==a.updateStatus?R("start"):R("end");else if(gd())var b=e(function(){"optimal"==a.options.displayMode&&a.updateGridElements();a.updateView();a.callUpdateComplete();e.cancel(b)},
1);else"optimal"==a.options.displayMode&&(a.updateGridElements(),a.updateView()),a.callUpdateComplete()},jc=[],kc=[],lc=[];a.updateGridElements=function(){if("optimal"==a.options.displayMode){var b=0,c="none";jc.length=0;kc.length=0;lc.length=0;for(var e=jc;3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var f,h,l=0;l<c.length;l++){f=angular.element(c[l]);h={rowElem:f,cellList:[]};if(l<F){f=f.find("td");for(var k=0;k<f.length;k++){var p=angular.element(f[k]),q=a.getContentElement(p);if(q){var r=k;p[0].attributes&&
p[0].attributes["data-index"]&&(r=parseInt(p[0].attributes["data-index"].value,10));p={cell:p,block:q,expandBox:null,icon:null,content:null};r==a.options.expandColIndex&&(p.expandBox=angular.element(a.getContentElement(q,"expandbox")),p.icon=angular.element(a.getContentElement(q,"icon")));var t="content";switch(a.columnList[r][a.options.columnFields.editorType]){case "checkbox":t="checkbox";break;case "image":t="image";break;default:(r=pb(r))&&""!=r&&(t="template-content")}p.content=angular.element(a.getContentElement(q,
t));h.cellList.push(p)}}}e.push(h)}b++;1==b?(c="left",e=kc):(c="right",e=lc)}}};var R=function(b){if(Vb&&!Cb)switch(b){case "start":1<a.updateStatus?R("end"):(a.updateColumnList(),a.updateGroupList(),a.options.paging.enabled&&a.updatePageList(),a.updateCurrentList(),Oa(10),R("init"));break;case "init":1<a.updateStatus?R("end"):(Hb.length=0,Md(),a.options.grouping.enabled&&cf(),Bc||la||$c(),ke(),Qa=sa=Y=ha=ia=null,Ob=Q=0,ua=ta=Ra=na=null,Pb=Ma=0,Da=ga=Sa=X=null,z&&z.$destroy(),u&&u.$destroy(),a.options.paging.enabled&&
ef(),q.append(eb),Oa(20),R("columns"));break;case "columns":ff();break;case "rows":pa?a.options.showHeader&&pa.find("td").length<a.columnList.length?e(function(){R(b)},1):gf():e(function(){R(b)},1);break;case "scroll":hf();break;case "complete":1<a.updateStatus?R("end"):(ke(),Oa(90),R("events"));break;case "events":1<a.updateStatus||(a.allowEvents=!0,a.options.showHeader&&(sa&&Vc(sa),a.isThereLeftFixedColumns&&na&&Vc(na),a.isThereRightFixedColumns&&X&&Vc(X)),0<a.currentList.length&&Ze(),Oa(100));
R("end");break;case "end":jf()}else e(function(){R(b)},1)},re=5,Gc=0,Db=0,Hc=0,se=0,Cb=!1,Ic=!1,ka={type:"none",speed:"normal",opacity:0},hd=null,ja=!1,sb=!1,qe=function(b){var d=p(function(){b?Db++:Db--;Hc=(q[0].clientHeight-Db)/2+2;mc.css("height",Db+"px");hb.css("top",Hc+"px");b&&Db>=re?(ja=!0,Oa(0),sb=Cb=!1,p.cancel(d)):!b&&0>=Db&&(hb&&hb.remove(),Ub=0,sb=!0,a.callLoadComplete(),p.cancel(d))},20)},pe=function(){hd&&p.cancel(hd);Va&&Va.remove()};a.beginLoad=function(a){if(!Cb)switch(Cb=!0,ka=a?
{type:void 0!=a.type?a.type:"none",speed:void 0!=a.speed?a.speed:"normal",opacity:void 0!=a.opacity?a.opacity:0}:{type:"none",speed:"normal",opacity:0},id(ka.opacity),ka.type){case "circular":pe();q.append(Va);Va.css("top",(q[0].clientHeight-Va[0].offsetHeight)/2+"px");Va.css("left",(q[0].clientWidth-Va[0].offsetWidth)/2+"px");ja=!0;sb=Cb=!1;var b=0,d=3;switch(ka.speed){case "veryfast":d=7;break;case "fast":d=5;break;case "slow":d=2;break;case "veryslow":d=1}hd=p(function(){b+=d;360<b&&(b=0);var a=
"rotate("+b+"deg)";Va.css("-ms-transform",a);Va.css("-webkit-transform",a);Va.css("transform",a)},1);break;case "linear":a=angular.element('<div class="iui-load-block-progress" style="position:absolute;left:-9999px"></div>');q.append(a);re=parseInt(getComputedStyle(a[0]).height,10);a.remove();mc.css("width","0px");mc.css("height","0px");q.append(hb);Ub=0;Gc=Math.floor(.5*q[0].clientWidth);Db=0;Hc=q[0].clientHeight/2+2;se=(q[0].clientWidth-Gc)/2;hb.css("width",Gc+"px");hb.css("top",Hc+"px");hb.css("left",
se+"px");hb.css("opacity","1");qe(!0);break;default:ja=!0,sb=Cb=!1}};a.endLoad=function(){if(!Ic)if(Ic=!0,ja){ja=!1;var a=3,b=ka.opacity,c=p(function(){sb&&(10<a||1<=b?(id(1),Ic=Cb=sb=!1,ka={type:"none",speed:"normal"},p.cancel(c)):(b+=a/10,id(b),a+=3))},1)}else Ic=!1};var id=function(a){w&&w.css("opacity",a);La&&La.css("opacity",a);db&&db.css("opacity",a);ea&&ea.css("opacity",a);Ta&&Ta.css("opacity",a);Na&&Na.css("opacity",a);V&&V.css("opacity",a);C&&C.css("opacity",a);N&&N.css("opacity",a);Xa&&
Xa.css("opacity",a)},mc=angular.element('<div class="iui-load-block-progress"></div>'),hb=angular.element('<div class="iui-load-block"></div>');hb.append(mc);var Ub=0,Vb=!1,Va=angular.element('<div class="iui-load-circular"></div>'),Oa=function(a){if(ja&&"linear"==ka.type){Vb=!1;var b=Math.floor(Gc*a/100),d=Ub;a=10;switch(ka.speed){case "veryfast":a=2;break;case "fast":a=5;break;case "slow":a=15;break;case "veryslow":a=20}var c=b>d?Math.floor((b-d)/a):1,c=0<c?c:1,e=p(function(){d+=c;mc.css("width",
d+"px");d>=b&&(Ub=b,Vb=!0,p.cancel(e))},1)}else Vb=!0};a.updateStatus=0;a.updateActive=!1;a.updateLayout=function(b){q.append(G.$tw);G.s1t(G.twp);b=!0;for(var d=q.parent();"body"!=d[0].tagName.toLowerCase();){if("none"==getComputedStyle(d[0]).display){b=!1;break}d=d.parent()}b&&a.allowUpdate&&(a.updateStatus++,a.updateActive||(a.updateActive=!0,a.allowEvents=!1,q.removeClass("iui-grid-block-rtl"),a.options.rtl&&q.addClass("iui-grid-block-rtl"),ea.removeClass("iui-grid-block-shift-left iui-grid-block-rtl"),
ea.addClass(Gb()),S=0,F=100,L=E=0,Vb=!0,R("start")))};a.updateCurrentLayout=function(b){if(a.allowUpdate)if(0==a.currentList.length)a.updateLayout();else{a.updateGroupList();a.options.paging.enabled&&(a.updatePageList(),J&&(J.minPages=0<a.pageList.length?1:0,J.numPages=a.pageList.length),a.updatePageNumber());a.updateCurrentList();a.updateView();var d=e(function(){a.updateViewSize();a.updateViewSize();b&&a.updateScrollVisibility();a.updateScrollView();e.cancel(d)},1)}};var kf=function(b,c){var d=
a.options.enabled&&a.options.allowColumnReorder&&b[a.options.columnFields.allowDrag],g=b[a.options.columnFields.headerAlignment],e=b[a.options.columnFields.footerAlignment],f=a.isFilteringAllowed(b),h=a.isSortingAllowed()&&b==a.sortColumn,l=a.getColumnWidth(b),l=0<=l?l:0,k=jd(b);l<k.min&&(l=k.min);l>k.max&&(l=k.max);return{draggable:d,headerAlignment:g,footerAlignment:e,index:c,indent:0,column:b,showFiltering:f,showSorting:h,style:{header:{},footer:{}},width:l}},te=function(b,c){var d=0;if(c==a.options.expandColIndex){var g,
e=a.columnList[a.options.expandColIndex],d=a.getColumnWidth(e),f=d-a.indentList[b],f=0<=f?f:0;g={top:0,right:0,bottom:0,left:0};(e=a.getElemFromColumn(e,e[a.options.columnFields.fixed]))&&(e=a.getChildElement(e,"column-header-cell"))&&(g=l.getPadding(e[0]));g=g.left+a.indentList[b];0==f&&(g=d);d=g}return d},kd=function(b,c,e){var d=c;e&&(e=a.columnList[c][a.options.columnFields.id])&&(d=a.getCellIndexById(a.currentList[b][a.options.rowFields.cells],c,e));return d},ue=function(b){return a.columnList[b][a.options.columnFields.contentAlignment]?
a.columnList[b][a.options.columnFields.contentAlignment]:"left"},ve=function(b,c){var d=a.columnList[c],g=a.getColumnWidth(d),d=jd(d);g<d.min&&(g=d.min);g>d.max&&(g=d.max);c==a.options.expandColIndex&&(g-=a.indentList[b]);return 0<=g?g:0},ld=function(b,c){return 1==a.options.allowFocus&&1==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])&&0<=c?a.getTabIndex().toString()+(b+1).toString()+c.toString():""},we=function(b){return 1==a.options.allowFocus&&0==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])?
a.getTabIndex().toString()+(b+1).toString():""},xe=function(b,c,e){if(0<=c){var d=a.currentList[b][a.options.rowFields.cells];switch(e){case "top":d=a.currentTopList[b][a.options.rowFields.cells];break;case "bottom":d=a.currentBottomList[b][a.options.rowFields.cells]}if(c<d.length)return d[c]}return{}},pb=function(b){return a.columnList[b][a.options.columnFields.cellTemplateUrl]?a.columnList[b][a.options.columnFields.cellTemplateUrl]:""},md=function(b,c,e,f){for(var d=[],g=0;g<a.columnList.length;g++){var m=
kd(c,g,e),n=e?xe(c,m,f):{},h=ue(g),l=a.columnList[g][a.options.columnFields.editorSettings],l=l&&l.style?l.style:null,k;if(e)a:{if(0<=m&&(k=a.currentList[c][a.options.rowFields.cells],m<k.length)){k=1==a.options.enabled&&k[m][a.options.cellFields.enabled];break a}k=1==a.options.enabled}else k=!1;var p=e?te(c,g):0,q=m,r=e?ld(c,g):"",t=pb(g),u;if(e){var v=c;u=m;var w=pb(g),v=xe(v,u);u=0<=u&&w&&""!=w&&v&&void 0!=v[a.options.cellFields.templateObj]&&null!=v[a.options.cellFields.templateObj]?!0:!1}else u=
!1;if(e)a:{if(0<=m&&(w=a.currentList[c][a.options.rowFields.cells],m<w.length)){w=w[m][a.options.cellFields.text];break a}w=""}else w="";if(e)a:{if(0<=m&&(v=a.currentList[c][a.options.rowFields.cells],m<v.length)){v=v[m][a.options.cellFields.value];break a}v=null}else v=null;m={related:n,alignment:h,editorStyle:l,enabled:k,indent:p,index:q,style:{},tabindex:r,templateUrl:t,templateVisible:u,text:w,value:v,visible:e?0<=m?!0:!1:!1,width:e?ve(c,g):0};d.push(m)}return{cells:d,expandBox:e?Od(b):"",expandBoxVisible:e&&
!f?0!=a.options.showExpandBoxes:!1,draggable:e&&!f?a.isRowEnabled(b)&&a.isDragAllowed(b):!1,icon:e?ee(b):"",iconVisible:e?0!=a.options.showIcons&&Zc(b):!1,index:c,row:e?b:{},style:{},tabindex:e&&!f?we(c):"",updateContextMenu:e?null!=b[a.options.rowFields.contextMenu]:!1,visible:e}},le=function(){for(var b=[],c=0;c<a.columnList.length;c++)b.push(kf(a.columnList[c],c));return b},fd=function(){for(var b=[],c=v;c<v+F;c++)b.push(md(a.currentList[c],c,c<a.currentList.length));return b},ne=function(){for(var b=
[],c=0;c<a.currentTopList.length;c++)b.push(md(a.currentTopList[c],c,c<a.currentTopList.length,"top"));return b},oe=function(){for(var b=[],c=0;c<a.currentBottomList.length;c++)b.push(md(a.currentBottomList[c],c,c<a.currentBottomList.length,"bottom"));return b},me=function(){for(var b=0;b<a.columnList.length;b++)if(a.isFilteringAllowed(a.columnList[b])){var c=a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);c&&(c=a.getChildElement(c,"column-header-cell"))&&(c=a.getContentElement(c,
"filter-button"))&&(c.css("top",(E-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),c.css("right","2px"))}a.isSortingAllowed()&&a.sortColumn&&(b=a.getElemFromColumn(a.sortColumn,a.sortColumn[a.options.columnFields.fixed]))&&(c=a.getChildElement(b,"column-header-cell"))&&(c=a.getContentElement(c,"sort-button"))&&(c.css("top",(E-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),a.isFilteringAllowed(a.sortColumn)?c.css("right","22px"):c.css("right","2px"))};a.getRowScope=function(){return u};
var ze=function(){if(z&&u&&(a.allowEvents=!1,nd(!1),0<a.columnList.length&&(z.data=le(),u.data=fd(),va&&(va.data=ne()),wa&&(wa.data=oe()),a.options.selectedRow&&!a.isRowEnabled(a.options.selectedRow)&&(a.options.selectedRow[a.options.rowFields.selected]=!1,a.options.selectedRow=null,a.updateSelectionList()),a.refresh(null,null,!1),z.$apply(),u.$apply(),va&&va.$apply(),wa&&wa.$apply(),me(),a.allowEvents=!0,0>=a.options.rowHeight&&gd())))for(var b=v;0<=b&&b<v+F&&b<a.currentList.length;b++)ye(a.currentList[b])},
od=function(b,c){var d=0;if(b&&u){var e=a.getElemFromRow(b,c);e&&(d=e[0].offsetHeight)}return d},gd=function(){for(var b=!1,c=0;c<a.columnList.length;c++){var e=pb(c);if(e&&""!=e){b=!0;break}}return b},pd=function(b,c,e){if((b=a.getElemFromRow(b,c))&&(b=b.find("td"))&&0<b.length)for(c=0;c<b.length;c++){var d=angular.element(b[c]),d=a.getContentElement(d),g=l.getBorderWidth(d[0]),m=l.getPadding(d[0]);d&&d.css("height",e-(g.top+g.bottom)-(m.top+m.bottom)-2.85+"px")}},qd=function(b,c){var d=a.getElemFromRow(b,
c);if(d&&(d=d.find("td"))&&0<d.length)for(var e=0;e<d.length;e++){var g=angular.element(d[e]);(g=a.getContentElement(g))&&g.css("height","auto")}},ye=function(a){qd(a,"none");qd(a,"left");qd(a,"right");var b=od(a),c=od(a,"left"),d=od(a,"right"),b=Math.max(Math.max(b,c),d);pd(a,"none",b);pd(a,"left",b);pd(a,"right",b)};a.updateView=function(b,c){if(b)ze(),a.updateCurrentView(c);else var d=e(function(){ze();a.updateCurrentView(c);e.cancel(d)},1)};a.updateVerticalScrollView=function(){if(u&&(a.allowEvents=
!1,nd(!1),u.data=fd(),a.refresh(null,null,!1,!0),u.$apply(),a.updateCurrentView(!0),a.allowEvents=!0,0>=a.options.rowHeight&&gd()&&(a.isThereLeftFixedColumns||a.isThereRightFixedColumns)))for(var b=v;0<=b&&b<v+F&&b<a.currentList.length;b++)ye(a.currentList[b])};a.updateCurrentView=function(b){if("optimal"==a.options.displayMode)for(var c=0,d="none",e=jc;3>c;){var f=0,h=a.columnList.length,l=0;if("none"==d&&b)for(var f=gc,h=hc,k=0;k<f&&k<a.columnList.length;k++)a.isColumnFixed(a.columnList[k])||l++;
if(e&&0<e.length)for(k=0;k<e.length;k++)if(k<F&&k<a.currentList.length&&k+v<a.currentList.length){var p=a.currentList[k+v];e[k].rowElem&&(e[k].rowElem.attr("data-index",k+v),e[k].rowElem.attr("tabindex",we(k+v)));for(var q=l,r=f;r<=h&&r<a.columnList.length;r++){var t=a.columnList[r][a.options.columnFields.fixed]?a.columnList[r][a.options.columnFields.fixed]:"none";if(t==d&&q<e[k].cellList.length){e[k].cellList[q].block.css("width",ve(k+v,r)+"px");e[k].cellList[q].block.css("text-align",ue(r));e[k].cellList[q].block.css("opacity",
1);e[k].cellList[q].cell.attr("draggable",a.isRowEnabled(p)&&a.isDragAllowed(p));e[k].cellList[q].cell.attr("tabindex",ld(k+v,r));var t="",u=kd(k+v,r,!0);0<=u&&u<a.currentList[k+v][a.options.rowFields.cells].length&&(r==a.options.expandColIndex&&(e[k].cellList[q].block.css("padding-left",te(k+v,r)+"px"),e[k].cellList[q].expandBox&&(e[k].cellList[q].expandBox.removeAttr("class"),e[k].cellList[q].expandBox.addClass(Od(p))),e[k].cellList[q].icon&&(e[k].cellList[q].icon.removeAttr("class"),e[k].cellList[q].icon.addClass(ee(p)))),
t=p[a.options.rowFields.cells][u][a.options.cellFields.text],"combobox"==a.columnList[r][a.options.columnFields.editorType]&&(t=p[a.options.rowFields.cells][u][a.options.cellFields.value]?p[a.options.rowFields.cells][u][a.options.cellFields.value].text:""));if(e[k].cellList[q].content)switch(a.columnList[r][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(u=pb(r))&&""!=u||e[k].cellList[q].content.text(t)}q++}}}else for(e[k].rowElem&&(e[k].rowElem.attr("data-index",
k+v),e[k].rowElem.attr("tabindex","")),q=l,r=f;r<=h&&r<a.columnList.length;r++)if(t=a.columnList[r][a.options.columnFields.fixed]?a.columnList[r][a.options.columnFields.fixed]:"none",t==d&&q<e[k].cellList.length){u=r;e[k].cellList[q].block.css("width","0px");e[k].cellList[q].cell.attr("draggable",!1);e[k].cellList[q].cell.attr("tabindex","");u==a.options.expandColIndex&&(e[k].cellList[q].block.css("padding-left","0px"),e[k].cellList[q].expandBox&&e[k].cellList[q].expandBox.removeAttr("class"),e[k].cellList[q].icon&&
e[k].cellList[q].icon.removeAttr("class"));if(e[k].cellList[q].content){switch(a.columnList[u][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(u=pb(r))&&""!=u||e[k].cellList[q].content.html("")}e[k].cellList[q].content.attr("draggable",!1);e[k].cellList[q].content.attr("tabindex",ld(k+v,r))}q++}c++;1==c?(d="left",e=kc):(d="right",e=lc)}};var nc=function(b,c,e,f){var d={cell:"",content:"",general:"",label:""};switch(e){case "column":f?(e=a.defaultStyle.column.footer.normal,
a.options.controlStyle.column.footer.normal!=e&&(e+=" "+a.options.controlStyle.column.footer.normal),d.general=e,d.cell="iui-grid-column-footer-cell",e=a.defaultStyle.column.footer.content,a.options.controlStyle.column.footer.content!=e&&(e+=" "+a.options.controlStyle.column.footer.content)):(e=a.defaultStyle.column.header.normal,a.options.controlStyle.column.header.normal!=e&&(e+=" "+a.options.controlStyle.column.header.normal),d.general=e,d.cell="iui-grid-column-header-cell",e=a.defaultStyle.column.header.content,
a.options.controlStyle.column.header.content!=e&&(e+=" "+a.options.controlStyle.column.header.content));d.content=e;break;case "row":e=a.defaultStyle.row.general.normal;a.isRowFixed(b)?(e=a.defaultStyle.row.fixed.normal,a.options.controlStyle.row.fixed.normal!=e&&(e+=" "+a.options.controlStyle.row.fixed.normal)):a.options.controlStyle.row.general.normal!=e&&(e+=" "+a.options.controlStyle.row.general.normal);d.general=e;break;case "cell":e=a.defaultStyle.row.cell.normal;a.options.controlStyle.row.cell.normal!=
e&&(e+=" "+a.options.controlStyle.row.cell.normal);switch(a.options.gridLines){case "none":e=c==v+F-1||c==a.currentList.length-1?e+" iui-grid-lines-horizontal":e+" iui-grid-lines-none";break;case "horizontal":e+=" iui-grid-lines-horizontal";break;case "vertical":e=c==v+F-1||c==a.currentList.length-1?e+" iui-grid-lines-both":e+" iui-grid-lines-vertical";break;default:e+=" iui-grid-lines-both"}d.general=e;e=a.defaultStyle.row.cell.content;a.options.controlStyle.row.cell.content!=e&&(e+=" "+a.options.controlStyle.row.cell.content);
d.content=e;d.label=a.getDefaultCellLabelClass()}return d},Ae=function(b){var c="";a.isFilteringAllowed(b)&&(b=a.getObjState(b),c="iui-filtering","selected"==b?c+=" iui-filtering-selected":"hovered"==b&&(c+=" iui-filtering-hovered"));return c},Be=function(b){var c="";a.isSortingAllowed()&&b==a.sortColumn&&(b=a.getObjState(b),"ascending"==a.options.sorting?(c="iui-sort-ascending","selected"==b?c+=" iui-sort-ascending-selected":"hovered"==b&&(c+=" iui-sort-ascending-hovered")):(c="iui-sort-descending",
"selected"==b?c+=" iui-sort-descending-selected":"hovered"==b&&(c+=" iui-sort-descending-hovered")));return c},Ga=function(b,c,e,f){var d=a.getObjState(b);e=nc(b,e,b.type,f);switch(b.type){case "column":f?(c=a.getCurrentColumnStyle(b,"footer",d),c!=a.options.controlStyle.column.footer.normal&&(e.general+=" "+c),b=a.getCurrentColumnStyle(b,"footer","content"),b!=a.options.controlStyle.column.footer.content&&(e.content+=" "+b)):(c=a.getCurrentColumnStyle(b,"header",d),c!=a.options.controlStyle.column.header.normal&&
(e.general+=" "+c),b=a.getCurrentColumnStyle(b,"header","content"),b!=a.options.controlStyle.column.header.content&&(e.content+=" "+b));break;case "group":c=a.getCurrentRowStyle(b,d);c!=a.options.controlStyle.row.general.normal&&(e.general+=" "+c);break;case "row":c=a.getCurrentRowStyle(b,d);a.isRowFixed(b)?c!=a.options.controlStyle.row.fixed.normal&&(e.general+=" "+c):c!=a.options.controlStyle.row.general.normal&&(e.general+=" "+c);break;case "cell":f=a.getCurrentCellStyle(c,b,d),f!=a.options.controlStyle.row.cell.normal&&
(e.general+=" "+f),b=a.getCurrentCellStyle(c,b,"content"),b!=a.options.controlStyle.row.cell.content&&(e.content+=" "+b)}return e},ib=function(a,b,c,e){var d=u;switch(e){case "top":d=va;break;case "bottom":d=wa}d&&(d.data[a].cells[b].style.cell=c.general,d.data[a].cells[b].style.content=c.content,d.data[a].cells[b].style.label=c.label)},Ce=function(b){if(u&&(b-=v,0<=b&&b<u.data.length&&u.data[b].visible)){u.data[b].style=a.defaultStyle.row.general.normal;for(var c=0;c<a.columnList.length;c++)u.data[b].cells[c].style.cell=
a.defaultStyle.row.cell.normal+" iui-grid-cell-empty"}};a.refreshColumns=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b],null,!1)};a.refreshRows=function(){for(var b=v;b<v+F;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):Ce(b);for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1)};var De=function(b,c,e,f,h){if(e&&b[a.options.rowFields.fixed]==f&&(c=c.indexOf(b),
0<=c&&c<e.data.length&&e.data[c].visible)){e.data[c].style=Ga(b).general;for(var d=nc(b,c,"cell"),g=0;g<a.columnList.length&&g<e.data[c].cells.length;g++){var m=e.data[c].cells[g].index;if(0<=m){var n=b[a.options.rowFields.cells];m<n.length?(m=Ga(n[m],b,c),ib(c,g,m,f)):ib(c,g,d,f)}else ib(c,g,d,f)}void 0==h&&e&&e.$apply()}};a.refreshHover=function(b){"optimal"==a.options.displayMode?a.refresh(b,null,null,!0):a.refresh(b)};a.refresh=function(b,c,e,f){"optimal"==a.options.displayMode?a.refreshOptimal(b,
c,e,f):a.refreshNormal(b,c,e)};a.refreshNormal=function(b,c,e){if(b)switch(b.type){case "column":z&&(c=a.getColumnCurrentIndex(b),0<=c&&c<z.data.length&&(1==a.options.showHeader&&(z.data[c].style.header=Ga(b)),1==a.options.showFooter&&(z.data[c].style.footer=Ga(b,null,-1,!0)),z.data[c].style.filtering=Ae(b),z.data[c].style.sorting=Be(b),void 0==e&&z&&z.$apply()));break;case "group":if(u){c=a.getRowCurrentIndex(b);var d=c-v;if(0<=d&&d<u.data.length&&u.data[d].visible){u.data[d].style=Ga(b).general;
for(var g=nc(b,c,"cell"),f=0;f<a.columnList.length&&f<u.data[d].cells.length;f++){var m=u.data[d].cells[f].index;if(0<=m){var h=b[a.options.rowFields.cells];m<h.length?(m=Ga(h[m],b,c),ib(d,f,m)):ib(d,f,g)}else ib(d,f,g)}void 0==e&&u&&u.$apply()}}break;case "row":if(u&&!a.isRowFixed(b)&&(c=a.getRowCurrentIndex(b),d=c-v,0<=d&&d<u.data.length&&u.data[d].visible)){u.data[d].style=Ga(b).general;g=nc(b,c,"cell");for(f=0;f<a.columnList.length&&f<u.data[d].cells.length;f++)m=u.data[d].cells[f].index,0<=m?
(h=b[a.options.rowFields.cells],m<h.length?(m=Ga(h[m],b,c),ib(d,f,m)):ib(d,f,g)):ib(d,f,g);void 0==e&&u&&u.$apply()}De(b,a.currentTopList,va,"top",e);De(b,a.currentBottomList,wa,"bottom",e)}else{for(f=0;f<a.columnList.length;f++)a.refresh(a.columnList[f],null,!1);for(b=v;b<v+F;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):Ce(b);1==e&&u&&u.$apply();for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);1==e&&va&&va.$apply();for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],
null,!1);1==e&&wa&&wa.$apply()}};a.refreshOptimal=function(b,c,e,f){if(b)switch(b.type){case "column":z&&(c=a.getColumnCurrentIndex(b),0<=c&&c<z.data.length&&(1==a.options.showHeader&&(z.data[c].style.header=Ga(b)),1==a.options.showFooter&&(z.data[c].style.footer=Ga(b,null,-1,!0)),z.data[c].style.filtering=Ae(b),z.data[c].style.sorting=Be(b),void 0==e&&z&&z.$apply()));break;case "group":a.refreshCurrentView(b,f);break;case "row":a.refreshCurrentView(b,f)}else{for(b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b],
null,!1);for(b=v;b<v+F;b++)b<a.currentList.length?a.refreshCurrentView(a.currentList[b]):Ee(b-v)}};var Ee=function(b,c){for(var d=0,e="none",g=jc;3>d;){var f=b,h=0,k=a.columnList.length,l=0;if("none"==e&&c)for(var h=gc,k=hc,p=0;p<h&&p<a.columnList.length;p++)a.isColumnFixed(a.columnList[p])||l++;if(g&&0<g.length&&0<=f&&f<g.length&&u)for(oc(g[f].rowElem,a.defaultStyle.row.general.normal);h<=k&&h<a.columnList.length;h++)(a.columnList[h][a.options.columnFields.fixed]?a.columnList[h][a.options.columnFields.fixed]:
"none")==e&&l<g[f].cellList.length&&(oc(g[f].cellList[l].cell,a.defaultStyle.row.cell.normal+" iui-grid-cell-empty"),l++);d++;1==d?(e="left",g=kc):(e="right",g=lc)}},oc=function(a,b){a&&(a.removeAttr("class"),a.addClass(b))};a.refreshCurrentView=function(b,c){for(var d=0,e="none",g=jc;3>d;){var f=b,h=c;if(f)switch(f.type){case "group":Fe(f,g,e,h);break;case "row":Fe(f,g,e,h)}else for(f=v;f<v+F;f++)f<a.currentList.length?a.refreshCurrentView(a.currentList[f],!0):Ee(f,!0);d++;1==d?(e="left",g=kc):(e=
"right",g=lc)}};var Fe=function(b,c,e,f){if(u&&c&&0<c.length){var d=a.getRowCurrentIndex(b),g=d-v;if(0<=g&&g<c.length&&g<u.data.length&&u.data[g].visible){oc(c[g].rowElem,Ga(b).general);var m=0,n=a.columnList.length,h=0;if("none"==e&&f)for(m=gc,n=hc,f=0;f<m&&f<a.columnList.length;f++)a.isColumnFixed(a.columnList[f])||h++;for(;m<=n&&m<a.columnList.length;m++)(a.columnList[m][a.options.columnFields.fixed]?a.columnList[m][a.options.columnFields.fixed]:"none")==e&&h<c[g].cellList.length&&(f=kd(d,m,!0),
0<=f&&f<a.currentList[d][a.options.rowFields.cells].length?oc(c[g].cellList[h].cell,Ga(a.currentList[d][a.options.rowFields.cells][f],b,d).general):oc(c[g].cellList[h].cell,nc(b,d,"cell").general),h++)}}};a.moveColumn=function(b,c){if(b&&0!=a.callColumnPosChanging(b)){var d=a.columnList[0];0<=a.options.expandColIndex&&a.options.expandColIndex<a.columnList.length&&(d=a.columnList[a.options.expandColIndex]);var e=a.getColumnCurrentIndex(b),g=a.getColumnRealIndex(e),f=-1,h=a.getFullColumnList();switch(c){case "first":f=
0;break;case "left":(e=Tc(e-1,b[a.options.columnFields.fixed],!0))&&(f=a.getColumnRealIndex(a.getColumnCurrentIndex(e)));break;case "right":(e=Uc(e+1,b[a.options.columnFields.fixed],!0))&&(f=a.getColumnRealIndex(a.getColumnCurrentIndex(e)));break;case "last":f=h.length-1}0<=f&&f<h.length&&g!=f&&(g<f?"first"!=c&&"left"!=c||f--:g>f&&("last"!=c&&"right"!=c||f++),a.columnsObj.moveObject(g,f),a.updateColumnList(),d=a.getColumnCurrentIndex(d),d!=a.options.expandColIndex?(a.options.expandColIndex=d,a.updateLayout()):
a.updateView(),a.callColumnPosChanged(A,a.hoverColumn))}};a.moveRow=function(b,c,e,f){if(b){a.allowUpdate=!1;var d=-1;switch(e){case "first":d=0;break;case "at":d=f}if(Array.isArray(b)){f=[];for(var g=0;g<b.length;g++){for(var m=!1,h=a.getParent(b[g]);h;){if(0<=b.indexOf(h)){m=!0;break}h=a.getParent(h)}m||f.push(b[g])}if(0<f.length)if(b=a.getObjCurrentIndex(f[0]),g=a.getObjCurrentIndex(f[f.length-1]),b<=g)for(g=0;g<f.length;g++)rd(f[g],c,d,e);else for(g=f.length-1;0<=g;g--)rd(f[g],c,d,e)}else rd(b,
c,d,e);a.allowUpdate=!0;a.updateCurrentLayout();a.callChange()}};var rd=function(b,c,e,f){a.rowsObj.removeAt(b,-1,null,a.objIsRemoved)&&("first"==f||"last"==f||"at"==f?a.rowsObj.insertAt(b,e,c,a.rowIsAdded):"before"==f?a.rowsObj.insertByRef(b,c,!1,a.rowIsAdded):"after"==f&&a.rowsObj.insertByRef(b,c,!0,a.rowIsAdded))},bb="none",W=!1,Jc=-1,bb="none",Kc=0,Lc=0,$a=null;k.$watch(function(){return q[0].offsetWidth},function(b,c){a.options.autoUpdate&&(100==F?a.updateLayout():b!=c&&($a&&(e.cancel($a),$a=
null),$a=e(function(){La&&La.css("width",q[0].clientWidth+"px");Na&&Na.css("width",q[0].clientWidth+"px");a.updateCurrentLayout();e.cancel($a);$a=null},250)))});var ab=null;k.$watch(function(){return q[0].offsetHeight},function(b,c){a.options.autoUpdate&&b!=c&&(a.options.autoSize?a.updateCurrentLayout():(ab&&(e.cancel(ab),ab=null),ab=e(function(){a.updateLayout();e.cancel(ab);ab=null},250)))});a.isColumnWithFixedWidth=function(b){var c=a.columnList;return c&&0<=b&&b<c.length?c[b][a.options.columnFields.fixedWidth]?
c[b][a.options.columnFields.fixedWidth]:!1:!1};a.setColumnResizingParams=function(b,c,e){0<=b&&b<a.columnList.length&&(Jc=b,bb=c,Lc=e,Kc=a.getColumnWidth(a.columnList[b]))};var Ge=function(b){return b&&0!=b[a.options.columnFields.visible]?!0:!1};a.isColumnFixed=function(b){return!b||"left"!=b[a.options.columnFields.fixed]&&"right"!=b[a.options.columnFields.fixed]?!1:!0};var Tc=function(b,c,e){var d=null;c=void 0==c?"none":c;for(var f=b;0<=f;f--)if(!e||e&&Ge(a.columnList[f]))if(b=a.columnList[f][a.options.columnFields.fixed],
b=void 0==b?"none":b,b==c){d=a.columnList[f];break}return d},Uc=function(b,c,e){var d=null;c=void 0==c?"none":c;for(var f=b;f<a.columnList.length;f++)if(!e||e&&Ge(a.columnList[f]))if(b=a.columnList[f][a.options.columnFields.fixed],b=void 0==b?"none":b,b==c){d=a.columnList[f];break}return d},Ud=function(b,c){if(0<=b&&b<a.columnList.length){var d=a.columnList[b];if(d)switch(columnFixedType=d[a.options.columnFields.fixed],c){case "left":if("right"!=columnFixedType){if(!Tc(b-1,d[a.options.columnFields.fixed]))return!1}else if(!columnFixedType||
"none"==columnFixedType)return 0<b;break;case "right":if("right"==columnFixedType&&!Uc(b+1,d[a.options.columnFields.fixed]))return!1}}return!0};a.resizeColumn=function(b,c,e){0>c&&(c=0);var d;if(d=a.getHeaderElem(e))d=angular.element(d.find("tr")),a.resizeColumnCells(d,b,c,1,e);a.resizeRows(b,c,e);a.resizeRows(b,c,e,"top");a.resizeRows(b,c,e,"bottom");if(d=a.getFooterElem(e))d=angular.element(d.find("tr")),a.resizeColumnCells(d,b,c,2,e);0<=b&&b<a.columnList.length&&a.callColumnSizeChanged(a.columnList[b])};
a.resizeRows=function(b,c,e,f){var d=a.getRowElems(e,f);if(d){var g={top:0,right:0,bottom:0,left:0},m=a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);m&&(m=a.getChildElement(m,"column-header-cell"))&&(g=l.getPadding(m[0]));for(m=0;m<d.length;m++)currentRowElem=angular.element(d[m]),a.resizeColumnCells(angular.element(d[m]),b,c,0,e,!0,g,f)}};a.resizeColumnCells=function(b,c,e,f,h,k,l,p){if(b){var d=-1;k&&(d=a.getRowCurrentIndex(a.getRowFromElem(b)));b=0;0<=d&&!p&&
(b=a.indentList[d]);switch(f){case 1:f=a.getElemFromColumnCell(c,h);break;case 2:f=a.getElemFromColumnCell(c,h,!0);break;default:f=a.getElemFromCell(d,c,h,p)}f&&0<f.children().length&&(f=f.children().eq(0))&&(l=l?l.left+b:b,h=e,0<=d&&c==a.options.expandColIndex&&(h-=l),h=0<=h?h:0,f.css("width",h+"px"),c==a.options.expandColIndex&&(0==h?f.css("padding-left",e+"px"):f.css("padding-left",l+"px")))}};var Fd=function(b){a.dropMark()},Gd=function(a){Kb()},Hd=function(b){a.removeDropMark();a.dragIcon&&angular.element(a.dragIcon).remove();
a.cancelScrollTimer();a.dragDropStatus(!1)};angular.element(h).bind("dragenter",Fd);angular.element(h).bind("dragover",Gd);angular.element(h).bind("dragend",Hd);var ra=angular.element('<div class="iui-grid-column-reorder-mark"><span></span></div>'),fa=angular.element('<div class="iui-grid-column-reorder-tooltip"><span></span></div>'),Pd=function(b){var c="initial";aa&&A&&(!a.hoverColumn||A==a.hoverColumn||a.hoverColumn&&0==a.hoverColumn.allowDrop||a.hoverColumn&&A[a.options.columnFields.fixed]!=a.hoverColumn[a.options.columnFields.fixed])&&
(c="not-allowed",b&&fa&&fa.css("display","none"));q.css("cursor",c);document.body.style.cursor=c},jd=function(b){return b?{min:l.isFieldAvailable(b[a.options.columnFields.minWidth],0),max:l.isFieldAvailable(b[a.options.columnFields.maxWidth],9999999)}:{min:0,max:9999999}},Jd=function(b){if(0===b.button&&0<=Jc&&"none"!=bb){var c=a.getMousePos(b),d=Jc,e=a.columnList;if(0<=d&&d<e.length){var f=Kc+c.x-Lc;"right"==e[d][a.options.columnFields.fixed]&&(f=Kc-(c.x-Lc));f=0<=f?f:0;c=jd(e[d]);f>=c.min&&f<=c.max&&
(e[d][a.options.columnFields.width]=f,a.resizeColumn(d,f,e[d][a.options.columnFields.fixed]),a.updateViewSize(),a.updateScrollVisibility(),$c())}}U&&U.css("display","none");fa&&fa.css("display","none");Bc?ja||1!==b.which||(T[0].getBoundingClientRect(),b=a.getMousePos(b),G.scrollMousePos||(G.scrollMousePos=b),d=T[0].offsetLeft+(b.x-G.scrollMousePos.x),d<Ua?d=Ua:d+T[0].offsetWidth>nb&&(d=nb-T[0].offsetWidth),T.css("left",d+"px"),G.scrollMousePos=b,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.x=
!1!==a.options.rtl?parseInt((nb-T[0].offsetLeft-T[0].offsetWidth)*Ab,10):parseInt((T[0].offsetLeft-Ua)*Ab,10),ad(),(sd(a.scrollPos)||a.scrollPos.x!=a.prevScrollPos.x)&&a.callScrollPosChanged()):la&&(ja||1!==b.which||(ba[0].getBoundingClientRect(),b=a.getMousePos(b),G.scrollMousePos||(G.scrollMousePos=b),d=ba[0].offsetTop+(b.y-G.scrollMousePos.y),d<ob?d=ob:d+ba[0].offsetHeight>Rb&&(d=Rb-ba[0].offsetHeight),ba.css("top",d+"px"),G.scrollMousePos=b,Ec=d-ob,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},
a.scrollPos.y=Math.floor(Ec*Fc*S),(sd(a.scrollPos)||a.scrollPos.y!=a.prevScrollPos.y)&&a.callScrollPosChanged(),newIndex=0<S?Math.floor(a.scrollPos.y/S):0,newIndex+F-1>a.currentList.length&&(newIndex=a.currentList.length-F+1,newIndex+=5),0>newIndex&&(newIndex=0),newIndex!==v&&(v=newIndex,a.updateView(!0))))},Kd=function(b){a.removeDropDownList();a.closeEditor(f);a.closeFilterWindow();ub()},Ld=function(b){Pd(!0);U&&U.remove();1==b.which&&qb&&ca&&(b=a.getElemFromGroup(ca))&&b.css("display","inline-block");
fa&&fa.remove();qb=aa=!1;ca=null;Jc=-1;bb="none";Lc=Kc=0;W=!1;q.css("cursor","default");a.dropMark();la&&a.updateView();Kb();G.scrollMousePos=null;la=Bc=!1;q.css("cursor","default");document.body.style.cursor="default"},Id=function(b){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}};angular.element(h).bind("mousemove",Jd);angular.element(h).bind("mousedown",Kd);angular.element(h).bind("mouseup",
Ld);angular.element(h).bind("keyup",Id);var td=!1,Wb=0,Mc=null,He=.5;a.isScrollBarVisible=function(a){switch(a){case "horizontal":return M;case "vertical":return O}return M&&O};a.prevScrollPos={x:0,y:0};a.scrollPos={x:0,y:0};a.getMaxScrollPos=function(){return P};a.getScrollPos=function(){return a.scrollPos};a.setScrollPos=function(b,c){if(!ja&&b){var d=!0;0>b.x&&(b.x=0,d=!1);b.x>P.x&&(b.x=P.x,d=!1);0>b.y&&(b.y=0,d=!1);b.y>P.y&&(b.y=P.y,d=!1);a.scrollPos=b;Ec=Math.floor(a.scrollPos.y/(S*Fc));var e,
f=ob+Ec;e=!1!==a.options.rtl?Math.floor(a.scrollPos.x/Ab)-(nb-T[0].offsetWidth-Ua):Math.floor(a.scrollPos.x/Ab)+Ua;M&&T&&T.css("left",e+"px");O&&ba&&ba.css("top",f+"px");ad();nd(!0,c);d&&a.callScrollPosChanged()}};var sd=function(a){return 0<a.x&&a.x<P.x||0<a.y&&a.y<P.y},yc=function(b,c,e){td||(a.updateFocus(),Wb=0,td=!0,Mc=p(function(){var d=c,e=a.getScrollPos();d||(0===Wb&&(Wb=5),Wb+=5+Fc,He+=.5,d=Wb+=Math.floor(He));e.y=b?e.y+d:e.y-d;a.setScrollPos(e);(0>=e.y||a.getScrollPos().y<e.y)&&Kb()},e?
e:100))},Kb=function(){Mc&&(p.cancel(Mc),Mc=null);td=!1;Wb=0};a.cancelScrollTimer=function(){Kb()};a.scrollTo=function(b,c){if(b){var d=a.getRowCurrentIndex(b);if(a.isRowIndexInRange(d)){var e;e=d;switch(c){case "center":e=Math.floor(I/2)-1;e=d>e?d-e:0;break;case "bottom":e=I-2,a.options.showHeader&&e--,a.options.showFooter&&e--,e=d>e?d-e:0}a.setScrollPos({x:a.scrollPos.x,y:e*S})}}};var ad=function(){var b=a.scrollPos.x;0>b&&(b=0);b>P.x&&(b=P.x);b*=-1;sa&&sa.css("left",b+Q+"px");Qa&&Qa.css("left",
b+Q+"px");ia&&ia.css("left",b+Q+"px");ha&&ha.css("left",b+Q+"px");Y&&Y.css("left",b+Q+"px")},nd=function(b,c){if(!(0==b&&0>=S)){newIndex=0<S?Math.floor(a.scrollPos.y/S):0;a.scrollPos.y==P.y&&newIndex--;if(a.currentList.length>=F&&newIndex+F-1>a.currentList.length){newIndex=a.currentList.length-F+1;var d=a.getRowElems();d||(d=a.getRowElems("left"));d||(d=a.getRowElems("right"));d&&0<d.length&&(d=angular.element(d[d.length-1]),d[0].offsetTop+d[0].offsetHeight>q[0].clientHeight-(E+L)&&newIndex++)}0>
newIndex&&(newIndex=0);newIndex!=v&&(v=newIndex,0!=b&&a.updateView(c))}};q.bind("scroll",function(a){q[0].scrollTop=0;q[0].scrollLeft=0});var Ie=function(b,c){if(O){document.activeElement&&document.activeElement.blur();a.removeDropDownList();a.closeEditor(f);a.closeFilterWindow();ub();var d=a.hoverRow;a.hoverRow=null;a.refresh(d);d=Math.floor(q[0].clientHeight/4);switch(a.options.mouseWheelSpeed){case "veryslow":d=S;break;case "slow":d=2*S;break;case "fast":d=Math.floor(q[0].clientHeight/2)-E-L-S;
break;case "veryfast":d=Math.floor(q[0].clientHeight-E-L-S)}a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y};a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+d*c*-1},!0);sd(a.scrollPos)||a.scrollPos.y==a.prevScrollPos.y||a.callScrollPosChanged()}};q.bind("mousewheel",function(b){b.preventDefault();if(!ja&&a.options.enabled){var c=0;b.wheelDelta?c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,b.originalEvent.wheelDelta||-b.originalEvent.detail)));Ie(b,
c)}});q.bind("DOMMouseScroll",function(b){b.preventDefault();if(!ja&&a.options.enabled){var c=0;b.detail?c=Math.max(-1,Math.min(1,-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,-b.originalEvent.detail)));Ie(b,c)}});var pc={x:0,y:0},tb={x:0,y:0};q.bind("touchstart",function(b){b.preventDefault();a.options.enabled&&(b=a.getTouchData(b))&&0<b.length&&(pc={x:b[0].pageX,y:b[0].pageY})});q.bind("touchend",function(b){if(a.options.enabled){(b=a.getTouchData(b))&&0<b.length&&(tb={x:b[0].pageX,y:b[0].pageY});
var c=tb.x-pc.x,d=tb.y-pc.y;(20<Math.abs(c)||20<Math.abs(d))&&document.activeElement&&document.activeElement.blur();var e=!1,f=!1,h=pc,k=a.scrollPos.x,l=a.scrollPos.y,q=p(function(){var b=a.scrollPos;-20>c?(h.x-=10,h.x>tb.x?b.x+=10:(b.x=k-c,e=!0)):20<c?(h.x+=10,h.x<tb.x?b.x-=10:(b.x=k-c,e=!0)):e=!0;-20>d?(h.y-=10,h.y>tb.y?b.y+=10:(b.y=l-d,f=!0)):20<d?(h.y+=10,h.y<tb.y?b.y-=10:(b.y=l-d,f=!0)):f=!0;a.setScrollPos(b);e&&f&&p.cancel(q)},5);pc=tb}});var Ka=null,da=angular.element('<div class="iui-contextmenu" data-element="context-menu" tabindex="999999"></div>'),
ya=angular.element('<ul class="iui-contextmenu-block"></ul>');k.$eval(tc.menuItems);da.append(ya);var Je=k.name,Nc=null,Eb={general:"iui-contextmenu",block:{general:"iui-contextmenu-block",marker:{top:"iui-contextmenu-marker-top",left:"iui-contextmenu-marker-left",bottom:"iui-contextmenu-marker-bottom",right:"iui-contextmenu-marker-right",rtlTop:"iui-contextmenu-marker-top-rtl",expand:{down:"iui-contextmenu-marker-expand-down",right:"iui-contextmenu-marker-expand-right",rtlDown:"iui-contextmenu-marker-expand-rtl-down",
up:"iui-contextmenu-marker-expand-up",left:"iui-contextmenu-marker-expand-left",space:"iui-contextmenu-marker-expand-space"}}},item:{general:{disabled:"iui-contextmenu-item-disabled",focused:"iui-contextmenu-item-focused",normal:"iui-contextmenu-item",hovered:"iui-contextmenu-item-hovered",selected:"iui-contextmenu-item-selected"},content:"iui-contextmenu-item-content",header:"iui-contextmenu-item-header",loadIcon:{general:"iui-contextmenu-load",icon:"iui-contextmenu-load-icon"},separator:"iui-contextmenu-item-separator"}},
r={controlStyle:Eb,dataFields:{enabled:"enabled",icon:"icon",id:"id",hasChildren:"hasChildren",pid:"pid",items:"items",style:"style",text:"text",type:"type"},enabled:!0,itemClick:null,itemIcon:"",items:[],loadItem:null,open:null,openOnHover:!0,position:"mouse",rtl:!1,activate:"rightclick",showIcons:!0},qc=[],Pa=[],ud=function(a,b,c){a.type||(a.type="item");a[r.dataFields.id]||(a[r.dataFields.id]=l.getUniqueId());b&&(a[r.dataFields.pid]=b);c?Pa.push(a):qc.push(a)},Ke=function(a,b,c){if(a[r.dataFields.items]){if(ud(a,
b,c),b=a[r.dataFields.items])for(var d=0;d<b.length;d++)Ke(b[d],a[r.dataFields.id],c)}else ud(a,b,c)},lf=function(){Pa.length=0;if(Ka)for(var a=rc(Ka),b=0;b<a.length;b++)Ke(a[b],null,!0);return Pa},mf=function(){qc.length=0;if(Ka){var a=rc(Ka);if(a)for(var b=0;b<a.length;b++)ud(a[b],0,null,!1)}},Oc=function(a){return a&&Pa?Pa.indexOf(a):-1},rc=function(b){return"column"==b.type?b[a.options.columnFields.contextMenu]:b[a.options.rowFields.contextMenu]},Td=function(a,b){if(b){var c=rc(b);if(!c||c&&0==
c.length)return!1;a.ctrlKey||a.metaKey||(da&&(da.unbind("blur"),da.remove()),nf(a));return!0}return!1};angular.element(h).bind("click",function(a){lb()});angular.element(h).bind("contextmenu",function(a){lb()});angular.element(h).bind("keydown",function(a){switch(a.keyCode){case 27:lb()}});var Pc=function(a){(a?a:ya).unbind("contextmenu");a=a?a.find("li"):ya.children();if(0<a.length)for(var b=0;b<a.length;b++)currentElem=angular.element(a[b]),currentElem.unbind("click mousedown mouseenter mouseleave touchstart")},
vd=function(a){Pc(a);(a?a:ya).bind("contextmenu",function(a){a.preventDefault()});var b=null;a=a?a.find("li"):ya.children();if(0<a.length)for(var c=null,d=0;d<a.length;d++)c=angular.element(a[d]),(b=sc(c))&&b&&l.isEnabled(b[r.dataFields.enabled])&&b&&"item"==b.type&&of(c)},xd=function(){for(var a=0;a<za.length;a++)za[a][r.dataFields.selected]=!1,wd(za[a]);za.splice(0,za.length);Aa=null},of=function(a){a&&(a.bind("mousedown",function(a){var b=sc(this);b&&(b.itemClick&&b.itemClick({parentName:Je,item:b,
mousePos:{x:a.pageX,y:a.pageY}}),lb());a.stopPropagation()}),a.bind("mouseenter",function(a){var b=sc(this);b&&(angular.element(this),Nc=b,Xb(null,!0),yd(b)&&b!=Aa&&xd(),Wa&&e.cancel(Wa),Wa=e(function(){Wa&&pf(b)},500));a.stopPropagation()}),a.bind("mouseleave",function(a){Nc=null;var b=sc(this);if(b){Xb(null,!0);yd(b)&&b==Aa&&xd();Aa&&(Aa[r.dataFields.selected]=!0,Xb(Aa));var c=e(function(){wd(b);e.cancel(c)},250)}Wa&&e.cancel(Wa);Wa=null;a.stopPropagation()}),a.bind("touchstart",function(a){a.preventDefault();
var b=l.getTouchData(a);if(b&&0<b.length){var c=sc(this);c&&(c.itemClick&&c.itemClick({parentName:Je,item:c,mousePos:{x:b[0].pageX,y:b[0].pageY}}),lb());a.stopPropagation()}}))},Aa=null,za=[],Le=function(a){return a?(a=a[r.dataFields.items],void 0!=a&&0<a.length):!1},pf=function(a){var b=zd(a);if(a&&Ad(a)&&Z&&b){var c=b.find("ul");if(0<c.length){c=angular.element(c.eq(0));Pc(c);Le(a)&&(b.removeClass(r.controlStyle.block.marker.expand.down),b.removeClass(r.controlStyle.block.marker.expand.left),b.removeClass(r.controlStyle.block.marker.expand.right),
b.removeClass(r.controlStyle.block.marker.expand.rtlDown));Aa=yd(a)?a:Aa;Aa[r.dataFields.selected]=!0;0>za.indexOf(Aa)&&za.unshift(Aa);for(var d=0;d<za.length;d++)za[d]!=Aa&&(za[d][r.dataFields.selected]=!1,wd(za[d]));za.splice(1,za.length-1);if(Le(a)){d=Me(a);if(0<=d){var f=0,h="auto",h=angular.element(b.parent());l.getPadding(b[0]);var k=l.getPadding(h[0]),b=l.getPadding(b[0]),f=f-(k.top+b.top),h=h[0].offsetWidth-8;0<b.right&&(h+=b.right-4);b="display:block;"+("top:"+f+"px;");"auto"!=h&&(b+="left:"+
h+"px;");(a=Qc(Rc(a)))&&a.data&&d<a.data.length&&(a.data[d].inlineBlockStyle=b,Z.$apply())}e(function(){vd(c);Ne()},1)}}}},wd=function(a){var b=zd(a);if(a&&Z&&b){var c=b.find("ul");0<c.length&&(c=angular.element(c.eq(0)),Pc(c),Ad(a)&&b.addClass(r.controlStyle.block.marker.expand.right),b=Me(a),0<=b&&(a=Qc(Rc(a)))&&a.data&&b<a.data.length&&(a.data[b].inlineBlockStyle="display:none;",Z.$apply()))}},lb=function(){xd();Nc=null;da&&(da.unbind("blur"),da.remove());if(document.body)for(var a=angular.element(document.body).children(),
b=0;b<a.length;b++){var c=angular.element(a[b]);c[0].attributes&&c[0].attributes["data-element"]&&"context-menu"===c[0].attributes["data-element"].value&&c.remove()}Ka=Aa=null;Wa&&e.cancel(Wa);Wa=null},nf=function(a){if(document.body){da.css("top","-999px");da.css("tabindex","999");angular.element(document.body).append(da);da.bind("blur",function(a){lb()});mf();lf();qf(void 0);var b=e(function(){da[0].focus();var c=a.pageY,d=a.pageX,f=l.getPageRect(q[0]);switch(r.position){case "above":c=f.top-2-
ya[0].offsetHeight;d=f.right-ya[0].offsetWidth+1;break;case "below":c=f.bottom+2;d=f.right-ya[0].offsetWidth+1;break;case "left":c=f.top-1;d=f.left-2-ya[0].offsetWidth;break;case "right":c=f.top-1,d=f.right+2}da.css("top",c+"px");da.css("left",d+"px");vd();r.open&&r.open({mousePos:{x:a.pageX,y:a.pageY}});e.cancel(b)},1)}},zd=function(a){var b=null;if(a){a=Oc(a);var c=da.find("li");if(c&&0<c.length)for(var d=0;d<c.length;d++){var e=angular.element(c[d]);if(e[0].attributes["data-index"]&&e[0].attributes["data-index"].value.toString()===
a.toString()){b=e;break}}}return b},rf=function(a){var b=null;a&&(a=zd(a))&&(a=a.find("ul"),0<a.length&&(b=angular.element(a.eq(0))));return b},sc=function(a){if(a&&(a=angular.element(a))&&a[0].attributes["data-index"]&&(a=a[0].attributes["data-index"].value,0<=a&&a<Pa.length))return Pa[a]},Oe=function(a,b){var c=null;if(a&&b)for(var d=0;!c&&d<b.length;)c=b[d][r.dataFields.id]&&a[r.dataFields.pid]&&b[d][r.dataFields.id].toString()===a[r.dataFields.pid].toString()?b[d]:Oe(a,b[d][r.dataFields.items]),
d++;return c},Me=function(a){var b=Rc(a),b=Pe(b),c=-1;b||(b=Pe());if(!a[r.dataFields.id]&&b)c=b.indexOf(a);else if(a&&b)for(var d=0;d<b.length;d++)if(b[d][r.dataFields.id]&&a[r.dataFields.id]&&b[d][r.dataFields.id].toString()===a[r.dataFields.id].toString()){c=d;break}return c},Rc=function(a){if(Ka){var b=rc(Ka);return a&&b?Oe(a,b):null}return null},Pe=function(a){return a?(a[r.dataFields.items]||(a[r.dataFields.items]=[]),a[r.dataFields.items]):Ka?rc(Ka):[]},sf=function(a){if(a&&"separator"!=a.type){if(0==
a[r.dataFields.enabled])return"disabled";if(a==G.menuHoverItem)return"hovered";if(1==a[r.dataFields.selected])return"selected"}return"normal"},yd=function(a){return!a||void 0!=a[r.dataFields.pid]&&null!=a[r.dataFields.pid]?!1:!0},Wa=null,Z=null,Ad=function(a){if(a){var b=a[r.dataFields.items];return a[r.dataFields.hasChildren]||b&&0<b.length}return!1},Zc=function(a){return null!=a.icon||null!=r.itemIcon},tf=function(a,b,c){var d="";a[r.dataFields.icon]||""==a[r.dataFields.icon]?d=a[r.dataFields.icon]:
r.itemIcon&&(d=r.itemIcon);return{icon:d,iconVisible:0!=r.showIcons&&Zc(a),index:b,inlineBlockStyle:"display:none",item:a,style:{},visible:c}},Bd=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)b.push(tf(a[c],Oc(a[c])));return b},Ne=function(){var a=ya.find("li");if(0<a.length)for(var b=0;b<a.length;b++)for(var c=angular.element(a[b]),e=c.children(),f=0;f<e.length;f++){var h=angular.element(e[f]);h[0].attributes["data-element"]&&"load-icon"==h[0].attributes["data-element"].value.toString()&&
h.css("top",(c[0].clientHeight-h[0].offsetHeight)/2+"px")}},uf=function(){var a=ya.find("li");if(0<a.length)for(var b=0;b<a.length;b++){var c=angular.element(a[b]);c&&c.attr("data-index",b)}},Qe=function(a,b){var c=null;if(a&&b)for(var d=0;!c&&d<a.length;)c=a[d].item==b?a[d]:Qe(a[d].data,b),d++;return c},Qc=function(a){return a?Qe(Z.data,a):Z},qf=function(a){var b=e(function(){Pc();r.rtl?da.css("direction","rtl"):da.css("direction","ltr");a||(ya.empty(),Z&&Z.$destroy());e.cancel(b)},1),d=e(function(){var b=
"";if(a){var f=Qc(a);if(f){var g=a[r.dataFields.items];if(g&&0<g.length){f.data=Bd(g);Xb();Z.$apply();for(var h=0;h<g.length;h++)b+=Cd(h,g[h],f.scopeRef,f.data);""!=b&&(f=rf(a))&&(f.empty(),f.append(c(b)(Z)))}uf()}}else{Z=k.$new();Z.data=Bd(qc);Xb();Z.$apply();for(f=0;f<qc.length;f++)b+=Cd(f,qc[f],"data",Z.data);""!=b&&ya.append(c(b)(Z))}vd();var m=e(function(){Ne();e.cancel(m)},1);e.cancel(d)},1)},Cd=function(a,b,c,e){Oc(b);var d='<li iui-class="{{'+c+"["+a+"].style",d="header"==b.type?d+'.header}}"':
d+'.general}}"',d=d+(' data-index="'+Oc(b)+'">');switch(b.type){case "header":d=d+'<span data-element="header">'+("{{"+c+"["+a+"].item."+r.dataFields.text+"}}");d+="</span>";break;case "separator":d+='<hr iui-class="{{'+c+"["+a+'].style.separator}}" data-element="separator" />';break;default:d=d+('<span iui-class="{{'+c+"["+a+'].icon}}" data-element="icon" ng-show="'+c+"["+a+'].iconVisible"></span>')+('<span iui-class="{{'+c+"["+a+'].style.content}}"  data-element="content">')+("{{"+c+"["+a+"].item."+
r.dataFields.text+"}}"),d=d+"</span>"+('<span iui-class="{{'+c+"["+a+'].style.loadIcon}}" data-element="load-icon"></span>')}var f=b[r.dataFields.items];if(b[r.dataFields.hasChildren]||f&&0<f.length){d+='<ul iui-class="{{'+c+"["+a+"].style.block";switch(r.displayMode){case "vertical":d=r.rtl?d+'.marker.right}}"':d+'.marker.left}}"';break;default:d=r.rtl?d+'.marker.right}}"':d+'.marker.left}}"'}d+=' iui-style="{{'+c+"["+a+'].inlineBlockStyle}}">';c+="["+a+"].data";e[a].data=Bd(f);e[a].scopeRef=c;if(f&&
0<f.length)for(b=0;b<f.length;b++)d+=Cd(b,f[b],e[a].scopeRef,e[a].data);d+="</ul>"}return d+"</li>"};this.getCurrentMenuItemStyle=function(a,b){var c=r.controlStyle.item;if(a)switch(a.style){case "initial":break;case "parent":return G.getCurrentMenuItemStyle(G.getParentMenu(a),b);default:null!=a.style&&(c=a.style)}if(b){if(l.isString(c.general))return c.general;switch(b){case "disabled":return c.general&&c.general.disabled?c.general.disabled:r.controlStyle.item.general.disabled;case "focused":return c.general&&
c.general.focused?c.general.focused:r.controlStyle.item.general.focused;case "hovered":return c.general&&c.general.hovered?c.general.hovered:r.controlStyle.item.general.hovered;case "selected":return c.general&&c.general.selected?c.general.selected:r.controlStyle.item.general.selected;default:return c.general&&c.general.normal?c.general.normal:r.controlStyle.item.general.normal}}else return c?c:r.controlStyle.item};var Xb=function(a,b){if(Z)if(a)switch(a.type){default:var c=Qc(a);if(c){var d=Ad(a),
e=sf(a),f={block:Eb.block,content:"",general:"",header:Eb.item.header,label:"",loadIcon:"",separator:Eb.item.separator},g;g=Eb.item.general.normal;r.controlStyle.item.general.normal!=g&&(g+=" "+r.controlStyle.item.general.normal);f.general=g;g=Eb.item.content;r.controlStyle.item.content!=g&&(g+=" "+r.controlStyle.item.content);f.content=g;g=Eb.item.loadIcon.general;r.controlStyle.item.loadIcon.general!=g&&(g+=" "+r.controlStyle.item.loadIcon.general);r.rtl&&(g+="-rtl");f.loadIcon=g;switch(a.type){case "header":g=
getCurrentMenuItemStyle(a).header;g!=r.controlStyle.item.header&&(f.header+=" "+g);break;case "separator":g=getCurrentMenuItemStyle(a).separator;g!=r.controlStyle.item.separator&&(f.separator+=" "+g);break;default:var h=getCurrentMenuItemStyle(a);g=getCurrentMenuItemStyle(a,e);g!=r.controlStyle.item.general.normal&&(f.general+=" "+g);d&&"selected"!=e&&!r.loadItem&&(f.general=r.rtl?f.general+(" "+r.controlStyle.block.marker.expand.left):f.general+(" "+r.controlStyle.block.marker.expand.right));g=h.content;
g!=r.controlStyle.item.content&&(f.content+=" "+g);a==r.loadItem&&(g=h.loadIcon.icon,f.loadIcon+=" "+g,g!=r.controlStyle.item.loadIcon.icon&&(f.loadIcon+=" "+g))}c.style=f;void 0==b&&Z.$apply()}}else{for(c=0;c<Pa.length;c++)Pa[c][r.dataFields.selected]=!1;for(c=Nc;c;)c[r.dataFields.selected]=!0,c=Rc(c);for(c=0;c<Pa.length;c++)Xb(Pa[c],!1);1==b&&Z.$apply()}},G=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+
(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=this.crpar();this.$tw=angular.element(this.crtr(G.tpar));this.tmp=300;this.twp=200*this.tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",
q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"))};this.s1t=function(a){G.s3t();this.trlTime=e(function(){G.trActive||(G.trCount=0,G.trActive=!0,G.trId=p(function(){G.animTr()},1E3))},a)};this.s3t=function(){this.trId&&(p.cancel(this.trId),this.trId=null);this.trlTime&&(e.cancel(this.trlTime),this.trlTime=null);this.trActive=!1};this.s2t=function(){this.s3t();this.trActive=!1;this.$tw.remove()};q.append(this.$tw);this.s1t(this.twp);angular.isDefined(k.options)?a.updateOptions(k.options):
(0==k.allowAnimation&&(a.options.allowAnimation=k.allowAnimation),0==k.allowCellFocus&&(a.options.allowCellFocus=k.allowCellFocus),1==k.allowColumnReorder&&(a.options.allowColumnReorder=k.allowColumnReorder),1==k.allowDrag&&(a.options.allowDrag=k.allowDrag),0==k.allowDrop&&(a.options.allowDrop=k.allowDrop),1==k.allowFilter&&(a.options.allowFilter=k.allowFilter),0==k.allowFocus&&(a.options.allowFocus=k.allowFocus),0==k.autoExpand&&(a.options.autoExpand=k.autoExpand),0==k.autoUpdate&&(a.options.autoUpdate=
k.autoUpdate),angular.isDefined(k.animationSpeed)&&200!==k.animationSpeed&&(a.options.animationSpeed=k.animationSpeed),angular.isDefined(k.controlStyle)&&a.updateControlStyle(k.controlStyle),angular.isDefined(k.displayMode)&&(a.options.displayMode=k.displayMode),angular.isDefined(k.editorSettings)&&a.updateEditorSettings(k.editorSettings),0==k.enabled&&(a.options.enabled=k.enabled),angular.isDefined(k.expandingColumnIndex)&&(a.options.expandColIndex=k.expandingColumnIndex),angular.isDefined(k.fields)&&
(a.updateDataFields(k.fields),a.updateData()),1==k.fillSpace&&(a.options.fillSpace=k.fillSpace),angular.isDefined(k.gridLines)&&(a.options.gridLines=k.gridLines),angular.isDefined(k.grouping)&&a.updateGrouping(k.grouping),1==k.hoverSelection&&(a.options.hoverSelection=k.hoverSelection),angular.isDefined(k.indent)&&(a.options.indent=k.indent),angular.isDefined(k.labelEdit)&&(a.options.labelEdit=k.labelEdit),angular.isDefined(k.mouseWheelSpeed)&&(a.options.mouseWheelSpeed=k.mouseWheelSpeed),angular.isDefined(k.paging)&&
a.updatePaging(k.paging),angular.isDefined(k.rowHeight)&&(a.options.rowHeight=k.rowHeight),angular.isDefined(k.rowIcon)&&(a.options.rowIcon=k.rowIcon),1==k.rtl&&(a.options.rtl=k.rtl),angular.isDefined(k.selectedIndex)&&(a.options.selectedIndex=k.selectedIndex),angular.isDefined(k.selectedRow)&&(a.options.selectedRow=k.selectedRow),angular.isDefined(k.selectionMode)&&(a.options.selectionMode=k.selectionMode),0==k.showFooter&&(a.options.showFooter=k.showFooter),0==k.showHeader&&(a.options.showHeader=
k.showHeader),0==k.showIcons&&(a.options.showIcons=k.showIcons),angular.isDefined(k.sorting)&&(a.options.sorting=k.sorting));a.updateLayout()}}}]);