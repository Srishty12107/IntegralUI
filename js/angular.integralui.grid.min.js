/*
  filename: angular.integralui.grid.min.js
  version : 3.2.011
  Copyright © 2014-2016 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Studio for Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
angular.module("integralui").factory("IntegralUIGridService",["$rootScope",function(c){var f=null;return{addColumn:function(l,k){c.$broadcast(l+"-add-column",k)},clearColumns:function(l){c.$broadcast(l+"-clear-columns")},insertColumnAt:function(l,k,f){c.$broadcast(l+"-insert-column-at",k,f)},insertColumnBefore:function(l,k,f){c.$broadcast(l+"-insert-column-before",k,f)},insertColumnAfter:function(l,k,f){c.$broadcast(l+"-insert-column-after",k,f)},removeColumn:function(l,k){c.$broadcast(l+"-remove-column",
k)},removeColumnAt:function(l,k){c.$broadcast(l+"-remove-column-at",k)},addGroup:function(l,k){c.$broadcast(l+"-add-group",k)},clearGroups:function(l){c.$broadcast(l+"-clear-groups")},insertGroupAt:function(l,k,f){c.$broadcast(l+"-insert-group-at",k,f)},insertGroupBefore:function(l,k,f){c.$broadcast(l+"-insert-group-before",k,f)},insertGroupAfter:function(l,k,f){c.$broadcast(l+"-insert-group-after",k,f)},removeGroup:function(l,k){c.$broadcast(l+"-remove-group",k)},removeGroupAt:function(l,k){c.$broadcast(l+
"-remove-group-at",k)},addRow:function(l,k){c.$broadcast(l+"-add-row",k)},clearRows:function(l){c.$broadcast(l+"-clear-rows")},insertRowAt:function(l,k,f){c.$broadcast(l+"-insert-row-at",k,f)},insertRowBefore:function(l,k,f){c.$broadcast(l+"-insert-row-before",k,f)},insertRowAfter:function(l,k,f){c.$broadcast(l+"-insert-row-after",k,f)},removeRow:function(l,k){c.$broadcast(l+"-remove-row",k)},removeRowAt:function(l,k){c.$broadcast(l+"-remove-row-at",k)},exportToJSON:function(l,k,f,g){c.$broadcast(l+
"-export-json",k,f,g);l=this.getTempData();this.clearTempData();return l?l:""},loadData:function(l,k,f){c.$broadcast(l+"-load-data",k,f)},openEditor:function(l,k){c.$broadcast(l+"-open-editor",k)},closeEditor:function(l,k){c.$broadcast(l+"-close-editor",k)},filter:function(l,k,f){c.$broadcast(l+"-filter",k,f)},findRowById:function(l,k){c.$broadcast(l+"-find-row-by-id",k);var f=this.getTempData();this.clearTempData();return f?f:null},findRowByText:function(l,k){c.$broadcast(l+"-find-row-by-text",k);
var f=this.getTempData();this.clearTempData();return f?f:null},getCellAt:function(l,k){c.$broadcast(l+"-get-cell-at",k);var f=this.getTempData();this.clearTempData();return f?f:null},getRowAt:function(l,k){c.$broadcast(l+"-get-row-at",k);var f=this.getTempData();this.clearTempData();return f?f:null},focus:function(l,k){c.$broadcast(l+"-focus",k)},clearTempData:function(){f=null},ensureVisible:function(l,k){c.$broadcast(l+"-ensure-visible",k)},getTempData:function(){return f},getHoverColumn:function(l,
k){c.$broadcast(l+"-get-hover-column",k);var f=this.getTempData();this.clearTempData();return f?f:null},getList:function(l){c.$broadcast(l+"-get-list");l=this.getTempData();this.clearTempData();return l?l:[]},setTempData:function(c){f=c},topRow:function(l,k){if(k)c.$broadcast(l+"-set-top-row",k);else return c.$broadcast(l+"-get-top-row"),k=this.getTempData(),this.clearTempData(),k?k:null},beginLoad:function(l,k){c.$broadcast(l+"-begin-load",k)},endLoad:function(l){c.$broadcast(l+"-end-load")},moveColumn:function(l,
k,f){c.$broadcast(l+"-move-column",k,f)},moveRow:function(l,f,D,g,wa){c.$broadcast(l+"-move-row",f,D,g,wa)},getScrollPos:function(l){c.$broadcast(l+"-get-scroll-pos");l=this.getTempData();this.clearTempData();return l?l:{x:0,y:0}},getMaxScrollPos:function(l){c.$broadcast(l+"-get-max-scroll-pos");l=this.getTempData();this.clearTempData();return l?l:{x:0,y:0}},setScrollPos:function(l,f){c.$broadcast(l+"-set-scroll-pos",f)},scrollTo:function(l,f,D){c.$broadcast(l+"-scroll-to",f,D)},currentPage:function(l,
f){if(void 0!=f&&null!=f)c.$broadcast(l+"-set-current-page",f);else{c.$broadcast(l+"-get-current-page");var k=this.getTempData();this.clearTempData();return void 0!=k?k:-1}},firstPage:function(l){c.$broadcast(l+"-first-page")},lastPage:function(l){c.$broadcast(l+"-last-page")},nextPage:function(l){c.$broadcast(l+"-next-page")},prevPage:function(l){c.$broadcast(l+"-prev-page")},clearSelection:function(l){c.$broadcast(l+"-clear-selection")},selectedColumn:function(l,f){if(f)c.$broadcast(l+"-set-selected-column",
f);else{c.$broadcast(l+"-get-selected-column");var k=this.getTempData();this.clearTempData();return k?k:null}},selectedRow:function(l,f){if(f)c.$broadcast(l+"-set-selected-row",f);else{c.$broadcast(l+"-get-selected-row");var k=this.getTempData();this.clearTempData();return k?k:null}},selectedRows:function(l,f){if(f)c.$broadcast(l+"-set-selected-rows",f);else{c.$broadcast(l+"-get-selected-rows");var k=this.getTempData();this.clearTempData();return k?k:null}},sort:function(l,f,D,g){c.$broadcast(l+"-sort",
f,D,g)},refresh:function(f,k,D){c.$broadcast(f+"-refresh",k,D)},resumeLayout:function(f,k){c.$broadcast(f+"-resume-layout",k)},suspendLayout:function(f,k){c.$broadcast(f+"-suspend-layout",k)},updateLayout:function(f,k){c.$broadcast(f+"-update-layout",k)},updateView:function(f){c.$broadcast(f+"-update-view")}}}]).controller("IntegralUIGridController",["$scope","$element","$timeout","$window","$interval","IntegralUIInternalService","IntegralUIDataService","IntegralUIGridService","IntegralUIDragDrop",
"IntegralUIFilter",function(c,f,l,k,D,g,wa,p,q,yc){var a=this;this.suppressProcess=!1;this.hoverCell=this.hoverRow=this.hoverColumn=null;a.defaultCheckBoxStyle={general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",unchecked:"iui-checkbox-unchecked"}};a.defaultStyle={general:"iui-grid",column:{general:{content:"iui-grid-column-cell-content",disabled:"iui-grid-column-disabled",normal:"iui-grid-column",
hovered:"iui-grid-column-hovered",selected:"iui-grid-column-selected"},header:{content:"iui-grid-column-header-cell-content",disabled:"iui-grid-column-header-disabled",normal:"iui-grid-column-header",hovered:"iui-grid-column-header-hovered",selected:"iui-grid-column-header-selected"},body:{content:"iui-grid-column-body-cell-content",disabled:"iui-grid-column-body-disabled",normal:"iui-grid-column-body",hovered:"iui-grid-column-body-hovered",selected:"iui-grid-column-body-selected"},footer:{content:"iui-grid-column-footer-cell-content",
disabled:"iui-grid-column-footer-disabled",normal:"iui-grid-column-footer",hovered:"iui-grid-column-footer-hovered",selected:"iui-grid-column-footer-selected"}},row:{general:{disabled:"iui-grid-row-disabled",focused:"iui-grid-row-focused",normal:"iui-grid-row",hovered:"iui-grid-row-hovered",selected:"iui-grid-row-selected"},checkBox:{general:"iui-checkbox",box:{general:"iui-checkbox-box",disabled:"iui-checkbox-box-disabled",checked:"iui-checkbox-checked",indeterminate:"iui-checkbox-indeterminate",
unchecked:"iui-checkbox-unchecked"}},expandBox:{general:"iui-grid-expand-box",animated:"iui-grid-expand-box-load",expanded:"iui-grid-expand-box-open",collapsed:"iui-grid-expand-box-close"},cell:{content:"iui-grid-row-cell-content",general:"iui-grid-row-cell",disabled:"iui-grid-row-cell-disabled",focused:"iui-grid-row-cell-focused",normal:"iui-grid-row-cell",hovered:"iui-grid-row-cell-hovered",selected:"iui-grid-row-cell-selected"},fixed:{disabled:"iui-grid-row-fixed-disabled",normal:"iui-grid-row-fixed",
hovered:"iui-grid-row-fixed-hovered"}},cell:{content:"iui-grid-row-cell-content",general:"iui-grid-row-cell",disabled:"iui-grid-row-cell-disabled",focused:"iui-grid-row-cell-focused",normal:"iui-grid-row-cell",hovered:"iui-grid-row-cell-hovered",selected:"iui-grid-row-cell-selected"}};this.updateGrouping=function(b){a.options.grouping=b?{enabled:g.isFieldAvailable(b.enabled,!1),showColumns:g.isFieldAvailable(b.showColumns,!1)}:{enabled:!1,showColumns:!1}};this.updatePaging=function(b){a.options.paging=
b?{enabled:g.isFieldAvailable(b.enabled,!1),showControlPanel:g.isFieldAvailable(b.showControlPanel,!0),pageSize:g.isFieldAvailable(b.pageSize,100)}:{enabled:!1,showControlPanel:!0,pageSize:100}};this.updateOptions=function(b){b?(a.options={allowAnimation:g.isFieldAvailable(b.allowAnimation,!0),allowCellFocus:g.isFieldAvailable(b.allowCellFocus,!0),allowColumnReorder:g.isFieldAvailable(b.allowColumnReorder,!1),allowDrag:g.isFieldAvailable(b.allowDrag,!1),allowDrop:g.isFieldAvailable(b.allowDrop,!0),
allowFilter:g.isFieldAvailable(b.allowFilter,!1),allowFocus:g.isFieldAvailable(b.allowFocus,!0),animationSpeed:200,autoExpand:g.isFieldAvailable(b.autoExpand,!0),controlStyle:a.defaultStyle,displayMode:g.isFieldAvailable(b.displayMode,"normal"),editorSettings:{activate:"click"},enabled:g.isFieldAvailable(b.enabled,!0),expandColIndex:g.isFieldAvailable(b.expandColIndex,void 0!=a.options.expandColIndex?a.options.expandColIndex:0),fillSpace:g.isFieldAvailable(b.fillSpace,!1),gridLines:g.isFieldAvailable(b.gridLines,
"both"),hoverSelection:g.isFieldAvailable(b.hoverSelection,!1),indent:g.isFieldAvailable(b.indent,15),labelEdit:g.isFieldAvailable(b.labelEdit,!1),loadRows:[],mouseWheelSpeed:g.isFieldAvailable(b.mouseWheelSpeed,"normal"),pathSeparator:g.isFieldAvailable(b.pathSeparator,"\\"),rowHeight:g.isFieldAvailable(b.rowHeight,-1),rtl:g.isFieldAvailable(b.rtl,!1),selectedColumn:g.isFieldAvailable(b.selectedColumn,a.options.selectedColumn?a.options.selectedColumn:null),selectedIndex:-1,selectedRow:g.isFieldAvailable(b.selectedRow,
a.options.selectedRow?a.options.selectedRow:null),selectedRows:a.options.selectedRows?a.options.selectedRows:[],selectionMode:g.isFieldAvailable(b.selectionMode,"one"),showFooter:g.isFieldAvailable(b.showFooter,!0),showHeader:g.isFieldAvailable(b.showHeader,!0),showIcons:g.isFieldAvailable(b.showIcons,!0),sorting:g.isFieldAvailable(b.sorting,"none")},a.updateGrouping(b.grouping),a.updatePaging(b.paging),a.updateDataFields(b.dataFields),a.updateControlStyle(b.controlStyle)):(a.options={allowAnimation:!0,
allowCellFocus:!0,allowColumnReorder:!1,allowDrag:!1,allowDrop:!0,allowFilter:!1,allowFocus:!0,animationSpeed:200,autoExpand:!0,controlStyle:a.defaultStyle,displayMode:"normal",editorSettings:{activate:"click"},enabled:!0,expandColIndex:0,fillSpace:!1,gridLines:"both",hoverSelection:!1,indent:15,labelEdit:!1,loadRows:[],mouseWheelSpeed:"normal",pathSeparator:"\\",rowHeight:-1,rtl:!1,selectedColumn:null,selectedIndex:-1,selectedRow:null,selectedRows:[],selectionMode:"one",showFooter:!0,showHeader:!0,
showIcons:!0,sorting:"none"},a.updateGrouping(),a.updatePaging(),a.updateDataFields())};a.options={};this.updateColumnFields=function(b){a.options.columnFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFilter:b.allowFilter?b.allowFilter:"allowFilter",allowGrouping:b.allowGrouping?b.allowGrouping:"allowGrouping",cellTemplateUrl:b.cellTemplateUrl?b.cellTemplateUrl:"cellTemplateUrl",comparer:b.comparer?b.comparer:"comparer",contentAlignment:b.contentAlignment?
b.contentAlignment:"contentAlignment",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",editorType:b.editorType?b.editorType:"editorType",editorSettings:b.editorSettings?b.editorSettings:"editorSettings",editorTemplate:b.editorTemplate?b.editorTemplate:"editorTemplate",filterParams:b.filterParams?b.filterParams:"filterParams",filterTemplate:b.filterTemplate?b.filterTemplate:"filterTemplate",fixed:b.fixed?b.fixed:"fixed",fixedWidth:b.fixedWidth?b.fixedWidth:"fixedWidth",footerAlignment:b.footerAlignment?
b.footerAlignment:"footerAlignment",footerContent:b.footerContent?b.footerContent:"footerContent",footerTemplate:b.footerTemplate?b.footerTemplate:"footerTemplate",footerTemplateModel:b.footerTemplateModel?b.footerTemplateModel:"footerTemplateModel",footerText:b.footerText?b.footerText:"footerText",footerTooltip:b.footerTooltip?b.footerTooltip:"footerTooltip",groupText:b.groupText?b.groupText:"groupText",headerAlignment:b.headerAlignment?b.headerAlignment:"headerAlignment",headerContent:b.headerContent?
b.headerContent:"headerContent",headerTemplate:b.headerTemplate?b.headerTemplate:"headerTemplate",headerTemplateModel:b.headerTemplateModel?b.headerTemplateModel:"headerTemplateModel",headerText:b.headerText?b.headerText:"headerText",headerTooltip:b.headerTooltip?b.headerTooltip:"headerTooltip",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",minWidth:b.minWidth?b.minWidth:"minWidth",maxWidth:b.maxWidth?b.maxWidth:"maxWidth",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateSettings:b.templateSettings?
b.templateSettings:"templateSettings",visible:b.visible?b.visible:"visible",width:b.width?b.width:"width"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFilter:"allowFilter",allowGrouping:"allowGrouping",cellTemplateUrl:"cellTemplateUrl",comparer:"comparer",contentAlignment:"contentAlignment",contextMenu:"contextMenu",editorType:"editorType",editorSettings:"editorSettings",editorTemplate:"editorTemplate",filterParams:"filterParams",filterTemplate:"filterTemplate",footerTemplateModel:"footerTemplateModel",
fixed:"fixed",fixedWidth:"fixedWidth",footerAlignment:"footerAlignment",footerContent:"footerContent",footerTemplate:"footerTemplate",footerText:"footerText",footerTooltip:"footerTooltip",groupText:"groupText",headerAlignment:"headerAlignment",headerContent:"headerContent",headerTemplate:"headerTemplate",headerTemplateModel:"headerTemplateModel",headerText:"headerText",headerTooltip:"headerTooltip",icon:"icon",id:"id",minWidth:"minWidth",maxWidth:"maxWidth",selected:"selected",style:"style",templateSettings:"templateSettings",
visible:"visible",width:"width"};a.columnsObj&&a.columnsObj.updateDataFields(a.options.columnFields)};this.updateRowFields=function(b){a.options.rowFields=b?{allowDrag:b.allowDrag?b.allowDrag:"allowDrag",allowDrop:b.allowDrop?b.allowDrop:"allowDrop",allowFocus:b.allowFocus?b.allowFocus:"allowFocus",cells:b.cells?b.cells:"cells",content:b.content?b.content:"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",expanded:b.expanded?b.expanded:"expanded",
fixed:b.fixed?b.fixed:"fixed",hasChildren:b.hasChildren?b.hasChildren:"hasChildren",icon:b.icon?b.icon:"icon",id:b.id?b.id:"id",objects:b.rows?b.rows:"rows",pid:b.pid?b.pid:"pid",rows:b.rows?b.rows:"rows",selected:b.selected?b.selected:"selected",statusIcon:b.statusIcon?b.statusIcon:"statusIcon",style:b.style?b.style:"style",subobjects:b.cells?b.cells:"cells",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip"}:{allowDrag:"allowDrag",allowDrop:"allowDrop",allowFocus:"allowFocus",cells:"cells",
content:"content",contextMenu:"contextMenu",enabled:"enabled",expanded:"expanded",fixed:"fixed",hasChildren:"hasChildren",icon:"icon",id:"id",objects:"rows",pid:"pid",rows:"rows",selected:"selected",statusIcon:"statusIcon",style:"style",subobjects:"cells",text:"text",tooltip:"tooltip"};a.rowsObj&&a.rowsObj.updateDataFields(a.options.rowFields)};this.updateCellFields=function(b){a.options.cellFields=b?{allowEdit:b.allowEdit?b.allowEdit:"allowEdit",cid:b.cid?b.cid:"cid",content:b.content?b.content:
"content",contextMenu:b.contextMenu?b.contextMenu:"contextMenu",enabled:b.enabled?b.enabled:"enabled",labelEdit:b.labelEdit?b.labelEdit:"labelEdit",rid:b.rid?b.rid:"rid",selected:b.selected?b.selected:"selected",style:b.style?b.style:"style",templateObj:b.templateObj?b.templateObj:"templateObj",text:b.text?b.text:"text",tooltip:b.tooltip?b.tooltip:"tooltip",value:b.value?b.value:"value"}:{allowEdit:"allowEdit",cid:"cid",content:"content",contextMenu:"contextMenu",enabled:"enabled",labelEdit:"labelEdit",
rid:"rid",selected:"selected",style:"style",templateObj:"templateObj",text:"text",tooltip:"tooltip",value:"value"}};this.updateDataFields=function(b){b?(a.updateColumnFields(b.column),a.updateRowFields(b.row),a.updateCellFields(b.cell)):(a.updateColumnFields(),a.updateRowFields(),a.updateCellFields())};a.updateOptions();c.$on(c.name+"-add-column",function(b,d){a.columnsObj.insertAt(d,-1,null,a.columnIsAdded)});c.$on(c.name+"-clear-columns",function(b){a.columnsObj.clear(null,a.columnsAreCleared)});
c.$on(c.name+"-insert-column-at",function(b,d,c){a.columnsObj.insertAt(d,c,null,a.columnIsAdded)});c.$on(c.name+"-insert-column-after",function(b,d,c){a.columnsObj.insertByRef(d,c,!0,a.columnIsAdded)});c.$on(c.name+"-insert-column-before",function(b,d,c){a.columnsObj.insertByRef(d,c,!1,a.columnIsAdded)});c.$on(c.name+"-remove-column",function(b,d){a.columnsObj.removeAt(d,-1,null,a.columnIsRemoved)});c.$on(c.name+"-remove-column-at",function(b,d){a.columnsObj.removeAt(null,d,null,a.columnIsRemoved)});
this.columnsAreCleared=function(){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.updateLayout()};a.columnIsAdded=function(){a.updateLayout()};a.columnIsRemoved=function(){a.updateLayout()};c.$on(c.name+"-add-group",function(b,d){0>a.groupsObj.getList().indexOf(d)&&a.groupsObj.insertAt(d,-1,null,a.groupIsAdded)});c.$on(c.name+"-clear-groups",function(b){a.groupsObj.clear(null,a.groupsAreCleared)});c.$on(c.name+"-insert-group-at",
function(b,d,c){0>a.groupsObj.getList().indexOf(d)&&a.groupsObj.insertAt(d,c,null,a.groupIsAdded)});c.$on(c.name+"-insert-group-after",function(b,d,c){0>a.groupsObj.getList().indexOf(d)&&a.groupsObj.insertByRef(d,c,!0,a.groupIsAdded)});c.$on(c.name+"-insert-group-before",function(b,d,c){0>a.groupsObj.getList().indexOf(d)&&a.groupsObj.insertByRef(d,c,!1,a.groupIsAdded)});c.$on(c.name+"-remove-group",function(b,d){a.groupsObj.removeAt(d,-1,null,a.groupIsRemoved)});c.$on(c.name+"-remove-group-at",function(b,
d){a.groupsObj.removeAt(null,d,null,a.groupIsRemoved)});this.groupsAreCleared=function(){a.updateLayout();a.callGroupChange()};a.groupIsAdded=function(b){a.updateLayout();a.callGroupChange(b)};a.groupIsRemoved=function(b){a.updateLayout();a.callGroupChange(b)};c.$on(c.name+"-add-row",function(b,d){a.rowsObj.insertAt(d,-1,null,a.rowIsAdded)});c.$on(c.name+"-clear-rows",function(b){a.rowsObj.clear(null,a.rowsAreCleared)});c.$on(c.name+"-insert-row-at",function(b,d,c){a.rowsObj.insertAt(d,c,null,a.rowIsAdded)});
c.$on(c.name+"-insert-row-after",function(b,d,c){a.rowsObj.insertByRef(d,c,!0,a.rowIsAdded)});c.$on(c.name+"-insert-row-before",function(b,d,c){a.rowsObj.insertByRef(d,c,!1,a.rowIsAdded)});c.$on(c.name+"-remove-row",function(b,d){a.rowsObj.removeAt(d,-1,null,a.rowIsRemoved)});c.$on(c.name+"-remove-row-at",function(b,d){a.rowsObj.removeAt(null,d,null,a.rowIsRemoved)});this.rowsAreCleared=function(b){b||(a.clearPrevSelection(),a.options.selectedRow=null,a.setScrollPos({x:0,y:0}));a.updateCurrentLayout()};
this.rowIsAdded=function(){a.updateCurrentLayout()};this.rowIsRemoved=function(){a.updateCurrentLayout()};this.objIsRemoved=function(){a.updateCurrentLayout()};a.groups=[];a.groupList=[];a.groupLevel=-1;this.updateGroupList=function(){a.groupList.length=0;var b=a.groupsObj.getList();b&&(a.groups=b);if(a.options.grouping.enabled&&0<a.groups.length&&(b=a.rowsObj.getList()))for(var d=0;d<b.length;d++){var c=b[d],t=c[a.options.rowFields.cells];if(t&&0<t.length){for(var F,f=null,l=0;l<a.groups.length;l++){F=
a.groups[l];F=F[a.options.columnFields.id];var g=l;F&&(g=a.getCellIndexById(t,l,F));if(0<=g&&g<t.length){(F=t[g][a.options.cellFields.text])&&""!=F||(F=void 0!=t[g][a.options.cellFields.value]?t[g][a.options.cellFields.value].toString():"undefined");var g=null,k=a.groupList;f&&(k=f[a.options.rowFields.rows]);if(k)for(var p=0;p<k.length;p++)if(k[p][a.options.rowFields.text]==F){g=k[p];break}g||(g={},g[a.options.rowFields.text]=F,g[a.options.rowFields.cells]=[{cid:a.columnList[a.options.expandColIndex][a.options.columnFields.id],
text:F}],g.type="group",f?(f[a.options.rowFields.rows]||(f[a.options.rowFields.rows]=[]),f[a.options.rowFields.rows].push(g)):a.groupList.push(g));f=g}}f&&(f[a.options.rowFields.rows]||(f[a.options.rowFields.rows]=[]),f[a.options.rowFields.rows].push(c))}}};this.callGroupRemoving=function(a){return angular.isDefined(c.events)&&c.events.groupRemoving?c.events.groupRemoving({group:a}):c.groupRemoving({e:{group:a}})};this.callGroupRemoved=function(a){return angular.isDefined(c.events)&&c.events.groupRemoved?
c.events.groupRemoved({group:a}):c.groupRemoved({e:{group:a}})};this.callGroupChange=function(a){angular.isDefined(c.events)&&c.events.groupChange?c.events.groupChange({group:a}):c.groupChange({e:{group:a}})};a.columnList=[];a.columnFilterList=[];a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;this.updateColumnList=function(){a.columnList.length=0;a.columnFilterList.length=0;a.isThereLeftFixedColumns=!1;a.isThereRightFixedColumns=!1;var b=a.columnsObj.getList();if(b)for(var d=0;d<b.length;d++){var c=
b[d];c.type="column";c[a.options.columnFields.id]||(c[a.options.columnFields.id]=g.getUniqueId());if(0!=c[a.options.columnFields.visible]){var t=!0;a.options.grouping.enabled&&(t=0<=a.groups.indexOf(c)?a.options.grouping.showColumns:!0);if(t)switch(t=(t=c[a.options.columnFields.filterParams])?yc.createTree(t.conditions,t.formula):null,a.columnFilterList.push({cid:c[a.options.columnFields.id],tree:t}),a.columnList.push(c),c[a.options.columnFields.fixed]){case "left":a.isThereLeftFixedColumns||(a.isThereLeftFixedColumns=
!0);break;case "right":a.isThereRightFixedColumns||(a.isThereRightFixedColumns=!0)}}}};var ad=function(b){for(var d=null,c=0;c<a.columnFilterList.length;c++)if(a.columnFilterList[c].cid==b){d=a.columnFilterList[c].tree;break}return d},I=function(b,d){if(0==a.options.allowFilter||"group"==b.type)return!0;var c=!0;if(b)for(var t,F,f,g=0;g<b[a.options.rowFields.cells].length;g++){c=!0;f=b[a.options.rowFields.cells][g];t=f[a.options.cellFields.cid];F=a.getColumnById(t);!F&&g<a.columnList.length&&(F=a.columnList[g]);
if(F&&F[a.options.columnFields.filterParams]){F=F[a.options.columnFields.filterParams];var l=f[a.options.cellFields.value]?f[a.options.cellFields.value]:f[a.options.cellFields.text];F&&(c=F.callback?F.callback(l,f,b):yc.match(l,F.conditions,F.formula,ad(t),F.caseSensitive))}if(!c)break}return c},da=a.options.indent;a.currentPageList=[];a.pageList=[];a.onlyCurrentPage=!1;a.currentList=[];a.fullIndentList=[];a.fullList=[];a.indentList=[];a.longestRow=null;a.isThereChildRows=!1;a.pageRowCount=0;a.pageNumber=
0;a.currentPageNumber=1;a.currentTopList=[];a.currentBottomList=[];this.isThereVisibleChildren=function(b){var d=!1;if(b&&(b=b[a.options.rowFields.rows])&&0<b.length)for(var c=0;c<b.length;c++)if(I(b[c])&&!a.isRowFixed(b[c])){d=!0;break}return d};var N=function(b,d,c,t){b.type||(b.type="row");b[a.options.rowFields.id]||(b[a.options.rowFields.id]=g.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var r=b[a.options.rowFields.cells];if(r&&0<r.length){c=I(b,t);for(var f,l,k,p=0;p<a.columnList.length;p++){k=
a.columnList[p];f=k[a.options.columnFields.id];l=k[a.options.columnFields.editorType];k=k[a.options.columnFields.editorSettings];var q=p;f&&(q=a.getCellIndexById(r,p,f));0<=q&&q<r.length&&(r[q].type="cell",r[q][a.options.cellFields.rid]=b[a.options.rowFields.id],a.setDefaultCellValue(r[q],l,k))}}if(c)if(t)a.fullList.push(b),a.fullIndentList.push(d);else if(a.options.paging.enabled)a.onlyCurrentPage?a.currentPageList.push({row:b,indent:d}):(b[a.options.rowFields.pid]||a.pageRowCount++,a.pageRowCount>
a.options.paging.pageSize&&(a.pageRowCount=1,a.pageNumber++,a.pageList.push([])),a.pageList[a.pageNumber].push({row:b,indent:d}));else switch(b[a.options.rowFields.fixed]){case "top":a.currentTopList.push(b);break;case "bottom":a.currentBottomList.push(b);break;default:a.currentList.push(b),a.indentList.push(d)}return c},A=function(b,d,c,t){if(!b[a.options.rowFields.rows])return c=N(b,d,c,t);if((c=N(b,d,c,t))&&!a.isRowFixed(b)){var r=0,f;if("group"==b.type&&(t||a.isRowExpanded(b))){var g=b[a.options.rowFields.rows];
if(g){a.applySorting(g);for(var l=0;l<g.length;l++)(f=A(g[l],d+da,b[a.options.rowFields.id],t))&&r++}}t||a.isThereChildRows||!(0<r||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))||(a.isThereChildRows=!0)}return c};this.isRowFixed=function(b){return!b||"top"!=b[a.options.rowFields.fixed]&&"bottom"!=b[a.options.rowFields.fixed]?!1:!0};this.getFullList=function(){a.fullList.length=0;a.fullIndentList.length=0;for(var b=a.rowsObj.getList(),
d=0;d<b.length;d++)A(b[d],0,null,!0);return a.fullList};this.getCurrentList=function(){return a.currentList};this.updateCurrentList=function(){a.currentList.length=0;a.indentList.length=0;a.currentTopList.length=0;a.currentBottomList.length=0;da=a.options.indent;if(a.options.paging.enabled){if(1<=a.currentPageNumber&&a.currentPageNumber<=a.pageList.length)for(var b=0;b<a.pageList[a.currentPageNumber-1].length;b++)a.currentList.push(a.pageList[a.currentPageNumber-1][b].row),a.indentList.push(a.pageList[a.currentPageNumber-
1][b].indent)}else{a.isThereChildRows=!1;var d=a.rowsObj.getList();a.options.grouping.enabled&&0<a.groups.length&&(d=a.groupList);if(d)for(a.applySorting(d),b=0;b<d.length;b++)A(d[b],0,null,!1)}};this.updatePageList=function(){a.pageList.length=0;a.pageRowCount=0;a.pageNumber=0;a.isThereChildRows=!1;da=a.options.indent;var b=a.rowsObj.getList();a.options.grouping.enabled&&0<a.groups.length&&(b=a.groupList);if(b&&0<b.length){a.applySorting(b);a.pageList.push([]);for(var d=0;d<b.length;d++)A(b[d],0,
null,!1);0<a.pageList.length&&0==a.pageList[a.pageList.length-1].length&&a.pageList.splice(a.pageList.length-1,1)}};this.columnEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearColumns?c.events.clearColumns():c.clearColumns(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.columnAdded?c.events.columnAdded({column:a.e.column}):c.columnAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.columnAdding?c.events.columnAdding({column:a.e.column}):
c.columnAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.columnRemoved?c.events.columnRemoved({column:a.e.column}):c.columnRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.columnRemoving?c.events.columnRemoving({column:a.e.column}):c.columnRemoving(a)}};this.groupEvents={clear:function(a){return angular.isDefined(c.events)&&c.events.clearGroups?c.events.clearGroups():c.clearGroups(a)},objAdded:function(a){return angular.isDefined(c.events)&&
c.events.groupAdded?c.events.groupAdded({group:a.e.group}):c.groupAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.groupAdding?c.events.groupAdding({group:a.e.group}):c.groupAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.groupRemoved?c.events.groupRemoved({group:a.e.group}):c.groupRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&c.events.groupRemoving?c.events.groupRemoving({group:a.e.group}):c.groupRemoving(a)}};this.rowEvents=
{clear:function(a){return angular.isDefined(c.events)&&c.events.clearRows?c.events.clearRows():c.clearRows(a)},objAdded:function(a){return angular.isDefined(c.events)&&c.events.rowAdded?c.events.rowAdded({row:a.e.row}):c.rowAdded(a)},objAdding:function(a){return angular.isDefined(c.events)&&c.events.rowAdding?c.events.rowAdding({row:a.e.row}):c.rowAdding(a)},objRemoved:function(a){return angular.isDefined(c.events)&&c.events.rowRemoved?c.events.rowRemoved({row:a.e.row}):c.rowRemoved(a)},objRemoving:function(a){return angular.isDefined(c.events)&&
c.events.rowRemoving?c.events.rowRemoving({row:a.e.row}):c.rowRemoving(a)}};this.getRowFields=function(a){return{content:a.content?a.content:"content",icon:a.icon?a.icon:"icon",id:a.id?a.id:"id",pid:a.pid?a.pid:"pid",objects:a.rows?a.rows:"rows",subobjects:a.cells?a.cells:"cells",text:a.text?a.text:"text"}};a.columnsObj=new wa({objects:c.columns,events:a.columnEvents,fields:a.options.columnFields});a.rowsObj=new wa({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.groupsObj=
new wa({objects:c.groups,events:a.groupEvents,fields:a.options.columnFields});c.$on(c.name+"-load-data",function(b,d,c){a.loadData(d,c)});c.$on(c.name+"-export-json",function(b,d,c,t){p.setTempData(a.exportToJSON(d,c,t))});this.exportToJSON=function(b,d,c){var r=c,r=r?r:null,f=a.columnsObj.getList();b=JSON.stringify(f,b?b:[a.options.columnFields.allowDrag,a.options.columnFields.allowDrop,a.options.columnFields.allowFilter,a.options.columnFields.allowGrouping,a.options.columnFields.cellTemplateUrl,
a.options.columnFields.contentAlignment,a.options.columnFields.contextMenu,a.options.columnFields.editorType,a.options.columnFields.editorSettings,a.options.columnFields.editorTemplate,a.options.columnFields.filterParams,a.options.columnFields.filterTemplate,a.options.columnFields.fixed,a.options.columnFields.fixedWidth,a.options.columnFields.footerAlignment,a.options.columnFields.footerContent,a.options.columnFields.footerTemplate,a.options.columnFields.footerText,a.options.columnFields.footerTooltip,
a.options.columnFields.groupText,a.options.columnFields.headerAlignment,a.options.columnFields.headerContent,a.options.columnFields.headerTemplate,a.options.columnFields.headerText,a.options.columnFields.headerTooltip,a.options.columnFields.icon,a.options.columnFields.id,a.options.columnFields.selected,a.options.columnFields.style,a.options.columnFields.templateSettings,a.options.columnFields.visible,a.options.columnFields.width],r);c=c?c:null;r=a.getFullList();d=JSON.stringify(r,d?d:[a.options.rowFields.allowCellFocus,
a.options.rowFields.allowDrag,a.options.rowFields.allowDrop,a.options.rowFields.allowFocus,a.options.rowFields.cells,a.options.rowFields.content,a.options.rowFields.contextMenu,a.options.rowFields.enabled,a.options.rowFields.expanded,a.options.rowFields.fixed,a.options.rowFields.hasChildren,a.options.rowFields.icon,a.options.rowFields.id,a.options.rowFields.pid,a.options.rowFields.selected,a.options.rowFields.statusIcon,a.options.rowFields.style,a.options.rowFields.text,a.options.rowFields.tooltip,
a.options.cellFields.rid],c);return'[\n{ "columns": '+b+' },\n{ "rows": '+d+" }\n]"};this.loadData=function(b,d){a.suspendLayout();a.updateDataFields(d);a.rowsObj.clear(null,a.rowsAreCleared);if(angular.isDefined(c.rows))for(var r=c.rows.length=0;r<b.length;r++)c.rows.push(b[r]);a.rowsObj=new wa({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)});a.resumeLayout()};this.updateData=function(){a.options.rowFields.dataSource&&(a.loadData(a.options.rowFields.dataSource),a.rowsObj=
new wa({objects:c.rows,events:a.rowEvents,fields:a.getRowFields(a.options.rowFields)}))};var Qa=!1;this.dragDropStatus=function(a){if(void 0!=a)Qa=a;else return Qa};this.getDnDSource=function(a){return{text:a.dataTransfer?a.dataTransfer.getData("text"):a.originalEvent.dataTransfer?a.originalEvent.dataTransfer.getData("text"):""}};this.getTouchData=function(a){return a.changedTouches?a.changedTouches:a.originalEvent?a.originalEvent.changedTouches:null};var db=angular.element('<div class="iui-drop-marker" data-element="dropmark"></div>');
this.getDropMarkLine=function(){return dropMarkLine};a.getMousePos=function(a){return{x:a.pageX?a.pageX:a.originalEvent?a.originalEvent.pageX:0,y:a.pageY?a.pageY:a.originalEvent?a.originalEvent.pageY:0}};this.getGridName=function(){return angular.isDefined(c.name)?c.name:""};f.bind("dragenter",function(b){b.preventDefault();if(a.options.enabled){var d=q.getData();d.source||(d.source=a.getDnDSource(b));b={event:b,sourceCtrl:d.sourceCtrl?d.sourceCtrl.getGridName():"",dragRow:d.source,targetCtrl:a.getGridName(),
targetRow:d.target,mousePos:a.getMousePos(b)};a.callDragEnter(b)}});f.bind("dragover",function(b){b.preventDefault();if(!a.options.enabled||!a.isDropInRange(b)||a.options.grouping.enabled&&0<a.groups.length)a.dropMark(),b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none");else{var d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===b.originalEvent.dataTransfer.effectAllowed?
!1:!0);if(d)if(b.dataTransfer?b.dataTransfer.dropEffect=a.options.allowDrop?"move":"none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect=a.options.allowDrop?"move":"none"),d=q.getData(),d.source||(d.source=a.getDnDSource(b)),q.setData({source:d.source,sourceCtrl:d.sourceCtrl,target:null,dropPos:-1}),d={event:b,sourceCtrl:d.sourceCtrl?d.sourceCtrl.getGridName():"",dragRow:d.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,
mousePos:a.getMousePos(b)},0==a.callDragOver(d))b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark();else{d=a.getMousePos(b);b=d.y+16;var d=d.x+20,r=a.getDropMarkWindow();r.empty();r.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(c.name?c.name:"Grid")+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:d});a.dropMark(!0)}}});f.bind("drop",
function(b){b.preventDefault();if(a.options.enabled){a.dropMark();if(a.isDropInRange(b)){var d=!0;b.dataTransfer?d="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(d="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(d&&(d=q.getData(),d.source||(d.source=a.getDnDSource(b)),d.source)){var r={event:b,sourceCtrl:d.sourceCtrl?d.sourceCtrl.getGridName():"",dragRow:d.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,
dropPos:-1,mousePos:a.getMousePos(b)};!1!==a.callDragDrop(r)&&(a.drop(d),c.$$phase||c.$apply())}}q.clearData()}b.stopPropagation()});f.bind("dragleave",function(b){b.preventDefault();if(a.options.enabled){a.dropMark();var d=q.getData();d.source||(d.source=a.getDnDSource(b));b={event:b,sourceCtrl:d.sourceCtrl?d.sourceCtrl.getGridName():"",dragRow:d.source,targetCtrl:a.getGridName(),targetRow:d.target,mousePos:a.getMousePos(b)};a.callDragLeave(b);a.cancelScrollTimer()}});f.bind("dragend",function(b){b.preventDefault();
a.options.enabled&&(a.dropMark(),q.getData().source||q.clearData(),a.dragDropStatus(!1))});f.bind("mouseleave",function(b){b.preventDefault();a.options.enabled&&(a.dropMark(),a.hoverColumn=null,a.hoverRow=null,a.hoverCell=null)});this.containsMousePos=function(a,d){return q.hitTest(a,d,{left:0,top:0,right:f[0].clientWidth,bottom:f[0].clientHeight})};this.isPopupActive=function(){return!1};var Ra=function(b,d){var c=a.options.rowFields;if(!b[c.cells]){b[c.cells]=[];var t={};t[a.options.cellFields.text]=
b[d.text];b[c.cells].push(t)}b[c.rows]||(b[c.rows]=[]);b[c.rows].length=0;if(b[d.items]&&0<b[d.items].length)for(t=0;t<b[d.items].length;t++)b[c.rows].push(Ra(b[d.items][t],d));return b},Sa=function(b,d){var c=!1;d.sourceCtrl&&(c=d.sourceCollection.removeAt(b,-1,null,d.sourceCtrl.objIsRemoved));c&&("item"==b.type&&(b=Ra(b,d.sourceCtrl.options.dataFields)),1===d.dropPos||2===d.dropPos?1===d.dropPos?a.rowsObj.insertByRef(b,d.target,!1,a.rowIsAdded):a.rowsObj.insertByRef(b,d.target,!0,a.rowIsAdded):
a.rowsObj.insertAt(b,-1,null,a.rowIsAdded))};this.setDropSelection=function(b,d){var c=b;!c&&0<=d&&d<a.currentList.length&&(c=a.currentList[d]);a.clearPrevSelection(c);a.rowSelection(c)};this.drop=function(b){if(b&&b.sourceCtrl){b.sourceCtrl.suppressProcess=!0;a.allowUpdate=!1;b.sourceCtrl.allowUpdate=!1;var d=b.source,c=-1;if(Array.isArray(b.source)){0<b.source.length&&(c=b.sourceCtrl.getObjCurrentIndex(b.source[b.source.length-1]));for(var t=[],f=0;f<b.source.length;f++){for(var g=!1,k=b.sourceCollection.getParent(b.source[f]);k;){if(b.sourceCtrl.isObjInSelList(k)){g=
!0;break}k=b.sourceCollection.getParent(k)}g||t.push(b.source[f])}if(0<t.length)if(d=t[t.length-1],f=b.sourceCtrl.getObjCurrentIndex(t[0]),g=b.sourceCtrl.getObjCurrentIndex(d),f<=g)for(f=0;f<t.length;f++)Sa(t[f],b);else for(f=t.length-1;0<=f;f--)Sa(t[f],b)}else c=b.sourceCtrl.getObjCurrentIndex(b.source),Sa(b.source,b);b.sourceCtrl!==a?(a.allowUpdate=!0,b.sourceCtrl.allowUpdate=!0,a.updateCurrentLayout(),b.sourceCtrl.updateCurrentLayout()):(a.allowUpdate=!0,a.updateCurrentLayout());b.sourceCtrl.multiSelection(!1);
var p=l(function(){b.sourceCtrl!==a&&b.sourceCtrl.setDropSelection(null,c);a.setDropSelection(d);a.updateFocus(a.getObjCurrentIndex(d),0);l.cancel(p)},1);b.sourceCtrl.suppressProcess=!1}};this.isDragAllowed=function(b){return a.options.allowDrag?b&&"row"==b.type&&(b[a.options.rowFields.allowDrag]||void 0===b[a.options.rowFields.allowDrag])?!0:!1:!1};this.isDropAllowed=function(b,d,c){if((c=a.options.allowDrop)&&b&&d&&(c=a.isRowFixed(d)||"row"!=d.type||!d[a.options.rowFields.allowDrop]&&void 0!==d[a.options.rowFields.allowDrop]?
!1:!0))if(Array.isArray(b))for(var r=0;r<b.length;r++){if(b[r][a.options.rowFields.pid]&&d[a.options.rowFields.pid]&&!g.isEqual(b[r][a.options.rowFields.pid],d[a.options.rowFields.pid])){c=!1;break}else if(g.isEqual(b[r][a.options.rowFields.id],d[a.options.rowFields.id])){c=!1;break}if(!c)break}else b[a.options.rowFields.pid]&&d[a.options.rowFields.pid]&&!g.isEqual(b[a.options.rowFields.pid],d[a.options.rowFields.pid])?c=!1:g.isEqual(b[a.options.rowFields.id],d[a.options.rowFields.id])&&(c=!1);return c};
this.getDropMarkWindow=function(){for(var a=db,d=angular.element(document.body).children(),c=0;c<d.length;c++){var t=angular.element(d[c]);if(t[0].attributes&&t[0].attributes["data-element"]&&"dropmark"===t[0].attributes["data-element"].value){a=t;break}}return a};this.dropMark=function(b,d){d||(d=a.getDropMarkWindow());if(d){var c="none";this.options.allowDrop&&(c=b?"block":"none");angular.element(d).css("display",c)}};this.updateDropMarkElem=function(a,d){a&&d&&(a.css("top",d.top+"px"),a.css("left",
d.left+"px"),a.css("width",d.width+"px"))};c.$on(c.name+"-open-editor",function(b,d){a.openEditor(d)});c.$on(c.name+"-close-editor",function(b,d){a.closeEditor(d)});this.updateEditorSettings=function(b){a.options.editorSettings=b?{activate:g.isFieldAvailable(b.activate,"click")}:{activate:"click"}};this.allowEvents=!0;this.callAfterEdit=function(a){angular.isDefined(c.events)&&c.events.afterEdit&&c.events.afterEdit({cell:a});c.afterEdit({e:{cell:a}})};this.callAfterLabelEdit=function(a){angular.isDefined(c.events)&&
c.events.afterLabelEdit&&c.events.afterLabelEdit({cell:a});c.afterLabelEdit({e:{cell:a}})};this.callAfterSelect=function(a){angular.isDefined(c.events)&&c.events.afterSelect?c.events.afterSelect({object:a}):c.afterSelect({e:{object:a}});angular.isDefined(c.events)&&c.events.selectionChanged?c.events.selectionChanged({object:a}):c.selectionChanged({e:{object:a}})};this.callBeforeEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeEdit?c.events.beforeEdit({cell:a}):c.beforeEdit({e:{cell:a}})};
this.callBeforeLabelEdit=function(a){return angular.isDefined(c.events)&&c.events.beforeLabelEdit?c.events.beforeLabelEdit({cell:a}):c.beforeLabelEdit({e:{cell:a}})};this.callCellValueChanging=function(b,d,r){var t=!0;a.allowEvents&&(t=angular.isDefined(c.events)&&c.events.cellvalueChanging?c.events.cellvalueChanging({row:b,cell:d,value:r}):c.cellvalueChanging({e:{row:b,cell:d,value:r}}));return t};this.callCellValueChanged=function(b,d,r){a.allowEvents&&(angular.isDefined(c.events)&&c.events.cellvalueChanged?
c.events.cellvalueChanged({row:b,cell:d,value:r}):c.cellvalueChanged({e:{row:b,cell:d,value:r}}))};this.callChange=function(){angular.isDefined(c.events)&&c.events.change?c.events.change():c.change()};this.callColumnClick=function(a,d){angular.isDefined(c.events)&&c.events.columnClick&&c.events.columnClick({column:a,mousePos:d});c.columnClick({e:{column:a,mousePos:d}})};this.callColumnDblClick=function(a,d){angular.isDefined(c.events)&&c.events.columnDblclick&&c.events.columnDblclick({column:a,mousePos:d});
c.columnDblclick({e:{column:a,mousePos:d}})};this.callColumnHover=function(a){angular.isDefined(c.events)&&c.events.columnHover&&c.events.columnHover({column:a});c.columnHover({e:{column:a}})};this.callColumnPosChanging=function(a,d){return angular.isDefined(c.events)&&c.events.columnPoschanging?c.events.columnPoschanging({sourceColumn:a,targetColumn:d}):c.columnPoschanging({e:{sourceColumn:a,targetColumn:d}})};this.callColumnPosChanged=function(a,d){angular.isDefined(c.events)&&c.events.columnPoschanged&&
c.events.columnPoschanged({sourceColumn:a,targetColumn:d});c.columnPoschanged({e:{sourceColumn:a,targetColumn:d}})};this.callColumnRightClick=function(a,d){angular.isDefined(c.events)&&c.events.columnRightclick&&c.events.columnRightclick({column:a,mousePos:d});c.columnRightclick({e:{column:a,mousePos:d}})};this.callColumnSizeChanged=function(a,d){angular.isDefined(c.events)&&c.events.columnSizechanged&&c.events.columnSizechanged({column:a});c.columnSizechanged({e:{column:a}})};this.callDragEnter=
function(a){angular.isDefined(c.events)&&c.events.dragEnter?c.events.dragEnter({event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragEnter({e:{event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callDragOver=function(b){var d=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragOver?c.events.dragOver({event:b.event,
sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):c.dragOver({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragDrop=function(b){var d=a.getCellAt(b.mousePos.x,b.mousePos.y);return angular.isDefined(c.events)&&c.events.dragDrop?
c.events.dragDrop({event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}):c.dragDrop({e:{event:b.event,sourceTree:b.sourceTree,dragRow:b.dragRow,targetTree:b.targetTree,targetRow:b.targetRow,targetCell:d,isDropAllowed:b.isDropAllowed,dropPos:b.dropPos,mousePos:b.mousePos}})};this.callDragLeave=function(a){angular.isDefined(c.events)&&c.events.dragLeave?c.events.dragLeave({event:a.event,
sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}):c.dragLeave({e:{event:a.event,sourceCtrl:a.sourceCtrl,dragRow:a.dragRow,targetCtrl:a.targetCtrl,targetRow:a.targetRow,mousePos:a.mousePos}})};this.callCellClick=function(a,d,r,t){angular.isDefined(c.events)&&c.events.cellClick&&c.events.cellClick({event:a,row:d,cell:r,mousePos:t});c.cellClick({e:{event:a,row:d,cell:r,mousePos:t}})};this.callCellHover=function(a,d){angular.isDefined(c.events)&&
c.events.cellHover?c.events.cellHover({event:a,cell:d}):c.cellHover({e:{event:a,cell:d}})};this.callEnabledChanged=function(a){angular.isDefined(c.events)&&c.events.enabledChanged?c.events.enabledChanged({enabled:a}):c.enabledChanged({e:{enabled:a}})};this.callRowClick=function(a,d,r){angular.isDefined(c.events)&&c.events.rowClick?c.events.rowClick({event:a,row:d,mousePos:r}):c.rowClick({e:{event:a,row:d,mousePos:r}})};this.callRowDblClick=function(a,d){return angular.isDefined(c.events)&&c.events.rowDblClick?
c.events.rowDblClick({row:a,mousePos:d}):c.rowDblclick({e:{row:a,mousePos:d}})};this.callRowHover=function(a,d){angular.isDefined(c.events)&&c.events.rowHover?c.events.rowHover({event:a,row:d}):c.rowHover({e:{event:a,row:d}})};this.callRowRightClick=function(a,d){angular.isDefined(c.events)&&c.events.rowRightClick&&c.events.rowRightClick({row:a,mousePos:d});c.rowRightclick({e:{row:a,mousePos:d}})};this.callKeyDown=function(a,d){angular.isDefined(c.events)&&c.events.keyDown?c.events.keyDown({event:a,
row:d}):c.keyDown({e:{event:a,row:d}})};this.callKeyPress=function(a,d){angular.isDefined(c.events)&&c.events.keyPress?c.events.keyPress({event:a,row:d}):c.keyPress({e:{event:a,row:d}})};this.callKeyUp=function(a,d){angular.isDefined(c.events)&&c.events.keyUp?c.events.keyUp({event:a,row:d}):c.keyUp({e:{event:a,row:d}})};this.callScrollPosChanged=function(){angular.isDefined(c.events)&&c.events.scrollPosChanged?c.events.scrollPosChanged({scrollPos:a.scrollPos}):c.scrollposChanged({e:{scrollPos:a.scrollPos}})};
f.bind("click",function(b){a.options.enabled&&1===b.which&&a.callRowClick(b,null,a.getMousePos(b))});f.bind("dblclick",function(b){b.preventDefault();a.options.enabled&&1===b.which&&a.callRowDblClick(null,a.getMousePos(b));b.stopPropagation()});f.bind("mousedown",function(b){a.options.enabled&&3===b.which&&a.callRowRightClick(null,a.getMousePos(b));a.removeDropDownList();a.closeFilterWindow();a.closeEditor();b.stopPropagation()});this.expandList=[];this.expandIndentList=[];var Ob=function(b,d,c){b.type||
(b.type="row");b[a.options.rowFields.id]||(b[a.options.rowFields.id]=g.getUniqueId());c&&(b[a.options.rowFields.pid]=c);c=!0;var r=b[a.options.rowFields.cells];if(r&&0<r.length){c=I(b);for(var f,l,k,p=0;p<a.columnList.length;p++){k=a.columnList[p];f=k[a.options.columnFields.id];l=k[a.options.columnFields.editorType];k=k[a.options.columnFields.editorSettings];var q=p;f&&(q=a.getCellIndexById(r,p,f));0<=q&&q<r.length&&(r[q].type="cell",a.setDefaultCellValue(r[q],l,k))}}c&&(a.expandList.push(b),a.expandIndentList.push(d));
return c},G=function(b,d,c){if(!b[a.options.rowFields.rows])return c=Ob(b,d+da,c);if(c=Ob(b,d+da,c)){var r=0,f;if("group"==b.type&&a.isRowExpanded(b)){var g=b[a.options.rowFields.rows];if(g){a.applySorting(g);for(var l=0;l<g.length;l++)(f=G(g[l],d+da,b[a.options.rowFields.id]))&&r++}}!a.isThereChildRows&&(0<r||!a.isRowExpanded(b)&&b[a.options.rowFields.rows]&&0<b[a.options.rowFields.rows].length&&a.isThereVisibleChildren(b))&&(a.isThereChildRows=!0)}return c};this.expand=function(b){a.expandList.length=
[];a.expandIndentList.length=[];if(!a.isRowExpanded(b)){var d=a.getRowCurrentIndex(b);if(b=a.getList(b)){a.applySorting(b);for(var c=0;c<b.length;c++)G(b[c],a.indentList[d],null)}if(0<a.expandList.length){a.allowEvents=!1;d++;Array.prototype.splice.apply(a.currentList,[d,0].concat(a.expandList));Array.prototype.splice.apply(a.indentList,[d,0].concat(a.expandIndentList));a.getRowScope()?a.updateView():a.updateLayout();var t=l(function(){a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();
a.updateScrollView();l.cancel(t);a.allowEvents=!0},1)}}};this.collapse=function(b){a.expandList.length=[];a.expandIndentList.length=[];if(a.isRowExpanded(b)){var d=null,c=!1,t=b,f=-1,g=a.getRowCurrentIndex(b);for(b=a.getParent(b);b&&!c;){d=a.getList(b);for(f=d.indexOf(t)+1;!c&&f<d.length;)t=d[f],0<a.getRowCurrentIndex(t)&&(c=!0),f++;c||(t=b);b=a.getParent(b)}if(!c&&t)for(d=a.getList(),a.options.grouping.enabled&&0<a.groups.length&&(d=a.groupList),f=d.indexOf(t)+1;f<d.length;)if(t=d[f],0<a.getRowCurrentIndex(t)){c=
!0;break}else f++;g++;d=a.currentList.length-g;c&&(d=a.getRowCurrentIndex(t)-g);if(0<d){a.currentList.splice(g,d);a.indentList.splice(g,d);a.getRowScope()?a.updateView():a.updateLayout();var k=l(function(){a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView();l.cancel(k);a.allowEvents=!0},1)}}};this.toggle=function(b,d){if(b){if((b[a.options.rowFields.hasChildren]||b[a.options.rowFields.rows]&&0!=b[a.options.rowFields.rows].length)&&!(d&&0!=b[a.options.rowFields.expanded]||
!1===d&&0==b[a.options.rowFields.expanded])){a.updateType="view";var c=void 0!==d?d:!1!==b[a.options.rowFields.expanded]?!0:!1,c=void 0!=d?d:!c;c!=b[a.options.rowFields.expanded]&&(0!=c?a.expand(b):a.collapse(b),b[a.options.rowFields.expanded]=c)}}else{for(var c=a.getFullList(),f=0;f<c.length;f++)c[f][a.options.rowFields.expanded]=d;a.updateCurrentLayout()}};this.isFilteringAllowed=function(b){return b&&b[a.options.columnFields.allowFilter]};c.$on(c.name+"-filter",function(b,d,c){a.filter(d,c)});
this.filter=function(b,c){if(b)b[a.options.columnFields.filterParams]=c;else for(var d=0;d<a.columnList.length;d++)a.columnList[d][a.options.columnFields.filterParams]=null;a.closeFilterWindow();a.updateCurrentLayout();a.callChange()};this.callGotFocus=function(a,d,r,f,g){angular.isDefined(c.events)&&c.events.gotFocus?c.events.gotFocus({event:a,row:d,cell:r,edit:void 0!=f?!0:!1,editValue:g}):c.gotFocus({e:{event:a,row:d,cell:r,edit:void 0!=f?!0:!1,editValue:g}})};this.callLostFocus=function(a,d,r,
f,g){angular.isDefined(c.events)&&c.events.lostFocus?c.events.lostFocus({event:a,row:d,cell:r,edit:void 0!=f?!0:!1,editValue:g}):c.lostFocus({e:{event:a,row:d,cell:r,edit:void 0!=f?!0:!1,editValue:g}})};this.getTabIndex=function(){return f[0].attributes&&f[0].attributes.tabindex?f[0].attributes.tabindex.value:""};this.updateFocus=function(b,c){if(1==a.options.allowFocus)var d=l(function(){if(a.isRowIndexInRange(b)){var r="none";0<=c&&c<a.columnList.length&&(r=a.columnList[c][a.options.columnFields.fixed]);
var g=a.getElemFromRow(a.currentList[b],r);g&&(1==a.options.allowCellFocus&&0<=c&&c<a.columnList.length?(r=a.getElemFromCell(b,c,r))&&r[0].focus():g[0].focus())}else f[0].focus();l.cancel(d)},5)};c.$on(c.name+"-focus",function(b,c){if(c){var d,f;switch(c.type){case "group":d=a.getRowCurrentIndex(c);a.updateFocus(d);break;case "row":d=a.getRowCurrentIndex(c);a.updateFocus(d);break;case "cell":d=a.getCellRowIndex(c),f=a.getCellColumnIndex(c),a.updateFocus(d,f)}}else a.updateFocus()});var xb=!1;this.getCell=
function(b,c){if(0<=b&&b<a.currentList.length){var d=a.currentList[b],f=a.getColumnRealIndex(c);0<=c&&c<a.columnList.length&&(f=a.getCellIndexById(d[a.options.rowFields.cells],c,a.columnList[c].id));if(d[a.options.rowFields.cells]&&0<=f&&f<d[a.options.rowFields.cells].length)return d[a.options.rowFields.cells][f]}return null};this.getCellObject=function(b,c){if(0<=b&&b<a.currentList.length){var d=a.currentList[b],f=a.getColumnRealIndex(c);0<=c&&c<a.columnList.length&&(f=a.getCellIndexById(d[a.options.rowFields.cells],
c,a.columnList[c].id));if(d[a.options.rowFields.cells]&&0<=f&&f<d[a.options.rowFields.cells].length)return d[a.options.rowFields.cells][f]}return null};this.getCellIndexById=function(b,c,f){var d=-1;if(b){c=a.getColumnRealIndex(c);for(var r=0;r<b.length;r++)if(void 0==b[r][a.options.cellFields.cid]){d=c;break}else if(b[r][a.options.cellFields.cid]==f){d=r;break}}return d};this.getCellIndexFromRow=function(b,c){var d=-1;if(b&&c&&c[a.options.rowFields.cells])for(var f=0;f<c[a.options.rowFields.cells].length;f++)if(c[a.options.rowFields.cells][f]==
b){d=f;break}return d};this.getCellColumnIndex=function(b){if(b)if(b[a.options.cellFields.cid]){if(b=a.getColumnById(b[a.options.cellFields.cid]))return a.getColumnCurrentIndex(b)}else return a.getCellColumnIndexFromRow(b);return-1};this.getCellColumnIndexFromRow=function(b){if(b&&b[a.options.cellFields.rid]){var c=a.findRowById(b[a.options.cellFields.rid]);if(c&&(c=c[a.options.rowFields.cells])&&0<c.length)return c.indexOf(b)}return-1};this.getCellRowIndex=function(b){return b&&b[a.options.cellFields.rid]&&
(b=a.findRowById(b[a.options.cellFields.rid]))?a.getRowCurrentIndex(b):-1};this.getColumnById=function(b){for(var c=null,f=0;f<a.columnList.length;f++)if(a.columnList[f][a.options.columnFields.id]==b){c=a.columnList[f];break}return c};this.getColumnObject=function(b){return 0<=b&&b<a.columnList.length?a.columnList[b]:null};this.getRowObject=function(b){return 0<=b&&b<a.currentList.length?a.currentList[b]:null};this.isRowExpanded=function(b){return b?b[a.options.rowFields.expanded]||void 0===b[a.options.rowFields.expanded]?
!0:!1:!0};this.getContentElement=function(a,c){var b=null;c||(c="cell-content");if(a&&0<a.children().length)for(var d=a.children(),f=0;f<d.length;f++){var g=angular.element(d.eq(f));if(g[0].attributes&&g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==c){b=g;break}}return b};this.getElement=function(a,c){var b=null;c||(c="cell-content");if(a&&0<a.children().length){a=a.children().eq(0);for(var d=a.children(),f=0;f<d.length;f++){var g=angular.element(d.eq(f));if(g[0].attributes&&
g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==c){b=g;break}}}return b};this.getChildElement=function(a,c){var b=null;c||(c="content");if(a&&0<a.children().length)for(var d=a.children(),f=0;f<d.length;f++){var g=angular.element(d.eq(f));if(g[0].attributes&&g[0].attributes["data-element"]&&g[0].attributes["data-element"].value==c){b=g;break}}return b};this.getElemFromColumn=function(b,c,f){var d=null;if(b){b=a.getColumnCurrentIndex(b);var r=a.getHeaderElem(c);"footer"==f&&
(r=a.getFooterElem(c));if(r&&(c=r.find("td"))&&0<c.length)for(f=0;f<c.length;f++)if(r=angular.element(c[f]),r[0].attributes["data-index"]&&r[0].attributes["data-index"].value.toString()===b.toString()){d=r;break}}return d};this.getElemFromRow=function(b,c,f){var d=null;if(b&&(b=a.getRowCurrentIndex(b,f),(c=a.getRowElems(c,f))&&0<c.length))for(f=0;f<c.length;f++){var r=angular.element(c[f]);if(r[0].attributes["data-index"]&&r[0].attributes["data-index"].value.toString()===b.toString()){d=r;break}}return d};
this.getElemFromCell=function(b,c,f,g){var d=null;if(a.isRowIndexInRange(b,g)){switch(g){case "top":b=a.getElemFromRow(a.currentTopList[b],f,g);break;case "bottom":b=a.getElemFromRow(a.currentBottomList[b],f,g);break;default:b=a.getElemFromRow(a.currentList[b],f,g)}if(b&&(b=b.find("td"))&&0<b.length)for(f=0;f<b.length;f++)if(g=angular.element(b[f]),g[0].attributes["data-index"]&&g[0].attributes["data-index"].value.toString()===c.toString()){d=g;break}}return d};this.getElemFromColumnCell=function(b,
c,f){var d=null;if((c=f?a.getFooterElem(c):a.getHeaderElem(c))&&(c=c.find("td"))&&0<c.length)for(f=0;f<c.length;f++){var g=angular.element(c[f]);if(g[0].attributes["data-index"]&&g[0].attributes["data-index"].value.toString()===b.toString()){d=g;break}}return d};this.getIndent=function(b){var c=0;if(b)for(parent=a.rowsObj.getParent(b);parent;)c+=a.options.indent,parent=a.rowsObj.getParent(parent);return c};this.getObjState=function(b){if(b)switch(b.type){case "column":if(0==a.options.enabled)return"disabled";
if(1==b[a.options.columnFields.selected])return"selected";if(b==a.hoverColumn)return"hovered";break;case "group":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";if(1==b.selected)return"selected";if(b==a.hoverRow)return"hovered";break;case "row":if(0==a.options.enabled||0==b[a.options.rowFields.enabled])return"disabled";if(1==b[a.options.rowFields.selected])return"selected";if(b==a.hoverRow)return"hovered";break;case "cell":if(0==a.options.enabled||0==b[a.options.cellFields.enabled])return"disabled";
if(1==b[a.options.cellFields.selected])return"selected";if(b==a.hoverCell)return"hovered"}return"normal"};this.getColumnAt=function(b,c){if(void 0==b||void 0==c)return a.hoverColumn;var d,f,l=null;d="left";for(var k=0;!l&&3>k;){if(d=a.getHeaderElem(d)){var p=d.find("td");if(p&&0<p.length)for(var q=0;q<p.length;q++)if(d=angular.element(p[q]),f=g.getPageRect(d),g.checkHit(b,c,f)){l=a.getColumnFromElem(d);break}}k++;d=1==k?"right":"none"}return l};this.getCellAt=function(b,c){var d=null,f=a.getRowAt(b,
c);if(f){var l,k,p=a.getElemFromRow(f).find("td");if(p&&0<p.length)for(var q=0;q<p.length&&!(l=angular.element(p[q]),k=g.getPageRect(l),g.checkHit(b,c,k)&&(d=a.getRowCurrentIndex(f),l=a.getIndexFromElem(l),d=a.getCellObject(d,l)));q++);}return d};this.getRowAt=function(b,c){var d,f,l=null;d="none";for(var k=0;!l&&3>k;){var p=a.getRowElems(d);if(p&&0<p.length)for(var q=0;q<p.length;q++)if(d=angular.element(p[q]),f=g.getPageRect(d),g.checkHit(b,c,f)){l=a.getRowFromElem(d);break}k++;d=1==k?"left":"right"}return l};
this.getRowCurrentIndex=function(b){if(b){switch(b[a.options.rowFields.fixed]){case "top":return a.currentTopList?a.currentTopList.indexOf(b):-1;case "bottom":return a.currentBottomList?a.currentBottomList.indexOf(b):-1}return a.currentList?a.currentList.indexOf(b):-1}return-1};this.getObjCurrentIndex=function(b){return a.getRowCurrentIndex(b)};this.getRowFromChildElem=function(b){if(b&&(b=angular.element(b))){for(b=b.parent();b&&b[0].tagName&&"tr"!==b[0].tagName.toLowerCase();)b=b.parent();return b?
a.getRowFromElem(b):null}return null};this.getColumnCurrentIndex=function(b){return b&&a.columnList?a.columnList.indexOf(b):-1};this.getFullColumnList=function(){return a.columnsObj.getList()};this.getColumnRealIndex=function(b){var c=a.columnsObj.getList();return 0<=b&&b<c.length&&b<a.columnList.length?c.indexOf(a.columnList[b]):-1};this.getColumnFromChildElem=function(b){return b?a.getColumnFromElem(b):null};this.getColumnFromElem=function(b){return b&&(b=angular.element(b))&&b[0].attributes["data-index"]&&
(b=b[0].attributes["data-index"].value,0<=b&&b<a.columnList.length)?a.columnList[b]:null};this.getIndexFromElem=function(a){return a&&(a=angular.element(a))&&a[0].attributes["data-index"]?a[0].attributes["data-index"].value:-1};this.getRowFromElem=function(b){if(b&&(b=angular.element(b))&&b[0].attributes["data-index"]){var c=b[0].attributes["data-index"].value,f="none";b&&b[0].attributes["data-fixed"]&&(f=b[0].attributes["data-fixed"].value);switch(f){case "top":if(a.isRowIndexInRange(c,f))return a.currentTopList[c];
break;case "bottom":if(a.isRowIndexInRange(c,f))return a.currentBottomList[c];break;default:if(a.isRowIndexInRange(c))return a.currentList[c]}}};this.isRowIndexInRange=function(b,c){switch(c){case "top":return 0<=b&&b<a.currentTopList.length;case "bottom":return 0<=b&&b<a.currentBottomList.length}return 0<=b&&b<a.currentList.length};this.isColIndexInRange=function(b){return 0<=b&&b<a.columnList.length};this.isRowEnabled=function(b){return b&&1==a.options.enabled&&g.isEnabled(b[a.options.rowFields.enabled])};
this.mouseButtonStatus=function(a){xb=a};c.$on(c.name+"-ensure-visible",function(b,c){a.ensureVisible(c)});c.$on(c.name+"-find-row-by-id",function(b,c){p.setTempData(a.findRowById(c))});c.$on(c.name+"-find-row-by-text",function(b,c){p.setTempData(a.findRowByText(c))});c.$on(c.name+"-get-list",function(b,c){p.setTempData(a.getList(c))});c.$on(c.name+"-get-top-row",function(b){p.setTempData(a.getTopRow())});c.$on(c.name+"-set-top-row",function(b,c){a.ensureVisible(c)});this.ensureVisible=function(b,
c){if(b){for(var d=[],f=a.getParent(b);f;)d.push(f),f=a.getParent(f);for(f=d.length-1;0<=f;f--)d[f][a.options.rowFields.expanded]=!0;a.updateCurrentLayout();var g=l(function(){c=void 0!=c?c:"center";a.scrollTo(b,c);l.cancel(g)},100)}};this.findRowById=function(b){return a.rowsObj.findObjectById(b)};this.findRowByText=function(b){return a.rowsObj.findObjectByText(b)};this.getLevel=function(a){var b=0;for(a=this.getParent(a);a;)b++,a=this.getParent(a);return b};this.findParent=function(b,c){var d=null;
if(b&&c)for(var f=0;!d&&f<c.length;)d=c[f][a.options.rowFields.id]&&b[a.options.rowFields.pid]&&c[f][a.options.rowFields.id].toString()===b[a.options.rowFields.pid].toString()?c[f]:a.findParent(b,c[f][a.options.rowFields.rows]),f++;return d};this.getParent=function(b){return b?a.findParent(b,a.groupList):null};this.getList=function(b){return a.rowsObj.getList(b)};this.getFirstRow=function(){for(var b=null,c=0;c<a.currentList.length;c++)if(g.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=
a.currentList[c];break}return b};this.getPrevRow=function(b){var c=null;if(0<=b&&b<a.currentList.length)for(--b;0<=b;b--)if(g.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getNextRow=function(b){var c=null;for(b+=1;b<a.currentList.length;b++)if(g.isEnabled(a.currentList[b][a.options.rowFields.enabled])){c=a.currentList[b];break}return c};this.getLastRow=function(){for(var b=null,c=a.currentList.length-1;0<=c;c--)if(g.isEnabled(a.currentList[c][a.options.rowFields.enabled])){b=
a.currentList[c];break}return b};this.updateSelectionStatus=function(b){switch(b){case "shift":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}break;case "ctrl":switch(a.options.selectionMode){case "multi-simple":a.multiSelection(!0);break;case "multi-extended":a.multiSelection(!0);break;default:a.multiSelection(!1)}}};f.bind("keydown",function(b){if(a.options.enabled)switch(b.keyCode){case 16:a.updateSelectionStatus("shift");
break;case 17:a.updateSelectionStatus("ctrl");break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}});this.allowUpdate=!0;this.updateType="all";this.suspendLayout=function(b){a.allowUpdate=!1};this.resumeLayout=function(b){a.allowUpdate=!0;b?a.updateCurrentLayout():a.updateLayout()};c.$on(c.name+"-refresh",function(b,c,f){a.refresh(c,f)});c.$on(c.name+"-resume-layout",function(b,c){a.resumeLayout(c)});c.$on(c.name+"-suspend-layout",function(b,
c){a.suspendLayout(c)});c.$on(c.name+"-update-layout",function(b,c){c?a.updateCurrentLayout():a.updateLayout()});c.$on(c.name+"-update-view",function(b){a.updateView()});c.$on(c.name+"-begin-load",function(b,c){a.beginLoad(c)});c.$on(c.name+"-end-load",function(b){a.endLoad()});this.callLoadComplete=function(){angular.isDefined(c.events)&&c.events.loadComplete?c.events.loadComplete():c.loadComplete()};this.callUpdateComplete=function(){angular.isDefined(c.events)&&c.events.updateComplete?c.events.updateComplete():
c.updateComplete()};c.$on(c.name+"-get-current-page",function(b){p.setTempData(a.currentPageNumber)});c.$on(c.name+"-set-current-page",function(b,c){a.setCurrentPage(c)});c.$on(c.name+"-first-page",function(b){a.firstPage()});c.$on(c.name+"-last-page",function(b){a.lastPage()});c.$on(c.name+"-next-page",function(b){a.nextPage()});c.$on(c.name+"-prev-page",function(b){a.prevPage()});this.setCurrentPage=function(b){a.currentPageNumber!=b&&1<=b&&b<=a.pageList.length&&(a.currentPageNumber=b,a.updateCurrentLayout())};
this.firstPage=function(){1!=a.currentPageNumber&&(a.currentPageNumber=1,a.updateCurrentLayout())};this.lastPage=function(){a.currentPageNumber!=a.pageList.length&&(a.currentPageNumber=a.pageList.length,a.updateCurrentLayout())};this.nextPage=function(){a.currentPageNumber<a.pageList.length&&(a.currentPageNumber++,a.updateCurrentLayout())};this.prevPage=function(){1<a.currentPageNumber&&(a.currentPageNumber--,a.updateCurrentLayout())};c.$on(c.name+"-get-max-scroll-pos",function(b){p.setTempData(a.getMaxScrollPos())});
c.$on(c.name+"-get-scroll-pos",function(b){p.setTempData(a.getScrollPos())});c.$on(c.name+"-set-scroll-pos",function(b,c){a.setScrollPos(c)});c.$on(c.name+"-scroll-to",function(b,c,f){a.scrollTo(c,f)});var Da=!1;this.multiSelection=function(a){if(void 0!=a)Da=a;else return Da};this.columnSelection=function(b,d){if(b){var f=!0;a.options.selectedColumn&&(f=!g.isEqual(a.options.selectedColumn[a.options.columnFields.id],b[a.options.columnFields.id]));var l;l=angular.isDefined(c.events)&&c.events.beforeSelect?
c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});f&&!1!==l&&(a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1,a.refresh(a.options.selectedColumn)),a.options.selectedColumn=b,b[a.options.columnFields.selected]=!0,angular.isDefined(c.selectedColumn)&&(c.selectedColumn=b),a.refresh(a.options.selectedColumn),a.callAfterSelect(b))}else return a.options.selectedColumn};this.isRowSelected=function(a){return g.isSelected(a)};this.clearPrevSelection=function(b){for(var c=
0;c<a.options.selectedRows.length;c++)b&&!g.isEqual(a.options.selectedRows[c][a.options.rowFields.id],b[a.options.rowFields.id])?a.options.selectedRows[c][a.options.rowFields.selected]=!1:b||(a.options.selectedRows[c][a.options.rowFields.selected]=!1);a.options.selectedRows.length=0;b&&0!=b[a.options.rowFields.enabled]&&a.options.selectedRows.push(b);a.refreshRows()};this.markSelColumn=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b])};this.rowSelection=function(b,d,f,l,
k){if(b){if("none"!=a.options.selectionMode)if(a.isRowEnabled(b)){var r=a.rowSelection(),p=!0;r&&(p=!g.isEqual(r[a.options.rowFields.id],b[a.options.rowFields.id]));var q=!0,q=angular.isDefined(c.events)&&c.events.beforeSelect?c.events.beforeSelect({object:b}):c.beforeSelect({e:{object:b}});if(!1!==q)if(f=d||f||l?!0:!1,p){p=!0;"multi-extended"==a.options.selectionMode&&(p=!a.isObjInSelList(b)||!f);p&&("one"==a.options.selectionMode?a.clearPrevSelection():xb&&d?a.clearPrevSelection():Da||f||"multi-simple"===
a.options.selectionMode||a.clearPrevSelection());a.options.selectedRow=b;if(xb&&d&&"one"!=a.options.selectionMode){if(d=a.getRowCurrentIndex(r),k=a.getRowCurrentIndex(b),d>k&&(r=d,d=k,k=r),a.isRowIndexInRange(d)&&a.isRowIndexInRange(k))for(;d<=k;d++)a.currentList[d][a.options.rowFields.selected]=!0,a.options.selectedRows.push(a.currentList[d])}else xb&&(Da||f||"multi-simple"===a.options.selectionMode)?(d=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?!1:b[a.options.rowFields.selected],
b[a.options.rowFields.selected]=!d,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b})):(b[a.options.rowFields.selected]=!0,a.isObjInSelList(b)||a.options.selectedRows.push(b));angular.isDefined(c.selectedRow)&&(c.selectedRow=b);a.callAfterSelect(b);a.refresh(null,null,!0)}else Da||f||"multi-simple"===a.options.selectionMode?(d=null===b[a.options.rowFields.selected]||"undefined"===b[a.options.rowFields.selected]?
!1:b[a.options.rowFields.selected],k&&"undefined"!==k&&(d=k),b[a.options.rowFields.selected]=!d,b[a.options.rowFields.selected]?a.isObjInSelList(b)||a.options.selectedRows.push(b):a.options.selectedRows=a.options.selectedRows.filter(function(a){return a!=b}),a.callAfterSelect(b),a.refresh(null,null,!0)):Da||f||"multi-simple"===a.options.selectionMode||f||1!=a.options.selectedRows.length&&a.isObjInSelList(b)||a.clearPrevSelection(b)}else a.clearPrevSelection()}else return a.options.selectedRow};this.updateSelection=
function(b,c,f){b=b&&(b.shiftKey||b.ctrlKey||b.metaKey)?!0:!1;"multi-extended"==a.options.selectionMode&&0<a.options.selectedRows.length&&!f&&!Da&&!b&&(a.clearPrevSelection(),c[a.options.rowFields.selected]=!0,a.options.selectedRows.push(c),a.callAfterSelect(c),a.refresh(null,null,!0))};this.isObjInSelList=function(b){var c=!1,f=a.options.selectedRows;if(b&&f)for(var l=0;l<f.length;l++)if(g.isEqual(f[l][a.options.rowFields.id],b[a.options.rowFields.id])){c=!0;break}return c};c.$on(c.name+"-clear-selection",
function(b){a.options.selectedColumn&&(a.options.selectedColumn[a.options.columnFields.selected]=!1);a.options.selectedColumn=null;a.clearPrevSelection();a.options.selectedRow=null});c.$on(c.name+"-get-hover-column",function(b,c){a.hoverColumn?p.setTempData(a.hoverColumn):c&&p.setTempData(a.getColumnAt({x:c.x,y:c.y}))});c.$on(c.name+"-get-selected-column",function(b){p.setTempData(a.columnSelection())});c.$on(c.name+"-set-selected-column",function(b,c){a.columnSelection(c)});c.$on(c.name+"-get-selected-row",
function(b){p.setTempData(a.rowSelection())});c.$on(c.name+"-set-selected-row",function(b,c){var d=l(function(){a.rowSelection(c);l.cancel(d)},1)});c.$on(c.name+"-get-selected-rows",function(b){p.setTempData(a.options.selectedRows)});c.$on(c.name+"-set-selected-rows",function(b,c){c&&Array.isArray(c)&&l(function(){for(var b=a.options.selectedRows.length=0;b<c.length;b++)c[b][a.options.rowFields.selected]=!0,a.options.selectedRows.push(c[b]);0<c.length?(a.options.selectedRow=c[c.length-1],a.callAfterSelect(a.options.selectedRow)):
a.options.selectedRow=null;a.refresh(null,null,!0)},1)});c.$on(c.name+"-move-column",function(b,c,f){a.moveColumn(c,f)});c.$on(c.name+"-move-row",function(b,c,f,g,l){a.moveRow(c,f,g,l)});c.$watch("options",function(b,c){b!==c&&(a.updateOptions(b),a.updateLayout())},!0);c.$watch("allowCellFocus",function(b,c){b!==c&&(a.options.allowCellFocus=b)});c.$watch("allowColumnReorder",function(b,c){b!==c&&(a.options.allowColumnReorder=b)});c.$watch("allowFilter",function(b,c){b!==c&&(a.options.allowFilter=
b)});c.$watch("allowFocus",function(b,c){b!==c&&(a.options.allowFocus=b)});c.$watch("allowDrag",function(b,c){b!==c&&(a.options.allowDrag=b,a.updateView())});c.$watch("allowDrop",function(b,c){b!==c&&(a.options.allowDrop=b,a.updateView())});c.$watch("autoExpand",function(b,c){b!==c&&(a.options.autoExpand=b)});c.$watch("controlStyle",function(b,c){b!==c&&a.updateControlStyle(b)});c.$watch("displayMode",function(b,c){b!==c&&(a.options.displayMode=b,a.updateLayout())});c.$watch("editorSettings",function(b,
c){b!==c&&a.updateEditorSettings(b)});c.$watch("enabled",function(b,c){b!==c&&(a.options.enabled=b,a.updateView(),a.options.grouping.enabled&&a.updateGroupPanel(),a.options.paging.enabled&&a.options.paging.showControlPanel&&a.updatePaginationPanel(),a.callEnabledChanged(b))});c.$watch("expandingColumnIndex",function(b,c){b!==c&&(a.options.expandColIndex=b)});c.$watch("fields",function(b,c){b!==c&&(a.updateDataFields(b),a.UpdateData())});c.$watch("fillSpace",function(b,c){b!==c&&(a.options.fillSpace=
b)});c.$watch("gridLines",function(b,c){b!==c&&(a.options.gridLines=b,a.updateView())});c.$watch("grouping",function(b,c){b!==c&&(a.updateGrouping(b),a.updateLayout())},!0);c.$watch("hoverSelection",function(b,c){b!==c&&(a.options.hoverSelection=b)});c.$watch("indent",function(b,c){b!==c&&(a.options.indent=b,a.updateLayout())});c.$watch("mouseWheelSpeed",function(b,c){b!==c&&(a.options.mouseWheelSpeed=b)});c.$watch("rowHeight",function(b,c){b!==c&&(a.options.rowHeight=b,a.updateLayout())});c.$watch("rowIcon",
function(b,c){b!==c&&(a.options.rowIcon=b,a.updateLayout())});c.$watch("labelEdit",function(b,c){b!==c&&(a.options.labelEdit=b)});c.$watch("paging",function(b,c){b!==c&&(a.updatePaging(b),a.resetPageNumber(),a.updateCurrentLayout())},!0);c.$watch("pathSeparator",function(b,c){b!==c&&(a.options.pathSeparator=b)});c.$watch("rtl",function(b,c){b!==c&&(a.options.rtl=b,a.updateLayout())});a.resetSelection=function(){switch(a.options.selectionMode){case "none":a.clearPrevSelection();break;default:a.clearPrevSelection(a.rowSelection())}};
c.$watch("selectionMode",function(b,c){b!==c&&(a.options.selectionMode=b,a.resetSelection())});c.$watch("showFooter",function(b,c){b!==c&&(a.options.showFooter=b,a.updateLayout())});c.$watch("showHeader",function(b,c){b!==c&&(a.options.showHeader=b,a.updateLayout())});c.$watch("showIcons",function(b,c){b!==c&&(a.options.showIcons=b,a.updateLayout())});c.$watch("selectedRow",function(b,c){b!==c&&(c&&(c[a.options.rowFields.selected]=!1),a.options.selectedRow=b,a.callAfterSelect(b))});this.sortComparer=
this.sortColumn=null;c.$watch("sorting",function(b,c){b!==c&&(a.options.sorting=b)});c.$on(c.name+"-sort",function(b,c,f,g){a.sort(c,f,g)});this.sort=function(b,c,f){a.sortColumn=b;a.sortComparer=f;if("ascending"==c||"descending"==c||"none"==c)a.options.sorting=c;a.updateCurrentLayout();a.callChange()};this.getCellIndexInCollection=function(b,c,f){var d=-1;if(b)for(var g=0;g<b.length;g++)if(void 0==b[g][a.options.cellFields.cid]){d=c;break}else if(b[g][a.options.cellFields.cid]==f){d=g;break}return d};
this.isSortingAllowed=function(){return"ascending"==a.options.sorting||"descending"==a.options.sorting};this.applySorting=function(b){if(b&&(!a.sortColumn||0!=a.sortColumn[a.options.columnFields.visible])){var c=a.getColumnCurrentIndex(a.sortColumn),f=0<=c?c:a.options.expandColIndex;if(f<a.columnList.length){var l=a.columnList[f][a.options.columnFields.id];a.sortColumn&&a.sortColumn[a.options.columnFields.comparer]?b.sort(a.sortColumn[a.options.columnFields.comparer]):a.sortComparer?b.sort(a.sortComparer):
a.isSortingAllowed()&&b.sort(function(b,c){var d=null,k=null;if(b[a.options.rowFields.cells]){var p=a.getCellIndexInCollection(b[a.options.rowFields.cells],f,l);0<=p&&((d=b[a.options.rowFields.cells][p][a.options.cellFields.value])||(d=b[a.options.rowFields.cells][p][a.options.cellFields.text]),g.isObject(d)&&(d=d.value?d.value:d.text))}c[a.options.rowFields.cells]&&(p=a.getCellIndexInCollection(c[a.options.rowFields.cells],f,l),0<=p&&((k=c[a.options.rowFields.cells][p][a.options.cellFields.value])||
(k=c[a.options.rowFields.cells][p][a.options.cellFields.text]),g.isObject(k)&&(k=k.value?k.value:k.text)));d=void 0!=d?d:null;k=void 0!=k?k:null;switch(a.options.sorting){case "ascending":if(d<k)return-1;if(d>k)return 1;break;case "descending":if(d>k)return-1;if(d<k)return 1;break;default:return 0}})}}};var K=function(b){if(b){var c=g.isFieldAvailable(b.general,"iui-grid-column"),f;f=(f=b.header)?{content:g.isFieldAvailable(f.content,"iui-grid-column-header-cell-content"),disabled:g.isFieldAvailable(f.disabled,
"iui-grid-column-header-disabled"),normal:g.isFieldAvailable(f.normal,"iui-grid-column-header"),hovered:g.isFieldAvailable(f.hovered,"iui-grid-column-header-hovered"),selected:g.isFieldAvailable(f.selected,"iui-grid-column-header-selected")}:a.options.controlStyle.column.header;b=(b=b.footer)?{content:g.isFieldAvailable(b.content,"iui-grid-column-footer-cell-content"),disabled:g.isFieldAvailable(b.disabled,"iui-grid-column-footer-disabled"),normal:g.isFieldAvailable(b.normal,"iui-grid-column-footer"),
hovered:g.isFieldAvailable(b.hovered,"iui-grid-column-footer-hovered"),selected:g.isFieldAvailable(b.selected,"iui-grid-column-footer-selected")}:a.options.controlStyle.column.footer;return{general:c,header:f,footer:b}}return a.options.controlStyle.column};this.getExpandBoxStyle=function(b){return b?{general:g.isFieldAvailable(b.general,"iui-grid-expand-box"),animated:g.isFieldAvailable(b.animated,"iui-grid-expand-box-load"),expanded:g.isFieldAvailable(b.expanded,"iui-grid-expand-box-open"),collapsed:g.isFieldAvailable(b.collapsed,
"iui-grid-expand-box-close")}:a.options.controlStyle.row.expandBox};var Pb=function(b){if(b){var c;c=(c=b.general)?{disabled:g.isFieldAvailable(c.disabled,"iui-grid-row-disabled"),focused:g.isFieldAvailable(c.focused,"iui-grid-row-focused"),normal:g.isFieldAvailable(c.normal,"iui-grid-row"),hovered:g.isFieldAvailable(c.hovered,"iui-grid-row-hovered"),selected:g.isFieldAvailable(c.selected,"iui-grid-row-selected")}:a.options.controlStyle.row.general;var f;var l=b.checkBox;l?(f=g.isFieldAvailable(l.general,
"iui-checkbox"),l=(l=l.box)?{general:g.isFieldAvailable(l.general,"iui-checkbox-box"),disabled:g.isFieldAvailable(l.disabled,"iui-checkbox-disabled"),checked:g.isFieldAvailable(l.checked,"iui-checkbox-checked"),indeterminate:g.isFieldAvailable(l.indeterminate,"iui-checkbox-indeterminate"),unchecked:g.isFieldAvailable(l.unchecked,"iui-checkbox-unchecked")}:a.options.controlStyle.row.checkBox.box,f={general:f,box:l}):f=a.options.controlStyle.row.checkBox;var l=a.getExpandBoxStyle(b.expandBox),k;k=(k=
b.cell)?{content:g.isFieldAvailable(k.content,"iui-grid-row-cell-content"),general:g.isFieldAvailable(k.general,"iui-grid-row-cell"),disabled:g.isFieldAvailable(k.disabled,"iui-grid-row-cell-disabled"),focused:g.isFieldAvailable(k.focused,"iui-grid-row-cell-focused"),normal:g.isFieldAvailable(k.normal,"iui-grid-row-cell"),hovered:g.isFieldAvailable(k.hovered,"iui-grid-row-cell-hovered"),selected:g.isFieldAvailable(k.selected,"iui-grid-row-cell-selected")}:a.options.controlStyle.row.cell;b=(b=b.fixed)?
{disabled:g.isFieldAvailable(b.disabled,"iui-grid-row-fixed-disabled"),normal:g.isFieldAvailable(b.normal,"iui-grid-row-fixed"),hovered:g.isFieldAvailable(b.hovered,"iui-grid-row-fixed-hovered")}:a.options.controlStyle.row.fixed;return{general:c,checkBox:f,expandBox:l,cell:k,fixed:b}}return a.options.controlStyle.row},B=function(b){return b?{content:g.isFieldAvailable(b.content,"iui-grid-row-cell-content"),general:g.isFieldAvailable(b.general,"iui-grid-row-cell"),disabled:g.isFieldAvailable(b.disabled,
"iui-grid-row-cell-disabled"),focused:g.isFieldAvailable(b.focused,"iui-grid-row-cell-focused"),normal:g.isFieldAvailable(b.normal,"iui-grid-row-cell"),hovered:g.isFieldAvailable(b.hovered,"iui-grid-row-cell-hovered"),selected:g.isFieldAvailable(b.selected,"iui-grid-row-cell-selected")}:a.options.controlStyle.cell};this.updateControlStyle=function(b){a.options.controlStyle=b?{general:g.isFieldAvailable(b.general,"iui-grid"),column:K(b.column),row:Pb(b.row),cell:B(b.cell)}:{general:g.isFieldAvailable(a.defaultStyle.general,
"iui-grid"),column:K(a.defaultStyle.column),row:Pb(a.defaultStyle.row),cell:B(a.defaultStyle.cell)}};this.getCurrentColumnStyle=function(b,c,f){var d=a.options.controlStyle.column;b&&b.style&&(d=b.style);b=a.options.controlStyle.column.body;var g=d.body;switch(c){case "header":b=a.options.controlStyle.column.header;g=d.header;break;case "footer":b=a.options.controlStyle.column.footer,g=d.footer}if(f)switch(f){case "content":return g&&g.content?g.content:b.content;case "disabled":return g&&g.disabled?
g.disabled:b.disabled;case "hovered":return g&&g.hovered?g.hovered:b.hovered;case "selected":return g&&g.selected?g.selected:b.selected;default:return g&&g.normal?g.normal:b.normal}else return c?g?g:b:d?d:a.options.controlStyle.column};this.getCurrentRowStyle=function(b,c){var d=a.options.controlStyle.row;if(b)switch(b[a.options.rowFields.style]){case "initial":break;case "parent":return a.getCurrentRowStyle(a.getParent(b),c);default:null!=b.style&&(d=b.style)}if(c){if(g.isString(d.general))return d.general;
if(a.isRowFixed(b))switch(c){case "disabled":return d.fixed&&d.fixed.disabled?d.fixed.disabled:a.options.controlStyle.row.fixed.disabled;case "hovered":return d.fixed&&d.fixed.hovered?d.fixed.hovered:a.options.controlStyle.row.fixed.hovered;default:return d.fixed&&d.fixed.normal?d.fixed.normal:a.options.controlStyle.row.fixed.normal}else switch(c){case "disabled":return d.general&&d.general.disabled?d.general.disabled:a.options.controlStyle.row.general.disabled;case "focused":return d.general&&d.general.focused?
d.general.focused:a.options.controlStyle.row.general.focused;case "hovered":return d.general&&d.general.hovered?d.general.hovered:a.options.controlStyle.row.general.hovered;case "selected":return d.general&&d.general.selected?d.general.selected:a.options.controlStyle.row.general.selected;default:return d.general&&d.general.normal?d.general.normal:a.options.controlStyle.row.general.normal}}else return d?d:a.options.controlStyle.row};this.getDefaultCellContentClass=function(){return"iui-grid-row-cell-content"};
this.getDefaultCellLabelClass=function(){return"iui-grid-row-cell-label"};this.getDefaultCellBorderClass=function(){return"iui-grid-lines-both"};this.getCurrentCellStyle=function(b,c,f){var d=a.options.controlStyle.row.cell;if(c)switch(c[a.options.cellFields.style]){case "initial":break;case "parent":b&&(d=B(a.getCurrentRowStyle(b)));break;default:c.style&&(d=c.style)}if(f)switch(f){case "content":return d.content?d.content:a.options.controlStyle.cell.content;case "disabled":return d.disabled?d.disabled:
a.options.controlStyle.cell.disabled;case "focused":return d.focused?d.focused:a.options.controlStyle.cell.focused;case "hovered":return d.hovered?d.hovered:a.options.controlStyle.cell.hovered;case "selected":return d.selected?d.selected:a.options.controlStyle.cell.selected;default:return d.normal?d.normal:a.options.controlStyle.cell.normal}else return d?d:a.options.controlStyle.row.cell}}]).directive("iuiGrid",["$compile","$timeout","$interval","IntegralUIInternalService","IntegralUIDragDrop","$window",
"IntegralUIListCtrlService",function(c,f,l,k,D,g,wa){return{restrict:"EA",controller:"IntegralUIGridController",transclude:!0,replace:!0,template:'<div class="iui-grid" data-element="grid"><div class="iui-grid-block"></div></div>',scope:{allowAnimation:"=",allowCellFocus:"=",allowColumnReorder:"=",allowFilter:"=",allowFocus:"=",allowDrag:"=",allowDrop:"=",animationSpeed:"=",autoExpand:"=",columns:"=",controlStyle:"=",displayMode:"@",editorSettings:"=",enabled:"=",expandingColumnIndex:"=",fields:"=",
fillSpace:"=",gridLines:"=",grouping:"=",groups:"=",hoverSelection:"=",indent:"=",labelEdit:"=",mouseWheelSpeed:"@",name:"@",options:"=?",paging:"=?",rowHeight:"=",rowIcon:"=",rows:"=",selectedIndex:"=",selectedRow:"=",selectionMode:"@",showFooter:"=",showHeader:"=",showIcons:"=",sorting:"@",afterEdit:"&",afterLabelEdit:"&",afterSelect:"&",beforeEdit:"&",beforeLabelEdit:"&",beforeSelect:"&",cellClick:"&",cellHover:"&",cellvalueChanged:"&",cellvalueChanging:"&",change:"&",clearColumns:"&",clearGroups:"&",
clearRows:"&",columnAdded:"&",columnAdding:"&",columnClick:"&",columnDblclick:"&",columnHover:"&",columnPoschanging:"&",columnPoschanged:"&",columnRemoved:"&",columnRemoving:"&",columnRightclick:"&",columnSizechanged:"&",dragDrop:"&",dragEnter:"&",dragLeave:"&",dragOver:"&",enabledChanged:"&",events:"=?",gotFocus:"&",groupAdded:"&",groupAdding:"&",groupChange:"&",groupRemoved:"&",groupRemoving:"&",keyDown:"&",keyPress:"&",keyUp:"&",loadComplete:"&",lostFocus:"&",rowAdded:"&",rowAdding:"&",rowClick:"&",
rowDblclick:"&",rowHover:"&",rowRemoved:"&",rowRemoving:"&",rowRightclick:"&",scrollposChanged:"&",selectionChanged:"&",updateComplete:"&"},link:function(p,q,yc,a,ad){var I=this,da=q.children().eq(0),N=angular.element('<div class="iui-scrollbar-vertical"><div class="iui-scroll-button-thumb-vertical"></div></div>'),A=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),Qa=angular.element('<div class="iui-scrollbar-corner"></div>'),db=
null,Ra=null,Sa=null,Ob=!1,G=angular.element('<input type="text" class="iui-label-editor" draggable="false" />');a.labelEditStatus=function(a){if(void 0!=a)Ob=a;else return Ob};var xb=function(){var b="iui-grid-block";a.options.showStatusIcons&&(b+=" "+b+"-shift-left");a.options.rtl&&(b+=" "+b+"-rtl");return b};p.$on("$destroy",function(a){I.s2t();Ta&&(f.cancel(Ta),Ta=null);w&&(w.unbind("mouseenter mouseleave mousemove mouseup"),bd());xa&&xa.unbind("mousedown");q.unbind("click dblclick dragenter dragleave dragend drop keydown mousedown mouseleave mousemove mousewheel scroll touchstart touchmove touchend");
angular.element(g).unbind("dragenter",cd);angular.element(g).unbind("dragover",dd);angular.element(g).unbind("dragend",ed);angular.element(g).unbind("keyup",fd);angular.element(g).unbind("mousemove",gd);angular.element(g).unbind("mousedown",hd);angular.element(g).unbind("mouseup",id);G&&G.unbind("blur focus keydown mousedown");jd();y&&y.$destroy();u&&u.$destroy()});a.dragIcon=document.createElement("img");a.dragIcon.width=1;q.append(a.getDropMarkWindow());a.dropMark();var Da=function(){db&&(f.cancel(db),
db=null)};a.addDropMark=function(){var b;b=q[0];for(var c=null;b;){if(b===document.getElementsByTagName("body")[0]){c=b;break}b=b.offsetParent}if(b=c)angular.element(b).append(a.getDropMarkWindow()),a.dropMark()};a.removeDropMark=function(){a.getDropMarkWindow().remove()};a.isDropInRange=function(b){b=a.getMousePos(b);var e=q[0].getBoundingClientRect();b.x-=angular.element(g)[0].pageXOffset;b.y-=angular.element(g)[0].pageYOffset;var c=e.top+C,e=e.bottom-L;M&&A&&(e-=A[0].offsetHeight);return b.y<c||
b.y>e?!1:!0};var K=angular.element('<div style="opacity:0.75;position:absolute;z-index:999"></div>'),Pb=function(){K&&(K.remove(),K.css("top","-9999999px"),K.css("left","-9999999px"))};a.getCellElemFromRow=function(b){return b&&(b=a.getElemFromRow(b))?a.getChildElement(b,"cell"):null};a.openEditor=function(b,c){if(b)switch(b.type){case "cell":c||(c=a.getColumnById(b[a.options.cellFields.cid]));if(!c){var e=a.getCellColumnIndex(b),m=a.columnsObj.getList();m&&0<=e&&e<m.length&&(c=m[e])}if(c){var e=
a.getCellType(b,a.getColumnRealIndex(c)),m=a.getCellRowIndex(b),h=a.getCellColumnIndex(b);if(m=a.getElemFromCell(m,h,c[a.options.columnFields.fixed]))switch(e){case "checkbox":break;case "combobox":break;case "incell":a.openInCellEditor(m,b,c);break;case "dropdown":a.openDropDownEditor(m,b,c);break;default:0!=b[a.options.cellFields.allowEdit]&&Qb(null,m,0)}}}};a.closeEditor=function(b,c,n){if(b)switch(b.type){case "cell":if(c||(c=a.getColumnById(b[a.options.cellFields.cid])),c)switch(a.getCellType(b,
a.getColumnRealIndex(c))){case "incell":a.closeActiveEditor(b);break;case "dropdown":a.closeActiveEditor(b)}else a.closeActiveEditor()}else a.closeActiveEditor();n||"optimal"!=a.options.displayMode||a.updateView();d=null};var B=null,b=!1,d=null,r=null,t=angular.element('<span class="iui-edit-mark"></span>');a.openInCellEditor=function(e,h,n){b&&a.closeActiveEditor(h,!0);F();if(h&&n&&(d=h,n='<div ng-include="'+n[a.options.columnFields.editorTemplate]+'"></div>',B=angular.element('<div class="iui-incell-editor"></div>'),
B.append(c(n)(p.$parent)),0!=a.callBeforeEdit(h))){e.children().eq(0).append(B);b=!0;r="incell";mb();B.bind("mousedown",function(a){a.stopPropagation()});B.bind("mouseup",function(a){a.stopPropagation()});B.bind("click",function(a){a.stopPropagation()});B.bind("keydown",function(b){switch(b.keyCode){case 27:a.closeActiveEditor(d)}b.stopPropagation()});B.bind("keypress",function(a){a.stopPropagation()});B.bind("keyup",function(a){a.stopPropagation()});var m=f(function(){var a=k.getPadding(e[0]),b=
parseInt(getComputedStyle(e[0]).width,10)-(a.left+a.right),a=parseInt(getComputedStyle(e[0]).height,10)+2;B.css("width",b+"px");B.css("height",a+"px");B.css("top",e[0].offsetTop+"px");p.$apply();B.children&&1==B.children().length&&(b=B.children().eq(0),b.children&&1==b.children().length&&b.children().eq(0).css("height",a+"px"));f.cancel(m)},1)}};a.openDropDownEditor=function(e,h,n){b&&a.closeActiveEditor(h,!0);F();if(h&&n&&(d=h,n='<div ng-include="'+n[a.options.columnFields.editorTemplate]+'"></div>',
B=angular.element('<div class="iui-dropdown-editor"></div>'),B.append(c(n)(p.$parent)),0!=a.callBeforeEdit(h)))var m=f(function(){angular.element(nb).append(B);B.bind("mousedown",function(a){a.stopPropagation()});B.bind("mouseup",function(a){a.stopPropagation()});B.bind("click",function(a){a.stopPropagation()});b=!0;r="dropdown";var a=e[0].getBoundingClientRect(),c=angular.element(g)[0].pageXOffset,h=angular.element(g)[0].pageYOffset,n=f(function(){var b=k.getPadding(e[0]),b=parseInt(getComputedStyle(e[0]).width,
10)+(b.left+b.right),m=k.getPadding(B[0]),b=b-(m.left+m.right),m=parseInt(getComputedStyle(B[0]).width,10);b<m&&(b=m);m=a.right-(b+3)+c;B.css("top",a.bottom+h+"px");B.css("left",m+"px");B.css("width",b+"px");p.$apply();f.cancel(n)},1);f.cancel(m)},1)};a.closeActiveEditor=function(e,c){b=!1;F();B&&B.remove();r=d=null;c||a.callAfterEdit(e)};var F=function(){B&&B.unbind("click keydown keypress keyup mousedown mouseup")},wb=function(a,b){a&&(t.addClass("iui-edit-mark iui-edit-mark-"+b),a.append(t),t.css("left",
a[0].offsetLeft+a[0].offsetWidth-t[0].offsetWidth-2+"px"),t.css("top",a[0].offsetTop+(a[0].offsetHeight-t[0].offsetHeight)/2+"px"))},mb=function(){t&&("dropdown"!=r||"dropdown"==r&&!b)&&(t.removeAttr("class"),t.remove())},zc=null,cb=angular.element('<div class="iui-dropdown-mark"><span></span></div>'),gc=function(a,b){!a||ob&&!b||(a.append(cb),cb.css("top",a[0].offsetTop+"px"),cb.css("left",a[0].offsetLeft+a[0].offsetWidth-cb[0].offsetWidth+"px"),cb.css("height",getComputedStyle(a[0]).height))},Fa=
function(a){!cb||ob&&!a||cb.remove()};a.getCellType=function(b,c){var e=null,m="label";b&&(e=a.getColumnById(b[a.options.cellFields.cid]));!e&&0<=c&&c<a.columnList.length&&(e=a.columnList[c]);e&&(m=e[a.options.columnFields.editorType]);return m};var nb=k.getBodyElem(q[0]),Rb=k.getUniqueId(4),pa=null,ob=!1,Sb=0,ee=function(b,h,n){if(nb&&b.items&&0<b.items.length){b=k.getUniqueId(4);var e=c('<iui-list name="'+b+'" style="position:absolute;top:-99px;height:100px" items="data['+h+"].column."+a.options.columnFields.editorSettings+
'.items"></iui-list>')(y);angular.element(nb).append(e);wa.updateLayout(b);var x=f(function(){if(0<e.children().length){var a=e.children().eq(0);0<a.children().length&&(Sb=angular.element(a.children().eq(0))[0].offsetHeight,n&&(n.avgItemHeight=Sb))}e.remove();f.cancel(x)},1)}},pb=null,qb=function(b,h,n,m){var e=a.getCell(n,m);if(e!=zc&&(zc=e,pa&&pa.remove(),pb&&pb.$destroy(),nb)){pb=p.$new();pb.data=a.columnList[m];d=e;var Ea='<iui-list name="'+Rb+'" style="position:absolute;"',Ea=Ea+(' items="data.'+
a.options.columnFields.editorSettings+'.items"'),Ea=Ea+(' item-icon="data.'+a.options.columnFields.editorSettings+'.itemIcon"'),Ea=Ea+(' show-icons="data.'+a.options.columnFields.editorSettings+'.showIcons"'),Ea=Ea+(' checkbox-settings="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings"'),Ea=Ea+(' show-check-boxes="data.'+a.options.columnFields.editorSettings+'.checkBoxSettings.showCheckBoxes"');pa=c(Ea+(' nav-selection="false" before-select="onCellValueChanging(e, '+n+", "+m+')" after-select="onCellValueChanged(e, '+
n+", "+m+')"></iui-list>'))(pb);Sb=0;yb&&m<yb.length&&(Sb=yb[m].avgItemHeight);var Ua=f(function(){angular.element(nb).append(pa);var c=b[0].getBoundingClientRect(),m=angular.element(g)[0].pageXOffset,n=angular.element(g)[0].pageYOffset,n=c.bottom+n-1,c=c.left+m,m=b.children().eq(0),x=k.getPadding(m[0]),m=parseInt(getComputedStyle(m[0]).width,10)+(x.left+x.right),x=k.getPadding(pa[0]),m=m-(x.left+x.right);void 0!=h.dropDownWidth&&m<h.dropDownWidth&&(m=h.dropDownWidth);x=void 0!=h.dropDownHeight?h.dropDownHeight:
100;void 0!=h.maxDropDownItems&&(x=Sb*h.maxDropDownItems);pa.css("top",n+"px");pa.css("left",c+"px");pa.css("width",m+"px");pa.css("height",x+"px");pa.css("z-index","999");e&&e[a.options.cellFields.value]&&wa.selectedItem(Rb,e[a.options.cellFields.value]);wa.updateLayout(Rb);var d=f(function(){if(e&&e[a.options.cellFields.value]){wa.ensureVisible(Rb,e[a.options.cellFields.value]);var b=f(function(){wa.focus(Rb,e[a.options.cellFields.value]);f.cancel(b)},1)}f.cancel(d)},10);cb&&(Fa(!0),gc(b,!0));ob=
!0;fe();f.cancel(Ua)},1)}};a.removeDropDownList=function(a){pa&&(zc=null,pa.remove(),ob=!1,a||Fa(),pa.unbind("keydown"));pb&&pb.$destroy();d=null};var fe=function(){pa.bind("keydown",function(b){switch(b.keyCode){case 27:a.removeDropDownList(),Fa()}})},Qb=function(b,c,n){a.options.labelEdit&&(void 0===n&&(n=500),Ra=f(function(){if(Ra)var a=f(function(){hc(b,c,!0);f.cancel(a)},n);f.cancel(Ra)},n/3))},Tb=function(){Ra&&(f.cancel(Ra),Ra=null)},zb=null,Ab=null,hc=function(b,c,n){if(a.dragDropStatus())g=
G[0].value,a.labelEditStatus(!1),G.unbind("blur focus keydown mousedown"),G.remove(),Ab=zb=null;else{var e=a.getRowFromChildElem(c);if(e){var h=a.getRowCurrentIndex(e),d=a.getIndexFromElem(c),Ua=a.getCellObject(h,d),g="",g=c.children().eq(0);if(Ua)if(n){if(0!=a.callBeforeLabelEdit(Ua)){zb=e;Ab=Ua;a.labelEditStatus(!0);G.unbind("blur focus keydown mousedown");b=parseInt(getComputedStyle(c[0]).width,10)-4;n=parseInt(getComputedStyle(c[0]).height,10)-3;G.css("top",c[0].offsetTop+"px");G.css("left",c[0].offsetLeft+
"px");G.css("width",b+"px");G.css("height",n+"px");g.append(G);G[0].value=Ua[a.options.cellFields.text];G.bind("keydown",function(b){switch(b.keyCode){case 13:Ua[a.options.cellFields.text]=G[0].value?G[0].value:"null";hc(b,c,!1);break;case 27:hc(b,c,!1)}b.stopPropagation()});G.bind("focus",function(b){var c=angular.element(this);a.callGotFocus(b,zb,Ab,!0,c[0].value)});G.bind("blur",function(a){hc(a)});G.bind("mousedown",function(a){a.stopPropagation()});var l=f(function(){G[0].focus();G[0].select();
f.cancel(l)},10)}}else g=G[0].value,a.labelEditStatus(!1),G.unbind("blur focus keydown"),G.remove(),a.updateView(),a.updateFocus(h,d),a.callAfterLabelEdit(Ua),a.callLostFocus(b,e,Ua,!0,g),Ab=zb=null}else g=G[0].value,a.labelEditStatus(!1),G.unbind("blur focus keydown mousedown"),G.remove(),a.callAfterLabelEdit(),a.updateView(),a.callLostFocus(b,zb,Ab,!0,g),Ab=zb=null}},kd=function(b){var c="",e=a.defaultStyle.row.expandBox.general;b[a.options.rowFields.style]&&b[a.options.rowFields.style].expandBox&&
b[a.options.rowFields.style].expandBox.general!=e?e+=" "+b[a.options.rowFields.style].expandBox.general:a.options.controlStyle.row.expandBox.general!=e&&(e+=" "+a.options.controlStyle.row.expandBox.general);var m=a.getCurrentRowStyle(b),m=a.getExpandBoxStyle(m.expandBox);if(a.isThereChildRows||b&&b[a.options.rowFields.hasChildren])c=e;e=b[a.options.rowFields.hasChildren]&&(a.isThereVisibleChildren(b)||!b[a.options.rowFields.rows]||b[a.options.rowFields.rows]&&0==b[a.options.rowFields.rows].length);
b&&!a.isRowFixed(b)&&(e||a.isThereVisibleChildren(b))&&(c=b[a.options.rowFields.hasChildren]&&void 0===b[a.options.rowFields.expanded]?c+(" "+m.expanded):!1!==b[a.options.rowFields.expanded]?c+(" "+m.collapsed):c+(" "+m.expanded),!0===a.options.rtl&&(c+="-rtl"),a.options.enabled&&a.isRowEnabled(b)||(c+="-disabled"));return c};q.bind("mousemove",function(b){if(a.options.enabled&&0===b.button&&aa&&z){a.getColumnCurrentIndex(z);var c=a.getMousePos(b),e=c.y+16,c=c.x+20;ea.empty();ea.append("<span>"+z[a.options.columnFields.headerText]+
"</span>");ea.css("top",e+"px");ea.css("left",c+"px");ea.css("display","block");ld();b.stopPropagation()}});var od=function(){for(var b=0,c="none";3>b;){if((c=a.getRowElems(c))&&0<c.length)for(var n=0;n<c.length;n++){var m=angular.element(c[n]);md(m);for(var m=m.find("td"),x=0;x<m.length;x++){var d=angular.element(m[x]),f=a.getElement(d,"expandbox");f&&f.unbind("click touchend");nd(d)}}b++;c=1==b?"left":"right"}},jd=function(){F();for(var b=0,c="none";3>b;){var n=a.getRowElems(c);if(n&&0<n.length)for(var m=
0;m<n.length;m++){var x=angular.element(n[m]);md(x);for(var x=x.find("td"),d=0;d<x.length;d++){var f=angular.element(x[d]),g=a.getElement(f,"expandbox");g&&g.unbind("click touchend");nd(f)}}n=c;for(m=0;2>m;){rowFixed=0==m?"top":"bottom";if((x=a.getRowElems(n,rowFixed))&&0<x.length)for(d=0;d<x.length;d++)for((f=angular.element(x[d]))&&f.unbind("mousedown mouseenter mouseleave"),f=f.find("td"),g=0;g<f.length;g++){var l=angular.element(f[g]);l&&l.unbind("click dblclick mouseenter mouseleave mousedown mouseup touchstart")}m++}if((n=
a.getHeaderElem(c))&&0<n.length)for(m=0;m<n.length;m++)for(x=angular.element(n[m]),x=x.find("td"),d=0;d<x.length;d++)(f=angular.element(x[d]))&&(c=a.getChildElement(f,"column-header-cell"))&&(c=a.getContentElement(c,"filter-button"))&&c.unbind("mousedown");b++;c=1==b?"left":"right"}},le=function(){od();for(var b=0,c="none";3>b;){var n=a.getRowElems(c);if(n&&0<n.length)for(var m,x=n.length-1,d=0;d<=x;d++){m=angular.element(n[d]);ge(m);for(var f=m.find("td"),g=0;g<f.length;g++){var l=angular.element(f[g]);
he(a.getElement(l,"expandbox"));ie(l,a.getRowFromElem(m),g)}}for(n=0;2>n;){rowFixed=0==n?"top":"bottom";if((m=a.getRowElems(c,rowFixed))&&0<m.length)for(d=0;d<m.length;d++)for(x=angular.element(m[d]),je(x),f=x.find("td"),g=0;g<f.length;g++)l=angular.element(f[g]),ke(l,a.getRowFromElem(x),g);n++}b++;c=1==b?"left":"right"}},aa=!1,z=null,rb=-1,ic=function(b,c){if(b){var e=a.getColumnCurrentIndex(b),m=a.getColumnWidth(b);return a.isColumnWithFixedWidth(e)||10<c.x&&c.x<m-10}return!1},Cc=function(b){b=
b.find("td");for(var c=0;c<b.length;c++)currentElem=angular.element(b[c]),currentElem.bind("click",function(b){if(a.options.enabled&&1===b.which){var c=k.getClientMousePos(b,this),e=a.getColumnFromElem(this);e&&ic(e,c)&&a.callColumnClick(e,a.getMousePos(b))}b.stopPropagation()}),currentElem.bind("dblclick",function(b){b.preventDefault();if(a.options.enabled&&1===b.which){var c=k.getClientMousePos(b,this),e=a.getColumnFromElem(this);e&&ic(e,c)&&a.callColumnDblClick(e,a.getMousePos(b))}b.stopPropagation()}),
currentElem.bind("mouseenter",function(b){if(a.options.enabled&&!W&&!ka){var c=a.getColumnFromElem(this);c&&(a.hoverColumn=c,a.refresh(c),a.callColumnHover(c));if(1===b.which&&aa&&z&&a.hoverColumn&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&qa&&(qa.remove(),a.hoverColumn!=z)){var e=angular.element(this);e.append(qa);b=parseInt(getComputedStyle(e[0]).height,10);c=parseInt(getComputedStyle(qa[0]).height,10);e=k.getPadding(e[0]);qa.css("top",(b+e.top+e.bottom-c)/2+"px")}}}),currentElem.bind("mouseleave",
function(b){!a.options.enabled||W||ka||(a.hoverColumn=null,(b=a.getColumnFromElem(this))&&a.refresh(b),qa&&qa.remove(),W||q.css("cursor","default"))}),currentElem.bind("mousemove",function(b){if(a.options.enabled){var c=angular.element(this);if(1===b.which&&aa&&z&&a.hoverColumn&&a.hoverColumn!=z&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&z[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed])c=parseInt(getComputedStyle(c[0]).width,10),qa.empty(),rb=-1,b.offsetX>c/2?
(rb=2,qa.append('<span class="iui-grid-column-reorder-mark-right"></span>'),qa.css("left","auto"),qa.css("right","0")):(rb=1,qa.append('<span class="iui-grid-column-reorder-mark-left"></span>'),qa.css("left","0"),qa.css("right","auto"));else{b=k.getClientMousePos(b,this);var c=parseInt(a.getIndexFromElem(this),10),e=a.getColumnWidth(a.columnList[c]),h=10;a.isFilteringAllowed(a.columnList[c])&&(h=0);10>b.x&&!a.isColumnWithFixedWidth(c-1)&&pd(c,"left")?(q.css("cursor","ew-resize"),Va="left"):b.x>e-
h&&!a.isColumnWithFixedWidth(c)&&pd(c,"right")?(q.css("cursor","ew-resize"),Va="right"):W||(q.css("cursor","default"),Va="none")}}}),currentElem.bind("mouseup",function(b){if(a.options.enabled){if(1===b.which&&aa&&z&&a.hoverColumn&&a.hoverColumn!=z&&0!=a.hoverColumn[a.options.columnFields.allowDrop]&&z[a.options.columnFields.fixed]==a.hoverColumn[a.options.columnFields.fixed]&&0!=a.callColumnPosChanging(z,a.hoverColumn)){b=a.columnList[0];0<=a.options.expandColIndex&&a.options.expandColIndex<a.columnList.length&&
(b=a.columnList[a.options.expandColIndex]);var c=a.getColumnCurrentIndex(z),c=a.getColumnRealIndex(c),e=a.getColumnCurrentIndex(a.hoverColumn),e=a.getColumnRealIndex(e);c!=e&&(c<e?1==rb&&e--:c>e&&2==rb&&e++,a.columnsObj.moveObject(c,e),a.updateColumnList(),b=a.getColumnCurrentIndex(b),b!=a.options.expandColIndex&&(a.options.expandColIndex=b),a.updateLayout(),a.callColumnPosChanged(z,a.hoverColumn))}z=null;rb=-1;W=aa=!1;q.css("cursor","default")}}),currentElem.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();
a.closeFilterWindow();a.closeEditor();k.getClientMousePos(b,this);var c=parseInt(a.getIndexFromElem(this),10);if(0===b.button&&!W){var e=c,h="none";0<=c&&c<a.columnList.length&&(h=a.columnList[c][a.options.columnFields.fixed]);switch(Va){case "left":"right"==h?e=c:(c=Ac(e-1,h))?(e=a.getColumnCurrentIndex(c),0<=e&&e<a.columnList.length&&(a.columnList[e][a.options.columnFields.fixed]!=h?(e=-1,W=!1):W=!0)):W=!1;0<=e&&(W=!0);break;case "right":"right"==h?(c=Bc(e+1,h))?(e=a.getColumnCurrentIndex(c),0<=
e&&e<a.columnList.length&&(a.columnList[e][a.options.columnFields.fixed]!=h?(e=-1,W=!1):W=!0)):W=!1:(e=c,W=!0)}!a.isColumnWithFixedWidth(e)&&W?a.setColumnResizingParams(e,Va,a.getMousePos(b).x):W=!1}if(!W&&(e=a.getColumnFromChildElem(this)))switch(h=k.getClientMousePos(b,this),ic(e,h)&&a.columnSelection(e),b.which){case 1:a.options.allowColumnReorder&&0!=e[a.options.columnFields.allowDrag]&&0==aa&&0!=e[a.options.columnFields.allowGrouping]&&(z=e,a.getMousePos(b),aa=!0,(e=k.getBodyElem(q[0]))&&angular.element(e).append(ea));
break;case 3:ic(e,h)&&a.callColumnRightClick(e,a.getMousePos(b))}}b.stopPropagation()}),function(b){b&&(b=a.getChildElement(b,"column-header-cell"))&&(b=a.getContentElement(b,"filter-button"))&&b.bind("mousedown",function(a){1==a.which&&me(this);a.stopPropagation()})}(currentElem)},xa=null,me=function(b){a.closeFilterWindow();var e=a.getColumnFromChildElem(b);if(e){var n=angular.element(b),m=n.parent().parent();if(nb){b='<div ng-include="'+e[a.options.columnFields.filterTemplate]+'"></div>';xa=angular.element('<div class="iui-filter-window"></div>');
xa.append(c(b)(p.$parent));var x=f(function(){angular.element(nb).append(xa);xa.bind("mousedown",function(a){a.stopPropagation()});n[0].getBoundingClientRect();var b=m[0].getBoundingClientRect(),c=angular.element(g)[0].pageXOffset,h=angular.element(g)[0].pageYOffset,d=f(function(){var m=b.bottom+h,n=b.right-(parseInt(getComputedStyle(xa[0]).width,10)+3)+c;e[a.options.columnFields.filterParams]&&"left"==e[a.options.columnFields.filterParams].templateAlignment&&(n=b.left+c);xa.css("top",m+"px");xa.css("left",
n+"px");f.cancel(d)},1);f.cancel(x)},1)}}};a.closeFilterWindow=function(){xa&&(xa.unbind("mousedown"),xa.remove())};var md=function(a){a&&a.unbind("blur dragover dragend focus keydown keyup keypress mousedown mouseenter mouseleave")},ge=function(b){b&&(b.bind("dragover",function(b){var c=a.getRowFromElem(this);if(c&&a.isRowEnabled(c)){if(a.isScrollBarVisible("vertical")){var c=a.getMousePos(b),e=q[0].getBoundingClientRect();c.x-=angular.element(g)[0].pageXOffset;c.y-=angular.element(g)[0].pageYOffset;
var h=e.top+C+25,e=e.bottom-L-25;M&&A&&(e-=A[0].offsetHeight);c.y<h?jc(!1):c.y>e?jc(!0):Bb()}else Bb();b.stopPropagation()}}),b.bind("dragend",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&(b.preventDefault(),a.dragDropStatus(!1),a.dropMark(),D.getData().source||D.clearData())}),b.bind("mouseenter",function(b){if(!ka){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&!aa&&(a.hoverRow=c,a.refresh(c),a.callRowHover(b,c),a.options.hoverSelection&&(Sa=f(function(){Sa&&a.rowSelection(c,
b.shiftKey,b.ctrlKey,b.metaKey)},500)))}}),b.bind("mouseleave",function(b){ka||(a.hoverRow=null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refresh(b),Sa&&(f.cancel(Sa),Sa=null))}),b.bind("keydown",function(b){var c=a.getRowFromElem(this);if(c&&a.isRowEnabled(c)){var e=!0;a.callKeyDown(b,c);var h=a.getRowCurrentIndex(c);switch(b.keyCode){case 9:qd(b,c,h);break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:e=!1;break;case 33:rd(b,h);break;
case 34:sd(b,h);break;case 35:td(b,h);break;case 36:ud(b,h);break;case 37:vd(b,c,h);break;case 32:wd(b,c);break;case 38:Dc(b,h);break;case 39:xd(b,c,h);break;case 40:Ec(b,h);break;default:(b.ctrlKey||b.metaKey)&&a.updateSelectionStatus("ctrl"),b.shiftKey&&a.updateSelectionStatus("shift")}e&&b.stopPropagation()}}),b.bind("keyup",function(b){var c=a.getRowFromElem(this);if(c&&a.isRowEnabled(c)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||
b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,c)}}),b.bind("keypress",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&a.callKeyPress(b,c)}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}),b.bind("focus",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)?a.callGotFocus(b,c):a.updateFocus()}),b.bind("blur",function(b){var c=a.getRowFromElem(this);c&&a.isRowEnabled(c)&&a.callLostFocus(b,c)}))},he=
function(b){b&&(b.bind("click",function(b){var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(a.toggle(c),a.updateFocus(a.getRowCurrentIndex(c),a.options.expandColIndex),b.stopPropagation())}),b.bind("touchend",function(b){b.preventDefault();var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(a.toggle(c),a.updateFocus(a.getRowCurrentIndex(c),a.options.expandColIndex),b.stopPropagation())}))},kc={x:0,y:0},Cb={x:0,y:0},Db=!1,Fc=!1,Wa=null,yd=function(){return{x:angular.element(g)[0].pageXOffset,
y:angular.element(g)[0].pageYOffset}},Eb=function(a){var b=yd();return{x:a.x-b.x,y:a.y-b.y}},ie=function(c,h,n){c&&(c.bind("dragstart",function(b){if(a.labelEditStatus())b.preventDefault();else{document.activeElement&&document.activeElement.blur();D.clearData();var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c))if(Tb(),a.isDragAllowed(c)){a.dragDropStatus(!0);a.addDropMark();b.dataTransfer?(b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text",c[a.options.rowFields.id]?c[a.options.rowFields.id].toString():
"")):b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.effectAllowed="move",b.originalEvent.dataTransfer.setData("text",c[a.options.rowFields.id]?c[a.options.rowFields.id].toString():""));b={source:c,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":b.source=a.options.selectedRows;break;case "multi-extended":b.source=a.options.selectedRows}D.setData(b)}else b.dataTransfer?b.dataTransfer.effectAllowed="none":b.originalEvent&&b.originalEvent.dataTransfer&&
(b.originalEvent.dataTransfer.effectAllowed="none")}}),c.bind("dragover",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var e=angular.element(this);b.preventDefault();var m=!0;b.dataTransfer?m="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(m="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(m&&(c=a.getRowFromChildElem(e))){var m=e[0].getBoundingClientRect(),h=angular.element(g)[0].pageXOffset,n=angular.element(g)[0].pageYOffset,
d=a.getMousePos(b);d.x-=m.left+h;d.y-=m.top+n;e=D.getDropPos(d,{x:0,y:0,width:e[0].offsetWidth,height:e[0].offsetHeight},!0);h=D.getData();m=a.isDropAllowed(h.source,c,e);n={event:b,sourceCtrl:h.sourceCtrl?h.sourceCtrl.getGridName():"",dragRow:h.source,targetCtrl:a.getGridName(),targetRow:c,isDropAllowed:m,dropPos:e,mousePos:a.getMousePos(b)};n=a.callDragOver(n);if(m&&!1!==n){n=a.getMousePos(b);b=n.y+16;n=n.x+20;d=a.getDropMarkWindow();d.empty();var f="";switch(e){case 1:f="iui-drop-marker-move-up";
break;case 2:f="iui-drop-marker-move-down"}d.append("<span class='"+f+"'></span><span class='iui-drop-marker-title'>"+c[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:n});a.dropMark(m);D.setData({source:h.source,sourceList:h.sourceList,target:c,dropPos:e})}else b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&(b.originalEvent.dataTransfer.dropEffect="none"),a.dropMark()}}}),c.bind("drop",function(b){var c=a.getRowFromChildElem(this);
if(c&&a.isRowEnabled(c)){var e=angular.element(this);b.preventDefault();Da();a.dropMark();c=!0;b.dataTransfer?c="none"===b.dataTransfer.effectAllowed?!1:!0:b.originalEvent&&b.originalEvent.dataTransfer&&(c="none"===b.originalEvent.dataTransfer.effectAllowed?!1:!0);if(c){var m=a.getRowFromChildElem(e);if(m){var e=D.getData(),h=e.source;h||(h=a.getDnDSource(b));if(c=a.isDropAllowed(h,m,e.dropPos))a.toggle(m,!0),h&&(c={event:b,sourceCtrl:e.sourceCtrl?e.sourceCtrl.getGridName():"",dragRow:h,targetCtrl:a.getGridName(),
targetRow:m,isDropAllowed:c,dropPos:e.dropPos,mousePos:a.getMousePos(b)},!1!==a.callDragDrop(c)&&(a.drop(e),p.$$phase||p.$apply()))}}D.clearData();b.stopPropagation()}}),c.bind("dragenter",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){b.preventDefault();if(a.options.autoExpand)var e=f(function(){db||(db=f(function(){db&&a.toggle(c,!0)},750));f.cancel(e)},1);var m=D.getData();m.source||(m.source=a.getDnDSource(b));m={event:b,sourceCtrl:m.sourceCtrl?m.sourceCtrl.getGridName():
"",dragRow:m.source,targetCtrl:a.getGridName(),targetRow:m.target,mousePos:a.getMousePos(b)};a.callDragEnter(m);b.stopPropagation()}}),c.bind("dragleave",function(b){a.hoverRow=null;var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(b.preventDefault(),Da(),c=D.getData(),c.source||(c.source=a.getDnDSource(b)),c={event:b,sourceCtrl:c.sourceCtrl?c.sourceCtrl.getGridName():"",dragRow:c.source,targetCtrl:a.getGridName(),targetRow:c.target,mousePos:a.getMousePos(b)},a.callDragLeave(c),b.stopPropagation())}),
c.bind("touchstart",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)&&(c.preventDefault(),(e=a.getTouchData(c))&&0<e.length)){Fc=!0;var m=f(function(){Fc=!1;f.cancel(m)},750);kc=Eb({x:e[0].pageX,y:e[0].pageY});a.closeFilterWindow();e=kc;if((e=a.getRowAt(e.x,e.y))&&a.isRowEnabled(e)){var h=angular.element(this);a.mouseButtonStatus(!0);Wa=e;var n=a.getRowCurrentIndex(e),g=parseInt(a.getIndexFromElem(this),10),l=a.getCell(n,g),k=a.getCellType(l,g),p=null,q=a.options.editorSettings;
h[0].focus();a.updateFocus(n,g);l&&(p=a.getColumnById(l[a.options.cellFields.cid]));!p&&0<=g&&g<a.columnList.length&&(p=a.columnList[g]);var r="click"==a.options.editorSettings.activate;p&&p[a.options.columnFields.editorSettings]&&(q=p[a.options.columnFields.editorSettings],r=void 0!=q.activate?"click"==q.activate:r);l&&l!=d?a.closeEditor(d):a.closeEditor();switch(k){case "checkbox":break;case "combobox":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);l&&0!=l[a.options.cellFields.allowEdit]&&p&&
r?qb(angular.element(this),q,n,g):a.removeDropDownList();break;case "incell":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);!b&&l&&0!=l[a.options.cellFields.allowEdit]&&r&&a.openInCellEditor(h,l,p);break;case "dropdown":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);!b&&l&&0!=l[a.options.cellFields.allowEdit]&&r&&a.openDropDownEditor(h,l,p);break;default:a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey),a.removeDropDownList(),l&&0!=l[a.options.cellFields.allowEdit]&&r&&Qb(c,angular.element(this))}}}}),
c.bind("touchmove",function(b){var c,e,m=a.getRowFromChildElem(this);if(m&&a.isRowEnabled(m)&&(m=a.getTouchData(b))&&0<m.length){Cb=Eb({x:m[0].pageX,y:m[0].pageY});var m=Math.abs(Cb.x-kc.x),h=Math.abs(Cb.y-kc.y),n=q[0].getBoundingClientRect();if(D.hitTest(Cb.x,Cb.y,n)){if(b.preventDefault(),K&&K.css("display","block"),!Fc)if(!Db&&(2<m||2<h)&&Wa&&a.isRowEnabled(Wa))if(angular.element(this),a.labelEditStatus())b.preventDefault();else{Db=!0;D.clearData();if((m=a.getTouchData(b))&&0<m.length&&(Eb({x:m[0].pageX,
y:m[0].pageY}),Wa&&a.isRowEnabled(Wa)&&(Tb(),a.isDragAllowed(Wa)))){a.dragDropStatus(!0);a.addDropMark();m={source:Wa,sourceCtrl:a,sourceCollection:a.rowsObj};switch(a.options.selectionMode){case "multi-simple":m.source=a.options.selectedRows;break;case "multi-extended":m.source=a.options.selectedRows}D.setData(m);if(m=a.getCellElemFromRow(Wa))if(m=a.getContentElement(m))K.empty(),K.append(m.clone()),K.css("display","none"),q.append(K)}b.stopPropagation()}else if(Db&&(angular.element(this),b.preventDefault(),
(h=a.getTouchData(b))&&0<h.length)){var m=yd(),d=Eb({x:h[0].pageX,y:h[0].pageY});if(h=a.getRowAt(d.x,d.y)){var f=a.getCellElemFromRow(h);if(f){var n=f[0].getBoundingClientRect(),f=D.getDropPos({x:d.x-n.left,y:d.y-n.top},{x:0,y:0,width:f[0].offsetWidth,height:f[0].offsetHeight},!0),n=D.getData(),g=a.isDropAllowed(n.source,h,f);b={event:b,sourceCtrl:n.sourceCtrl?n.sourceCtrl.getGridName():"",dragRow:n.source,targetCtrl:a.getGridName(),targetRow:h,isDropAllowed:g,dropPos:f,mousePos:d};e=q[0].getBoundingClientRect();
c=d.x-e.left;e=d.y-e.top;K.css("top",e-16+"px");K.css("left",c+"px");K.css("display","block");b=a.callDragOver(b);if(g&&0!=b){b=d.y+m.y+16;m=d.x+m.x+20;d=a.getDropMarkWindow();d.empty();c="iui-drop-marker-move-in";switch(f){case 1:c="iui-drop-marker-move-up";break;case 2:c="iui-drop-marker-move-down"}d.append("<span class='"+c+"'></span><span class='iui-drop-marker-title'>"+h[a.options.rowFields.text]+"</span>");a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:m});a.dropMark(g);D.setData({source:n.source,
sourceList:n.sourceList,target:h,dropPos:f})}else a.dropMark(),K&&K.css("display","none")}}else n=q[0].getBoundingClientRect(),h=n.top+C,n=n.bottom-L,M&&A&&(n-=A[0].offsetHeight),!a.options.allowDrop||d.y<h||d.y>n?(a.dropMark(),K&&K.css("display","none")):(e=q[0].getBoundingClientRect(),c=d.x-e.left,e=d.y-e.top,K.css("top",e-16+"px"),K.css("left",c+"px"),K.css("display","block"),h=D.getData(),n={source:h.source,sourceCtrl:h.sourceCtrl,target:null,dropPos:-1},D.setData(n),b={event:b,sourceCtrl:h.sourceCtrl?
h.sourceCtrl.getGridName():"",dragRow:h.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,dropPos:-1,mousePos:d},b=a.callDragOver(b),0==b?a.dropMark():(b=d.y+m.y+16,m=d.x+m.x+20,d=a.getDropMarkWindow(),d.empty(),d.append("<span class='iui-drop-marker-move-end'></span><span class='iui-drop-marker-title'>"+(p.name?p.name:"Grid")+"</span>"),a.updateDropMarkElem(a.getDropMarkWindow(),{top:b,left:m}),a.dropMark(!0)))}}else b.preventDefault(),a.dropMark(),a.cancelScrollTimer(),
K&&K.css("display","none")}}),c.bind("touchend",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){if((c=a.getTouchData(b))&&0<c.length){var c=Eb({x:c[0].pageX,y:c[0].pageY}),e=q[0].getBoundingClientRect();if(D.hitTest(c.x,c.y,e))if(Db){angular.element(this);b.preventDefault();Da();a.dropMark();Pb();if((c=a.getTouchData(b))&&0<c.length){var c=Eb({x:c[0].pageX,y:c[0].pageY}),m=a.getRowAt(c.x,c.y);if(m){var e=D.getData(),h=e.source,n=a.isDropAllowed(h,m,e.dropPos);n&&(a.toggle(m,
!0),h&&(c={event:b,sourceCtrl:e.sourceCtrl?e.sourceCtrl.getGridName():"",dragRow:h,targetCtrl:a.getGridName(),targetRow:m,isDropAllowed:n,dropPos:e.dropPos,mousePos:c},c=a.callDragDrop(c),!1!==c&&(a.drop(e),p.$$phase||p.$apply())))}else a.dropMark(),m=q[0].getBoundingClientRect(),e=m.top+C,m=m.bottom-L,M&&A&&(m-=A[0].offsetHeight),c.y>=e&&c.y<=m&&(e=D.getData(),e.source&&(c={event:b,sourceCtrl:e.sourceCtrl?e.sourceCtrl.getGridName():"",dragRow:e.source,targetCtrl:a.getGridName(),targetRow:null,isDropAllowed:a.options.allowDrop,
dropPos:-1,mousePos:c},c=a.callDragDrop(c),!1!==c&&(a.drop(e),p.$$phase||p.$apply())))}D.clearData();a.dragDropStatus(!1);b.stopPropagation()}else a.mouseButtonStatus(!1),(c=a.getRowFromChildElem(this))&&a.isRowEnabled(c)&&a.updateSelection(b,c,b.shiftKey),Tb()}c=Db;a.removeDropMark();Pb();Cb={x:0,y:0};Db=!1;Wa=null;c&&b.stopPropagation()}}),c.bind("dblclick",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var m=angular.element(this);c.preventDefault();if(1===c.which){var h=
a.getRowCurrentIndex(e),n=parseInt(a.getIndexFromElem(this),10),d=a.getCell(h,n),f=a.getCellType(d,n),g=null,l=a.options.editorSettings;d&&(g=a.getColumnById(d[a.options.cellFields.cid]));!g&&0<=n&&n<a.columnList.length&&(g=a.columnList[n]);var k="dblclick"==a.options.editorSettings.activate;g&&g[a.options.columnFields.editorSettings]&&(l=g[a.options.columnFields.editorSettings],k=void 0!=l.activate?"dblclick"==l.activate:k);switch(f){case "checkbox":break;case "combobox":d&&0!=d[a.options.cellFields.allowEdit]&&
g&&k?qb(angular.element(this),l,h,n):a.removeDropDownList();break;case "incell":!b&&d&&0!=d[a.options.cellFields.allowEdit]&&k&&a.openInCellEditor(m,d,g);break;case "dropdown":!b&&d&&0!=d[a.options.cellFields.allowEdit]&&k&&a.openDropDownEditor(m,d,g);break;default:a.removeDropDownList(),d&&0!=d[a.options.cellFields.allowEdit]&&k&&Qb(c,angular.element(this),0)}0!=a.callRowDblClick(e,a.getMousePos(c))&&"checkbox"!=f&&"checkbox"!=f&&d&&!k&&(a.toggle(e),a.updateFocus(h,n))}c.stopPropagation()}}),c.bind("mouseenter",
function(c){if(!ka){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)&&!aa){var m=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10);if(m=a.getCell(m,h))if(a.hoverCell=m,a.refresh(e),a.callCellHover(c,m),c=angular.element(this),m&&0!=m[a.options.cellFields.allowEdit])switch(h=a.getCellType(m,h),h){case "combobox":ob||gc(c);break;case "incell":b&&m==d||wb(c,h);break;case "dropdown":b&&m!=d||wb(c,h);break;default:Fa(),mb()}else Fa()}}}),c.bind("mouseleave",function(b){if(!ka&&(a.hoverCell=
null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);var c=parseInt(a.getIndexFromElem(this),10);a.getCell(b,c)&&(Fa(),mb())}}),c.bind("keydown",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var h=!0,m=angular.element(this);a.callKeyDown(c,e);var n=a.getRowCurrentIndex(e),d=parseInt(a.getIndexFromElem(this),10),f=a.getCell(n,d),g=a.getCellType(f,d),l=a.getColumnById(f[a.options.cellFields.cid]);!l&&0<=d&&d<a.columnList.length&&(l=a.columnList[d]);
switch(c.keyCode){case 9:qd(c,e,n,d);break;case 13:switch(g){case "checkbox":zd(f,d);break;case "combobox":f&&0!=f[a.options.cellFields.allowEdit]?l&&qb(angular.element(this),l[a.options.columnFields.editorSettings],n,d):a.removeDropDownList();break;case "incell":!b&&f&&0!=f[a.options.cellFields.allowEdit]&&a.openInCellEditor(m,f,l);break;case "dropdown":!b&&f&&0!=f[a.options.cellFields.allowEdit]&&a.openDropDownEditor(m,f,l);break;default:f&&0!=f[a.options.cellFields.allowEdit]&&Qb(c,angular.element(this),
0)}break;case 16:a.updateSelectionStatus("shift");break;case 17:a.updateSelectionStatus("ctrl");break;case 27:h=!1;break;case 33:rd(c,n,d);break;case 34:sd(c,n,d);break;case 35:td(c,n,d);break;case 36:ud(c,n,d);break;case 37:vd(c,e,n,d);break;case 32:wd(c,e,f,d);break;case 38:Dc(c,n,d);break;case 39:xd(c,e,n,d);break;case 40:Ec(c,n,d);break;default:(c.ctrlKey||c.metaKey)&&a.updateSelectionStatus("ctrl"),c.shiftKey&&a.updateSelectionStatus("shift")}h&&c.stopPropagation()}}),c.bind("keyup",function(b){var c=
a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){switch(b.keyCode){case 16:a.multiSelection(!1);break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}a.callKeyUp(b,c);b.stopPropagation()}}),c.bind("keypress",function(b){var c=a.getRowFromChildElem(this);c&&a.isRowEnabled(c)&&(a.callKeyPress(b,c),b.stopPropagation())}),c.bind("click",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){if(1===b.which){var e=
a.getRowCurrentIndex(c),h=parseInt(a.getIndexFromElem(this),10),e=a.getCell(e,h);a.callCellClick(b,c,e,a.getMousePos(b));a.callRowClick(b,c,a.getMousePos(b))}b.stopPropagation()}}),c.bind("mousedown",function(c){a.closeFilterWindow();var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var h=angular.element(this);a.mouseButtonStatus(!0);switch(c.which){case 1:var m=a.getRowCurrentIndex(e),n=parseInt(a.getIndexFromElem(this),10),f=a.getCell(m,n),g=a.getCellType(f,n),l=null,k=a.options.editorSettings;
f&&(l=a.getColumnById(f[a.options.cellFields.cid]));!l&&0<=n&&n<a.columnList.length&&(l=a.columnList[n]);var p="click"==a.options.editorSettings.activate;l&&l[a.options.columnFields.editorSettings]&&(k=l[a.options.columnFields.editorSettings],p=void 0!=k.activate?"click"==k.activate:p);f&&f!=d?a.closeEditor(d):a.closeEditor();switch(g){case "checkbox":break;case "combobox":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);f&&0!=f[a.options.cellFields.allowEdit]&&l&&p?qb(angular.element(this),k,m,n):
a.removeDropDownList();break;case "dropdown":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);!b&&f&&0!=f[a.options.cellFields.allowEdit]&&p&&a.openDropDownEditor(h,f,l);break;case "incell":a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey);!b&&f&&0!=f[a.options.cellFields.allowEdit]&&p&&a.openInCellEditor(h,f,l);break;default:if("image"==g?0!=k.allowSelection:1)a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey),a.removeDropDownList(),f&&0!=f[a.options.cellFields.allowEdit]&&p&&Qb(c,angular.element(this))}break;
case 3:a.rowSelection(e,c.shiftKey,c.ctrlKey,c.metaKey),a.callRowRightClick(e,a.getMousePos(c))}c.stopPropagation()}}),c.bind("mouseup",function(b){a.mouseButtonStatus(!1);if(1==b.which){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var e=a.getRowCurrentIndex(c),h=parseInt(a.getIndexFromElem(this),10),e=a.getCell(e,h),n=a.getCellType(e,h),m=null,d=a.options.editorSettings;e&&(m=a.getColumnById(e[a.options.cellFields.cid]));!m&&0<=h&&h<a.columnList.length&&(m=a.columnList[h]);m&&m[a.options.columnFields.editorSettings]&&
(d=m[a.options.columnFields.editorSettings]);("image"==n?0!=d.allowSelection:1)&&a.updateSelection(b,c,b.shiftKey)}Tb()}}),c.bind("focus",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var h=a.getRowCurrentIndex(e),n=parseInt(a.getIndexFromElem(this),10),h=a.getCell(h,n);a.callGotFocus(c,e,h);if(h&&0!=h[a.options.cellFields.allowEdit])switch(c=angular.element(this),n=a.getCellType(h,n),n){case "combobox":ob||gc(c);break;case "incell":b||wb(c,n);break;case "dropdown":b||wb(c,
n);break;default:Fa()}else Fa()}}),c.bind("blur",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){var e=a.getRowCurrentIndex(c),h=parseInt(a.getIndexFromElem(this),10),e=a.getCell(e,h);a.callLostFocus(b,c,e)}}))},nd=function(a){a&&a.unbind("blur click dragstart dragover drop dragenter dragleave dblclick focus keydown keypress keyup mouseenter mouseleave mousemove mousedown mouseup touchstart touchmove touchend")},je=function(b){b&&(b.bind("mouseenter",function(b){if(!ka){var c=
a.getRowFromElem(this);c&&a.isRowEnabled(c)&&!aa&&(a.hoverRow=c,a.refreshHover(c),a.callRowHover(b,c))}}),b.bind("mouseleave",function(b){ka||(a.hoverRow=null,(b=a.getRowFromElem(this))&&a.isRowEnabled(b)&&a.refreshHover(b))}),b.bind("mousedown",function(b){a.removeDropDownList();a.closeFilterWindow();a.closeEditor()}))},ke=function(c,h,n){c&&(c.bind("touchstart",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){c.preventDefault();a.closeFilterWindow();c=angular.element(this);
var e=a.getRowCurrentIndex(e),h=parseInt(a.getIndexFromElem(this),10),n=a.getCell(e,h),m=a.getCellType(n,h),f=null,g=a.options.editorSettings;c[0].focus();n&&(f=a.getColumnById(n[a.options.cellFields.cid]));!f&&0<=h&&h<a.columnList.length&&(f=a.columnList[h]);var l="click"==a.options.editorSettings.activate;f&&f[a.options.columnFields.editorSettings]&&(g=f[a.options.columnFields.editorSettings],l=void 0!=g.activate?"click"==g.activate:l);n&&n!=d?a.closeEditor(d):a.closeEditor();switch(m){case "checkbox":break;
case "combobox":n&&0!=n[a.options.cellFields.allowEdit]&&f&&l?qb(angular.element(this),g,e,h):a.removeDropDownList();break;case "incell":!b&&n&&0!=n[a.options.cellFields.allowEdit]&&l&&a.openInCellEditor(c,n,f);break;case "dropdown":!b&&n&&0!=n[a.options.cellFields.allowEdit]&&l&&a.openDropDownEditor(c,n,f);break;default:a.removeDropDownList()}}}),c.bind("mouseenter",function(c){if(!ka){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)&&!aa){var h=a.getRowCurrentIndex(e),n=parseInt(a.getIndexFromElem(this),
10);if(h=a.getCell(h,n))if(a.hoverCell=h,a.refreshHover(e),a.callCellHover(c,h),c=angular.element(this),h&&0!=h[a.options.cellFields.allowEdit])switch(n=a.getCellType(h,n),n){case "combobox":ob||gc(c);break;case "incell":b&&h==d||wb(c,n);break;case "dropdown":b&&h!=d||wb(c,n);break;default:Fa(),mb()}else Fa()}}}),c.bind("mouseleave",function(b){if(!ka&&(a.hoverCell=null,(b=a.getRowFromChildElem(this))&&a.isRowEnabled(b))){b=a.getRowCurrentIndex(b);var c=parseInt(a.getIndexFromElem(this),10);a.getCell(b,
c)&&(Fa(),mb())}}),c.bind("click",function(b){var c=a.getRowFromChildElem(this);if(c&&a.isRowEnabled(c)){if(1===b.which){var e=a.getRowCurrentIndex(c),h=parseInt(a.getIndexFromElem(this),10),e=a.getCell(e,h);a.callCellClick(b,c,e,a.getMousePos(b));a.callRowClick(b,c,a.getMousePos(b))}b.stopPropagation()}}),c.bind("dblclick",function(c){var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var h=angular.element(this);c.preventDefault();if(1===c.which){var n=a.getRowCurrentIndex(e),m=parseInt(a.getIndexFromElem(this),
10),d=a.getCell(n,m),f=a.getCellType(d,m),g=null,l=a.options.editorSettings;d&&(g=a.getColumnById(d[a.options.cellFields.cid]));!g&&0<=m&&m<a.columnList.length&&(g=a.columnList[m]);var k="dblclick"==a.options.editorSettings.activate;g&&g[a.options.columnFields.editorSettings]&&(l=g[a.options.columnFields.editorSettings],k=void 0!=l.activate?"dblclick"==l.activate:k);switch(f){case "checkbox":break;case "combobox":d&&0!=d[a.options.cellFields.allowEdit]&&g&&k?qb(angular.element(this),l,n,m):a.removeDropDownList();
break;case "incell":!b&&d&&0!=d[a.options.cellFields.allowEdit]&&k&&a.openInCellEditor(h,d,g);break;case "dropdown":!b&&d&&0!=d[a.options.cellFields.allowEdit]&&k&&a.openDropDownEditor(h,d,g);break;default:a.removeDropDownList()}a.callRowDblClick(e,a.getMousePos(c))}c.stopPropagation()}}),c.bind("mousedown",function(c){a.closeFilterWindow();var e=a.getRowFromChildElem(this);if(e&&a.isRowEnabled(e)){var h=angular.element(this);a.mouseButtonStatus(!0);switch(c.which){case 1:var e=a.getRowCurrentIndex(e),
n=parseInt(a.getIndexFromElem(this),10),m=a.getCell(e,n),f=a.getCellType(m,n),g=null,l=a.options.editorSettings;m&&(g=a.getColumnById(m[a.options.cellFields.cid]));!g&&0<=n&&n<a.columnList.length&&(g=a.columnList[n]);var k="click"==a.options.editorSettings.activate;g&&g[a.options.columnFields.editorSettings]&&(l=g[a.options.columnFields.editorSettings],k=void 0!=l.activate?"click"==l.activate:k);m&&m!=d?a.closeEditor(d):a.closeEditor();switch(f){case "checkbox":break;case "combobox":m&&0!=m[a.options.cellFields.allowEdit]&&
g&&k?qb(angular.element(this),l,e,n):a.removeDropDownList();break;case "dropdown":!b&&m&&0!=m[a.options.cellFields.allowEdit]&&k&&a.openDropDownEditor(h,m,g);break;case "incell":!b&&m&&0!=m[a.options.cellFields.allowEdit]&&k&&a.openInCellEditor(h,m,g);break;default:a.removeDropDownList()}break;case 3:a.callRowRightClick(e,a.getMousePos(c))}c.stopPropagation()}}),c.bind("mouseup",function(a){1==a.which&&Tb()}))};a.getTopRow=function(){return a.isRowIndexInRange(v-1)?a.currentList[v]:0<a.currentList.length?
a.currentList[0]:null};a.getFooterElem=function(a){switch(a){case "left":return ya;case "right":return la}return Ka};a.getHeaderElem=function(a){switch(a){case "left":return ma;case "right":return X}return ra};a.getRowElems=function(a,b){switch(a){case "left":switch(b){case "top":return sa?sa.find("tr"):null;case "bottom":return ta?ta.find("tr"):null;default:return La?La.find("tr"):null}case "right":switch(b){case "top":return fa?fa.find("tr"):null;case "bottom":return za?za.find("tr"):null;default:return Ma?
Ma.find("tr"):null}default:switch(b){case "top":return ga?ga.find("tr"):null;case "bottom":return Y?Y.find("tr"):null;default:return ha?ha.find("tr"):null}}};var Ad=function(b){var c="";b.icon?c=b.icon:a.options.rowIcon&&(c=a.options.rowIcon);return c},qd=function(b,c,n,m){var e=a.currentList.length;0<e&&(b.shiftKey?k.isEqual(c[a.options.rowFields.id],a.currentList[0][a.options.rowFields.id])||Dc(b,n,m):k.isEqual(c[a.options.rowFields.id],a.currentList[e-1][a.options.rowFields.id])||Ec(b,n,m))},Ec=
function(b,c,n){b.preventDefault();focusDelayTime=0;var e=c,h=v+E-2,h=h<a.currentList.length-1?h:a.currentList.length-1;e>=h&&O&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);if(e=a.getNextRow(e)){c=a.getRowCurrentIndex(e);c>h&&O&&(a.ensureVisible(e,"bottom"),focusDelayTime=100);a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var d=f(function(){a.updateFocus(c,n);f.cancel(d)},focusDelayTime)}},Dc=function(b,c,n){b.preventDefault();focusDelayTime=
0;var e=v,e=0<e?e:0;c==e&&O&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-Math.floor(q[0].clientHeight/4)}),focusDelayTime=1);var h=a.getPrevRow(c);if(h){c=a.getRowCurrentIndex(h);c<e&&O&&(a.ensureVisible(h,"bottom"),focusDelayTime=100);a.rowSelection(h,b.shiftKey,b.ctrlKey,b.metaKey);var d=f(function(){a.updateFocus(c,n);f.cancel(d)},focusDelayTime)}},xd=function(b,c,n,m){b.preventDefault();if((void 0===m||0<=m&&m==a.options.expandColIndex)&&!a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&
0<c[a.options.rowFields.rows].length)a.toggle(c,!0),a.updateFocus(n,m);else if(0<=m){focusDelayTime=0;var e=m+1;b=a.columnList.length-1;e===b&&(focusDelayTime=1);if(0<=e&&e<=b){b=k.getPageRect(q);c=a.getElemFromCell(n,e);c=k.getPageRect(c);c.left+c.width>b.left+b.width&&(b=a.scrollPos,b.x+=c.width,a.setScrollPos(b));var h=f(function(){a.updateFocus(n,e);f.cancel(h)},focusDelayTime)}}},vd=function(b,c,n,m){b.preventDefault();if((void 0===m||0<=m&&m==a.options.expandColIndex)&&a.isRowExpanded(c)&&c[a.options.rowFields.rows]&&
0<c[a.options.rowFields.rows].length)a.toggle(c,!1),a.updateFocus(n,m);else if(0<=m){focusDelayTime=0;var e=1<m?m-1:0;if(0<=e){b=k.getPageRect(q);c=a.getElemFromCell(n,e);c=k.getPageRect(c);c.left<b.left&&(b=a.scrollPos,b.x-=c.width,a.setScrollPos(b));var h=f(function(){a.updateFocus(n,e);f.cancel(h)},focusDelayTime)}}},rd=function(b,c,n){b.preventDefault();var e=c-E,e=0<e?e:0;if(e!==c){focusDelayTime=1;var h=a.getPrevRow(e+1);if(h){a.scrollTo(h);a.rowSelection(h,b.shiftKey,b.ctrlKey,b.metaKey);p.$apply();
var d=f(function(){a.updateFocus(a.getRowCurrentIndex(h),n);f.cancel(d)},focusDelayTime)}}},sd=function(b,c,n){b.preventDefault();var e=c+E;a.options.showHeader&&e--;a.options.showFooter&&e--;e=e<a.currentList.length-1?e:a.currentList.length-1;if(e!==c){focusDelayTime=1;var h=a.getNextRow(e-1);if(h){a.scrollTo(h,"bottom");a.rowSelection(h,b.shiftKey,b.ctrlKey,b.metaKey);p.$apply();var d=f(function(){a.updateFocus(a.getRowCurrentIndex(h),n);f.cancel(d)},focusDelayTime)}}},td=function(b,c,n){b.preventDefault();
a.setScrollPos({x:a.scrollPos.x,y:P.y});var e=a.getLastRow();if(e){a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var h=f(function(){a.updateFocus(a.getRowCurrentIndex(e),n);f.cancel(h)},1)}},ud=function(b,c,n){b.preventDefault();a.setScrollPos({x:a.scrollPos.x,y:0});var e=a.getFirstRow();if(e){a.rowSelection(e,b.shiftKey,b.ctrlKey,b.metaKey);var h=f(function(){a.updateFocus(a.getRowCurrentIndex(e),n);f.cancel(h)},1)}},zd=function(b,c){if(b&&0!=b[a.options.cellFields.allowEdit]){var e=a.getColumnById(b[a.options.cellFields.cid]);
!e&&0<=c&&c<a.columnList.length&&(e=a.columnList[c]);if(e){var h=b[a.options.cellFields.value];if((e=e[a.options.columnFields.editorSettings])&&1==e.threeState)switch(k.isString(h)||(h="unchecked"),h){case "checked":h="unchecked";break;case "indeterminate":h="checked";break;default:h="indeterminate"}else h=k.isBoolean(h)?!h:!0;b[a.options.cellFields.value]=h;p.$apply()}}},wd=function(b,c,n,m){b.preventDefault();zd(n,m);a.rowSelection(c,b.shiftKey,b.ctrlKey,b.metaKey,c.selected);p.$apply()},ha=null,
ga=null,Y=null,Ga=angular.element('<div class="iui-grid-block iui-grid-block-top"></div>'),ra=null,Xa=angular.element('<div class="iui-grid-block iui-grid-block-left"></div>'),Q=0,Fb=0,ma=null,ya=null,La=null,sa=null,ta=null,Na=angular.element('<div class="iui-grid-block iui-grid-block-right"></div>'),Ha=0,Gb=0,X=null,la=null,Ma=null,fa=null,za=null,Ia=angular.element('<div class="iui-grid-block iui-grid-block-bottom"></div>'),Ka=null,v=0,y=null,u=null,ua=null,va=null,E=100,S=0,H=0,eb=0,lc=0,C=0,
L=0,Hb=0,mc=!1,ka=!1,Ub=9,Vb=9,nc=0,Oa=0,fb=0,sb=1,oc=0,pc=0,gb=0,Ib=0,qc=1,T=null,ba=null,M=!1,O=!1;this.scrollMousePos=null;var P={x:0,y:0},yb=[];p.verScrollVisibility=!1;p.$watch("verScrollVisibility",function(b,c){b!=c&&a.updateCurrentLayout()});a.getColumnWidth=function(b){var c=100;b&&b[a.options.columnFields.width]&&(c=b[a.options.columnFields.width],k.isPercent(c)?(b=q[0].clientWidth-2*a.columnList.length,O&&N&&(b-=N[0].offsetWidth),c=Math.floor(parseInt(c,10)/100*b)):k.isString&&(c=parseInt(c,
10)));return c};var Wb=function(b){var c=0;if((b=a.getRowElems(b))&&0<b.length&&(b=angular.element(b[0]))&&(b=b.find("td"))&&0<b.length)for(var e=0;e<b.length;e++)var m=angular.element(b[e]),c=c+m[0].offsetWidth;return c},ne=function(){var b=0;if(a.options.showHeader||a.options.showFooter){var c=a.options.showHeader?a.getHeaderElem():a.getFooterElem();if(c&&(c=c.find("td"))&&0<c.length)for(var n=0;n<c.length;n++)var m=angular.element(c[n]),b=b+m[0].offsetWidth;a.isThereLeftFixedColumns&&(ma?Q=ma[0].offsetWidth:
ya&&(Q=ya[0].offsetWidth),b+=Q);a.isThereRightFixedColumns&&(X?Ha=X[0].offsetWidth:la&&(Ha=la[0].offsetWidth),b+=Ha)}else 0<a.currentList.length&&(ha&&(b+=Wb()),a.isThereLeftFixedColumns&&(b+=Wb("left")),a.isThereRightFixedColumns&&(b+=Wb("right")));return b};a.updateScrollVisibility=function(){var a=f(function(){M||(A.css("display","none"),P.x=0);O||(N.css("display","none"),P.y=0);M&&O||Qa.css("display","none");f.cancel(a)},1)};q.append(A);q.append(N);q.append(Qa);a.updateScrollVisibility();var Bd=
function(){return ga?ga[0].offsetHeight:sa?sa[0].offsetHeight:fa?fa[0].offsetHeight:0},Cd=function(){return Y?Y[0].offsetHeight:ta?ta[0].offsetHeight:za?za[0].offsetHeight:0},Xb=0,Yb=999;a.updateViewSize=function(){var b=f(function(){var c=0;a.options.grouping.enabled&&w&&(c=w[0].offsetHeight);Hb=0;var e=q[0].clientWidth;O&&N&&(e-=N[0].offsetWidth);M=!1;0<a.columnList.length&&(Hb+=ne(),Hb>e&&(A.unbind("mousedown"),A.css("display","block"),A.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();
a.closeFilterWindow();a.closeEditor(null,null,!0);b=k.getClientMousePos(b,this);var c=Math.floor(q[0].clientWidth);T&&(b.x<T[0].offsetLeft?a.setScrollPos({x:a.scrollPos.x-c,y:a.scrollPos.y}):b.x>T[0].offsetLeft+T[0].offsetWidth&&a.setScrollPos({x:a.scrollPos.x+c,y:a.scrollPos.y}))}}),T=angular.element(A.children().eq(0)),M=!0,T.bind("mousedown",function(b){a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which&&(I.scrollMousePos=a.getMousePos(b),mc=
!0));b.stopPropagation()})));O=!1;p.verScrollVisibility=!1;0<a.currentList.length&&(e=0,a.options.paging.enabled&&V&&(e=V[0].offsetHeight),topRowHeight=Bd(),bottomRowHeight=Cd(),c=q[0].clientHeight-c-e-(C+L)-topRowHeight-bottomRowHeight,M&&A&&(c-=A[0].offsetHeight),E=0<S?Math.floor(c/S)+1:0<C?Math.floor(c/C):100,E<a.currentList.length+1&&(N.unbind("mousedown"),N.css("display","block"),N.bind("mousedown",function(b){if(a.options.enabled){a.removeDropDownList();a.closeFilterWindow();a.closeEditor(null,
null,!0);b=k.getClientMousePos(b,this);var c=Math.floor(q[0].clientHeight);ba&&(b.y<ba[0].offsetTop?(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y-c}),jc(!1,c)):b.y>ba[0].offsetTop+ba[0].offsetHeight&&(a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+c}),jc(!0,c)))}}),ba=angular.element(N.children().eq(0)),O=!0,p.verScrollVisibility=!0,ba.bind("mousedown",function(b){if(a.options.enabled&&(a.removeDropDownList(),a.closeFilterWindow(),a.closeEditor(null,null,!0),1===b.which)){I.scrollMousePos=a.getMousePos(b);
ka=!0;Xb=0;Yb=999;for(var c=0,e=!1,h=!1,n=a.scrollPos.x+eb-(Q+Ha),m=0;m<a.columnList.length;m++)if(!a.isColumnFixed(a.columnList[m])){var d=a.getColumnWidth(a.columnList[m])+4,c=c+d;!e&&c>=a.scrollPos.x&&(Xb=m,e=!0);!h&&c>=n&&(Yb=m,h=!0);if(e&&h)break}}b.stopPropagation()})));M||(A.unbind("mousedown"),P.x=0);O||(N.unbind("mousedown"),P.y=0);M&&O&&A.css("display","block");f.cancel(b);!M&&0<a.scrollPos.x&&a.setScrollPos({x:0,y:a.scrollPos.y});!O&&0<a.scrollPos.y&&a.setScrollPos({x:a.scrollPos.x,y:0})},
1)};a.updateScrollView=function(){Gc()};var Gc=function(){var b=f(function(){var c=0;a.options.grouping.enabled&&w&&(c=w[0].offsetHeight);var e=0;a.options.paging.enabled&&V&&(e=V[0].offsetHeight);eb=q[0].offsetWidth-2;lc=q[0].offsetHeight-2-c-e;M&&(lc-=A[0].offsetHeight);O&&(eb-=N[0].offsetWidth);da.css("margin-top",c+"px");da.css("width",eb+"px");da.css("height",lc+"px");M&&(A.css("left","0px"),A.css("bottom",e+"px"),A.css("width",eb-2+"px"));var m=2;a.options.paging.enabled&&V&&(m=4);O&&(N.css("top",
c+"px"),N.css("right","0px"),N.css("height",lc-m+"px"));M&&O&&(Qa.css("left","auto"),Qa.css("right","0px"));var d=f(function(){topRowHeight=Bd();bottomRowHeight=Cd();var b=C+topRowHeight;M&&eb<Hb&&(Oa=2,fb=A[0].clientWidth-4,nc=0,fb>Oa&&(nc=fb-Oa),Ub=Math.floor(nc*eb/Hb),9>Ub&&(Ub=9),T.css("width",Ub+"px"),P.x=Hb-eb,sb=P.x/(nc-Ub-2));var h=a.currentList.length+1;O&&0<a.currentList.length&&E<h&&(gb=2,Ib=N[0].clientHeight-4,oc=0,Ib>gb&&(oc=Ib-gb),Vb=Math.floor(oc*E/h),9>Vb&&(Vb=9),ba.css("height",Vb+
"px"),qc=(h-E+1)/(oc-Vb-2),P.y=Math.floor((h-E+1)*S),0>P.y&&(P.y=0),0==v?ba.css("top",gb+"px"):v+E-1==a.currentList.length&&ba.css("top",Ib-ba[0].offsetHeight+"px"));a.isThereLeftFixedColumns&&(ma?Q=ma[0].offsetWidth:ya?Q=ya[0].offsetWidth:0<a.currentList.length&&(Q=Wb("left")),Fb=q[0].clientHeight-c-e-C-L,M&&(Fb-=A[0].offsetHeight),Xa.css("top",c+C+"px"),Xa.css("width",Q+"px"),Xa.css("height",Fb+"px"),ra&&ra.css("left",Q+"px"),ha&&ha.css("left",Q+"px"),Ka&&Ka.css("left",Q+"px"));a.isThereRightFixedColumns&&
(X?Ha=X[0].offsetWidth:la?Ha=la[0].offsetWidth:0<a.currentList.length&&(Ha=Wb("right")),Gb=q[0].clientHeight-c-e-C-L,M&&(Gb-=A[0].offsetHeight),h=0,O&&(h=N[0].offsetWidth),X&&X.css("right",h+"px"),Na.css("top",c+C+"px"),Na.css("right",h+"px"),Na.css("width",Ha+"px"),Na.css("height",Gb+"px"),la&&la.css("right",h+"px"));h=e;M&&A&&(h+=A[0].offsetHeight);Ia.css("bottom",h+"px");ha&&ha.css("top",b+"px");Y&&Y.css("bottom",L+"px");La&&La.css("top",topRowHeight+"px");Ma&&Ma.css("top",topRowHeight+"px");b=
a.scrollPos.x;void 0!=b&&(0>b&&(b=0),b>P.x&&(b=P.x),a.scrollPos.x=b,b=!1!==a.options.rtl?Math.floor(a.scrollPos.x/sb)-(fb-T[0].offsetWidth-Oa):Math.floor(a.scrollPos.x/sb)+Oa,M&&T&&T.css("left",b+"px"),Hc());f.cancel(d)},1);f.cancel(b)},5)};a.updateColumnWidth=function(){if(a.options.fillSpace){for(var b=0,c=0;c<a.columnList.length;c++)b+=a.getColumnWidth(a.columnList[c])+4;if(b<q[0].clientWidth){for(var b=(q[0].clientWidth-b)/a.columnList.length,n,c=0;c<a.columnList.length;c++)n=a.getColumnWidth(a.columnList[c])+
b,a.columnList[c][a.options.columnFields.width]=n;return!0}}return!1};p.onCellValueChanging=function(b,c,n){var e=c+v,h=a.getCell(e,n);if(h&&0==h[a.options.cellFields.allowEdit])return!1;var h=!0,d=a.getColumnObject(n),f="label",g=null;d&&(f=d[a.options.columnFields.editorType],g=d[a.options.columnFields.editorSettings]);switch(f){case "checkbox":b=g&&1==g.threeState?b.checkState:b.checked;h=a.callCellValueChanging(a.getRowObject(e),a.getCellObject(e,n),b);break;case "combobox":h=a.callCellValueChanging(a.getRowObject(c),
a.getCellObject(c,n),b.item)}return h};p.onCellValueChanged=function(b,c,n){var e=c+v,h=a.getColumnObject(n),d="label",f=null;h&&(d=h[a.options.columnFields.editorType],f=h[a.options.columnFields.editorSettings]);switch(d){case "checkbox":b=f&&1==f.threeState?b.checkState:b.checked;a.callCellValueChanged(a.getRowObject(e),a.getCellObject(e,n),b);break;case "combobox":if(e=a.getCell(c,n))e[a.options.cellFields.value]=b.item,p.$apply(),"optimal"==a.options.displayMode&&a.updateView();a.removeDropDownList(!0);
a.updateFocus(c,n);a.callCellValueChanged(a.getRowObject(c),a.getCellObject(c,n),b.item)}};p.onEditorClick=function(b,c,n){c+=v;var e=a.getColumnObject(n),h="label";e&&(h=e[a.options.columnFields.editorType]);switch(h){case "checkbox":a.callCellClick(b,a.getRowObject(c),a.getCellObject(c,n),a.getMousePos(b))}};a.setDefaultCellValue=function(b,c,n){if(void 0==b[a.options.cellFields.value]){var e=void 0;switch(c){case "checkbox":e=n&&1==n.threeState?"unchecked":!1;break;case "image":e=""}void 0!=e&&
(b[a.options.cellFields.value]=e)}};a.getColumnTemplateUrl=function(b,c){return c?b[a.options.columnFields.templateSettings].footer?b[a.options.columnFields.templateSettings].footer.url:null:b[a.options.columnFields.templateSettings].header?b[a.options.columnFields.templateSettings].header.url:null};var Jb=function(b,c){c=void 0==c?"none":c;for(var e='<table cellpadding="0" cellspacing="0" style="position:absolute;',e=(b?e+'bottom:0;">':e+'top:0;">')+"<tr>",h,d=0;d<a.columnList.length;d++)h=a.columnList[d][a.options.columnFields.fixed],
h=void 0==h?"none":h,h==c&&(b?(e+='<td iui-class="{{data['+d+'].style.footer.general}}" data-index="'+d+'" data-element="column-footer">',e+='<div iui-class="{{data['+d+'].style.footer.cell}}" data-element="column-footer-cell"'):(e+='<td iui-class="{{data['+d+'].style.header.general}}" data-index="'+d+'" data-element="column-header">',e+='<div iui-class="{{data['+d+'].style.header.cell}}" data-element="column-header-cell"'),e+=' iui-contextmenu menu-items="data['+d+"].column."+a.options.columnFields.contextMenu+
'"',b?(e+=' iui-style="overflow:hidden;width:{{data['+d+"].width}}px;text-align:{{data["+d+"].footerAlignment}};",e=d==a.options.expandColIndex?e+("padding-left:{{data["+d+'].indent}}px;">'):e+'">',a.columnList[d][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[d],!0)?(e+='<iui-item-content obj="data['+d+"].column."+a.options.columnFields.templateSettings+'.footer.templateObj" template-url="{{data['+d+"].column."+a.options.columnFields.templateSettings+'.footer.url}}"',
e+=' data-element="footer-template-content" ng-cloak></iui-item-content>'):a.columnList[d][a.options.columnFields.footerContent]?e+=a.columnList[d][a.options.columnFields.footerContent]:a.columnList[d][a.options.columnFields.footerTemplate]?e+='<div ng-include="'+a.columnList[d][a.options.columnFields.footerTemplate]+'" style="margin:0;padding:0"></div>':(e+='<span iui-class="{{data['+d+'].style.footer.content}}" data-element="cell-content"',e+=' iui-tooltip="data['+d+"].column."+a.options.columnFields.footerTooltip+
'">',e+="{{data["+d+"].column."+a.options.columnFields.footerText+"}}</span>")):(e+=' iui-style="overflow:hidden;width:{{data['+d+"].width}}px;text-align:{{data["+d+"].headerAlignment}};",e=d==a.options.expandColIndex?e+("padding-left:{{data["+d+'].indent}}px;">'):e+'">',e+='<span iui-class="{{data['+d+'].style.header.content}}" data-element="cell-content"',e+=' iui-tooltip="data['+d+"].column."+a.options.columnFields.headerTooltip+'">',e+="{{data["+d+"].column."+a.options.columnFields.headerText+
"}}</span>",e+='<span iui-class="{{data['+d+'].style.filtering}}" data-index="'+d+'" data-element="filter-button" ng-show="data['+d+'].showFiltering"></span>',e+='<span iui-class="{{data['+d+'].style.sorting}}" data-index="'+d+'" data-element="sort-button" ng-show="data['+d+'].showSorting"></span>'),e+="</div>",e+="</td>");return e+"</tr></table>"},Aa=function(b,c,n,d){if("optimal"==a.options.displayMode){c=void 0==c?"none":c;d='<tr class="iui-grid-row" data-index="'+b+'" data-fixed="'+d+'"';n&&(d+=
' style="position:absolute;top:-9999px"');d+=">";for(var e=0;e<a.columnList.length;e++)n=a.columnList[e][a.options.columnFields.fixed],n=void 0==n?"none":n,n==c&&(d+='<td class="iui-grid-row-cell" data-element="cell" data-index="'+e+'">',d+="<div",d+=' class="iui-grid-row-cell-content" data-element="cell-content"',d+=' iui-contextmenu menu-items="data['+b+"].row."+a.options.rowFields.contextMenu+'" menu-update="{{data['+b+'].updateContextMenu}}"',d+=' style="width:0px;text-align:left;opacity:0;',
0<a.options.rowHeight&&(d+="height:"+a.options.rowHeight+"px;"),d=e==a.options.expandColIndex?d+'padding-left:0px;">':d+'">',d+=Dd(b,e),d+="</div>",d+="</td>");return d+"</tr>"}c=void 0==c?"none":c;d='<tr iui-class="{{data['+b+'].style}}" data-index="{{data['+b+'].index}}" data-fixed="'+d+'" tabindex="{{data['+b+'].tabindex}}"';n&&(d+=' style="position:absolute;top:-9999px"');d+=">";for(e=0;e<a.columnList.length;e++)n=a.columnList[e][a.options.columnFields.fixed],n=void 0==n?"none":n,n==c&&(d+='<td iui-class="{{data['+
b+"].cells["+e+'].style.cell}}" data-element="cell" data-index="'+e+'" draggable="{{data['+b+'].draggable}}" tabindex="{{data['+b+"].cells["+e+'].tabindex}}">',d+='<div ng-show="data['+b+'].visible"',d+=' iui-class="{{data['+b+"].cells["+e+'].style.content}}" data-element="cell-content"',d+=' iui-contextmenu menu-items="data['+b+"].row."+a.options.rowFields.contextMenu+'" menu-update="{{data['+b+'].updateContextMenu}}"',d+=' iui-style="width:{{data['+b+"].cells["+e+"].width}}px;text-align:{{data["+
b+"].cells["+e+"].alignment}};",0<a.options.rowHeight&&(d+="height:"+a.options.rowHeight+"px;"),d=e==a.options.expandColIndex?d+("padding-left:{{data["+b+"].cells["+e+'].indent}}px;">'):d+'">',d+=Dd(b,e),d+="</div>",d+="</td>");return d+"</tr>"},Dd=function(b,c){if("optimal"==a.options.displayMode){var e="";c===a.options.expandColIndex&&(e+='<span data-element="expandbox"></span><span data-element="icon"></span>');var d=a.columnList[c][a.options.columnFields.editorSettings],h=hb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":e+=
'<iui-checkbox name="cb-'+k.getUniqueId(4)+'"';d&&1==d.threeState?(e+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(e+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+
c+')"'));e+=' click="onEditorClick(e, '+b+", "+c+')"';d&&d.style&&(e+=' control-style="data['+b+"].cells["+c+'].editorStyle"');e=e+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="</iui-checkbox>";break;case "combobox":e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+
b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";e+="</span>";break;case "image":e+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';e+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:h&&""!=h?e+='<iui-item-content obj="data['+
b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':(e=e+'<span class="iui-grid-row-cell-label" data-element="content"'+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),e+=".</span>")}return e}e="";c===a.options.expandColIndex&&(e=e+('<span iui-class="{{data['+b+'].expandBox}}" data-element="expandbox" ng-show="data['+
b+'].expandBoxVisible"></span>')+('<span iui-class="{{data['+b+'].icon}}" data-element="icon" ng-show="data['+b+'].iconVisible"></span>'));d=a.columnList[c][a.options.columnFields.editorSettings];h=hb(c);switch(a.columnList[c][a.options.columnFields.editorType]){case "checkbox":e+='<iui-checkbox name="cb-'+k.getUniqueId(4)+'"';d&&1==d.threeState?(e+=' check-state="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checkstate-changing="onCellValueChanging(e, '+b+", "+c+')"')+
(' checkstate-changed="onCellValueChanged(e, '+b+", "+c+')"')+' three-state="true"'):(e+=' checked="data['+b+"].cells["+c+"].related."+a.options.cellFields.value+'"',e=e+(' checked-changing="onCellValueChanging(e, '+b+", "+c+')"')+(' checked-changed="onCellValueChanged(e, '+b+", "+c+')"'));e+=' click="onEditorClick(e, '+b+", "+c+')"';d&&d.style&&(e+=' control-style="data['+b+"].cells["+c+'].editorStyle"');e=e+(' enabled="data['+b+"].cells["+c+'].enabled"')+(' style="vertical-align:middle;" iui-show="{{data['+
b+"].cells["+c+'].visible}}"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="</iui-checkbox>";break;case "combobox":e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">');e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.value+".text}}";e+="</span>";break;case "image":e+='<img data-element="image" style="vertical-align:middle" ng-src="{{data['+
b+"].cells["+c+"].related."+a.options.cellFields.value+'}}"  iui-show="{{data['+b+"].cells["+c+'].visible}}" show-default="true"';e+=' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">';break;default:h&&""!=h?e+='<iui-item-content obj="data['+b+"].cells["+c+"].related."+a.options.cellFields.templateObj+'" template-url="{{data['+b+"].cells["+c+'].templateUrl}}" iui-show="{{data['+b+"].cells["+c+'].templateVisible}}" data-element="template-content"></iui-item-content>':
(e=e+('<span iui-class="{{data['+b+"].cells["+c+'].style.label}}" data-element="content"')+(' iui-tooltip="data['+b+"].cells["+c+"].related."+a.options.cellFields.tooltip+'">'),e+="{{data["+b+"].cells["+c+"].related."+a.options.cellFields.text+"}}",e+="</span>")}return e},w=angular.element('<div class="iui-grid-grouping-panel"></div>'),ca=null,Zb=null,tb=-1,ib=!1,U=angular.element('<div style="opacity:0.75;position:absolute;top:-9999px;z-index:999;pointer-events:none;"></div>'),Ic=0,na=angular.element('<div style="display:inline-block;"></div>'),
jb=[],Jc=function(b){var c=b[a.options.columnFields.groupText];c&&""!=c||(c=b[a.options.columnFields.headerText]);return c},pe=function(){bd();w.unbind("mouseenter mouseleave mousemove mouseup");w.empty();w.remove();jb.length=0;if(a.options.grouping.enabled){var b="",c=0;if(0<a.groups.length)for(var d=0;d<a.groups.length;d++){var m="iui-grid-grouping-panel-item";d<a.groups.length-1&&(m+=" iui-grid-grouping-marker");var f=Jc(a.groups[d]),b=b+('<div class="'+m+'" data-index="'+d+'">'),b=b+('<p class="iui-grid-grouping-panel-item-label">'+
f+"</p>"),b=b+'<span class="iui-grid-grouping-panel-item-button"></span></div>'}else d=angular.element('<span class="iui-grid-grouping-panel-item" style="position:absolute;top:-999px;">Temp</span>'),q.append(d),c=d[0].offsetHeight,d.remove();if(""!=b){var l=angular.element(b);w.append(l)}ia&&w.css("opacity",ja.opacity);q.append(w);m=0;f=w.find("div");for(d=0;d<f.length;d++){var p=angular.element(f[d]),Z=k.getMargin(p[0]);jb.push({x:m,width:p[0].offsetWidth});m+=p[0].offsetWidth+Z.left+Z.right}d=k.getPadding(w[0]);
w.bind("mouseenter",function(b){a.options.enabled&&1==b.which&&aa&&z&&(U.empty(),U.append('<div class="iui-grid-grouping-panel-item">'+z[a.options.columnFields.headerText]+"</div>"),w.append(U),Ic=U[0].offsetWidth,U.css("display","none"),ib=!0,ca=null);b.stopPropagation()});w.bind("mousemove",function(b){if(a.options.enabled&&1==b.which&&(aa&&z||ib&&ca)){var c=w[0].getBoundingClientRect(),e=angular.element(g)[0].pageXOffset,d=angular.element(g)[0].pageYOffset,h=a.getMousePos(b);h.x-=c.left+e;h.y-=
c.top+d;c="";z?c=Jc(z):ca&&(c=Jc(ca));Ed(b,c);ea&&ea.css("display","none");q.css("cursor","default");document.body.style.cursor="default";Zb=null;c=-1;ca&&(c=a.groups.indexOf(ca));for(e=jb.length-1;0<=e;e--)if(h.x>=jb[e].x){h.x<=jb[e].x+jb[e].width&&(Zb=a.groups[e]);if(d=a.getElemFromGroup(a.groups[e]))tb=e,na.css("display","inline-block"),z&&na.css("width",d[0].offsetWidth+"px"),z?h.x<=jb[e].x+jb[e].width?(h=Fd(Zb))?(h=a.getElemFromGroup(h))&&h.after(na):w.prepend(na):d.after(na):0==e?w.prepend(na):
c>e?(h=Fd(Zb))&&(h=a.getElemFromGroup(h))&&h.after(na):d.after(na);tb=0>tb?0:tb>a.groups.length-1?a.groups.length-1:tb;break}}b.stopPropagation()});w.bind("mouseup",function(b){if(a.options.enabled&&1==b.which&&(aa&&z||ib&&ca)){if(ib&&ca){var c=a.groups.indexOf(ca),e=tb;c!=e?(a.moveObject(c,e,a.groups),a.updateLayout(),a.callGroupChange(ca)):(c=a.getElemFromGroup(ca))&&c.css("display","inline-block")}else Zb?(e=tb,0>a.groups.indexOf(z)&&(a.groups.splice(e,0,z),a.updateLayout(),a.callGroupChange(z))):
0>a.groups.indexOf(z)&&(a.groups.push(z),a.updateLayout(),a.callGroupChange(z));U&&U.remove();na&&na.remove();z=null;rb=-1;ib=aa=!1;ca=null;ea&&ea.remove();q.css("cursor","default");document.body.style.cursor="default";b.stopPropagation()}});w.bind("mouseleave",function(b){a.options.enabled&&(na&&na.remove(),U&&U.css("display","none"))});w.css("width",q[0].clientWidth+"px");""==b?w.css("height",c+(d.top+d.bottom)-2+"px"):l&&w.css("height",l[0].offsetHeight+(d.top+d.bottom)-2+"px");oe();a.updateGroupPanel()}};
a.updateGroupPanel=function(){var b=1;a.options.enabled||(b=.5);if(w){var c=w.find("span"),d;if(c&&0<c.length)for(var m=0;m<c.length;m++)d=angular.element(c[m]),d.css("opacity",b);if((c=w.find("p"))&&0<c.length)for(m=0;m<c.length;m++)d=angular.element(c[m]),a.options.enabled?d.removeClass("iui-grid-grouping-panel-item-disabled"):d.addClass("iui-grid-grouping-panel-item-disabled")}};var Ed=function(b,c){U.empty();U.append('<div class="iui-grid-grouping-panel-item"><p class="iui-grid-grouping-panel-item-label">'+
c+"</p></div>");w.append(U);var e=k.getPadding(w[0]),d=w[0].getBoundingClientRect(),h=angular.element(g)[0].pageXOffset,f=angular.element(g)[0].pageYOffset,l=a.getMousePos(b);l.x-=d.left+h;l.y-=d.top+f;Ic=U[0].offsetWidth;d=l.x-Ic/2;U.css("top",e.top+"px");U.css("left",d+"px");U.css("display","block")};a.getGroupFromElem=function(b){return b&&(b=angular.element(b))&&(b=b.parent(),b[0].attributes["data-index"]&&(b=b[0].attributes["data-index"].value,a.isGroupIndexinRange(b,a.groups)))?a.groups[b]:
null};a.getElemFromGroup=function(b){var c=null;if(b){b=a.groups.indexOf(b);for(var e=w.find("div"),d=0;d<e.length;d++){var f=angular.element(e[d]);if(f[0].attributes&&f[0].attributes["data-index"]&&f[0].attributes["data-index"].value==b){c=f;break}}}return c};var Fd=function(b){return b&&(b=a.groups.indexOf(b)-1,a.isGroupIndexinRange(b,a.groups))?a.groups[b]:null},bd=function(){for(var a=w.find("p"),b=0;b<a.length;b++){var c=angular.element(a[b]);c.unbind("mousedown")}a=w.find("span");for(b=0;b<
a.length;b++)c=angular.element(a[b]),c.unbind("mousedown")},oe=function(){for(var b=w.find("p"),c=0;c<b.length;c++){var d=angular.element(b[c]);d.bind("mousedown",function(b){if(a.options.enabled&&1==b.which){var c=angular.element(this),e=c.parent();ib=!0;ca=a.getGroupFromElem(c);na.css("width",e[0].offsetWidth+6+"px");na.css("display","inline-block");e.after(na);e.css("display","none");Ed(b,ca[a.options.columnFields.headerText])}b.stopPropagation()})}b=w.find("span");for(c=0;c<b.length;c++)d=angular.element(b[c]),
d.bind("mousedown",function(b){if(a.options.enabled){var c=a.getGroupFromElem(this);if(c){var e=a.groups.indexOf(c);0<=e&&0!=a.callGroupRemoving(c)&&(a.groups.splice(e,1),a.updateLayout(),a.callGroupRemoved(c),a.callGroupChange(c))}}b.stopPropagation()})};a.isGroupIndexinRange=function(a,b){return 0<=a&&a<b.length?!0:!1};a.moveObject=function(b,c,d){a.isGroupIndexinRange(b,d)&&a.isGroupIndexinRange(c,d)&&d.splice(c,0,d.splice(b,1)[0])};var qe=function(){S=0;if(0<a.options.rowHeight){var b={top:0,
bottom:0};if(a.options.controlStyle&&a.options.controlStyle.row&&a.options.controlStyle.row.cell&&a.options.controlStyle.row.cell.content){var d=angular.element('<div class="'+a.options.controlStyle.row.cell.content+'" style="position:absolute;top:-9999999px;">Temp</div>');q.append(d);b=k.getPadding(d[0]);d.remove()}S=a.options.rowHeight+b.top+b.bottom+3}else if(0<a.currentList.length&&u){for(var b=[],n=[],d=[],m=[],g=[],l=[],p=0,Z=0;Z<a.currentList.length&&10>Z;Z++)b.push(Aa(Z,"none",!0)),n.push(c(b[Z])(u)),
q.append(n[Z]),a.isThereLeftFixedColumns&&(d.push(Aa(Z,"left",!0)),m.push(c(d[Z])(u)),q.append(m[Z])),a.isThereRightFixedColumns&&(g.push(Aa(Z,"right",!0)),l.push(c(g[Z])(u)),q.append(l[Z])),p++;if(0<p)var r=f(function(){for(var b=0,c=0,e=0,d=0;d<p;d++)b+=n[d][0].offsetHeight,n[d].remove(),a.isThereLeftFixedColumns&&(c+=m[d][0].offsetHeight,m[d].remove()),a.isThereRightFixedColumns&&(e+=l[d][0].offsetHeight,l[d].remove());S=Math.floor(Math.max(Math.max(b,c),e)/p);f.cancel(r)},1)}},J=null,Kc=0,Lc=
0,V=angular.element('<div class="iui-pagination-panel"></div>'),re=function(){J&&J.$destroy();V.empty();V.remove();Lc=Kc=0;if(a.options.paging.showControlPanel){J=p.$new();J.currentPage=0;J.minPages=0;J.numPages=a.pageList.length;0<J.numPages&&0==J.currentPage&&(J.currentPage=1);J.onFirstPage=function(){a.options.enabled&&(a.firstPage(),J.currentPage=a.currentPageNumber)};J.onLastPage=function(){a.options.enabled&&(a.lastPage(),J.currentPage=a.currentPageNumber)};J.onNextPage=function(){a.options.enabled&&
(a.nextPage(),J.currentPage=a.currentPageNumber)};J.onPrevPage=function(){a.options.enabled&&(a.prevPage(),J.currentPage=a.currentPageNumber)};J.$watch("currentPage",function(b,c){a.options.enabled&&b!=c&&1<=b&&b<=a.pageList.length&&a.setCurrentPage(b)});Kc=q[0].clientWidth;for(var b="",d=0;6>d;d++)switch(d){case 0:b+='<span class="iui-pagination-panel-button iui-pagination-first" ng-click="onFirstPage()"></span>';break;case 1:b+='<span class="iui-pagination-panel-button iui-pagination-prev" ng-click="onPrevPage()"></span>';
break;case 2:b+='<input class="iui-pagination-panel-input" ng-model="currentPage" type="number" ng-attr-min="{{minPages}}" ng-attr-max="{{numPages}}" />';break;case 3:b+='<span class="iui-pagination-panel-label"> / {{numPages}}</span>';break;case 4:b+='<span class="iui-pagination-panel-button iui-pagination-next" ng-click="onNextPage()"></span>';break;case 5:b+='<span class="iui-pagination-panel-button iui-pagination-last" ng-click="onLastPage()"></span>'}b=c(b)(J);V.append(b);q.append(V);V.css("width",
Kc+"px");b&&(k.getMargin(b[0]),d=k.getPadding(V[0]),Lc=b[0].offsetHeight+(d.top+d.bottom)-2,V.css("height",Lc+"px"));a.updatePaginationPanel()}};a.updatePaginationPanel=function(){var b=1;a.options.enabled||(b=.5);if(V){var c=V.find("span"),d;if(c&&0<c.length)for(var m=0;m<c.length;m++)d=angular.element(c[m]),d.css("opacity",b);(c=V.find("input"))&&0<c.length&&(d=angular.element(c[0]),a.options.enabled?d.removeAttr("disabled"):d.attr("disabled","true"))}};a.resetPageNumber=function(){a.currentPageNumber=
1;J&&(J.currentPage=0<J.numPages?1:0)};a.updatePageNumber=function(){a.currentPageNumber>a.pageList.length&&(0==a.pageList.length?a.resetPageNumber():(a.currentPageNumber=a.pageList.length,J&&(J.currentPage=a.currentPageNumber)))};var Ya=angular.element('<div class="iui-grid-block" style="position:absolute;top:-9999999px"></div>'),oa=angular.element('<div class="iui-grid-block iui-grid-block-top" style="position:absolute;top:-9999999px"></div>'),Ba=angular.element('<div class="iui-grid-block iui-grid-block-bottom" style="position:absolute;top:-9999999px"></div>'),
Za=angular.element('<div class="iui-grid-block iui-grid-block-left" style="position:absolute;top:-9999999px"></div>'),$a=angular.element('<div class="iui-grid-block iui-grid-block-right" style="position:absolute;top:-9999999px"></div>'),Gd=function(){Ya&&(Ya.empty(),Ya.remove());oa&&(oa.empty(),oa.remove());Ba&&(Ba.empty(),Ba.remove());Za&&(Za.empty(),Za.remove());$a&&($a.empty(),$a.remove())},se=function(){if(1<a.updateStatus)R("end");else var b=f(function(){if(0<a.columnList.length&&1==a.updateStatus){var e=
0;a.options.grouping.enabled&&w&&(e=w[0].offsetHeight);y=p.$new();y.data=Hd();a.refreshColumns();y.$apply();for(var d=L=C=0;d<a.columnList.length;d++){var m={columnID:void 0!=a.columnList[d][a.options.columnFields.id]?a.columnList[d][a.options.columnFields.id]:d,avgItemHeight:0};switch(a.columnList[d][a.options.columnFields.editorType]){case "combobox":ee(a.columnList[d].editorSettings,d,m);yb.push(m);break;default:yb.push(m)}}a.options.showHeader&&(q.append(oa),ia&&(Ga.css("opacity",ja.opacity),
oa.css("opacity",ja.opacity)),oa.css("top",e+"px"),e=Jb(),ra=angular.element(c(e)(y)),oa.append(ra),a.isThereLeftFixedColumns&&(e=Jb(!1,"left"),ma=c(e)(y),oa.append(ma),ma.css("z-index","2"),ma.addClass("iui-grid-column-header-left")),a.isThereRightFixedColumns&&(e=Jb(!1,"right"),X=c(e)(y),oa.append(X),X.css("right","0"),X.css("z-index","1"),X.addClass("iui-grid-column-header-right")));a.options.showFooter&&(q.append(Ba),ia&&(Ia.css("opacity",ja.opacity),Ba.css("opacity",ja.opacity)),e=Jb(!0),Ka=
c(e)(y),Ba.append(Ka),a.isThereLeftFixedColumns&&(e=Jb(!0,"left"),ya=c(e)(y),Ba.append(ya),ya.css("z-index","2"),ya.addClass("iui-grid-column-footer-left")),a.isThereRightFixedColumns&&(e=Jb(!0,"right"),la=c(e)(y),Ba.append(la),la.css("right","0"),la.css("z-index","1"),la.addClass("iui-grid-column-footer-right")));for(var g,e=-1,d=0;d<a.columnList.length;d++)if(g=m=null,a.columnList[d][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[d])?(m=a.columnList[d][a.options.columnFields.templateSettings].header,
e=1):a.columnList[d][a.options.columnFields.headerContent]?(m=a.columnList[d][a.options.columnFields.headerContent],e=2):a.columnList[d][a.options.columnFields.headerTemplate]&&(m=a.columnList[d][a.options.columnFields.headerTemplate],e=3),a.columnList[d][a.options.columnFields.templateSettings]&&a.getColumnTemplateUrl(a.columnList[d],!0)?g=a.columnList[d][a.options.columnFields.templateSettings].footer:a.columnList[d][a.options.columnFields.footerContent]?g=a.columnList[d][a.options.columnFields.footerContent]:
a.columnList[d][a.options.columnFields.footerTemplate]&&(g=a.columnList[d][a.options.columnFields.footerTemplate]),(m||g)&&(g=a.getElemFromColumn(a.columnList[d],a.columnList[d][a.options.columnFields.fixed]))&&m&&m&&(g=a.getChildElement(g,"column-header-cell")))switch(g.empty(),e){case 1:y&&(m='<iui-item-content obj="data['+d+"].column."+a.options.columnFields.templateSettings+'.header.templateObj" template-url="{{data['+d+"].column."+a.options.columnFields.templateSettings+'.header.url}}" draggable="{{data['+
d+'].draggable}}"',m+=' data-element="header-template-content" ng-cloak></iui-item-content>',g.append(c(m)(y)));break;case 2:g.append(c(m)(p.$parent));break;case 3:m='<div ng-include="'+m+'"',a.columnList[d][a.options.columnFields.headerTemplateModel]&&(m+=' onload="'+a.columnList[d][a.options.columnFields.headerTemplateModel]+'"'),m+=' style="margin:0;padding:0"></div>',g.append(c(m)(p.$parent))}Ja(40);R("rows")}else Ja(70),R("scroll");f.cancel(b)},1)},te=function(){if(1<a.updateStatus)R("end");
else var b=f(function(){if(0<a.columnList.length){var e=0;a.options.grouping.enabled&&w&&(e=w[0].offsetHeight);var d=0;a.options.paging.enabled&&V&&(d=V[0].offsetHeight);var m=0;if(a.options.showHeader&&ra){C=ra[0].offsetHeight;a.isThereLeftFixedColumns&&ma?C=ma[0].offsetHeight:a.isThereRightFixedColumns&&X&&(C=X[0].offsetHeight);var g=0,l=ra.find("td");if(l&&0<l.length)for(var k=0;k<l.length;k++)var Z=angular.element(l[k]),g=g+Z[0].offsetWidth;g>q[0].clientWidth&&(g=angular.element('<div class="iui-scrollbar-horizontal"><div class="iui-scroll-button-thumb-horizontal"></div></div>'),
g.css("bottom","-9999px"),q.append(g),m=g[0].offsetHeight,g.remove());oa.css("width",q[0].clientWidth+"px");oa.css("height",C+"px");a.isThereLeftFixedColumns&&(Q=ma[0].offsetWidth,Fb=q[0].clientHeight-C-L,ra.css("left",Q+"px"));a.isThereRightFixedColumns&&(Ha=X[0].offsetWidth,Gb=q[0].clientHeight-C-L)}a.options.showFooter&&(L=Ka[0].offsetHeight,a.isThereLeftFixedColumns&&ya?L=ya[0].offsetHeight:a.isThereRightFixedColumns&&la&&(L=la[0].offsetHeight),Ba.css("width",q[0].clientWidth+"px"),Ba.css("height",
L+"px"),a.isThereLeftFixedColumns&&(Q=ya[0].offsetWidth,Fb=q[0].clientHeight-C-L,Ka.css("left",Q+"px")),a.isThereRightFixedColumns&&(Ha=la[0].offsetWidth,Gb=q[0].clientHeight-C-L));Id();if(0<a.currentList.length){u=p.$new();u.data=Mc();ua=p.$new();ua.data=Jd();va=p.$new();va.data=Kd();a.refreshRows();u.$apply();ua.$apply();va.$apply();qe();var r=f(function(){od();ha&&ha.remove();ga&&ga.remove();Y&&Y.remove();La&&La.remove();sa&&sa.remove();ta&&ta.remove();Ma&&Ma.remove();fa&&fa.remove();za&&za.remove();
H=0;for(var b="",h=0;h<a.currentTopList.length;h++)b+=Aa(h,"none",!1,"top"),H++;0<H&&(ga=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block" style="position:absolute;top:'+C+'px;"></table>'),ga.append(c(b)(ua)),Ya.append(ga));H=0;b="";for(h=0;h<a.currentBottomList.length;h++)b+=Aa(h,"none",!1,"bottom"),H++;0<H&&(Y=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block" style="position:absolute;bottom:'+L+'px;"></table>'),Y.append(c(b)(va)),
Ya.append(Y));b=q[0].clientHeight-e-d-(C+L)-m;E=0<S?Math.floor(b/S)+1:0<C?Math.floor(b/C)+1:100;H=0;b="";for(h=0;h<E;h++)b+=Aa(h),H++;if(0<H){ha=angular.element('<table cellpadding="0" cellspacing="0" style="position:absolute;top:'+(C+topRowHeight)+'px;"></table>');ha.append(c(b)(u));Ya.append(ha);if(a.isThereLeftFixedColumns){b="";for(h=H=0;h<a.currentTopList.length;h++)b+=Aa(h,"left",!1,"top"),H++;0<H&&(sa=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block iui-grid-rows-left-top" style="position:absolute;"></table>'),
sa.append(c(b)(ua)),Za.append(sa));b="";for(h=H=0;h<a.currentBottomList.length;h++)b+=Aa(h,"left",!1,"bottom"),H++;0<H&&(ta=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block iui-grid-rows-left-bottom" style="position:absolute;bottom:0;"></table>'),ta.append(c(b)(va)),Za.append(ta));ha.css("left",Q+"px");b="";for(h=H=0;h<E;h++)b+=Aa(h,"left"),H++;0<H&&(La=angular.element('<table class="iui-grid-rows-left" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),
La.append(c(b)(u)),Za.append(La),q.append(Za),ia&&Xa.css("opacity",ja.opacity))}if(a.isThereRightFixedColumns){b="";for(h=H=0;h<a.currentTopList.length;h++)b+=Aa(h,"right",!1,"top"),H++;0<H&&(fa=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-top-block iui-grid-rows-right-top" style="position:absolute;"></table>'),fa.append(c(b)(ua)),$a.append(fa));b="";for(h=H=0;h<a.currentBottomList.length;h++)b+=Aa(h,"right",!1,"bottom"),H++;0<H&&(za=angular.element('<table cellpadding="0" cellspacing="0" class="iui-grid-rows-bottom-block iui-grid-rows-right-bottom" style="position:absolute;bottom:0;"></table>'),
za.append(c(b)(va)),$a.append(za));b="";for(h=H=0;h<E;h++)b+=Aa(h,"right"),H++;0<H&&(Ma=angular.element('<table class="iui-grid-rows-right" cellpadding="0" cellspacing="0" style="position:absolute;"></table>'),Ma.append(c(b)(u)),$a.append(Ma),q.append($a),ia&&Na.css("opacity",ja.opacity))}}Ja(70);R("scroll");f.cancel(r)},1)}else Ja(70),R("scroll")}else Ja(70),R("scroll");f.cancel(b)},1)},Kb=function(b){b.dataTransfer?b.dataTransfer.dropEffect="none":b.originalEvent&&b.originalEvent.dataTransfer&&
(b.originalEvent.dataTransfer.dropEffect="none");a.dropMark()},ue=function(){if(1<a.updateStatus)R("end");else{if(1==a.updateStatus){ga&&ga.unbind("dragover");Y&&Y.unbind("dragover");sa&&sa.unbind("dragover");ta&&ta.unbind("dragover");fa&&fa.unbind("dragover");fa&&fa.unbind("dragover");Ya&&(da.empty(),da.append(Ya.children()),ga&&ga.bind("dragover",function(a){Kb(a);a.stopPropagation()}),Y&&Y.bind("dragover",function(a){Kb(a);a.stopPropagation()}));if(oa){var b=0;a.options.grouping.enabled&&w&&(b=
w[0].offsetHeight);Ga.css("top",b+"px");Ga.empty();Ga.append(oa.children());a.options.showHeader&&(Ga.css("width",q[0].clientWidth+"px"),Ga.css("height",C+"px"));q.append(Ga)}Ba&&(Ia.empty(),Ia.append(Ba.children()),a.options.showFooter&&(Ia.css("width",q[0].clientWidth+"px"),Ia.css("height",L+"px")),q.append(Ia));Za&&(Xa.empty(),Xa.append(Za.children()),q.append(Xa),sa&&sa.bind("dragover",function(a){Kb(a);a.stopPropagation()}),ta&&ta.bind("dragover",function(a){Kb(a);a.stopPropagation()}));$a&&
(Na.empty(),Na.append($a.children()),q.append(Na),fa&&fa.bind("dragover",function(a){Kb(a);a.stopPropagation()}),za&&za.bind("dragover",function(a){Kb(a);a.stopPropagation()}));a.updateViewSize();a.updateViewSize();a.updateScrollVisibility();a.updateScrollView()}Ja(80,"complete");R("complete")}},ve=function(){switch(ja.type){case "circular":1==a.updateStatus&&(Ld(),Lb=0,kb=!0,a.callLoadComplete());break;case "linear":Md(!1);break;default:Lb=0,kb=!0,1==a.updateStatus&&a.callLoadComplete()}a.updateActive=
!1;a.updateStatus--;if(0<a.updateStatus)Mb=a.updateActive=!0,1==a.updateStatus?R("start"):R("end");else if(Nc())var b=f(function(){"optimal"==a.options.displayMode&&a.updateGridElements();a.updateView();a.callUpdateComplete();f.cancel(b)},1);else"optimal"==a.options.displayMode&&(a.updateGridElements(),a.updateView()),a.callUpdateComplete()},$b=[],ac=[],bc=[];a.updateGridElements=function(){if("optimal"==a.options.displayMode){var b=0,c="none";$b.length=0;ac.length=0;bc.length=0;for(var d=$b;3>b;){if((c=
a.getRowElems(c))&&0<c.length)for(var m,f,g=0;g<c.length;g++){m=angular.element(c[g]);f={rowElem:m,cellList:[]};if(g<E){m=m.find("td");for(var l=0;l<m.length;l++){var k=angular.element(m[l]),p=a.getContentElement(k);if(p){var q=l;k[0].attributes&&k[0].attributes["data-index"]&&(q=parseInt(k[0].attributes["data-index"].value,10));k={cell:k,block:p,expandBox:null,icon:null,content:null};q==a.options.expandColIndex&&(k.expandBox=angular.element(a.getContentElement(p,"expandbox")),k.icon=angular.element(a.getContentElement(p,
"icon")));var r="content";switch(a.columnList[q][a.options.columnFields.editorType]){case "checkbox":r="checkbox";break;case "image":r="image";break;default:(q=hb(q))&&""!=q&&(r="template-content")}k.content=angular.element(a.getContentElement(p,r));f.cellList.push(k)}}}d.push(f)}b++;1==b?(c="left",d=ac):(c="right",d=bc)}}};var R=function(b){if(Mb&&!ub)switch(b){case "start":1<a.updateStatus?R("end"):(a.updateColumnList(),a.updateGroupList(),a.options.paging.enabled&&a.updatePageList(),a.updateCurrentList(),
Ja(10),R("init"));break;case "init":1<a.updateStatus?R("end"):(yb.length=0,jd(),a.options.grouping.enabled&&pe(),mc||ka||Gc(),Gd(),Ka=ra=Y=ga=ha=null,Fb=Q=0,ta=sa=La=ma=null,Gb=Ha=0,za=fa=Ma=X=null,y&&y.$destroy(),u&&u.$destroy(),a.options.paging.enabled&&re(),q.append(Ya),Ja(20),R("columns"));break;case "columns":se();break;case "rows":oa?a.options.showHeader&&oa.find("td").length<a.columnList.length?f(function(){R(b)},1):te():f(function(){R(b)},1);break;case "scroll":ue();break;case "complete":1<
a.updateStatus?R("end"):(Gd(),Ja(90),R("events"));break;case "events":1<a.updateStatus||(a.allowEvents=!0,a.options.showHeader&&(ra&&Cc(ra),a.isThereLeftFixedColumns&&ma&&Cc(ma),a.isThereRightFixedColumns&&X&&Cc(X)),0<a.currentList.length&&le(),Ja(100));R("end");break;case "end":ve()}else f(function(){R(b)},1)},Nd=5,rc=0,vb=0,sc=0,Od=0,ub=!1,tc=!1,ja={type:"none",speed:"normal",opacity:0},Oc=null,ia=!1,kb=!1,Md=function(b){var c=l(function(){b?vb++:vb--;sc=(q[0].clientHeight-vb)/2+2;cc.css("height",
vb+"px");ab.css("top",sc+"px");b&&vb>=Nd?(ia=!0,Ja(0),kb=ub=!1,l.cancel(c)):!b&&0>=vb&&(ab&&ab.remove(),Lb=0,kb=!0,a.callLoadComplete(),l.cancel(c))},20)},Ld=function(){Oc&&l.cancel(Oc);Pa&&Pa.remove()};a.beginLoad=function(a){if(!ub)switch(ub=!0,ja=a?{type:void 0!=a.type?a.type:"none",speed:void 0!=a.speed?a.speed:"normal",opacity:void 0!=a.opacity?a.opacity:0}:{type:"none",speed:"normal",opacity:0},Pc(ja.opacity),ja.type){case "circular":Ld();q.append(Pa);Pa.css("top",(q[0].clientHeight-Pa[0].offsetHeight)/
2+"px");Pa.css("left",(q[0].clientWidth-Pa[0].offsetWidth)/2+"px");ia=!0;kb=ub=!1;var b=0,c=3;switch(ja.speed){case "veryfast":c=7;break;case "fast":c=5;break;case "slow":c=2;break;case "veryslow":c=1}Oc=l(function(){b+=c;360<b&&(b=0);var a="rotate("+b+"deg)";Pa.css("-ms-transform",a);Pa.css("-webkit-transform",a);Pa.css("transform",a)},1);break;case "linear":a=angular.element('<div class="iui-load-block-progress" style="position:absolute;left:-9999px"></div>');q.append(a);Nd=parseInt(getComputedStyle(a[0]).height,
10);a.remove();cc.css("width","0px");cc.css("height","0px");q.append(ab);Lb=0;rc=Math.floor(.5*q[0].clientWidth);vb=0;sc=q[0].clientHeight/2+2;Od=(q[0].clientWidth-rc)/2;ab.css("width",rc+"px");ab.css("top",sc+"px");ab.css("left",Od+"px");ab.css("opacity","1");Md(!0);break;default:ia=!0,kb=ub=!1}};a.endLoad=function(){if(!tc)if(tc=!0,ia){ia=!1;var a=3,b=ja.opacity,c=l(function(){kb&&(10<a||1<=b?(Pc(1),tc=ub=kb=!1,ja={type:"none",speed:"normal"},l.cancel(c)):(b+=a/10,Pc(b),a+=3))},1)}else tc=!1};var Pc=
function(a){w&&w.css("opacity",a);Ga&&Ga.css("opacity",a);Xa&&Xa.css("opacity",a);da&&da.css("opacity",a);Na&&Na.css("opacity",a);Ia&&Ia.css("opacity",a);V&&V.css("opacity",a);A&&A.css("opacity",a);N&&N.css("opacity",a);Qa&&Qa.css("opacity",a)},cc=angular.element('<div class="iui-load-block-progress"></div>'),ab=angular.element('<div class="iui-load-block"></div>');ab.append(cc);var Lb=0,Mb=!1,Pa=angular.element('<div class="iui-load-circular"></div>'),Ja=function(a){if(ia&&"linear"==ja.type){Mb=
!1;var b=Math.floor(rc*a/100),c=Lb;a=10;switch(ja.speed){case "veryfast":a=2;break;case "fast":a=5;break;case "slow":a=15;break;case "veryslow":a=20}var e=b>c?Math.floor((b-c)/a):1,e=0<e?e:1,d=l(function(){c+=e;cc.css("width",c+"px");c>=b&&(Lb=b,Mb=!0,l.cancel(d))},1)}else Mb=!0};a.updateStatus=0;a.updateActive=!1;a.updateLayout=function(b){q.append(I.$tw);I.s1t(I.twp);b=!0;for(var c=q.parent();"body"!=c[0].tagName.toLowerCase();){if("none"==getComputedStyle(c[0]).display){b=!1;break}c=c.parent()}b&&
a.allowUpdate&&(a.updateStatus++,a.updateActive||(a.updateActive=!0,a.allowEvents=!1,q.removeClass("iui-grid-block-rtl"),a.options.rtl&&q.addClass("iui-grid-block-rtl"),da.removeClass("iui-grid-block-shift-left iui-grid-block-rtl"),da.addClass(xb()),S=0,E=100,L=C=0,Mb=!0,R("start")))};a.updateCurrentLayout=function(b){if(a.allowUpdate)if(0==a.currentList.length)a.updateLayout();else{a.updateGroupList();a.options.paging.enabled&&(a.updatePageList(),J&&(J.minPages=0<a.pageList.length?1:0,J.numPages=
a.pageList.length),a.updatePageNumber());a.updateCurrentList();a.updateView();var c=f(function(){a.updateViewSize();a.updateViewSize();b&&a.updateScrollVisibility();a.updateScrollView();f.cancel(c)},1)}};var we=function(b,c){var e=a.options.enabled&&a.options.allowColumnReorder&&b[a.options.columnFields.allowDrag],d=b[a.options.columnFields.headerAlignment],h=b[a.options.columnFields.footerAlignment],f=a.isFilteringAllowed(b),g=a.isSortingAllowed()&&b==a.sortColumn,l=a.getColumnWidth(b),l=0<=l?l:
0,k=Qc(b);l<k.min&&(l=k.min);l>k.max&&(l=k.max);return{draggable:e,headerAlignment:d,footerAlignment:h,index:c,indent:0,column:b,showFiltering:f,showSorting:g,style:{header:{},footer:{}},width:l}},Pd=function(b,c){var e=0;if(c==a.options.expandColIndex){var d,h=a.columnList[a.options.expandColIndex],e=a.getColumnWidth(h),f=e-a.indentList[b],f=0<=f?f:0;d={top:0,right:0,bottom:0,left:0};(h=a.getElemFromColumn(h,h[a.options.columnFields.fixed]))&&(h=a.getChildElement(h,"column-header-cell"))&&(d=k.getPadding(h[0]));
d=d.left+a.indentList[b];0==f&&(d=e);e=d}return e},Rc=function(b,c,d){var e=c;d&&(d=a.columnList[c][a.options.columnFields.id])&&(e=a.getCellIndexById(a.currentList[b][a.options.rowFields.cells],c,d));return e},Qd=function(b){return a.columnList[b][a.options.columnFields.contentAlignment]?a.columnList[b][a.options.columnFields.contentAlignment]:"left"},Rd=function(b,c){var e=a.columnList[c],d=a.getColumnWidth(e),e=Qc(e);d<e.min&&(d=e.min);d>e.max&&(d=e.max);c==a.options.expandColIndex&&(d-=a.indentList[b]);
return 0<=d?d:0},Sc=function(b,c){return 1==a.options.allowFocus&&1==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])&&0<=c?a.getTabIndex().toString()+(b+1).toString()+c.toString():""},Sd=function(b){return 1==a.options.allowFocus&&0==a.options.allowCellFocus&&a.isRowEnabled(a.currentList[b])?a.getTabIndex().toString()+(b+1).toString():""},Td=function(b,c,d){if(0<=c){var e=a.currentList[b][a.options.rowFields.cells];switch(d){case "top":e=a.currentTopList[b][a.options.rowFields.cells];break;
case "bottom":e=a.currentBottomList[b][a.options.rowFields.cells]}if(c<e.length)return e[c]}return{}},hb=function(b){return a.columnList[b][a.options.columnFields.cellTemplateUrl]?a.columnList[b][a.options.columnFields.cellTemplateUrl]:""},Tc=function(b,c,d,f){for(var e=[],h=0;h<a.columnList.length;h++){var m=Rc(c,h,d),n=d?Td(c,m,f):{},g=Qd(h),l=a.columnList[h][a.options.columnFields.editorSettings],l=l&&l.style?l.style:null,k;if(d)a:{if(0<=m&&(k=a.currentList[c][a.options.rowFields.cells],m<k.length)){k=
1==a.options.enabled&&k[m][a.options.cellFields.enabled];break a}k=1==a.options.enabled}else k=!1;var p=d?Pd(c,h):0,q=m,r=d?Sc(c,h):"",t=hb(h),u;if(d){var v=c;u=m;var w=hb(h),v=Td(v,u);u=0<=u&&w&&""!=w&&v&&void 0!=v[a.options.cellFields.templateObj]&&null!=v[a.options.cellFields.templateObj]?!0:!1}else u=!1;if(d)a:{if(0<=m&&(w=a.currentList[c][a.options.rowFields.cells],m<w.length)){w=w[m][a.options.cellFields.text];break a}w=""}else w="";if(d)a:{if(0<=m&&(v=a.currentList[c][a.options.rowFields.cells],
m<v.length)){v=v[m][a.options.cellFields.value];break a}v=null}else v=null;m={related:n,alignment:g,editorStyle:l,enabled:k,indent:p,index:q,style:{},tabindex:r,templateUrl:t,templateVisible:u,text:w,value:v,visible:d?0<=m?!0:!1:!1,width:d?Rd(c,h):0};e.push(m)}return{cells:e,expandBox:d?kd(b):"",expandBoxVisible:d&&!f?0!=a.options.showExpandBoxes:!1,draggable:d&&!f?a.isRowEnabled(b)&&a.isDragAllowed(b):!1,icon:d?Ad(b):"",iconVisible:d?0!=a.options.showIcons&&(b.icon||a.options.rowIcon):!1,index:c,
row:d?b:{},style:{},tabindex:d&&!f?Sd(c):"",updateContextMenu:d?null!=b[a.options.rowFields.contextMenu]:!1,visible:d}},Hd=function(){for(var b=[],c=0;c<a.columnList.length;c++)b.push(we(a.columnList[c],c));return b},Mc=function(){for(var b=[],c=v;c<v+E;c++)b.push(Tc(a.currentList[c],c,c<a.currentList.length));return b},Jd=function(){for(var b=[],c=0;c<a.currentTopList.length;c++)b.push(Tc(a.currentTopList[c],c,c<a.currentTopList.length,"top"));return b},Kd=function(){for(var b=[],c=0;c<a.currentBottomList.length;c++)b.push(Tc(a.currentBottomList[c],
c,c<a.currentBottomList.length,"bottom"));return b},Id=function(){for(var b=0;b<a.columnList.length;b++)if(a.isFilteringAllowed(a.columnList[b])){var c=a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);c&&(c=a.getChildElement(c,"column-header-cell"))&&(c=a.getContentElement(c,"filter-button"))&&(c.css("top",(C-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),c.css("right","2px"))}a.isSortingAllowed()&&a.sortColumn&&(b=a.getElemFromColumn(a.sortColumn,a.sortColumn[a.options.columnFields.fixed]))&&
(c=a.getChildElement(b,"column-header-cell"))&&(c=a.getContentElement(c,"sort-button"))&&(c.css("top",(C-parseInt(getComputedStyle(c[0]).height,10))/2-1+"px"),a.isFilteringAllowed(a.sortColumn)?c.css("right","22px"):c.css("right","2px"))};a.getRowScope=function(){return u};var Vd=function(){if(y&&u&&(a.allowEvents=!1,Uc(!1),0<a.columnList.length&&(y.data=Hd(),u.data=Mc(),ua&&(ua.data=Jd()),va&&(va.data=Kd()),a.options.selectedRow&&!a.isRowEnabled(a.options.selectedRow)&&(a.options.selectedRow[a.options.rowFields.selected]=
!1,a.options.selectedRow=null,a.updateSelectionList()),a.refresh(null,null,!1),y.$apply(),u.$apply(),ua&&ua.$apply(),va&&va.$apply(),Id(),a.allowEvents=!0,0>=a.options.rowHeight&&Nc())))for(var b=v;0<=b&&b<v+E&&b<a.currentList.length;b++)Ud(a.currentList[b])},Vc=function(b,c){var e=0;if(b&&u){var d=a.getElemFromRow(b,c);d&&(e=d[0].offsetHeight)}return e},Nc=function(){for(var b=!1,c=0;c<a.columnList.length;c++){var d=hb(c);if(d&&""!=d){b=!0;break}}return b},Wc=function(b,c,d){if((b=a.getElemFromRow(b,
c))&&(b=b.find("td"))&&0<b.length)for(c=0;c<b.length;c++){var e=angular.element(b[c]),e=a.getContentElement(e),h=k.getBorderWidth(e[0]),f=k.getPadding(e[0]);e&&e.css("height",d-(h.top+h.bottom)-(f.top+f.bottom)-2.85+"px")}},Xc=function(b,c){var e=a.getElemFromRow(b,c);if(e&&(e=e.find("td"))&&0<e.length)for(var d=0;d<e.length;d++){var h=angular.element(e[d]);(h=a.getContentElement(h))&&h.css("height","auto")}},Ud=function(a){Xc(a,"none");Xc(a,"left");Xc(a,"right");var b=Vc(a),c=Vc(a,"left"),e=Vc(a,
"right"),b=Math.max(Math.max(b,c),e);Wc(a,"none",b);Wc(a,"left",b);Wc(a,"right",b)};a.updateView=function(b,c){if(b)Vd(),a.updateCurrentView(c);else var e=f(function(){Vd();a.updateCurrentView(c);f.cancel(e)},1)};a.updateVerticalScrollView=function(){if(u&&(a.allowEvents=!1,Uc(!1),u.data=Mc(),a.refresh(null,null,!1,!0),u.$apply(),a.updateCurrentView(!0),a.allowEvents=!0,0>=a.options.rowHeight&&Nc()&&(a.isThereLeftFixedColumns||a.isThereRightFixedColumns)))for(var b=v;0<=b&&b<v+E&&b<a.currentList.length;b++)Ud(a.currentList[b])};
a.updateCurrentView=function(b){if("optimal"==a.options.displayMode)for(var c=0,e="none",d=$b;3>c;){var f=0,g=a.columnList.length,l=0;if("none"==e&&b)for(var f=Xb,g=Yb,k=0;k<f&&k<a.columnList.length;k++)a.isColumnFixed(a.columnList[k])||l++;if(d&&0<d.length)for(k=0;k<d.length;k++)if(k<E&&k<a.currentList.length&&k+v<a.currentList.length){var p=a.currentList[k+v];d[k].rowElem&&(d[k].rowElem.attr("data-index",k+v),d[k].rowElem.attr("tabindex",Sd(k+v)));for(var q=l,r=f;r<=g&&r<a.columnList.length;r++){var t=
a.columnList[r][a.options.columnFields.fixed]?a.columnList[r][a.options.columnFields.fixed]:"none";if(t==e&&q<d[k].cellList.length){d[k].cellList[q].block.css("width",Rd(k+v,r)+"px");d[k].cellList[q].block.css("text-align",Qd(r));d[k].cellList[q].block.css("opacity",1);d[k].cellList[q].cell.attr("draggable",a.isRowEnabled(p)&&a.isDragAllowed(p));d[k].cellList[q].cell.attr("tabindex",Sc(k+v,r));var t="",u=Rc(k+v,r,!0);0<=u&&u<a.currentList[k+v][a.options.rowFields.cells].length&&(r==a.options.expandColIndex&&
(d[k].cellList[q].block.css("padding-left",Pd(k+v,r)+"px"),d[k].cellList[q].expandBox&&(d[k].cellList[q].expandBox.removeAttr("class"),d[k].cellList[q].expandBox.addClass(kd(p))),d[k].cellList[q].icon&&(d[k].cellList[q].icon.removeAttr("class"),d[k].cellList[q].icon.addClass(Ad(p)))),t=p[a.options.rowFields.cells][u][a.options.cellFields.text],"combobox"==a.columnList[r][a.options.columnFields.editorType]&&(t=p[a.options.rowFields.cells][u][a.options.cellFields.value]?p[a.options.rowFields.cells][u][a.options.cellFields.value].text:
""));if(d[k].cellList[q].content)switch(a.columnList[r][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(u=hb(r))&&""!=u||d[k].cellList[q].content.text(t)}q++}}}else for(d[k].rowElem&&(d[k].rowElem.attr("data-index",k+v),d[k].rowElem.attr("tabindex","")),q=l,r=f;r<=g&&r<a.columnList.length;r++)if(t=a.columnList[r][a.options.columnFields.fixed]?a.columnList[r][a.options.columnFields.fixed]:"none",t==e&&q<d[k].cellList.length){u=r;d[k].cellList[q].block.css("width",
"0px");d[k].cellList[q].cell.attr("draggable",!1);d[k].cellList[q].cell.attr("tabindex","");u==a.options.expandColIndex&&(d[k].cellList[q].block.css("padding-left","0px"),d[k].cellList[q].expandBox&&d[k].cellList[q].expandBox.removeAttr("class"),d[k].cellList[q].icon&&d[k].cellList[q].icon.removeAttr("class"));if(d[k].cellList[q].content){switch(a.columnList[u][a.options.columnFields.editorType]){case "checkbox":break;case "image":break;default:(u=hb(r))&&""!=u||d[k].cellList[q].content.html("")}d[k].cellList[q].content.attr("draggable",
!1);d[k].cellList[q].content.attr("tabindex",Sc(k+v,r))}q++}c++;1==c?(e="left",d=ac):(e="right",d=bc)}};var dc=function(b,c,d,f){var e={cell:"",content:"",general:"",label:""};switch(d){case "column":f?(d=a.defaultStyle.column.footer.normal,a.options.controlStyle.column.footer.normal!=d&&(d+=" "+a.options.controlStyle.column.footer.normal),e.general=d,e.cell="iui-grid-column-footer-cell",d=a.defaultStyle.column.footer.content,a.options.controlStyle.column.footer.content!=d&&(d+=" "+a.options.controlStyle.column.footer.content)):
(d=a.defaultStyle.column.header.normal,a.options.controlStyle.column.header.normal!=d&&(d+=" "+a.options.controlStyle.column.header.normal),e.general=d,e.cell="iui-grid-column-header-cell",d=a.defaultStyle.column.header.content,a.options.controlStyle.column.header.content!=d&&(d+=" "+a.options.controlStyle.column.header.content));e.content=d;break;case "row":d=a.defaultStyle.row.general.normal;a.isRowFixed(b)?(d=a.defaultStyle.row.fixed.normal,a.options.controlStyle.row.fixed.normal!=d&&(d+=" "+a.options.controlStyle.row.fixed.normal)):
a.options.controlStyle.row.general.normal!=d&&(d+=" "+a.options.controlStyle.row.general.normal);e.general=d;break;case "cell":d=a.defaultStyle.row.cell.normal;a.options.controlStyle.row.cell.normal!=d&&(d+=" "+a.options.controlStyle.row.cell.normal);switch(a.options.gridLines){case "none":d=c==v+E-1||c==a.currentList.length-1?d+" iui-grid-lines-horizontal":d+" iui-grid-lines-none";break;case "horizontal":d+=" iui-grid-lines-horizontal";break;case "vertical":d=c==v+E-1||c==a.currentList.length-1?
d+" iui-grid-lines-both":d+" iui-grid-lines-vertical";break;default:d+=" iui-grid-lines-both"}e.general=d;d=a.defaultStyle.row.cell.content;a.options.controlStyle.row.cell.content!=d&&(d+=" "+a.options.controlStyle.row.cell.content);e.content=d;e.label=a.getDefaultCellLabelClass()}return e},Wd=function(b){var c="";a.isFilteringAllowed(b)&&(b=a.getObjState(b),c="iui-filtering","selected"==b?c+=" iui-filtering-selected":"hovered"==b&&(c+=" iui-filtering-hovered"));return c},Xd=function(b){var c="";
a.isSortingAllowed()&&b==a.sortColumn&&(b=a.getObjState(b),"ascending"==a.options.sorting?(c="iui-sort-ascending","selected"==b?c+=" iui-sort-ascending-selected":"hovered"==b&&(c+=" iui-sort-ascending-hovered")):(c="iui-sort-descending","selected"==b?c+=" iui-sort-descending-selected":"hovered"==b&&(c+=" iui-sort-descending-hovered")));return c},Ca=function(b,c,d,f){var e=a.getObjState(b);d=dc(b,d,b.type,f);switch(b.type){case "column":f?(c=a.getCurrentColumnStyle(b,"footer",e),c!=a.options.controlStyle.column.footer.normal&&
(d.general+=" "+c),b=a.getCurrentColumnStyle(b,"footer","content"),b!=a.options.controlStyle.column.footer.content&&(d.content+=" "+b)):(c=a.getCurrentColumnStyle(b,"header",e),c!=a.options.controlStyle.column.header.normal&&(d.general+=" "+c),b=a.getCurrentColumnStyle(b,"header","content"),b!=a.options.controlStyle.column.header.content&&(d.content+=" "+b));break;case "group":c=a.getCurrentRowStyle(b,e);c!=a.options.controlStyle.row.general.normal&&(d.general+=" "+c);break;case "row":c=a.getCurrentRowStyle(b,
e);a.isRowFixed(b)?c!=a.options.controlStyle.row.fixed.normal&&(d.general+=" "+c):c!=a.options.controlStyle.row.general.normal&&(d.general+=" "+c);break;case "cell":f=a.getCurrentCellStyle(c,b,e),f!=a.options.controlStyle.row.cell.normal&&(d.general+=" "+f),b=a.getCurrentCellStyle(c,b,"content"),b!=a.options.controlStyle.row.cell.content&&(d.content+=" "+b)}return d},bb=function(a,b,c,d){var e=u;switch(d){case "top":e=ua;break;case "bottom":e=va}e&&(e.data[a].cells[b].style.cell=c.general,e.data[a].cells[b].style.content=
c.content,e.data[a].cells[b].style.label=c.label)},Yd=function(b){if(u&&(b-=v,0<=b&&b<u.data.length&&u.data[b].visible)){u.data[b].style=a.defaultStyle.row.general.normal;for(var c=0;c<a.columnList.length;c++)u.data[b].cells[c].style.cell=a.defaultStyle.row.cell.normal+" iui-grid-cell-empty"}};a.refreshColumns=function(){for(var b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b],null,!1)};a.refreshRows=function(){for(var b=v;b<v+E;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):
Yd(b);for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1)};var Zd=function(b,c,d,f,g){if(d&&b[a.options.rowFields.fixed]==f&&(c=c.indexOf(b),0<=c&&c<d.data.length&&d.data[c].visible)){d.data[c].style=Ca(b).general;for(var e=dc(b,c,"cell"),h=0;h<a.columnList.length&&h<d.data[c].cells.length;h++){var m=d.data[c].cells[h].index;if(0<=m){var n=b[a.options.rowFields.cells];m<n.length?(m=Ca(n[m],
b,c),bb(c,h,m,f)):bb(c,h,e,f)}else bb(c,h,e,f)}void 0==g&&d&&d.$apply()}};a.refreshHover=function(b){"optimal"==a.options.displayMode?a.refresh(b,null,null,!0):a.refresh(b)};a.refresh=function(b,c,d,f){"optimal"==a.options.displayMode?a.refreshOptimal(b,c,d,f):a.refreshNormal(b,c,d)};a.refreshNormal=function(b,c,d){if(b)switch(b.type){case "column":y&&(c=a.getColumnCurrentIndex(b),0<=c&&c<y.data.length&&(1==a.options.showHeader&&(y.data[c].style.header=Ca(b)),1==a.options.showFooter&&(y.data[c].style.footer=
Ca(b,null,-1,!0)),y.data[c].style.filtering=Wd(b),y.data[c].style.sorting=Xd(b),void 0==d&&y&&y.$apply()));break;case "group":if(u){c=a.getRowCurrentIndex(b);var e=c-v;if(0<=e&&e<u.data.length&&u.data[e].visible){u.data[e].style=Ca(b).general;for(var f=dc(b,c,"cell"),h=0;h<a.columnList.length&&h<u.data[e].cells.length;h++){var g=u.data[e].cells[h].index;if(0<=g){var n=b[a.options.rowFields.cells];g<n.length?(g=Ca(n[g],b,c),bb(e,h,g)):bb(e,h,f)}else bb(e,h,f)}void 0==d&&u&&u.$apply()}}break;case "row":if(u&&
!a.isRowFixed(b)&&(c=a.getRowCurrentIndex(b),e=c-v,0<=e&&e<u.data.length&&u.data[e].visible)){u.data[e].style=Ca(b).general;f=dc(b,c,"cell");for(h=0;h<a.columnList.length&&h<u.data[e].cells.length;h++)g=u.data[e].cells[h].index,0<=g?(n=b[a.options.rowFields.cells],g<n.length?(g=Ca(n[g],b,c),bb(e,h,g)):bb(e,h,f)):bb(e,h,f);void 0==d&&u&&u.$apply()}Zd(b,a.currentTopList,ua,"top",d);Zd(b,a.currentBottomList,va,"bottom",d)}else{for(h=0;h<a.columnList.length;h++)a.refresh(a.columnList[h],null,!1);for(b=
v;b<v+E;b++)b<a.currentList.length?a.refresh(a.currentList[b],null,!1):Yd(b);1==d&&u&&u.$apply();for(b=0;b<a.currentTopList.length;b++)a.refresh(a.currentTopList[b],null,!1);1==d&&ua&&ua.$apply();for(b=0;b<a.currentBottomList.length;b++)a.refresh(a.currentBottomList[b],null,!1);1==d&&va&&va.$apply()}};a.refreshOptimal=function(b,c,d,f){if(b)switch(b.type){case "column":y&&(c=a.getColumnCurrentIndex(b),0<=c&&c<y.data.length&&(1==a.options.showHeader&&(y.data[c].style.header=Ca(b)),1==a.options.showFooter&&
(y.data[c].style.footer=Ca(b,null,-1,!0)),y.data[c].style.filtering=Wd(b),y.data[c].style.sorting=Xd(b),void 0==d&&y&&y.$apply()));break;case "group":a.refreshCurrentView(b,f);break;case "row":a.refreshCurrentView(b,f)}else{for(b=0;b<a.columnList.length;b++)a.refresh(a.columnList[b],null,!1);for(b=v;b<v+E;b++)b<a.currentList.length?a.refreshCurrentView(a.currentList[b]):$d(b-v)}};var $d=function(b,c){for(var d=0,e="none",f=$b;3>d;){var h=b,g=0,l=a.columnList.length,k=0;if("none"==e&&c)for(var g=Xb,
l=Yb,p=0;p<g&&p<a.columnList.length;p++)a.isColumnFixed(a.columnList[p])||k++;if(f&&0<f.length&&0<=h&&h<f.length&&u)for(ec(f[h].rowElem,a.defaultStyle.row.general.normal);g<=l&&g<a.columnList.length;g++)(a.columnList[g][a.options.columnFields.fixed]?a.columnList[g][a.options.columnFields.fixed]:"none")==e&&k<f[h].cellList.length&&(ec(f[h].cellList[k].cell,a.defaultStyle.row.cell.normal+" iui-grid-cell-empty"),k++);d++;1==d?(e="left",f=ac):(e="right",f=bc)}},ec=function(a,b){a&&(a.removeAttr("class"),
a.addClass(b))};a.refreshCurrentView=function(b,c){for(var d=0,e="none",f=$b;3>d;){var h=b,g=c;if(h)switch(h.type){case "group":ae(h,f,e,g);break;case "row":ae(h,f,e,g)}else for(h=v;h<v+E;h++)h<a.currentList.length?a.refreshCurrentView(a.currentList[h],!0):$d(h,!0);d++;1==d?(e="left",f=ac):(e="right",f=bc)}};var ae=function(b,c,d,f){if(u&&c&&0<c.length){var e=a.getRowCurrentIndex(b),h=e-v;if(0<=h&&h<c.length&&h<u.data.length&&u.data[h].visible){ec(c[h].rowElem,Ca(b).general);var g=0,m=a.columnList.length,
n=0;if("none"==d&&f)for(g=Xb,m=Yb,f=0;f<g&&f<a.columnList.length;f++)a.isColumnFixed(a.columnList[f])||n++;for(;g<=m&&g<a.columnList.length;g++)(a.columnList[g][a.options.columnFields.fixed]?a.columnList[g][a.options.columnFields.fixed]:"none")==d&&n<c[h].cellList.length&&(f=Rc(e,g,!0),0<=f&&f<a.currentList[e][a.options.rowFields.cells].length?ec(c[h].cellList[n].cell,Ca(a.currentList[e][a.options.rowFields.cells][f],b,e).general):ec(c[h].cellList[n].cell,dc(b,e,"cell").general),n++)}}};a.moveColumn=
function(b,c){if(b&&0!=a.callColumnPosChanging(b)){var d=a.columnList[0];0<=a.options.expandColIndex&&a.options.expandColIndex<a.columnList.length&&(d=a.columnList[a.options.expandColIndex]);var e=a.getColumnCurrentIndex(b),f=a.getColumnRealIndex(e),h=-1,g=a.getFullColumnList();switch(c){case "first":h=0;break;case "left":(e=Ac(e-1,b[a.options.columnFields.fixed],!0))&&(h=a.getColumnRealIndex(a.getColumnCurrentIndex(e)));break;case "right":(e=Bc(e+1,b[a.options.columnFields.fixed],!0))&&(h=a.getColumnRealIndex(a.getColumnCurrentIndex(e)));
break;case "last":h=g.length-1}0<=h&&h<g.length&&f!=h&&(f<h?"first"!=c&&"left"!=c||h--:f>h&&("last"!=c&&"right"!=c||h++),a.columnsObj.moveObject(f,h),a.updateColumnList(),d=a.getColumnCurrentIndex(d),d!=a.options.expandColIndex?(a.options.expandColIndex=d,a.updateLayout()):a.updateView(),a.callColumnPosChanged(z,a.hoverColumn))}};a.moveRow=function(b,c,d,f){if(b){a.allowUpdate=!1;var e=-1;switch(d){case "first":e=0;break;case "at":e=f}if(Array.isArray(b)){f=[];for(var h=0;h<b.length;h++){for(var g=
!1,m=a.getParent(b[h]);m;){if(0<=b.indexOf(m)){g=!0;break}m=a.getParent(m)}g||f.push(b[h])}if(0<f.length)if(b=a.getObjCurrentIndex(f[0]),h=a.getObjCurrentIndex(f[f.length-1]),b<=h)for(h=0;h<f.length;h++)Yc(f[h],c,e,d);else for(h=f.length-1;0<=h;h--)Yc(f[h],c,e,d)}else Yc(b,c,e,d);a.allowUpdate=!0;a.updateCurrentLayout();a.callChange()}};var Yc=function(b,c,d,f){a.rowsObj.removeAt(b,-1,null,a.objIsRemoved)&&("first"==f||"last"==f||"at"==f?a.rowsObj.insertAt(b,d,c,a.rowIsAdded):"before"==f?a.rowsObj.insertByRef(b,
c,!1,a.rowIsAdded):"after"==f&&a.rowsObj.insertByRef(b,c,!0,a.rowIsAdded))},Va="none",W=!1,uc=-1,Va="none",vc=0,wc=0;p.$watch(function(){return q[0].offsetWidth},function(b,c){100==E?a.updateLayout():b!=c&&(Ga&&Ga.css("width",q[0].clientWidth+"px"),Ia&&Ia.css("width",q[0].clientWidth+"px"),a.updateCurrentLayout())});var Ta=null;p.$watch(function(){return q[0].offsetHeight},function(b,c){b!=c&&(Ta&&(f.cancel(Ta),Ta=null),Ta=f(function(){a.updateLayout();f.cancel(Ta);Ta=null},250))});a.isColumnWithFixedWidth=
function(b){var c=a.columnList;return c&&0<=b&&b<c.length?c[b][a.options.columnFields.fixedWidth]?c[b][a.options.columnFields.fixedWidth]:!1:!1};a.setColumnResizingParams=function(b,c,d){0<=b&&b<a.columnList.length&&(uc=b,Va=c,wc=d,vc=a.getColumnWidth(a.columnList[b]))};var be=function(b){return b&&0!=b[a.options.columnFields.visible]?!0:!1};a.isColumnFixed=function(b){return!b||"left"!=b[a.options.columnFields.fixed]&&"right"!=b[a.options.columnFields.fixed]?!1:!0};var Ac=function(b,c,d){var e=null;
c=void 0==c?"none":c;for(var f=b;0<=f;f--)if(!d||d&&be(a.columnList[f]))if(b=a.columnList[f][a.options.columnFields.fixed],b=void 0==b?"none":b,b==c){e=a.columnList[f];break}return e},Bc=function(b,c,d){var e=null;c=void 0==c?"none":c;for(var f=b;f<a.columnList.length;f++)if(!d||d&&be(a.columnList[f]))if(b=a.columnList[f][a.options.columnFields.fixed],b=void 0==b?"none":b,b==c){e=a.columnList[f];break}return e},pd=function(b,c){if(0<=b&&b<a.columnList.length){var d=a.columnList[b];if(d)switch(columnFixedType=
d[a.options.columnFields.fixed],c){case "left":if("right"!=columnFixedType){if(!Ac(b-1,d[a.options.columnFields.fixed]))return!1}else if(!columnFixedType||"none"==columnFixedType)return 0<b;break;case "right":if("right"==columnFixedType&&!Bc(b+1,d[a.options.columnFields.fixed]))return!1}}return!0};a.resizeColumn=function(b,c,d){0>c&&(c=0);var e;if(e=a.getHeaderElem(d))e=angular.element(e.find("tr")),a.resizeColumnCells(e,b,c,1,d);a.resizeRows(b,c,d);a.resizeRows(b,c,d,"top");a.resizeRows(b,c,d,"bottom");
if(e=a.getFooterElem(d))e=angular.element(e.find("tr")),a.resizeColumnCells(e,b,c,2,d);0<=b&&b<a.columnList.length&&a.callColumnSizeChanged(a.columnList[b])};a.resizeRows=function(b,c,d,f){var e=a.getRowElems(d,f);if(e){var h={top:0,right:0,bottom:0,left:0},g=a.getElemFromColumn(a.columnList[b],a.columnList[b][a.options.columnFields.fixed]);g&&(g=a.getChildElement(g,"column-header-cell"))&&(h=k.getPadding(g[0]));for(g=0;g<e.length;g++)currentRowElem=angular.element(e[g]),a.resizeColumnCells(angular.element(e[g]),
b,c,0,d,!0,h,f)}};a.resizeColumnCells=function(b,c,d,f,g,l,k,p){if(b){var e=-1;l&&(e=a.getRowCurrentIndex(a.getRowFromElem(b)));b=0;0<=e&&!p&&(b=a.indentList[e]);switch(f){case 1:f=a.getElemFromColumnCell(c,g);break;case 2:f=a.getElemFromColumnCell(c,g,!0);break;default:f=a.getElemFromCell(e,c,g,p)}f&&0<f.children().length&&(f=f.children().eq(0))&&(k=k?k.left+b:b,g=d,0<=e&&c==a.options.expandColIndex&&(g-=k),g=0<=g?g:0,f.css("width",g+"px"),c==a.options.expandColIndex&&(0==g?f.css("padding-left",
d+"px"):f.css("padding-left",k+"px")))}};var cd=function(b){a.dropMark()},dd=function(a){Bb()},ed=function(b){a.removeDropMark();a.dragIcon&&angular.element(a.dragIcon).remove();a.cancelScrollTimer();a.dragDropStatus(!1)};angular.element(g).bind("dragenter",cd);angular.element(g).bind("dragover",dd);angular.element(g).bind("dragend",ed);var qa=angular.element('<div class="iui-grid-column-reorder-mark"><span></span></div>'),ea=angular.element('<div class="iui-grid-column-reorder-tooltip"><span></span></div>'),
ld=function(b){var c="initial";aa&&z&&(!a.hoverColumn||z==a.hoverColumn||a.hoverColumn&&0==a.hoverColumn.allowDrop||a.hoverColumn&&z[a.options.columnFields.fixed]!=a.hoverColumn[a.options.columnFields.fixed])&&(c="not-allowed",b&&ea&&ea.css("display","none"));q.css("cursor",c);document.body.style.cursor=c},Qc=function(b){return b?{min:k.isFieldAvailable(b[a.options.columnFields.minWidth],0),max:k.isFieldAvailable(b[a.options.columnFields.maxWidth],9999999)}:{min:0,max:9999999}},gd=function(b){if(0===
b.button&&0<=uc&&"none"!=Va){var c=a.getMousePos(b),d=uc,e=a.columnList;if(0<=d&&d<e.length){var f=vc+c.x-wc;"right"==e[d][a.options.columnFields.fixed]&&(f=vc-(c.x-wc));f=0<=f?f:0;c=Qc(e[d]);f>=c.min&&f<=c.max&&(e[d][a.options.columnFields.width]=f,a.resizeColumn(d,f,e[d][a.options.columnFields.fixed]),a.updateViewSize(),a.updateScrollVisibility(),Gc())}}U&&U.css("display","none");ea&&ea.css("display","none");mc?ia||1!==b.which||(T[0].getBoundingClientRect(),b=a.getMousePos(b),I.scrollMousePos||
(I.scrollMousePos=b),d=T[0].offsetLeft+(b.x-I.scrollMousePos.x),d<Oa?d=Oa:d+T[0].offsetWidth>fb&&(d=fb-T[0].offsetWidth),T.css("left",d+"px"),I.scrollMousePos=b,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.x=!1!==a.options.rtl?parseInt((fb-T[0].offsetLeft-T[0].offsetWidth)*sb,10):parseInt((T[0].offsetLeft-Oa)*sb,10),Hc(),(Zc(a.scrollPos)||a.scrollPos.x!=a.prevScrollPos.x)&&a.callScrollPosChanged()):ka&&(ia||1!==b.which||(ba[0].getBoundingClientRect(),b=a.getMousePos(b),I.scrollMousePos||
(I.scrollMousePos=b),d=ba[0].offsetTop+(b.y-I.scrollMousePos.y),d<gb?d=gb:d+ba[0].offsetHeight>Ib&&(d=Ib-ba[0].offsetHeight),ba.css("top",d+"px"),I.scrollMousePos=b,pc=d-gb,a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y},a.scrollPos.y=Math.floor(pc*qc*S),(Zc(a.scrollPos)||a.scrollPos.y!=a.prevScrollPos.y)&&a.callScrollPosChanged(),newIndex=0<S?Math.floor(a.scrollPos.y/S):0,newIndex+E-1>a.currentList.length&&(newIndex=a.currentList.length-E+1,newIndex+=5),0>newIndex&&(newIndex=0),newIndex!==v&&(v=
newIndex,a.updateView(!0))))},hd=function(b){a.removeDropDownList();a.closeEditor(d);a.closeFilterWindow();mb()},id=function(b){ld(!0);U&&U.remove();1==b.which&&ib&&ca&&(b=a.getElemFromGroup(ca))&&b.css("display","inline-block");ea&&ea.remove();ib=aa=!1;ca=null;uc=-1;Va="none";wc=vc=0;W=!1;q.css("cursor","default");a.dropMark();ka&&a.updateView();Bb();I.scrollMousePos=null;ka=mc=!1;q.css("cursor","default");document.body.style.cursor="default"},fd=function(b){switch(b.keyCode){case 16:a.multiSelection(!1);
break;case 17:a.multiSelection(!1);break;default:b.ctrlKey||b.metaKey||a.multiSelection(!1),b.shiftKey||a.multiSelection(!1)}};angular.element(g).bind("mousemove",gd);angular.element(g).bind("mousedown",hd);angular.element(g).bind("mouseup",id);angular.element(g).bind("keyup",fd);var $c=!1,Nb=0,xc=null,ce=.5;a.isScrollBarVisible=function(a){switch(a){case "horizontal":return M;case "vertical":return O}return M&&O};a.prevScrollPos={x:0,y:0};a.scrollPos={x:0,y:0};a.getMaxScrollPos=function(){return P};
a.getScrollPos=function(){return a.scrollPos};a.setScrollPos=function(b,c){if(!ia&&b){var d=!0;0>b.x&&(b.x=0,d=!1);b.x>P.x&&(b.x=P.x,d=!1);0>b.y&&(b.y=0,d=!1);b.y>P.y&&(b.y=P.y,d=!1);a.scrollPos=b;pc=Math.floor(a.scrollPos.y/(S*qc));var e,f=gb+pc;e=!1!==a.options.rtl?Math.floor(a.scrollPos.x/sb)-(fb-T[0].offsetWidth-Oa):Math.floor(a.scrollPos.x/sb)+Oa;M&&T&&T.css("left",e+"px");O&&ba&&ba.css("top",f+"px");Hc();Uc(!0,c);d&&a.callScrollPosChanged()}};var Zc=function(a){return 0<a.x&&a.x<P.x||0<a.y&&
a.y<P.y},jc=function(b,c,d){$c||(a.updateFocus(),Nb=0,$c=!0,xc=l(function(){var d=c,e=a.getScrollPos();d||(0===Nb&&(Nb=5),Nb+=5+qc,ce+=.5,d=Nb+=Math.floor(ce));e.y=b?e.y+d:e.y-d;a.setScrollPos(e);(0>=e.y||a.getScrollPos().y<e.y)&&Bb()},d?d:100))},Bb=function(){xc&&(l.cancel(xc),xc=null);$c=!1;Nb=0};a.cancelScrollTimer=function(){Bb()};a.scrollTo=function(b,c){if(b){var d=a.getRowCurrentIndex(b);if(a.isRowIndexInRange(d)){var e;e=d;switch(c){case "center":e=Math.floor(H/2)-1;e=d>e?d-e:0;break;case "bottom":e=
H-2,a.options.showHeader&&e--,a.options.showFooter&&e--,e=d>e?d-e:0}a.setScrollPos({x:a.scrollPos.x,y:e*S})}}};var Hc=function(){var b=a.scrollPos.x;0>b&&(b=0);b>P.x&&(b=P.x);b*=-1;ra&&ra.css("left",b+Q+"px");Ka&&Ka.css("left",b+Q+"px");ha&&ha.css("left",b+Q+"px");ga&&ga.css("left",b+Q+"px");Y&&Y.css("left",b+Q+"px")},Uc=function(b,c){if(!(0==b&&0>=S)){newIndex=0<S?Math.floor(a.scrollPos.y/S):0;a.scrollPos.y==P.y&&newIndex--;if(a.currentList.length>=E&&newIndex+E-1>a.currentList.length){newIndex=
a.currentList.length-E+1;var d=a.getRowElems();d||(d=a.getRowElems("left"));d||(d=a.getRowElems("right"));d&&0<d.length&&(d=angular.element(d[d.length-1]),d[0].offsetTop+d[0].offsetHeight>q[0].clientHeight-(C+L)&&newIndex++)}0>newIndex&&(newIndex=0);newIndex!=v&&(v=newIndex,0!=b&&a.updateView(c))}};q.bind("scroll",function(a){q[0].scrollTop=0;q[0].scrollLeft=0});var de=function(b,c){if(O){document.activeElement&&document.activeElement.blur();a.removeDropDownList();a.closeEditor(d);a.closeFilterWindow();
mb();var e=a.hoverRow;a.hoverRow=null;a.refresh(e);e=Math.floor(q[0].clientHeight/4);switch(a.options.mouseWheelSpeed){case "veryslow":e=S;break;case "slow":e=2*S;break;case "fast":e=Math.floor(q[0].clientHeight/2)-C-L-S;break;case "veryfast":e=Math.floor(q[0].clientHeight-C-L-S)}a.prevScrollPos={x:a.scrollPos.x,y:a.scrollPos.y};a.setScrollPos({x:a.scrollPos.x,y:a.scrollPos.y+e*c*-1},!0);Zc(a.scrollPos)||a.scrollPos.y==a.prevScrollPos.y||a.callScrollPosChanged()}};q.bind("mousewheel",function(b){b.preventDefault();
if(!ia&&a.options.enabled){var c=0;b.wheelDelta?c=Math.max(-1,Math.min(1,b.wheelDelta||-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,b.originalEvent.wheelDelta||-b.originalEvent.detail)));de(b,c)}});q.bind("DOMMouseScroll",function(b){b.preventDefault();if(!ia&&a.options.enabled){var c=0;b.detail?c=Math.max(-1,Math.min(1,-b.detail)):b.originalEvent&&(c=Math.max(-1,Math.min(1,-b.originalEvent.detail)));de(b,c)}});var fc={x:0,y:0},lb={x:0,y:0};q.bind("touchstart",function(b){b.preventDefault();
a.options.enabled&&(b=a.getTouchData(b))&&0<b.length&&(fc={x:b[0].pageX,y:b[0].pageY})});q.bind("touchend",function(b){if(a.options.enabled){(b=a.getTouchData(b))&&0<b.length&&(lb={x:b[0].pageX,y:b[0].pageY});var c=lb.x-fc.x,d=lb.y-fc.y;(20<Math.abs(c)||20<Math.abs(d))&&document.activeElement&&document.activeElement.blur();var e=!1,f=!1,g=fc,k=a.scrollPos.x,p=a.scrollPos.y,q=l(function(){var b=a.scrollPos;-20>c?(g.x-=10,g.x>lb.x?b.x+=10:(b.x=k-c,e=!0)):20<c?(g.x+=10,g.x<lb.x?b.x-=10:(b.x=k-c,e=!0)):
e=!0;-20>d?(g.y-=10,g.y>lb.y?b.y+=10:(b.y=p-d,f=!0)):20<d?(g.y+=10,g.y<lb.y?b.y-=10:(b.y=p-d,f=!0)):f=!0;a.setScrollPos(b);e&&f&&l.cancel(q)},5);fc=lb}});I=this;this.crpar=function(){return["si","tri","ver","on","al "]};this.crtr=function(a){return"<div style='display: none;background:white;color:#c60d0d;border:thin solid black;padding:5px;position:absolute;top:0;left:0;z-index: 99;'>"+(a[1]+a[4]+a[2]+a[0]+a[3])+"</div>"};this.tpar=this.crpar();this.$tw=angular.element(this.crtr(I.tpar));this.tmp=
300;this.twp=200*this.tmp;this.trActive=!1;this.trCount=0;this.trlTime=this.trId=null;this.trShowCount=0;this.animTr=function(){this.trCount++;3>this.trShowCount?(this.trCount=1,this.$tw.css("display","block"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"),this.trShowCount++):(0===this.trCount%49&&(this.trShowCount=0),this.$tw.css("display","none"),this.$tw.css("top",q[0].scrollTop+"px"),this.$tw.css("left",q[0].scrollLeft+"px"))};this.s1t=function(a){I.s3t();this.trlTime=
f(function(){I.trActive||(I.trCount=0,I.trActive=!0,I.trId=l(function(){I.animTr()},1E3))},a)};this.s3t=function(){this.trId&&(l.cancel(this.trId),this.trId=null);this.trlTime&&(f.cancel(this.trlTime),this.trlTime=null);this.trActive=!1};this.s2t=function(){this.s3t();this.trActive=!1;this.$tw.remove()};q.append(this.$tw);this.s1t(this.twp);angular.isDefined(p.options)?a.updateOptions(p.options):(0==p.allowAnimation&&(a.options.allowAnimation=p.allowAnimation),0==p.allowCellFocus&&(a.options.allowCellFocus=
p.allowCellFocus),1==p.allowColumnReorder&&(a.options.allowColumnReorder=p.allowColumnReorder),1==p.allowDrag&&(a.options.allowDrag=p.allowDrag),0==p.allowDrop&&(a.options.allowDrop=p.allowDrop),1==p.allowFilter&&(a.options.allowFilter=p.allowFilter),0==p.allowFocus&&(a.options.allowFocus=p.allowFocus),0==p.autoExpand&&(a.options.autoExpand=p.autoExpand),angular.isDefined(p.animationSpeed)&&200!==p.animationSpeed&&(a.options.animationSpeed=p.animationSpeed),angular.isDefined(p.controlStyle)&&a.updateControlStyle(p.controlStyle),
angular.isDefined(p.displayMode)&&(a.options.displayMode=p.displayMode),angular.isDefined(p.editorSettings)&&a.updateEditorSettings(p.editorSettings),0==p.enabled&&(a.options.enabled=p.enabled),angular.isDefined(p.expandingColumnIndex)&&(a.options.expandColIndex=p.expandingColumnIndex),angular.isDefined(p.fields)&&(a.updateDataFields(p.fields),a.updateData()),1==p.fillSpace&&(a.options.fillSpace=p.fillSpace),angular.isDefined(p.gridLines)&&(a.options.gridLines=p.gridLines),angular.isDefined(p.grouping)&&
a.updateGrouping(p.grouping),1==p.hoverSelection&&(a.options.hoverSelection=p.hoverSelection),angular.isDefined(p.indent)&&(a.options.indent=p.indent),angular.isDefined(p.labelEdit)&&(a.options.labelEdit=p.labelEdit),angular.isDefined(p.mouseWheelSpeed)&&(a.options.mouseWheelSpeed=p.mouseWheelSpeed),angular.isDefined(p.paging)&&a.updatePaging(p.paging),angular.isDefined(p.rowHeight)&&(a.options.rowHeight=p.rowHeight),angular.isDefined(p.rowIcon)&&(a.options.rowIcon=p.rowIcon),1==p.rtl&&(a.options.rtl=
p.rtl),angular.isDefined(p.selectedIndex)&&(a.options.selectedIndex=p.selectedIndex),angular.isDefined(p.selectedRow)&&(a.options.selectedRow=p.selectedRow),angular.isDefined(p.selectionMode)&&(a.options.selectionMode=p.selectionMode),0==p.showFooter&&(a.options.showFooter=p.showFooter),0==p.showHeader&&(a.options.showHeader=p.showHeader),0==p.showIcons&&(a.options.showIcons=p.showIcons),angular.isDefined(p.sorting)&&(a.options.sorting=p.sorting));a.updateLayout()}}}]);